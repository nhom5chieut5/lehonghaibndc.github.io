!function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[8592],{6633:function(t,e,n){n.d(e,{c:function(){return r}});var i=n(23150),o=n(52954),a=n(97279),r=function(t,e){var n,r,s=function(t,i,o){if("undefined"!=typeof document){var a=document.elementFromPoint(t,i);a&&e(a)?a!==n&&(l(),c(a,o)):l()}},c=function(t,e){n=t,r||(r=n);var o=n;(0,i.c)(function(){return o.classList.add("ion-activated")}),e()},l=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n){var e=n;(0,i.c)(function(){return e.classList.remove("ion-activated")}),t&&r!==n&&n.click(),n=void 0}};return(0,a.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:function(t){return s(t.currentX,t.currentY,o.a)},onMove:function(t){return s(t.currentX,t.currentY,o.b)},onEnd:function(){l(!0),(0,o.h)(),r=void 0}})}},77330:function(t,e,n){n.d(e,{a:function(){return r},d:function(){return s}});var i,o=n(8239),a=n(52377),r=(i=(0,o.Z)(regeneratorRuntime.mark(function t(e,n,i,o,r){var s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return",e.attachViewToDom(n,i,r,o));case 2:if("string"==typeof i||i instanceof HTMLElement){t.next=4;break}throw new Error("framework delegate is missing");case 4:return s="string"==typeof i?n.ownerDocument&&n.ownerDocument.createElement(i):i,o&&o.forEach(function(t){return s.classList.add(t)}),r&&Object.assign(s,r),n.appendChild(s),t.next=10,new Promise(function(t){return(0,a.c)(s,t)});case 10:return t.abrupt("return",s);case 11:case"end":return t.stop()}},t)})),function(t,e,n,o,a){return i.apply(this,arguments)}),s=function(t,e){if(e){if(t)return t.removeViewFromDom(e.parentElement,e);e.remove()}return Promise.resolve()}},52954:function(t,e,n){n.d(e,{a:function(){return a},b:function(){return r},c:function(){return o},d:function(){return c},h:function(){return s}});var i={getEngine:function(){var t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available:function(){return!!this.getEngine()},isCordova:function(){return!!window.TapticEngine},isCapacitor:function(){return!!window.Capacitor},impact:function(t){var e=this.getEngine();if(e){var n=this.isCapacitor()?t.style.toUpperCase():t.style;e.impact({style:n})}},notification:function(t){var e=this.getEngine();if(e){var n=this.isCapacitor()?t.style.toUpperCase():t.style;e.notification({style:n})}},selection:function(){this.impact({style:"light"})},selectionStart:function(){var t=this.getEngine();!t||(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged:function(){var t=this.getEngine();!t||(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd:function(){var t=this.getEngine();!t||(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},o=function(){i.selection()},a=function(){i.selectionStart()},r=function(){i.selectionChanged()},s=function(){i.selectionEnd()},c=function(t){i.impact(t)}},66575:function(t,e,i){i.d(e,{s:function(){return o}});var o=function(t){try{if(t instanceof function(){return function t(e){n(this,t),this.value=e}}())return t.value;if(!s()||"string"!=typeof t||""===t)return t;var e=document.createDocumentFragment(),i=document.createElement("div");e.appendChild(i),i.innerHTML=t,l.forEach(function(t){for(var n=e.querySelectorAll(t),i=n.length-1;i>=0;i--){var o=n[i];o.parentNode?o.parentNode.removeChild(o):e.removeChild(o);for(var s=r(o),c=0;c<s.length;c++)a(s[c])}});for(var o=r(e),c=0;c<o.length;c++)a(o[c]);var u=document.createElement("div");u.appendChild(e);var d=u.querySelector("div");return null!==d?d.innerHTML:u.innerHTML}catch(e){return console.error(e),""}},a=function t(e){if(!e.nodeType||1===e.nodeType){for(var n=e.attributes.length-1;n>=0;n--){var i=e.attributes.item(n),o=i.name;if(c.includes(o.toLowerCase())){var a=i.value;null!=a&&a.toLowerCase().includes("javascript:")&&e.removeAttribute(o)}else e.removeAttribute(o)}for(var s=r(e),l=0;l<s.length;l++)t(s[l])}},r=function(t){return null!=t.children?t.children:t.childNodes},s=function(){var t=window,e=t&&t.Ionic&&t.Ionic.config;return!e||(e.get?e.get("sanitizerEnabled",!0):!0===e.sanitizerEnabled||void 0===e.sanitizerEnabled)},c=["class","id","href","src","name","slot"],l=["script","style","iframe","meta","link","object","embed"]},60408:function(t,e,n){n.d(e,{S:function(){return i}});var i={bubbles:{dur:1e3,circles:9,fn:function(t,e,n){var i=t*e/n-t+"ms",o=2*Math.PI*e/n;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":i}}}},circles:{dur:1e3,circles:8,fn:function(t,e,n){var i=e/n,o=t*i-t+"ms",a=2*Math.PI*i;return{r:5,style:{top:9*Math.sin(a)+"px",left:9*Math.cos(a)+"px","animation-delay":o}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:function(){return{r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}}}},crescent:{dur:750,circles:1,fn:function(){return{r:26,style:{}}}},dots:{dur:750,circles:3,fn:function(t,e){return{r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}}}},lines:{dur:1e3,lines:12,fn:function(t,e,n){return{y1:17,y2:29,style:{transform:"rotate(".concat(30*e+(e<6?180:-180),"deg)"),"animation-delay":t*e/n-t+"ms"}}}},"lines-small":{dur:1e3,lines:12,fn:function(t,e,n){return{y1:12,y2:20,style:{transform:"rotate(".concat(30*e+(e<6?180:-180),"deg)"),"animation-delay":t*e/n-t+"ms"}}}}}},61269:function(t,e,n){n.d(e,{c:function(){return r},g:function(){return s},h:function(){return a},o:function(){return l}});var i,o=n(8239),a=function(t,e){return null!==e.closest(t)},r=function(t,e){return"string"==typeof t&&t.length>0?Object.assign((n={"ion-color":!0},i="ion-color-".concat(t),o=!0,i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n),e):e;var n,i,o},s=function(t){var e={};return function(t){return void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(function(t){return null!=t}).map(function(t){return t.trim()}).filter(function(t){return""!==t}):[]}(t).forEach(function(t){return e[t]=!0}),e},c=/^[a-z][a-z0-9+\-.]*:/,l=(i=(0,o.Z)(regeneratorRuntime.mark(function t(e,n,i,o){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e||"#"===e[0]||c.test(e)){t.next=4;break}if(!(a=document.querySelector("ion-router"))){t.next=4;break}return t.abrupt("return",(null!=n&&n.preventDefault(),a.push(e,i,o)));case 4:return t.abrupt("return",!1);case 5:case"end":return t.stop()}},t)})),function(t,e,n,o){return i.apply(this,arguments)})},90650:function(t,e,n){n.d(e,{Q:function(){return i.Q}});var i=n(88991),o=n(65199),a=(n(18844),n(13242)),r=n(74664),s=n(39163);(0,o.D)([a.N,r.N]),(0,o.D)(s.T)},79503:function(t,i,o){o.d(i,{A:function(){return l}});var a,r=o(50384),s=o(37716),c=o(47063),l=((a=function(){function t(e,i){n(this,t),this.menu=e,this.authService=i}return e(t,[{key:"ngOnInit",value:function(){}},{key:"openMenu",value:function(){console.log("hi"),this.menu.enable(!0,"userMenu"),this.menu.close("list"),this.menu.open("userMenu")}}]),t}()).\u0275fac=function(t){return new(t||a)(s.Y36(c._q),s.Y36(r.e))},a.\u0275cmp=s.Xpm({type:a,selectors:[["app-avatar"]],decls:2,vars:1,consts:[["onError","this.src='assets/img/default-profile.jpg'",1,"avatar",3,"src","click"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-button"),s.TgZ(1,"img",0),s.NdJ("click",function(){return e.openMenu()}),s.qZA(),s.qZA()),2&t&&(s.xp6(1),s.Q6J("src",e.authService.FILE_PATH+"/upload/users/avatars/medium/"+(null==e.authService.userInfo?null:e.authService.userInfo.avatar),s.LSH))},directives:[c.YG],styles:[".avatar[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:50%;border:1px solid #3880ff}"]}),a)},76361:function(t,e,i){i.d(e,{F:function(){return c}});var o,a=i(38583),r=i(47063),s=i(37716),c=((o=function t(){n(this,t)}).\u0275fac=function(t){return new(t||o)},o.\u0275mod=s.oAB({type:o}),o.\u0275inj=s.cJS({imports:[[r.Pc,a.ez]]}),o)},65744:function(t,i,o){o.d(i,{e:function(){return g}});var a,r=o(90665),s=o(17324),c=o(16738),l=o(37716),u=o(47063),d=o(81780),g=((a=function(){function t(e,i,o){n(this,t),this.modalCrt=e,this.localNotifications=i,this.translateService=o,this.form=new r.cw({title:new r.NI("",r.kI.required),time:new r.NI(c().format("YYYY-MM-DD HH:mm"),r.kI.required),repeat:new r.NI(!1,r.kI.required)}),this.maxDate=c().add(180,"days").format(),this.minDate=c().format()}return e(t,[{key:"ngOnInit",value:function(){}},{key:"dismiss",value:function(){this.modalCrt.dismiss()}},{key:"save",value:function(){this.localNotifications.schedule({text:this.form.value.title,trigger:{at:new Date(c(this.form.value.time).subtract(5,"minutes").toDate())},foreground:!0,autoClear:!1}),console.log(new Date(c(this.form.value.time).subtract(5,"minutes").toDate())),this.modalCrt.dismiss(!0)}}]),t}()).\u0275fac=function(t){return new(t||a)(l.Y36(u.IN),l.Y36(s.sn),l.Y36(d.sK))},a.\u0275cmp=l.Xpm({type:a,selectors:[["app-reminder"]],decls:27,vars:20,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],["color","tb",3,"disabled","click"],[3,"formGroup"],["lines","inset"],["position","floating"],["formControlName","title"],["formControlName","time",3,"displayFormat","min","max"],["formControlName","repeat"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l._uU(2),l.ALo(3,"translate"),l.TgZ(4,"ion-buttons",0),l.TgZ(5,"ion-button",1),l.NdJ("click",function(){return e.dismiss()}),l._UZ(6,"ion-icon",2),l.qZA(),l.qZA(),l.TgZ(7,"ion-buttons",3),l.TgZ(8,"ion-button",4),l.NdJ("click",function(){return e.save()}),l._uU(9),l.ALo(10,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"ion-content",5),l.TgZ(12,"ion-item",6),l.TgZ(13,"ion-label",7),l._uU(14),l.ALo(15,"translate"),l.qZA(),l._UZ(16,"ion-textarea",8),l.qZA(),l.TgZ(17,"ion-item"),l.TgZ(18,"ion-label",7),l._uU(19),l.ALo(20,"translate"),l.qZA(),l._UZ(21,"ion-datetime",9),l.qZA(),l.TgZ(22,"ion-item"),l.TgZ(23,"ion-label"),l._uU(24),l.ALo(25,"translate"),l.qZA(),l._UZ(26,"ion-toggle",10),l.qZA(),l.qZA()),2&t&&(l.xp6(2),l.hij(" ",l.lcZ(3,10,"ASSISTANT.REMINDER")," "),l.xp6(6),l.Q6J("disabled",e.form.invalid),l.xp6(1),l.Oqu(l.lcZ(10,12,"SAVE")),l.xp6(2),l.Q6J("formGroup",e.form),l.xp6(3),l.Oqu(l.lcZ(15,14,"ASSISTANT.CONTENT")),l.xp6(5),l.Oqu(l.lcZ(20,16,"ASSISTANT.TIME")),l.xp6(2),l.Q6J("displayFormat","HH:mm DD-MM-YYYY")("min",e.minDate)("max",e.maxDate),l.xp6(3),l.Oqu(l.lcZ(25,18,"ASSISTANT.REPEAT")))},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.W2,r.JL,r.sg,u.Ie,u.Q$,u.g2,u.j9,r.JJ,r.u,u.x4,u.QI,u.ho,u.w],pipes:[d.X$],styles:[""]}),a)},62374:function(t,i,o){o.d(i,{o:function(){return c}});var a,r=o(15189),s=o(37716),c=((a=function(){function t(e){n(this,t),this.reqAPIService=e,this.API_URL="/manager/calendar-api",this.API_URL_USER="/user/list-api-mobie",this.API_PROCEDURE_DAILY="/manager/daily-procedure-api-for-mobie"}return e(t,[{key:"setFarmCode",value:function(t){this.fcode=t}},{key:"getList",value:function(t,e,n){return this.reqAPIService.get(this.API_URL+"?action=list&fcode="+t+"&pcode="+e+"&begin_day="+n)}},{key:"getFarmCalendar",value:function(t){return this.reqAPIService.get(this.API_URL+"?action=child&fid="+t)}},{key:"getManageableCalendar",value:function(){return this.reqAPIService.get(this.API_URL+"?action=manager")}},{key:"getMember",value:function(){return this.reqAPIService.get(this.API_URL+"?action=member")}},{key:"getCreatableCalendar",value:function(){return this.reqAPIService.get(this.API_URL+"?action=myCreate")}},{key:"changeState",value:function(t){return this.reqAPIService.post(this.API_URL+"?action=done&item="+t,t)}},{key:"deleteItem",value:function(t){return this.reqAPIService.post(this.API_URL+"?action=delete&item="+t,t)}},{key:"getPonds",value:function(){return this.reqAPIService.get(this.API_URL+"?action=pond&term=")}},{key:"getUsers",value:function(t){return this.reqAPIService.get(this.API_URL_USER+"?action=get-user&key="+t)}},{key:"getUserByID",value:function(t){return this.reqAPIService.get(this.API_URL_USER+"?action=get-user&action=user&userId="+t)}},{key:"getListObject",value:function(){return this.reqAPIService.get(this.API_URL+"?action=add")}},{key:"insertCalendar",value:function(t){return this.reqAPIService.post(this.API_URL+"?action=add",t)}},{key:"updateCalendar",value:function(t,e){return this.reqAPIService.post(this.API_URL+"?action=edit&item="+t,e)}},{key:"getListByPond",value:function(t,e,n){return this.reqAPIService.get(this.API_URL+"?action=listPond&pcode="+t+"&time="+e+"&cond="+n)}},{key:"getListSuggest",value:function(){return this.reqAPIService.get(this.API_URL+"?action=suggest&fcode="+this.fcode)}},{key:"getExpectedDaily",value:function(t,e,n){return this.reqAPIService.get(this.API_PROCEDURE_DAILY+"?action=getSuggestDaily&scode="+t+"&key_check="+e+"&date="+n)}}]),t}()).\u0275fac=function(t){return new(t||a)(s.LFG(r.$))},a.\u0275prov=s.Yz7({token:a,factory:a.\u0275fac}),a)},3356:function(t,i,o){o.d(i,{v:function(){return S}});var a=o(90665),r=o(27887),s=o(26164),c=o(87152),l=o(51937),u=o(37716),d=o(47063),g=o(84465),p=o(81780),f=o(71239),h=o(38583);function m(t,e){1&t&&(u.TgZ(0,"div"),u._UZ(1,"ion-spinner",17),u.qZA())}function Z(t,e){if(1&t&&(u.TgZ(0,"ion-select-option",21),u._uU(1),u.qZA()),2&t){var n=e.$implicit;u.Q6J("value",n.id),u.xp6(1),u.Oqu(n.name)}}function v(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"ion-item",18),u.TgZ(1,"ion-label",8),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"ion-select",19),u.NdJ("ionChange",function(t){return u.CHM(n),u.oxw().changeProvince(t)}),u.YNc(5,Z,2,2,"ion-select-option",20),u.qZA(),u.qZA()}if(2&t){var i=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,2,"PROVINCE")),u.xp6(3),u.Q6J("ngForOf",i.listProvince)}}function A(t,e){if(1&t&&(u.TgZ(0,"ion-select-option",21),u._uU(1),u.qZA()),2&t){var n=e.$implicit;u.Q6J("value",n.id),u.xp6(1),u.Oqu(n.name)}}function T(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"ion-item",18),u.TgZ(1,"ion-label",8),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"ion-select",22),u.NdJ("ionChange",function(t){return u.CHM(n),u.oxw().changeDistrict(t)}),u.YNc(5,A,2,2,"ion-select-option",20),u.qZA(),u.qZA()}if(2&t){var i=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,2,"DISTRICT")),u.xp6(3),u.Q6J("ngForOf",i.listDistrict)}}function q(t,e){if(1&t&&(u.TgZ(0,"ion-select-option",21),u._uU(1),u.qZA()),2&t){var n=e.$implicit;u.Q6J("value",n.id),u.xp6(1),u.Oqu(n.name)}}function _(t,e){if(1&t&&(u.TgZ(0,"ion-item",18),u.TgZ(1,"ion-label",8),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"ion-select",23),u.YNc(5,q,2,2,"ion-select-option",20),u.qZA(),u.qZA()),2&t){var n=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,2,"WARDS")),u.xp6(3),u.Q6J("ngForOf",n.listWards)}}function x(t,e){if(1&t&&(u.TgZ(0,"ion-select-option",21),u._uU(1),u.qZA()),2&t){var n=e.$implicit;u.Q6J("value",n.species_id),u.xp6(1),u.Oqu(n.name)}}function O(t,e){if(1&t&&(u.TgZ(0,"ion-item"),u.TgZ(1,"ion-label",24),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"ion-select",25),u.YNc(5,x,2,2,"ion-select-option",20),u.qZA(),u.qZA()),2&t){var n=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,2,"COMPANY_MOD.MAIN_SPECIES")),u.xp6(3),u.Q6J("ngForOf",n.species)}}var y,S=((y=function(){function t(e,i,o,a,s,c,l,u){n(this,t),this.modalController=e,this._formBuilder=i,this.companyService=o,this.toastService=a,this.geolocation=s,this.translate=c,this.farmService=l,this.dbLocalService=u,this.savingFlag=new r.E,this.species=[]}return e(t,[{key:"ngOnInit",value:function(){this.createForm(),this.getSpecies(),this.getLocation(),this.getListProvince(0)}},{key:"createForm",value:function(){this.form=this._formBuilder.group({name:["",a.kI.required],address:["",a.kI.required],area:["",a.kI.required],species_id:["",a.kI.required],longitude:"",latitude:"",province:"",district:"",wards:""})}},{key:"save",value:function(){var t=this,e={name:this.form.value.name,address:this.form.value.address,species:this.form.value.species_id,area:this.form.value.area,latitude:this.form.value.latitude,longitude:this.form.value.longitude,province:this.form.value.province,district:this.form.value.district,wards:this.form.value.wards,pond:{all:0,empty:0,good:0,stocking:0,warning:0}};this.savingFlag.setPending(!0),this.companyService.createFarm(e).subscribe(function(n){if(n.error||1!=n.status)t.toastService.warning(n.error);else{t.toastService.success(t.translate.instant("COMPANY_MOD.NOTI_CREATE"));var i={id:n.data.id,code:n.data.code,name:t.form.value.name,public:n.data.public,address:t.form.value.address,species:t.form.value.species_id,area:t.form.value.area,latitude:t.form.value.latitude,longitude:t.form.value.longitude,province_id:n.data.province_id,district_id:n.data.district_id,wards_id:n.data.wards_id,permission:"company_manager"};e.id=n.data.id,e.code=n.data.code,t.companyService.listFarm.push(e),t.dbLocalService.farms&&(t.dbLocalService.farms.push({infor:i,stores:[]}),t.dbLocalService.setLocalData("farms",t.dbLocalService.farms)),t.modalController.dismiss()}t.savingFlag.setResult(!0)},function(e){t.savingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"changeProvince",value:function(t){var e=t.detail.value;this.listDistrict=[],this.form.value.district_id=0,this.getListDistrict(e)}},{key:"changeDistrict",value:function(t){var e=t.detail.value;this.listWards=[],this.form.value.wards_id=0,this.getListWards(e)}},{key:"getSpecies",value:function(){var t=this;this.companyService.loadSpecies().subscribe(function(e){e.error||1!=e.status?t.toastService.warning(e.error):t.species=e.data},function(e){t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"getListProvince",value:function(t){var e=this;this.farmService.listAddress(t).subscribe(function(t){1==t.status?e.listProvince=t.data:e.toastService.warning(t.error)},function(){e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"getListDistrict",value:function(t){var e=this;this.farmService.listAddress(t).subscribe(function(t){1==t.status?e.listDistrict=t.data:e.toastService.warning(t.error)},function(){e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"getListWards",value:function(t){var e=this;this.farmService.listAddress(t).subscribe(function(t){1==t.status?e.listWards=t.data:e.toastService.warning(t.error)},function(){e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"getLocation",value:function(){var t=this;this.geolocation.getCurrentPosition().then(function(e){console.log(e),e.coords.latitude&&e.coords.longitude&&(t.form.controls.latitude.setValue(e.coords.latitude),t.form.controls.longitude.setValue(e.coords.longitude))}).catch(function(){t.toastService.warning(t.translate.instant("COMPANY_MOD.ERROR_LOCATE"))})}},{key:"clearLocate",value:function(){this.form.controls.latitude.setValue(""),this.form.controls.longitude.setValue("")}}]),t}()).\u0275fac=function(t){return new(t||y)(u.Y36(d.IN),u.Y36(a.qu),u.Y36(s.J),u.Y36(g.k),u.Y36(c.b),u.Y36(p.sK),u.Y36(l.D),u.Y36(f.T))},y.\u0275cmp=u.Xpm({type:y,selectors:[["app-company-farm-create"]],decls:55,vars:37,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],[3,"disabled","click"],[1,"ion-padding",3,"formGroup"],[1,"ion-padding","ion-text-center"],[4,"ngIf"],["position","floating"],["formControlName","name"],["formControlName","address","type","text","inputmode","text"],["lines","inset",4,"ngIf"],["formControlName","area","type","tel","inputmode","decimal"],["formControlName","longitude","type","tel","inputmode","decimal"],["formControlName","latitude","type","tel","inputmode","decimal"],["lines","none"],["slot","end","fill","outline",3,"click"],["name","dots"],["lines","inset"],["formControlName","province",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","district",3,"ionChange"],["formControlName","wards"],["position","stacked"],["formControlName","species_id"]],template:function(t,e){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u.TgZ(3,"ion-button",1),u.NdJ("click",function(){return e.modalController.dismiss()}),u._UZ(4,"ion-icon",2),u.qZA(),u.qZA(),u.TgZ(5,"ion-title"),u._uU(6),u.ALo(7,"translate"),u.qZA(),u.TgZ(8,"ion-buttons",3),u.TgZ(9,"ion-button",4),u.NdJ("click",function(){return e.save()}),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(12,"ion-content",5),u.TgZ(13,"div",6),u.TgZ(14,"p"),u._uU(15),u.ALo(16,"translate"),u.qZA(),u.YNc(17,m,2,0,"div",7),u.qZA(),u.TgZ(18,"ion-list"),u.TgZ(19,"ion-item"),u.TgZ(20,"ion-label",8),u._uU(21),u.ALo(22,"translate"),u.qZA(),u._UZ(23,"ion-input",9),u.qZA(),u.TgZ(24,"ion-item"),u.TgZ(25,"ion-label",8),u._uU(26),u.ALo(27,"translate"),u.qZA(),u._UZ(28,"ion-input",10),u.qZA(),u.YNc(29,v,6,4,"ion-item",11),u.YNc(30,T,6,4,"ion-item",11),u.YNc(31,_,6,4,"ion-item",11),u.TgZ(32,"ion-item"),u.TgZ(33,"ion-label",8),u._uU(34),u.ALo(35,"translate"),u.qZA(),u._UZ(36,"ion-input",12),u.qZA(),u.YNc(37,O,6,4,"ion-item",7),u.TgZ(38,"ion-item"),u.TgZ(39,"ion-label",8),u._uU(40),u.ALo(41,"translate"),u.qZA(),u._UZ(42,"ion-input",13),u.qZA(),u.TgZ(43,"ion-item"),u.TgZ(44,"ion-label",8),u._uU(45),u.ALo(46,"translate"),u.qZA(),u._UZ(47,"ion-input",14),u.qZA(),u.TgZ(48,"ion-item",15),u.TgZ(49,"ion-button",16),u.NdJ("click",function(){return e.clearLocate()}),u._uU(50),u.ALo(51,"translate"),u.qZA(),u.TgZ(52,"ion-button",16),u.NdJ("click",function(){return e.getLocation()}),u._uU(53),u.ALo(54,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(6),u.Oqu(u.lcZ(7,17,"COMPANY_MOD.CREATE_FARM")),u.xp6(3),u.Q6J("disabled",e.form.invalid),u.xp6(1),u.hij(" ",u.lcZ(11,19,"COMPANY_MOD.SAVE")," "),u.xp6(2),u.Q6J("formGroup",e.form),u.xp6(3),u.Oqu(u.lcZ(16,21,"COMPANY_MOD.A_FARM_INCLUDE")),u.xp6(2),u.Q6J("ngIf",e.savingFlag.pending),u.xp6(4),u.Oqu(u.lcZ(22,23,"COMPANY_MOD.NAME_FARM")),u.xp6(5),u.Oqu(u.lcZ(27,25,"COMPANY_MOD.ADDRESS")),u.xp6(3),u.Q6J("ngIf",e.listProvince),u.xp6(1),u.Q6J("ngIf",e.listDistrict),u.xp6(1),u.Q6J("ngIf",e.listWards),u.xp6(3),u.hij("",u.lcZ(35,27,"AREA")," (ha)"),u.xp6(3),u.Q6J("ngIf",e.species.length>0),u.xp6(3),u.Oqu(u.lcZ(41,29,"COMPANY_MOD.LONG")),u.xp6(5),u.Oqu(u.lcZ(46,31,"COMPANY_MOD.LAT")),u.xp6(5),u.Oqu(u.lcZ(51,33,"COMPANY_MOD.DEL_LOCATE")),u.xp6(3),u.Oqu(u.lcZ(54,35,"COMPANY_MOD.CURRENT_LOCATE")))},directives:[d.Gu,d.sr,d.Sm,d.YG,d.gu,d.wd,d.W2,a.JL,a.sg,h.O5,d.q_,d.Ie,d.Q$,d.pK,d.j9,a.JJ,a.u,d.PQ,d.t9,d.QI,h.sg,d.n0],pipes:[p.X$],styles:[""]}),y)},83729:function(t,i,o){o.d(i,{W:function(){return I}});var a=o(64762),r=o(27887),s=o(26262),c=o(37716),l=o(47063),u=o(84465),d=o(13619),g=o(81780),p=o(71239),f=o(38583);function h(t,e){1&t&&c._UZ(0,"ion-icon",10)}function m(t,e){1&t&&c._UZ(0,"ion-icon",11)}function Z(t,e){1&t&&(c.TgZ(0,"p"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"EXPERT_MOD.EMPTY")))}function v(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"ion-item"),c.TgZ(1,"ion-label",13),c.TgZ(2,"ion-text",3),c.TgZ(3,"h3"),c._uU(4),c.qZA(),c.qZA(),c.TgZ(5,"p"),c._uU(6),c.qZA(),c.YNc(7,Z,3,3,"p",7),c.TgZ(8,"ion-text",14),c.TgZ(9,"small"),c._uU(10),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"ion-button",15),c.NdJ("click",function(){var t=c.CHM(n),e=t.$implicit,i=t.index;return c.oxw(2).rejectInvitation(e,i)}),c._uU(12,"x\xf3a"),c.qZA(),c.qZA()}if(2&t){var i=e.$implicit;c.xp6(4),c.Oqu(i.infor.name),c.xp6(2),c.Oqu(i.infor.species),c.xp6(1),c.Q6J("ngIf","0"==i.infor.current_season),c.xp6(3),c.Oqu(i.infor.farm_name)}}function A(t,e){if(1&t&&(c.TgZ(0,"div"),c.YNc(1,v,13,4,"ion-item",12),c.qZA()),2&t){var n=c.oxw();c.xp6(1),c.Q6J("ngForOf",n.dbLocalService.filterPond("permission","pond_expert"))}}function T(t,e){1&t&&c._UZ(0,"ion-icon",10)}function q(t,e){1&t&&c._UZ(0,"ion-icon",11)}function _(t,e){1&t&&(c.TgZ(0,"p"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"EXPERT_MOD.EMPTY")))}function x(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"ion-item",17),c.NdJ("click",function(){var t=c.CHM(n),e=t.$implicit,i=t.index;return c.oxw(2).actionSheet(e,i)}),c.TgZ(1,"ion-label",13),c.TgZ(2,"ion-text",3),c.TgZ(3,"h3"),c._uU(4),c.qZA(),c.qZA(),c.TgZ(5,"p"),c._uU(6),c.qZA(),c.YNc(7,_,3,3,"p",7),c.TgZ(8,"ion-text",14),c.TgZ(9,"small"),c._uU(10),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){var i=e.$implicit;c.xp6(4),c.Oqu(i.name),c.xp6(2),c.Oqu(i.species),c.xp6(1),c.Q6J("ngIf","0"==i.current_season),c.xp6(3),c.Oqu(i.farm_name)}}function O(t,e){if(1&t&&(c.TgZ(0,"div"),c.YNc(1,x,11,4,"ion-item",16),c.qZA()),2&t){var n=c.oxw();c.xp6(1),c.Q6J("ngForOf",n.invitationList)}}function y(t,e){1&t&&(c.TgZ(0,"div",18),c._UZ(1,"ion-spinner",19),c.qZA())}var S,I=((S=function(){function t(e,i,o,a,s,c,l){n(this,t),this.modalController=e,this.actionSheetController=i,this.expertService=o,this.toastService=a,this.router=s,this.translate=c,this.dbLocalService=l,this.loadingFlag=new r.E,this.invitationList=[],this.showAceptedList=!1,this.showInvitationList=!0}return e(t,[{key:"ngOnInit",value:function(){this.getInvitationList()}},{key:"actionSheet",value:function(t,e){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.actionSheetController.create({buttons:[{text:this.translate.instant("EXPERT_MOD.RECEIVE"),handler:function(){i.acceptInvitation(t,e)}},{text:this.translate.instant("EXPERT_MOD.SEE"),handler:function(){i.router.navigateByUrl("/pond/"+t.code),i.modalController.dismiss()}},{text:this.translate.instant("OPTION.CANCEL"),role:"cancel"}]});case 2:return n.next=4,n.sent.present();case 4:case"end":return n.stop()}},n,this)}))}},{key:"getInvitationList",value:function(){var t=this;this.loadingFlag.setPending(!0),this.expertService.getInvitationList().pipe().subscribe(function(e){e.error||1!=e.status?t.toastService.warning(e.error):t.invitationList=t.filerList(e.data),t.loadingFlag.setResult(!0)},function(e){t.toastService.danger(t.translate.instant("ERROR_CONNECT")),t.loadingFlag.setResult(!1)})}},{key:"filerList",value:function(t){var e=this;return t.filter(function(t){return e.dbLocalService.ponds.findIndex(function(e){return e.infor.code==t.code})<0})}},{key:"acceptInvitation",value:function(t,e){var n=this;this.expertService.acceptInvitation({item:t.code}).pipe().subscribe(function(i){i.error||0==i.status?n.toastService.warning(i.error):(n.invitationList.splice(e,1),t.permission="pond_expert",n.dbLocalService.addItem("ponds",{infor:t}),n.toastService.success(i.success))},function(){n.toastService.danger(n.translate.instant("ERROR_CONNECT"))})}},{key:"rejectInvitation",value:function(t,e){var n=this;this.expertService.rejectInvitation(t.infor.code).pipe().subscribe(function(e){e.error||0==e.status?n.toastService.warning(e.error):(n.dbLocalService.removeItem("ponds",t),n.invitationList.push(t),n.toastService.success(e.success))},function(t){n.toastService.danger(n.translate.instant("ERROR_CONNECT"))})}}]),t}()).\u0275fac=function(t){return new(t||S)(c.Y36(l.IN),c.Y36(l.BX),c.Y36(s.$),c.Y36(u.k),c.Y36(d.F0),c.Y36(g.sK),c.Y36(p.T))},S.\u0275cmp=c.Xpm({type:S,selectors:[["app-expert-invitation"]],decls:32,vars:18,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["color","primary"],["shape","round",3,"click"],["name","chevron-down-outline",4,"ngIf"],["name","chevron-up-outline",4,"ngIf"],[4,"ngIf"],["color","danger"],["class","spiner-loading",4,"ngIf"],["name","chevron-down-outline"],["name","chevron-up-outline"],[4,"ngFor","ngForOf"],[1,"ion-text-wrap"],["color","medium"],["color","danger","fill","outline","shape","round",3,"click"],["detail","",3,"click",4,"ngFor","ngForOf"],["detail","",3,"click"],[1,"spiner-loading"],["name","dots"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c.TgZ(3,"ion-button",1),c.NdJ("click",function(){return e.modalController.dismiss()}),c._UZ(4,"ion-icon",2),c.qZA(),c.qZA(),c.TgZ(5,"ion-title"),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"ion-content"),c.TgZ(9,"ion-list"),c.TgZ(10,"ion-list-header"),c.TgZ(11,"ion-label"),c._uU(12),c.ALo(13,"translate"),c.TgZ(14,"ion-badge",3),c._uU(15),c.qZA(),c.qZA(),c.TgZ(16,"ion-button",4),c.NdJ("click",function(){return e.showAceptedList=!e.showAceptedList}),c.YNc(17,h,1,0,"ion-icon",5),c.YNc(18,m,1,0,"ion-icon",6),c.qZA(),c.qZA(),c.YNc(19,A,2,1,"div",7),c.qZA(),c.TgZ(20,"ion-list"),c.TgZ(21,"ion-list-header"),c.TgZ(22,"ion-label"),c._uU(23),c.ALo(24,"translate"),c.TgZ(25,"ion-badge",8),c._uU(26),c.qZA(),c.qZA(),c.TgZ(27,"ion-button",4),c.NdJ("click",function(){return e.showInvitationList=!e.showInvitationList}),c.YNc(28,T,1,0,"ion-icon",5),c.YNc(29,q,1,0,"ion-icon",6),c.qZA(),c.qZA(),c.YNc(30,O,2,1,"div",7),c.qZA(),c.YNc(31,y,2,0,"div",9),c.qZA()),2&t&&(c.xp6(6),c.Oqu(c.lcZ(7,12,"EXPERT_MOD.INVITATION")),c.xp6(6),c.hij(" ",c.lcZ(13,14,"EXPERT_MOD.ACCEPTED_INVA")," "),c.xp6(3),c.hij(" ",e.dbLocalService.filterPond("permission","pond_expert").length," "),c.xp6(2),c.Q6J("ngIf",!e.showAceptedList),c.xp6(1),c.Q6J("ngIf",e.showAceptedList),c.xp6(1),c.Q6J("ngIf",e.showAceptedList),c.xp6(4),c.hij("",c.lcZ(24,16,"EXPERT_MOD.WAITING")," "),c.xp6(3),c.Oqu(e.invitationList.length),c.xp6(2),c.Q6J("ngIf",!e.showInvitationList),c.xp6(1),c.Q6J("ngIf",e.showInvitationList),c.xp6(1),c.Q6J("ngIf",e.showInvitationList),c.xp6(1),c.Q6J("ngIf",e.loadingFlag.pending))},directives:[l.Gu,l.sr,l.Sm,l.YG,l.gu,l.wd,l.W2,l.q_,l.yh,l.Q$,l.yp,f.O5,f.sg,l.Ie,l.yW,l.PQ],pipes:[g.X$],styles:["h3[_ngcontent-%COMP%]{font-size:1.2em}"]}),S)},26262:function(t,i,o){o.d(i,{$:function(){return c}});var a,r=o(15189),s=o(37716),c=((a=function(){function t(e){n(this,t),this.reqAPIService=e,this.EXPERT_URL="/expert/"}return e(t,[{key:"getAcceptanceList",value:function(){return this.reqAPIService.get("/expert/pond-api")}},{key:"getInvitationList",value:function(){return this.reqAPIService.get("/expert/pond-api?op=invitation")}},{key:"acceptInvitation",value:function(t){return this.reqAPIService.post("/expert/action-api?a=accept",t)}},{key:"rejectInvitation",value:function(t){return this.reqAPIService.get("/expert/action-api?a=remove&item="+t)}},{key:"addSuggest",value:function(t){return this.reqAPIService.post(this.EXPERT_URL+"api-suggest?action=add",t)}}]),t}()).\u0275fac=function(t){return new(t||a)(s.LFG(r.$))},a.\u0275prov=s.Yz7({token:a,factory:a.\u0275fac}),a)},60271:function(t,i,o){o.d(i,{u:function(){return T}});var a=o(16738),r=o(51937),s=o(27887),c=o(19228),l=o(37716),u=o(84465),d=o(47063),g=o(81780),p=o(38583),f=o(56209);function h(t,e){1&t&&l._UZ(0,"ion-progress-bar",5)}function m(t,e){if(1&t&&(l.TgZ(0,"ion-card",8),l.TgZ(1,"ion-card-header"),l.TgZ(2,"ion-card-subtitle"),l._UZ(3,"ion-icon",14),l._uU(4),l.ALo(5,"translate"),l.qZA(),l.qZA(),l.TgZ(6,"ion-card-content"),l._UZ(7,"div",15),l.qZA(),l.qZA()),2&t){var n=l.oxw(2);l.xp6(4),l.hij(" ",l.lcZ(5,2,"FARM_MOD.TOTAL_IN")," "),l.xp6(3),l.Q6J("options",n.optionIn)}}function Z(t,e){if(1&t&&(l.TgZ(0,"ion-card",8),l.TgZ(1,"ion-card-header"),l.TgZ(2,"ion-card-subtitle"),l._UZ(3,"ion-icon",16),l._uU(4),l.ALo(5,"translate"),l.qZA(),l.qZA(),l.TgZ(6,"ion-card-content"),l._UZ(7,"div",15),l.qZA(),l.qZA()),2&t){var n=l.oxw(2);l.xp6(4),l.hij(" ",l.lcZ(5,2,"FARM_MOD.TOTAL_OUT")," "),l.xp6(3),l.Q6J("options",n.optionOut)}}function v(t,e){if(1&t){var n=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"ion-card"),l.TgZ(2,"ion-list"),l.TgZ(3,"ion-item",6),l.TgZ(4,"ion-label"),l._uU(5),l.ALo(6,"translate"),l.qZA(),l.TgZ(7,"ion-datetime",7),l.NdJ("ionChange",function(t){return l.CHM(n),l.oxw().onChangeDateStart(t)}),l.ALo(8,"translate"),l.qZA(),l.qZA(),l.TgZ(9,"ion-item",6),l.TgZ(10,"ion-label"),l._uU(11),l.ALo(12,"translate"),l.qZA(),l.TgZ(13,"ion-datetime",7),l.NdJ("ionChange",function(t){return l.CHM(n),l.oxw().onChangeDateEnd(t)}),l.ALo(14,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"ion-card",8),l.TgZ(16,"ion-card-header"),l.TgZ(17,"ion-card-subtitle"),l._uU(18," \u0110\u1ea7u k\xec "),l.qZA(),l.qZA(),l.TgZ(19,"ion-card-content"),l.TgZ(20,"ion-card-content"),l.TgZ(21,"ion-item",9),l.TgZ(22,"ion-text"),l._uU(23," T\u1ed3n qu\u1ef9 "),l.qZA(),l.TgZ(24,"ion-text",10),l._uU(25),l.ALo(26,"number"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(27,"ion-card",8),l.TgZ(28,"ion-card-header"),l.TgZ(29,"ion-card-subtitle"),l._uU(30," Ng\xe0y cu\u1ed1i "),l.qZA(),l.qZA(),l.TgZ(31,"ion-card-content"),l.TgZ(32,"ion-card-content"),l.TgZ(33,"ion-item",9),l.TgZ(34,"ion-text"),l._uU(35," T\u1ed5ng thu "),l.qZA(),l.TgZ(36,"ion-text",11),l._uU(37),l.ALo(38,"number"),l.qZA(),l.qZA(),l.TgZ(39,"ion-item",9),l.TgZ(40,"ion-text"),l._uU(41," T\u1ed5ng chi "),l.qZA(),l.TgZ(42,"ion-text",12),l._uU(43),l.ALo(44,"number"),l.qZA(),l.qZA(),l.TgZ(45,"ion-item",9),l.TgZ(46,"ion-text"),l._uU(47," T\u1ed5ng n\u1ee3 "),l.qZA(),l.TgZ(48,"ion-text",12),l._uU(49),l.ALo(50,"number"),l.qZA(),l.qZA(),l.TgZ(51,"ion-item",9),l.TgZ(52,"ion-text"),l._uU(53," N\u1ee3 \u0111\xe3 tr\u1ea3 "),l.qZA(),l.TgZ(54,"ion-text",12),l._uU(55),l.ALo(56,"number"),l.qZA(),l.qZA(),l.TgZ(57,"ion-item",9),l.TgZ(58,"ion-text"),l._uU(59," Cho vay "),l.qZA(),l.TgZ(60,"ion-text",10),l._uU(61),l.ALo(62,"number"),l.qZA(),l.qZA(),l.TgZ(63,"ion-item",9),l.TgZ(64,"ion-text"),l._uU(65," \u0110\xe3 thu "),l.qZA(),l.TgZ(66,"ion-text",10),l._uU(67),l.ALo(68,"number"),l.qZA(),l.qZA(),l.TgZ(69,"ion-item",9),l.TgZ(70,"ion-text"),l._uU(71," T\u1ed3n qu\u1ef9 "),l.qZA(),l.TgZ(72,"ion-text",11),l._uU(73),l.ALo(74,"number"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(75,m,8,4,"ion-card",13),l.YNc(76,Z,8,4,"ion-card",13),l.qZA()}if(2&t){var i=l.oxw();l.xp6(5),l.Oqu(l.lcZ(6,20,"FARM_MOD.FROM")),l.xp6(2),l.Q6J("displayFormat",l.lcZ(8,22,"FORMAT_DATE_MOMENT"))("min",i.minDate.format("YYYY-MM-DD"))("max",i.maxDate.format("YYYY-MM-DD"))("value",i.dateRangeStart),l.xp6(4),l.Oqu(l.lcZ(12,24,"FARM_MOD.TO")),l.xp6(2),l.Q6J("displayFormat",l.lcZ(14,26,"FORMAT_DATE_MOMENT"))("min",i.dateRangeStart)("max",i.maxDate.format("YYYY-MM-DD"))("value",i.dateRangeEnd),l.xp6(12),l.hij(" ",l.lcZ(26,28,i.data.fund.total_in-i.data.fund.total_out)," \u0111 "),l.xp6(12),l.hij(" ",l.lcZ(38,30,i.data.total_in)," \u0111 "),l.xp6(6),l.hij(" ",l.lcZ(44,32,i.data.total_out)," \u0111 "),l.xp6(6),l.hij(" ",l.lcZ(50,34,i.data.debt)," \u0111 "),l.xp6(6),l.hij(" ",l.xi3(56,36,i.data.debt_payed,"0.0")," \u0111 "),l.xp6(6),l.hij(" ",l.lcZ(62,39,i.data.need_collect)," \u0111 "),l.xp6(6),l.hij(" ",l.lcZ(68,41,i.data.collected)," \u0111 "),l.xp6(6),l.hij(" ",l.lcZ(74,43,i.data.fund.total_in-i.data.fund.total_out+(i.data.total_in-i.data.total_out)+(i.data.collected-i.data.debt_payed))," \u0111 "),l.xp6(2),l.Q6J("ngIf",i.view),l.xp6(1),l.Q6J("ngIf",i.view)}}var A,T=((A=function(){function t(e,i,o,r,c,l){n(this,t),this.toastService=e,this.modalCtrl=i,this.translate=o,this.farmService=r,this.moneyService=c,this.cd=l,this.dateRangeStart=a().subtract(90,"days").format("YYYY-MM-DD"),this.dateRangeEnd=a().format("YYYY-MM-DD"),this.maxDate=a(),this.minDate=a().subtract(365,"days"),this.loadingFlag=new s.E,this.view=!1,this.optionIn={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",position:["50%","50%"]},legend:{left:"center",top:"bottom"},toolbox:{show:!0},series:[{name:this.translate.instant("FARM_MOD.TOTAL_IN"),type:"pie",radius:[15,80],center:["50%","40%"],roseType:"area",itemStyle:{borderRadius:5},labelLine:{show:!0,length:1},data:[]}]},this.optionOut={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",position:["50%","50%"]},legend:{left:"center",top:"bottom"},toolbox:{show:!0},series:[{name:this.translate.instant("FARM_MOD.TOTAL_OUT"),type:"pie",radius:[15,80],center:["50%","40%"],roseType:"area",itemStyle:{borderRadius:5},labelLine:{show:!0,length:1},data:[]}]}}return e(t,[{key:"ngOnInit",value:function(){this.getData()}},{key:"onChangeDateStart",value:function(t){this.dateRangeStart=t.detail.value,this.getData()}},{key:"onChangeDateEnd",value:function(t){this.dateRangeEnd=t.detail.value,this.getData()}},{key:"getData",value:function(){var t=this,e={timeFrom:new Date(this.dateRangeStart).getTime()/1e3,timeEnd:new Date(this.dateRangeEnd).getTime()/1e3};this.loadingFlag.setPending(!0),this.moneyService.getAnalyst(e).subscribe(function(e){1==e.status?(t.data=e.data,console.log(t.data),t.initChart()):t.toastService.warning(e.error),t.loadingFlag.setResult(!0)},function(){t.toastService.danger(t.translate.instant("ERROR_CONNECT")),t.loadingFlag.setResult(!1)})}},{key:"initChart",value:function(){var t=[{name:this.translate.instant("FARM_MOD.COMMON"),value:0}];this.data.in.forEach(function(e){e.name?t.push({name:e.name,value:parseInt(e.total)}):t[0].value+=parseInt(e.total)});var e=[{name:this.translate.instant("FARM_MOD.COMMON"),value:0}];this.data.out.forEach(function(t){t.name?e.push({name:t.name,value:parseInt(t.total)}):e[0].value+=parseInt(t.total)}),this.optionIn.series[0].data=t,this.optionOut.series[0].data=e,this.cd.detectChanges()}},{key:"ionViewDidEnter",value:function(){var t=this;setTimeout(function(){t.view=!0},500)}}]),t}()).\u0275fac=function(t){return new(t||A)(l.Y36(u.k),l.Y36(d.IN),l.Y36(g.sK),l.Y36(r.D),l.Y36(c.r),l.Y36(l.sBO))},A.\u0275cmp=l.Xpm({type:A,selectors:[["app-money-estimate"]],decls:12,vars:8,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["type","indeterminate",4,"ngIf"],[4,"ngIf"],["type","indeterminate"],["lines","inset"],[3,"displayFormat","min","max","value","ionChange"],["mode","ios"],["lines","none"],["slot","end","color","success"],["slot","end","color","primary"],["slot","end"],["mode","ios",4,"ngIf"],["name","arrow-undo-outline"],["echarts","",3,"options"],["name","arrow-redo-outline"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-title"),l._uU(3),l.ALo(4,"translate"),l.ALo(5,"translate"),l.qZA(),l.TgZ(6,"ion-buttons",0),l.TgZ(7,"ion-button",1),l.NdJ("click",function(){return e.modalCtrl.dismiss()}),l._UZ(8,"ion-icon",2),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"ion-content"),l.YNc(10,h,1,0,"ion-progress-bar",3),l.YNc(11,v,77,45,"div",4),l.qZA()),2&t&&(l.xp6(3),l.AsE("",l.lcZ(4,4,"ANALYTICS")," ",l.lcZ(5,6,"MONEY"),""),l.xp6(7),l.Q6J("ngIf",e.loadingFlag.pending),l.xp6(1),l.Q6J("ngIf",!e.loadingFlag.pending))},directives:[d.Gu,d.sr,d.wd,d.Sm,d.YG,d.gu,d.W2,p.O5,d.X7,d.PM,d.q_,d.Ie,d.Q$,d.x4,d.QI,d.Zi,d.tO,d.FN,d.yW,f._w],pipes:[g.X$,p.JJ],styles:[""]}),A)},49038:function(t,i,o){o.d(i,{u:function(){return _}});var a=o(79765),r=o(25917),s=o(54395),c=o(87519),l=o(43190),u=o(88002),d=o(27887),g=o(19228),p=o(37716),f=o(47063),h=o(38583),m=o(81780);function Z(t,e){1&t&&(p.TgZ(0,"ion-list-header"),p.TgZ(1,"ion-label"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.qZA()),2&t&&(p.xp6(2),p.Oqu(p.lcZ(3,1,"WAREHOUSE_MOD.RESULT")))}function v(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"ion-item"),p.TgZ(1,"ion-label"),p.TgZ(2,"h3"),p._uU(3),p.qZA(),p.TgZ(4,"p"),p.TgZ(5,"span"),p._uU(6),p.ALo(7,"number"),p.qZA(),p._uU(8),p.qZA(),p.qZA(),p.TgZ(9,"ion-button",7),p.NdJ("click",function(){p.CHM(n);var t=p.oxw().$implicit;return p.oxw().onSelect(t)}),p._uU(10),p.ALo(11,"translate"),p.qZA(),p.qZA()}if(2&t){var i=p.oxw().$implicit;p.xp6(3),p.Oqu(""!=i.customer_name?i.customer_name:"None"),p.xp6(3),p.Oqu(p.lcZ(7,4,i.amounts-i.amounts_payed)),p.xp6(2),p.hij(" | ",i.title,""),p.xp6(2),p.hij(" ",p.lcZ(11,6,"WAREHOUSE_MOD.SELECT")," ")}}function A(t,e){if(1&t&&(p.TgZ(0,"div"),p.YNc(1,v,12,8,"ion-item",4),p.qZA()),2&t){var n=e.$implicit,i=p.oxw();p.xp6(1),p.Q6J("ngIf",n.id!==i.bill_id)}}function T(t,e){1&t&&(p.TgZ(0,"div"),p._UZ(1,"ion-spinner",8),p.qZA())}var q,_=((q=function(){function t(e,i){n(this,t),this.modalController=e,this.moneyService=i,this.loadingFlag=new d.E,this.searchBill=new a.xQ,this.bill_id=0}return e(t,[{key:"ngOnInit",value:function(){var t=this;console.log(this.type);var e=this.searchBill.pipe((0,s.b)(300),(0,c.x)(),(0,l.w)(function(e){return t.getListMoney(e)}));this.bills$=e,this.bills$.subscribe(function(e){t.loadingFlag.setResult(!!e)})}},{key:"getListMoney",value:function(t){return t.trim()?this.moneyService.quickSearch({keyword:t,type:this.type}).pipe((0,u.U)(function(t){return t.data})):(this.loadingFlag.setResult(!0),(0,r.of)([]))}},{key:"onSelect",value:function(t){this.modalController.dismiss(t)}},{key:"search",value:function(t){this.searchBill.next(t.detail.value)}}]),t}()).\u0275fac=function(t){return new(t||q)(p.Y36(f.IN),p.Y36(g.r))},q.\u0275cmp=p.Xpm({type:q,selectors:[["app-money-list-bill"]],inputs:{type:"type",bill_id:"bill_id"},decls:17,vars:10,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[3,"ionChange"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"ion-text-center"],["slot","end",3,"click"],["name","dots"]],template:function(t,e){var n;1&t&&(p.TgZ(0,"ion-header"),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-buttons",0),p.TgZ(3,"ion-button",1),p.NdJ("click",function(){return e.modalController.dismiss(!1)}),p._UZ(4,"ion-icon",2),p.qZA(),p.qZA(),p.TgZ(5,"ion-title"),p._uU(6),p.ALo(7,"translate"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(8,"ion-content"),p.TgZ(9,"ion-searchbar",3),p.NdJ("ionChange",function(t){return e.search(t)}),p.qZA(),p.TgZ(10,"ion-list"),p.YNc(11,Z,4,3,"ion-list-header",4),p.ALo(12,"async"),p.YNc(13,A,2,1,"div",5),p.ALo(14,"async"),p.qZA(),p.TgZ(15,"div",6),p.YNc(16,T,2,0,"div",4),p.qZA(),p.qZA()),2&t&&(p.xp6(6),p.Oqu(p.lcZ(7,4,"SHOP.CART.CHOOSE")),p.xp6(5),p.Q6J("ngIf",(null==(n=p.lcZ(12,6,e.bills$))?null:n.length)>0),p.xp6(2),p.Q6J("ngForOf",p.lcZ(14,8,e.bills$)),p.xp6(3),p.Q6J("ngIf",e.loadingFlag.pending))},directives:[f.Gu,f.sr,f.Sm,f.YG,f.gu,f.wd,f.W2,f.VI,f.j9,f.q_,h.O5,h.sg,f.yh,f.Q$,f.Ie,f.PQ],pipes:[m.X$,h.Ov,h.JJ],styles:[""]}),q)},18409:function(t,i,o){o.d(i,{u:function(){return s}});var a,r=o(37716),s=((a=function(){function t(){n(this,t)}return e(t,[{key:"transform",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=e.split(","),o="",a=i[0],r=1;if(t<1e3)return new Intl.NumberFormat("en-US",{maximumFractionDigits:1}).format(t)+" "+n;for(var s=1;s+2<t.toString().length&&s-3<i.length;s+=3)r*=1e3,o=new Intl.NumberFormat("en-US",{maximumFractionDigits:1}).format(t/r),a=i[(s-1)/3];return o+" "+a}}]),t}()).\u0275fac=function(t){return new(t||a)},a.\u0275pipe=r.Yjl({name:"countNumerPipe",type:a,pure:!0}),a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac}),a)},63771:function(t,i,o){o.d(i,{g:function(){return s}});var a,r=o(37716),s=((a=function(){function t(){n(this,t)}return e(t,[{key:"transform",value:function(t,e){return t.filter(function(t){return t.group_id==e})}}]),t}()).\u0275fac=function(t){return new(t||a)},a.\u0275pipe=r.Yjl({name:"productTypeFilter",type:a,pure:!0}),a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac}),a)},1533:function(t,i,o){o.d(i,{F:function(){return m}});var a=o(27887),r=o(80272),s=o(92340),c=o(16738),l=o(37716),u=o(47063),d=o(81780),g=o(38583);function p(t,e){if(1&t&&(l.TgZ(0,"div",3),l._UZ(1,"img",11),l.TgZ(2,"p"),l._uU(3),l.qZA(),l.qZA()),2&t){var n=l.oxw();l.xp6(1),l.Q6J("src",n.pathPhoto,l.LSH),l.xp6(2),l.Oqu(n.itemSelected.description)}}function f(t,e){1&t&&(l.TgZ(0,"div",3),l.TgZ(1,"p"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.qZA()),2&t&&(l.xp6(2),l.Oqu(l.lcZ(3,1,"PHOTO_MOD.NOT_UPDATE_PHOTO")))}var h,m=((h=function(){function t(e,i,o,r){n(this,t),this.modalCtrl=e,this.pondService=i,this.toastController=o,this.translate=r,this.loadingFlag=new a.E,this.dataRaw=[],this.dateRangeSelected=c().format("YYYY-MM-DD"),this.maxDate=c(),this.minDate=c().subtract(180,"days")}return e(t,[{key:"ngOnInit",value:function(){this.minDate<this.pondService.seasonStartTime&&(this.minDate=this.pondService.seasonStartTime),this.getData()}},{key:"setData",value:function(t){void 0!==t&&(this.pathPhoto=t.image?s.bl.FILE_PATH+"/upload/season/"+this.scode+"/ge_image/"+t.image:"")}},{key:"getData",value:function(){var t=this;this.loadingFlag.setStart(!0),this.pondService.loadDailyPaging({pageIndex:0,pageSize:30},c(this.dateRangeSelected).format("YYYY-MM-DD")).subscribe(function(e){e.data?(t.dataRaw=e.data,console.log(t.dateRangeSelected),t.dataRaw[0].date==c(t.dateRangeSelected).format("YYYY-MM-DD")&&(t.itemSelected=t.dataRaw[0]),t.setData(t.itemSelected),t.loadingFlag.setResult(!0)):t.loadingFlag.setResult(!1)},function(e){t.loadingFlag.setResult(!1),console.log(e)})}},{key:"onChangeDate",value:function(t){this.dateRangeSelected=t.detail.value;var e=c(this.dateRangeSelected);this.itemSelected=this.dataRaw[this.dataRaw.findIndex(function(t){return t.date==e.format("YYYY-MM-DD")})],!this.itemSelected||e<c(this.dataRaw[this.dataRaw.length-1].date)||e>c(this.dataRaw[0].date)?this.getData():this.setData(this.itemSelected)}},{key:"changeDate",value:function(t){var e=c(this.dateRangeSelected).add(t,"days");if(e<this.minDate||e>this.maxDate)return!1;this.dateRangeSelected=e.format("YYYY-MM-DD")}},{key:"processData",value:function(){var t=this;this.itemSelected=this.dataRaw.filter(function(e){return e.date==c(t.dateRangeSelected).format("YYYY-MM-DD")})}}]),t}()).\u0275fac=function(t){return new(t||h)(l.Y36(u.IN),l.Y36(r.p),l.Y36(u.yF),l.Y36(d.sK))},h.\u0275cmp=l.Xpm({type:h,selectors:[["app-daily-photo"]],inputs:{inforDaily:"inforDaily",scode:"scode"},decls:24,vars:13,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-text-center"],["size","2"],["fill","clear",3,"disabled","click"],["slot","icon-only","name","arrow-back-outline"],["size","8"],[1,"ion-text-center","w-100",3,"displayFormat","min","max","value","ionChange"],["slot","icon-only","name","arrow-forward-outline"],["class","ion-text-center",4,"ngIf"],[3,"src"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",0),l.TgZ(3,"ion-button",1),l.NdJ("click",function(){return e.modalCtrl.dismiss()}),l._UZ(4,"ion-icon",2),l.qZA(),l.qZA(),l.TgZ(5,"ion-title"),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(8,"ion-content"),l.TgZ(9,"div",3),l.TgZ(10,"ion-grid"),l.TgZ(11,"ion-row"),l.TgZ(12,"ion-col",4),l.TgZ(13,"ion-button",5),l.NdJ("click",function(){return e.changeDate(-1)}),l._UZ(14,"ion-icon",6),l.qZA(),l.qZA(),l.TgZ(15,"ion-col",7),l.TgZ(16,"ion-item"),l.TgZ(17,"ion-datetime",8),l.NdJ("ionChange",function(t){return e.onChangeDate(t)}),l.ALo(18,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"ion-col",4),l.TgZ(20,"ion-button",5),l.NdJ("click",function(){return e.changeDate(1)}),l._UZ(21,"ion-icon",9),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(22,p,4,2,"div",10),l.YNc(23,f,4,3,"div",10),l.qZA()),2&t&&(l.xp6(6),l.Oqu(l.lcZ(7,9,"PHOTO_MOD.DAILY_PHOTO")),l.xp6(7),l.Q6J("disabled",e.dateRangeSelected<=e.minDate.format("YYYY-MM-DD")),l.xp6(4),l.Q6J("displayFormat",l.lcZ(18,11,"FORMAT_DATE_MOMENT"))("min",e.minDate.format("YYYY-MM-DD"))("max",e.maxDate.format("YYYY-MM-DD"))("value",e.dateRangeSelected),l.xp6(3),l.Q6J("disabled",e.dateRangeSelected>=e.maxDate.format("YYYY-MM-DD")),l.xp6(2),l.Q6J("ngIf",e.itemSelected),l.xp6(1),l.Q6J("ngIf",!e.itemSelected))},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.wd,u.W2,u.jY,u.Nd,u.wI,u.Ie,u.x4,u.QI,g.O5],pipes:[d.X$],styles:[""]}),h)},1965:function(t,i,o){o.d(i,{z:function(){return T}});var a=o(64762),r=o(27887),s=o(22923),c=o(80272),l=o(37716),u=o(47063),d=o(81780),g=o(71239),p=o(84465),f=o(90665),h=o(38583);function m(t,e){if(1&t&&(l.TgZ(0,"ion-segment-button",9),l.TgZ(1,"p"),l._uU(2),l.qZA(),l.qZA()),2&t){var n=e.$implicit;l.Q6J("value",e.index),l.xp6(2),l.Oqu(null==n||null==n.infor?null:n.infor.name)}}function Z(t,e){if(1&t){var n=l.EpF();l.TgZ(0,"ion-item",1),l.NdJ("click",function(){var t=l.CHM(n).$implicit;return l.oxw().selectedItem(t)}),l.TgZ(1,"ion-label",10),l.TgZ(2,"ion-text",11),l._uU(3),l.qZA(),l._uU(4),l.TgZ(5,"p"),l._uU(6),l.qZA(),l.qZA(),l.TgZ(7,"ion-text",12),l._uU(8),l.qZA(),l.TgZ(9,"ion-button",13),l._UZ(10,"ion-icon",14),l.qZA(),l.qZA()}if(2&t){var i=e.$implicit;l.xp6(3),l.hij("",i.manufacturer_name,"-"),l.xp6(1),l.hij("",i.product_name," "),l.xp6(2),l.Oqu(i.manufacturer_name),l.xp6(1),l.Q6J("color",i.quantity_current<=5?"danger":"success"),l.xp6(1),l.AsE("",i.quantity_current," ",i.unit,"")}}function v(t,e){1&t&&(l.TgZ(0,"div",3),l._UZ(1,"ion-spinner",15),l.qZA())}var A,T=((A=function(){function t(e,i,o,a,s,c){n(this,t),this.modalControler=e,this.translate=i,this.storeService=o,this.dbLocalService=a,this.toastService=s,this.pondService=c,this.loadingFlag=new r.E,this.savingFlag=new r.E,this.listProduct=[],this.index=-1}return e(t,[{key:"ngOnInit",value:function(){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadStore();case 2:case"end":return t.stop()}},t,this)}))}},{key:"changeStore",value:function(t){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!t,e.t0){e.next=5;break}return this.index=t,e.next=5,this.loadStore();case 5:case"end":return e.stop()}},e,this)}))}},{key:"save",value:function(){}},{key:"loadStore",value:function(){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n,i,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.loadingFlag.setPending(!0),this.listProduct=[],(e=this.dbLocalService.farms.find(function(t){return t.infor.id==o.pondService.pond.farm_id}))&&0!=this.dbLocalService.stores.filter(function(t){return t.infor.farm_code==e.infor.code}).length){t.next=7;break}return t.next=5,this.storeService.getApiStore("get-list-avaiable","&pcode="+this.pondService.pcode,"manager/pond-store-api").toPromise().catch(function(){o.toastService.danger(o.translate.instant("ERROR_CONNECT"))});case 5:1==(n=t.sent).status?(this.dbLocalService.stores=n.data.map(function(t){return{infor:t,store:[]}}),this.dbLocalService.setLocalData("stores",this.dbLocalService.stores)):this.toastService.warning(n.error);case 7:return this.index<0&&(this.index=this.item?-1==this.dbLocalService.stores.findIndex(function(t){return t.infor.code==o.item.wcode})?0:this.dbLocalService.stores.findIndex(function(t){return t.infor.code==o.item.wcode}):0),t.next=10,this.storeService.getApiStore("get-list-product","&pcode="+this.pondService.pcode+"&wcode="+this.dbLocalService.stores[this.index].infor.code,"manager/pond-store-api").toPromise().catch(function(){o.toastService.danger(o.translate.instant("ERROR_CONNECT"))});case 10:1==(i=t.sent).status?(this.dbLocalService.stores[this.index].store=i.data,this.listProduct=i.data.filter(function(t){return t.group_id==o.groupId}),this.dbLocalService.setLocalData("stores",this.dbLocalService.stores)):this.toastService.warning(i.error),this.loadingFlag.setResult(!0);case 12:case"end":return t.stop()}},t,this)}))}},{key:"selectedItem",value:function(t){this.modalControler.dismiss({product_id:t.product_id,product_name:t.product_name,wcode:t.wcode,store_name:this.dbLocalService.stores[this.index].infor.name,quantity_current:t.quantity_current?t.quantity_current:0,quantity:this.item?this.item.quantity:"",unit:t.unit,packing:t.packing})}}]),t}()).\u0275fac=function(t){return new(t||A)(l.Y36(u.IN),l.Y36(d.sK),l.Y36(s.d),l.Y36(g.T),l.Y36(p.k),l.Y36(c.p))},A.\u0275cmp=l.Xpm({type:A,selectors:[["app-options-product"]],inputs:{groupId:"groupId",item:"item"},decls:17,vars:7,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-text-center"],[1,"title","ion-padding"],["scrollable","","layout","icon-bottom",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"click",4,"ngFor","ngForOf"],["class","ion-text-center",4,"ngIf"],[3,"value"],[1,"ion-text-wrap"],["color","medium"],[3,"color"],["size","small","fill","clear"],["name","add-outline","slot","end"],["name","dots"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-title"),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"ion-buttons",0),l.TgZ(6,"ion-button",1),l.NdJ("click",function(){return e.modalControler.dismiss()}),l._UZ(7,"ion-icon",2),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(8,"ion-content"),l.TgZ(9,"div",3),l.TgZ(10,"div",4),l.TgZ(11,"ion-segment",5),l.NdJ("ngModelChange",function(t){return e.index=t})("ionChange",function(t){return e.changeStore(t.detail.value)}),l.YNc(12,m,3,2,"ion-segment-button",6),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",3),l.TgZ(14,"ion-list"),l.YNc(15,Z,11,6,"ion-item",7),l.qZA(),l.qZA(),l.YNc(16,v,2,0,"div",8),l.qZA()),2&t&&(l.xp6(3),l.Oqu(l.lcZ(4,5,"POND_MOD.ADD_FEED")),l.xp6(8),l.Q6J("ngModel",e.index),l.xp6(1),l.Q6J("ngForOf",null==e.dbLocalService?null:e.dbLocalService.stores),l.xp6(3),l.Q6J("ngForOf",e.listProduct),l.xp6(1),l.Q6J("ngIf",e.loadingFlag.pending))},directives:[u.Gu,u.sr,u.wd,u.Sm,u.YG,u.gu,u.W2,u.cJ,u.QI,f.JJ,f.On,h.sg,u.q_,h.O5,u.GO,u.Ie,u.Q$,u.yW,u.PQ],pipes:[d.X$],styles:[""]}),A)},98626:function(t,i,o){o.d(i,{A:function(){return l}});var a,r=o(37716),s=o(47063),c=o(81780),l=((a=function(){function t(e,i){n(this,t),this.popoverCtrl=e,this.translate=i}return e(t,[{key:"ngOnInit",value:function(){}},{key:"chooseMod",value:function(t){this.popoverCtrl.dismiss(t)}}]),t}()).\u0275fac=function(t){return new(t||a)(r.Y36(s.Dh),r.Y36(c.sK))},a.\u0275cmp=r.Xpm({type:a,selectors:[["app-pond-menu"]],decls:19,vars:9,consts:[["lines","none"],["button","",3,"click"],["slot","end"],["name","cog-outline"],["name","reorder-three-outline"],["name","add-circle-outline"]],template:function(t,e){1&t&&(r.TgZ(0,"ion-list",0),r.TgZ(1,"ion-item",1),r.NdJ("click",function(){return e.chooseMod("setting")}),r.TgZ(2,"ion-text"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.TgZ(5,"ion-text",2),r._UZ(6,"ion-icon",3),r.qZA(),r.qZA(),r.TgZ(7,"ion-item",1),r.NdJ("click",function(){return e.chooseMod("sort")}),r.TgZ(8,"ion-text"),r._uU(9),r.ALo(10,"translate"),r.qZA(),r.TgZ(11,"ion-text",2),r._UZ(12,"ion-icon",4),r.qZA(),r.qZA(),r.TgZ(13,"ion-item",1),r.NdJ("click",function(){return e.chooseMod("add-item")}),r.TgZ(14,"ion-text"),r._uU(15),r.ALo(16,"translate"),r.qZA(),r.TgZ(17,"ion-text",2),r._UZ(18,"ion-icon",5),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(3),r.hij(" ",r.lcZ(4,3,"POND_MOD.SETTING_AND_CONFIG")," "),r.xp6(6),r.hij(" ",r.lcZ(10,5,"POND_MOD.SORT")," "),r.xp6(6),r.hij(" ",r.lcZ(16,7,"POND_MOD.ADD_ITEM")," "))},directives:[s.q_,s.Ie,s.yW,s.gu],pipes:[c.X$],styles:[""]}),a)},89858:function(t,i,o){o.d(i,{F:function(){return h}});var a=o(90665),r=o(27887),s=o(82629),c=o(37716),l=o(47063),u=o(84465),d=o(81780),g=o(38583);function p(t,e){1&t&&c._UZ(0,"ion-progress-bar",13)}var f,h=((f=function(){function t(e,i,o,s){n(this,t),this.modalController=e,this.toastService=i,this.iotService=o,this.translate=s,this.list=[],this.loading=new r.E,this.form=new a.cw({condition:new a.NI("",a.kI.required),value:new a.NI("",a.kI.required)})}return e(t,[{key:"ngOnInit",value:function(){}},{key:"close",value:function(){this.modalController.dismiss()}},{key:"save",value:function(){var t=this;this.iotService.addConditonPub(this.deviceId,this.config[this.index].id,this.form.value).subscribe(function(e){1==e.status?(t.toastService.success(t.translate.instant("DEVICE_MOD.UPDATE_SUCCESS")),t.modalController.dismiss(t.form.value)):t.toastService.warning(e.error)},function(e){t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}}]),t}()).\u0275fac=function(t){return new(t||f)(c.Y36(l.IN),c.Y36(u.k),c.Y36(s.d),c.Y36(d.sK))},f.\u0275cmp=c.Xpm({type:f,selectors:[["app-add-condition"]],inputs:{config:"config",deviceId:"deviceId",index:"index"},decls:43,vars:38,consts:[["slot","start"],[3,"click"],["name","close"],["slot","end","fill","clear",3,"click"],["type","indeterminate",4,"ngIf"],[3,"formGroup"],["formControlName","condition","okText","Okay","cancelText","Dismiss"],["value",">"],["value",">="],["value","<"],["value","<="],["value","="],["formControlName","value","type","number"],["type","indeterminate"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"ion-buttons",0),c.TgZ(6,"ion-button",1),c.NdJ("click",function(){return e.close()}),c._UZ(7,"ion-icon",2),c.qZA(),c.qZA(),c.TgZ(8,"ion-button",3),c.NdJ("click",function(){return e.save()}),c._uU(9," L\u01b0u "),c.qZA(),c.qZA(),c.qZA(),c.YNc(10,p,1,0,"ion-progress-bar",4),c.TgZ(11,"ion-content"),c.TgZ(12,"ion-card",5),c.TgZ(13,"ion-list"),c.TgZ(14,"ion-item"),c.TgZ(15,"ion-label"),c._uU(16),c.ALo(17,"translate"),c.qZA(),c.TgZ(18,"ion-select",6),c.TgZ(19,"ion-select-option",7),c._uU(20),c.ALo(21,"translate"),c.qZA(),c.TgZ(22,"ion-select-option",8),c._uU(23),c.ALo(24,"translate"),c.ALo(25,"translate"),c.ALo(26,"translate"),c.qZA(),c.TgZ(27,"ion-select-option",9),c._uU(28),c.ALo(29,"translate"),c.qZA(),c.TgZ(30,"ion-select-option",10),c._uU(31),c.ALo(32,"translate"),c.ALo(33,"translate"),c.ALo(34,"translate"),c.qZA(),c.TgZ(35,"ion-select-option",11),c._uU(36),c.ALo(37,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(38,"ion-item"),c.TgZ(39,"ion-label"),c._uU(40),c.ALo(41,"translate"),c.qZA(),c._UZ(42,"ion-input",12),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Oqu(c.lcZ(4,14,"DEVICE_MOD.CONFIG_CONDITION")),c.xp6(7),c.Q6J("ngIf",e.loading.pending),c.xp6(2),c.Q6J("formGroup",e.form),c.xp6(4),c.Oqu(c.lcZ(17,16,"DEVICE_MOD.CHOOSE_CONDITION")),c.xp6(4),c.Oqu(c.lcZ(21,18,"DEVICE_MOD.GREATER_THAN")),c.xp6(3),c.lnq("",c.lcZ(24,20,"DEVICE_MOD.GREATER_THAN")," ",c.lcZ(25,22,"DEVICE_MOD.OR")," ",c.lcZ(26,24,"DEVICE_MOD.SAME"),""),c.xp6(5),c.Oqu(c.lcZ(29,26,"DEVICE_MOD.LESS_THAN")),c.xp6(3),c.lnq("",c.lcZ(32,28,"DEVICE_MOD.LESS_THAN")," ",c.lcZ(33,30,"DEVICE_MOD.OR")," ",c.lcZ(34,32,"DEVICE_MOD.SAME"),""),c.xp6(5),c.Oqu(c.lcZ(37,34,"DEVICE_MOD.SAME")),c.xp6(4),c.Oqu(c.lcZ(41,36,"DEVICE_MOD.VALUE_WARNING")))},directives:[l.Gu,l.sr,l.wd,l.Sm,l.YG,l.gu,g.O5,l.W2,l.PM,a.JL,a.sg,l.q_,l.Ie,l.Q$,l.t9,l.QI,a.JJ,a.u,l.n0,l.pK,l.as,l.X7],pipes:[d.X$],styles:[""]}),f)},42812:function(t,i,o){o.d(i,{u:function(){return v}});var a=o(64762),r=o(27887),s=o(82629),c=o(37716),l=o(47063),u=o(84465),d=o(81780),g=o(38583),p=o(90665);function f(t,e){1&t&&c._UZ(0,"ion-progress-bar",10)}function h(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"ion-item"),c.TgZ(1,"ion-label"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"ion-buttons",12),c.TgZ(5,"ion-button",1),c.NdJ("click",function(){var t=c.CHM(n).index;return c.oxw(2).remove(t)}),c._UZ(6,"ion-icon",14),c.qZA(),c.qZA(),c.qZA()}if(2&t){var i=e.$implicit;c.xp6(2),c.AsE("",c.lcZ(3,2,"DEVICE_MOD.AT")," ",i,"")}}function m(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"div"),c.YNc(1,h,7,4,"ion-item",11),c.TgZ(2,"ion-item"),c.TgZ(3,"ion-buttons",12),c.TgZ(4,"ion-button",1),c.NdJ("click",function(){return c.CHM(n),c.oxw().openPicker(24,1)}),c._UZ(5,"ion-icon",13),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){var i=c.oxw();c.xp6(1),c.Q6J("ngForOf",i.custom_setting)}}var Z,v=((Z=function(){function t(e,i,o,a,s){n(this,t),this.modalController=e,this.toastService=i,this.iotService=o,this.translate=a,this.pickerController=s,this.loading=new r.E,this.mode_data="",this.custom_setting=[]}return e(t,[{key:"ngOnInit",value:function(){Object.keys(this.config).length>0?(this.mode_data=this.config.mode_data,this.custom_setting=JSON.parse(this.config.custom_setting)?JSON.parse(this.config.custom_setting):[]):(this.mode_data="basic",this.custom_setting=[])}},{key:"close",value:function(){this.modalController.dismiss()}},{key:"getColumns",value:function(t,e){return[{name:"col",selectedIndex:e,options:this.getColumnOptions(t)}]}},{key:"getColumnOptions",value:function(t){for(var e=[],n=0;n<t;n++)e.push(n<10?{text:"0"+n,value:n}:{text:n,value:n});return e}},{key:"openPicker",value:function(t,e){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.pickerController.create({columns:this.getColumns(t,e),buttons:[{text:"Cancel",role:"cancel"},{text:"Confirm",handler:function(t){console.log(i.custom_setting),i.custom_setting.includes(t.col.value)||i.custom_setting.push(t.col.value)}}]});case 2:return n.next=4,n.sent.present();case 4:case"end":return n.stop()}},n,this)}))}},{key:"remove",value:function(t){this.custom_setting.splice(t,1)}},{key:"save",value:function(){var t=this,e={mode_data:this.mode_data,custom_setting:JSON.stringify(this.custom_setting)};this.loading.setPending(!0),this.iotService.saveAutoRecord(this.deviceId,e).subscribe(function(n){1==n.status?(t.modalController.dismiss(e),t.toastService.success(t.translate.instant("FARM_MOD.SAVED"))):t.toastService.warning(t.translate.instant("DEVICE_MOD.SAVE_ERROR")),t.loading.setResult(!0)},function(){t.loading.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}}]),t}()).\u0275fac=function(t){return new(t||Z)(c.Y36(l.IN),c.Y36(u.k),c.Y36(s.d),c.Y36(d.sK),c.Y36(l.up))},Z.\u0275cmp=c.Xpm({type:Z,selectors:[["app-config-record"]],inputs:{config:"config",deviceId:"deviceId"},decls:29,vars:18,consts:[["slot","start"],[3,"click"],["name","close"],["slot","end","fill","clear",3,"click"],["type","indeterminate",4,"ngIf"],["okText","Okay","cancelText","Dismiss",3,"ngModel","ngModelChange"],["value","no"],["value","basic"],["value","custom"],[4,"ngIf"],["type","indeterminate"],[4,"ngFor","ngForOf"],["slot","end"],["slot","icon-only","name","add-circle-outline"],["slot","icon-only","name","remove-circle-outline"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"ion-buttons",0),c.TgZ(6,"ion-button",1),c.NdJ("click",function(){return e.close()}),c._UZ(7,"ion-icon",2),c.qZA(),c.qZA(),c.TgZ(8,"ion-button",3),c.NdJ("click",function(){return e.save()}),c._uU(9," L\u01b0u "),c.qZA(),c.qZA(),c.qZA(),c.YNc(10,f,1,0,"ion-progress-bar",4),c.TgZ(11,"ion-content"),c.TgZ(12,"ion-card"),c.TgZ(13,"ion-list"),c.TgZ(14,"ion-item"),c.TgZ(15,"ion-label"),c._uU(16),c.ALo(17,"translate"),c.qZA(),c.TgZ(18,"ion-select",5),c.NdJ("ngModelChange",function(t){return e.mode_data=t}),c.TgZ(19,"ion-select-option",6),c._uU(20),c.ALo(21,"translate"),c.qZA(),c.TgZ(22,"ion-select-option",7),c._uU(23),c.ALo(24,"translate"),c.qZA(),c.TgZ(25,"ion-select-option",8),c._uU(26),c.ALo(27,"translate"),c.qZA(),c.qZA(),c.qZA(),c.YNc(28,m,6,1,"div",9),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Oqu(c.lcZ(4,8,"DEVICE_MOD.CONFIG_CONDITION")),c.xp6(7),c.Q6J("ngIf",e.loading.pending),c.xp6(6),c.Oqu(c.lcZ(17,10,"DEVICE_MOD.CHOOSE_TIME")),c.xp6(2),c.Q6J("ngModel",e.mode_data),c.xp6(2),c.Oqu(c.lcZ(21,12,"DEVICE_MOD.NO_RECORD")),c.xp6(3),c.Oqu(c.lcZ(24,14,"DEVICE_MOD.BASIC_RECORD")),c.xp6(3),c.Oqu(c.lcZ(27,16,"DEVICE_MOD.CUSTOM_RECORD")),c.xp6(2),c.Q6J("ngIf","custom"==e.mode_data))},directives:[l.Gu,l.sr,l.wd,l.Sm,l.YG,l.gu,g.O5,l.W2,l.PM,l.q_,l.Ie,l.Q$,l.t9,l.QI,p.JJ,p.On,l.n0,l.X7,g.sg],pipes:[d.X$],styles:[""]}),Z)},53306:function(t,i,o){o.d(i,{V:function(){return m}});var a=o(27887),r=o(80272),s=o(37716),c=o(47063),l=o(81780),u=o(84465),d=o(38583);function g(t,e){if(1&t&&(s.TgZ(0,"ion-row"),s.TgZ(1,"ion-col",3),s._uU(2),s.qZA(),s.TgZ(3,"ion-col",4),s._uU(4),s.ALo(5,"date"),s.qZA(),s.TgZ(6,"ion-col",5),s._uU(7),s.ALo(8,"number"),s.qZA(),s.TgZ(9,"ion-col",5),s.TgZ(10,"ion-text",9),s._uU(11),s.ALo(12,"number"),s.qZA(),s.qZA(),s.qZA()),2&t){var n=e.$implicit,i=e.index;s.xp6(2),s.hij(" ",i+1," "),s.xp6(2),s.hij(" ",s.xi3(5,4,1e3*n.time,"dd-MM")," "),s.xp6(3),s.hij(" ",s.xi3(8,7,n.volume_exchange,"0.0-1")," "),s.xp6(4),s.hij(" ",s.xi3(12,10,n.price_cubic,"0.0-0")," ")}}function p(t,e){1&t&&(s.TgZ(0,"div",10),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&t&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"POND_MOD.NO_ITEM")," "))}function f(t,e){1&t&&(s.TgZ(0,"div",11),s._UZ(1,"ion-spinner",12),s.qZA())}var h,m=((h=function(){function t(e,i,o,r){n(this,t),this.modalController=e,this.translate=i,this.toastService=o,this.pondService=r,this.list=[],this.loadingFlag=new a.E}return e(t,[{key:"ngOnInit",value:function(){this.getList()}},{key:"getList",value:function(){var t=this;this.loadingFlag.setStart(!0),this.list=[],this.pondService.getListExchange().subscribe(function(e){1==e.status?t.list=e.data:t.toastService.warning(e.error),t.loadingFlag.setResult(!0)},function(){t.loadingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}}]),t}()).\u0275fac=function(t){return new(t||h)(s.Y36(c.IN),s.Y36(l.sK),s.Y36(u.k),s.Y36(r.p))},h.\u0275cmp=s.Xpm({type:h,selectors:[["app-season-exchange-list"]],decls:29,vars:15,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["size","1"],["size","3"],["size","4",1,"ion-text-right"],[4,"ngFor","ngForOf"],["class","ion-padding ion-text-center",4,"ngIf"],["class","spiner-loading",4,"ngIf"],["color","danger"],[1,"ion-padding","ion-text-center"],[1,"spiner-loading"],["name","dots"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return e.modalController.dismiss()}),s._UZ(4,"ion-icon",2),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"ion-content"),s.TgZ(9,"ion-grid"),s.TgZ(10,"ion-row"),s.TgZ(11,"ion-col",3),s._uU(12,"#"),s.qZA(),s.TgZ(13,"ion-col",4),s._uU(14),s.ALo(15,"translate"),s.qZA(),s.TgZ(16,"ion-col",5),s._uU(17),s.ALo(18,"translate"),s.TgZ(19,"sup"),s._uU(20,"3"),s.qZA(),s.qZA(),s.TgZ(21,"ion-col",5),s._uU(22),s.ALo(23,"translate"),s.TgZ(24,"sup"),s._uU(25,"3"),s.qZA(),s.qZA(),s.qZA(),s.YNc(26,g,13,13,"ion-row",6),s.qZA(),s.YNc(27,p,3,3,"div",7),s.YNc(28,f,2,0,"div",8),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,7,"POND_MOD.WATER_TREAMENT")),s.xp6(8),s.Oqu(s.lcZ(15,9,"ASSISTANT.TIME")),s.xp6(3),s.hij("",s.lcZ(18,11,"CROP_MOD.VOLUME"),"m"),s.xp6(5),s.hij("",s.lcZ(23,13,"CURRENCY_L"),"/m"),s.xp6(4),s.Q6J("ngForOf",e.list),s.xp6(1),s.Q6J("ngIf",(null==e.list?null:e.list.length)<=0),s.xp6(1),s.Q6J("ngIf",e.loadingFlag.pending))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.wd,c.W2,c.jY,c.Nd,c.wI,d.sg,d.O5,c.yW,c.PQ],pipes:[l.X$,d.uU,d.JJ],styles:[""]}),h)},54438:function(t,i,o){o.d(i,{Z:function(){return p}});var a,r=o(27887),s=o(80272),c=o(37716),l=o(47063),u=o(84465),d=o(81780),g=o(56209),p=((a=function(){function t(e,i,o,a){n(this,t),this.modalController=e,this.pondService=i,this.toastService=o,this.translate=a,this.list=[],this.loadingFlag=new r.E}return e(t,[{key:"ngOnInit",value:function(){this.getListProduct()}},{key:"getListProduct",value:function(){var t=this;this.loadingFlag.setStart(!0),this.list=[],this.pondService.getListOtherCost(this.code).subscribe(function(e){1==e.status?(t.list=e.data,t.initChart(t.list)):t.toastService.warning(e.error),t.loadingFlag.setResult(!0)},function(){t.loadingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"initChart",value:function(t){var e=this;this.optionChart={tooltip:{trigger:"axis",formatter:function(t){return console.log(t),console.log(e.list[t[0].dataIndex].note_general),e.translate.instant("POND_MOD.INCOME_OTHER")+": "+t[0].data+"\u0111 <br/>"+e.translate.instant("POND_MOD.COST_OTHER")+": "+t[1].data+"\u0111 <br/>"+e.list[t[0].dataIndex].note_general}},position:["30%","50%"],legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",boundaryGap:[0,.01]},xAxis:{type:"category",data:t.map(function(t){return t.date})},series:[{name:this.translate.instant("POND_MOD.INCOME_OTHER"),type:"bar",data:t.map(function(t){return t.income})},{name:this.translate.instant("POND_MOD.COST_OTHER"),type:"bar",data:t.map(function(t){return t.cost_other})}]}}}]),t}()).\u0275fac=function(t){return new(t||a)(c.Y36(l.IN),c.Y36(s.p),c.Y36(u.k),c.Y36(d.sK))},a.\u0275cmp=c.Xpm({type:a,selectors:[["app-season-other-cost-list"]],inputs:{code:"code"},decls:10,vars:4,consts:[["mode","ios"],["slot","start"],[3,"click"],["slot","icon-only","name","close"],["echarts","",3,"options"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header",0),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",1),c.TgZ(3,"ion-button",2),c.NdJ("click",function(){return e.modalController.dismiss()}),c._UZ(4,"ion-icon",3),c.qZA(),c.qZA(),c.TgZ(5,"ion-title"),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"ion-content"),c._UZ(9,"div",4),c.qZA()),2&t&&(c.xp6(6),c.Oqu(c.lcZ(7,2,"POND_MOD.COST_OTHER")),c.xp6(3),c.Q6J("options",e.optionChart))},directives:[l.Gu,l.sr,l.Sm,l.YG,l.gu,l.wd,l.W2,g._w],pipes:[d.X$],styles:[""]}),a)},38800:function(t,i,o){o.d(i,{K:function(){return A}});var a=o(64762),r=o(27887),s=o(82629),c=o(37716),l=o(47063),u=o(84465),d=o(81780),g=o(38583);function p(t,e){1&t&&c._UZ(0,"ion-progress-bar",9)}function f(t,e){1&t&&(c.TgZ(0,"span"),c._uU(1,"0"),c.qZA())}function h(t,e){1&t&&(c.TgZ(0,"span"),c._uU(1,"0"),c.qZA())}function m(t,e){1&t&&(c.TgZ(0,"span"),c._uU(1,"0"),c.qZA())}function Z(t,e){1&t&&(c.TgZ(0,"span"),c._uU(1,"0"),c.qZA())}var v,A=((v=function(){function t(e,i,o,a,s){n(this,t),this.modalController=e,this.toastService=i,this.iotService=o,this.pickerController=a,this.translate=s,this.minStart=40,this.minEnd=50,this.hourStart=23,this.hourEnd=23,this.loading=new r.E}return e(t,[{key:"ngOnInit",value:function(){this.hourStart=(this.listTimer[this.index].start_int/100).toFixed(0),this.minStart=this.listTimer[this.index].start_int-100*this.hourStart,this.hourEnd=(this.listTimer[this.index].end_int/100).toFixed(0),this.minEnd=this.listTimer[this.index].end_int-100*this.hourEnd}},{key:"close",value:function(){this.modalController.dismiss()}},{key:"getColumns",value:function(t,e){return[{name:"col",selectedIndex:e,options:this.getColumnOptions(t)}]}},{key:"getColumnOptions",value:function(t){for(var e=[],n=0;n<t;n++)e.push(n<10?{text:"0"+n,value:n}:{text:n,value:n});return e}},{key:"openPicker",value:function(t,e,n){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var o=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.pickerController.create({columns:this.getColumns(t,n),buttons:[{text:"Cancel",role:"cancel"},{text:"Confirm",handler:function(t){console.log(t),1==e?o.hourStart=t.col.value:2==e?o.minStart=t.col.value:3==e?o.hourEnd=t.col.value:o.minEnd=t.col.value}}]});case 2:return i.next=4,i.sent.present();case 4:case"end":return i.stop()}},i,this)}))}},{key:"checkTimer",value:function(){var t=100*this.hourStart+this.minStart,e=100*this.hourEnd+this.minEnd,n=!0;return this.listTimer.forEach(function(i){t>=i.start&&e<=i.end&&(n=!1)}),console.log(n),n}},{key:"save",value:function(){var t=this;if(this.hourEnd==this.hourStart&&this.minEnd==this.minStart)this.toastService.warning(this.translate.instant("DEVICE_MOD.DUPLICATE_TIMER"));else if(1==this.checkTimer()){var e={start:(this.hourStart<9?"0":"")+this.hourStart.toString()+(this.minStart<9?"0":"")+this.minStart.toString(),end:(this.hourEnd<9?"0":"")+this.hourEnd.toString()+(this.minEnd<9?"0":"")+this.minEnd.toString(),index:parseInt(this.index)+1,enable:this.listTimer[this.index].enable};this.loading.setPending(!0),this.iotService.updateTimer(this.contactorId,this.deviceId,e).subscribe(function(n){n.status?(t.modalController.dismiss(e),t.loading.setResult(!0),t.toastService.success(t.translate.instant("DEVICE_MOD.UPDATE_SUCCESS"))):(t.loading.setResult(!0),console.log(n),t.toastService.warning(t.translate.instant("DEVICE_MOD.UPDATE_UNSUCCESS")))},function(){t.loading.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}else this.toastService.danger(this.translate.instant("DEVICE_MOD.EXIST_TIMER"))}}]),t}()).\u0275fac=function(t){return new(t||v)(c.Y36(l.IN),c.Y36(u.k),c.Y36(s.d),c.Y36(l.up),c.Y36(d.sK))},v.\u0275cmp=c.Xpm({type:v,selectors:[["app-update-timer"]],inputs:{listTimer:"listTimer",index:"index",deviceId:"deviceId",contactorId:"contactorId"},decls:33,vars:15,consts:[["slot","start"],[3,"click"],["name","close"],["slot","end","fill","clear",3,"click"],["type","indeterminate",4,"ngIf"],["lines","none"],["fill","clear","expand","outline","size","small","color","tb",3,"click"],[4,"ngIf"],[2,"text-align","center"],["type","indeterminate"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"ion-buttons",0),c.TgZ(6,"ion-button",1),c.NdJ("click",function(){return e.close()}),c._UZ(7,"ion-icon",2),c.qZA(),c.qZA(),c.TgZ(8,"ion-button",3),c.NdJ("click",function(){return e.save()}),c._uU(9," L\u01b0u "),c.qZA(),c.qZA(),c.qZA(),c.YNc(10,p,1,0,"ion-progress-bar",4),c.TgZ(11,"ion-content"),c.TgZ(12,"ion-card"),c.TgZ(13,"ion-card-header"),c.TgZ(14,"ion-card-subtitle"),c._uU(15),c.ALo(16,"translate"),c.qZA(),c.qZA(),c.TgZ(17,"ion-card-content"),c.TgZ(18,"ion-item",5),c.TgZ(19,"ion-button",6),c.NdJ("click",function(){return e.openPicker(24,1,e.hourStart)}),c.YNc(20,f,2,0,"span",7),c._uU(21),c.qZA(),c.TgZ(22,"ion-button",6),c.NdJ("click",function(){return e.openPicker(60,2,e.minStart)}),c.YNc(23,h,2,0,"span",7),c._uU(24),c.qZA(),c.TgZ(25,"ion-label",8),c._uU(26,"~"),c.qZA(),c.TgZ(27,"ion-button",6),c.NdJ("click",function(){return e.openPicker(24,3,e.hourEnd)}),c.YNc(28,m,2,0,"span",7),c._uU(29),c.qZA(),c.TgZ(30,"ion-button",6),c.NdJ("click",function(){return e.openPicker(60,4,e.minEnd)}),c.YNc(31,Z,2,0,"span",7),c._uU(32),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Oqu(c.lcZ(4,11,"DEVICE_MOD.UPDATE_TIMER")),c.xp6(7),c.Q6J("ngIf",e.loading.pending),c.xp6(5),c.Oqu(c.lcZ(16,13,"DEVICE_MOD.PERIOD")),c.xp6(5),c.Q6J("ngIf",e.hourStart<10),c.xp6(1),c.Oqu(e.hourStart),c.xp6(2),c.Q6J("ngIf",e.minStart<10),c.xp6(1),c.Oqu(e.minStart),c.xp6(4),c.Q6J("ngIf",e.hourEnd<10),c.xp6(1),c.Oqu(e.hourEnd),c.xp6(2),c.Q6J("ngIf",e.minEnd<10),c.xp6(1),c.Oqu(e.minEnd))},directives:[l.Gu,l.sr,l.wd,l.Sm,l.YG,l.gu,g.O5,l.W2,l.PM,l.Zi,l.tO,l.FN,l.Ie,l.Q$,l.X7],pipes:[d.X$],styles:[""]}),v)},10086:function(t,i,o){o.d(i,{d:function(){return l}});var a,r=o(88002),s=o(15189),c=o(37716),l=((a=function(){function t(e){n(this,t),this.reqAPIService=e,this.API_PATH={EDIT:"/procedure/procedure-api",USED_LIST:"/procedure/procedure-api-mobie"}}return e(t,[{key:"setCompanyCode",value:function(t){this.companyCode=t}},{key:"setSelectedId",value:function(t){this.selectedId=t}},{key:"getProcedures",value:function(){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=get-list&sub=list&ccode="+this.companyCode).pipe((0,r.U)(function(t){return t}))}},{key:"getProceduresPrivate",value:function(){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=private-list&ccode="+this.companyCode)}},{key:"getProceduresV2",value:function(){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=get-list&sub=procedure&ccode="+this.companyCode).pipe((0,r.U)(function(t){return t}))}},{key:"getProcedureDetail",value:function(t){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=detail&id="+t).pipe((0,r.U)(function(t){return t}))}},{key:"getProcedureRawDetail",value:function(t){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=raw-detail&id="+t).pipe((0,r.U)(function(t){return t}))}},{key:"insertProcedure",value:function(t){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=add&ccode="+this.companyCode+"&procedure_id="+t).pipe((0,r.U)(function(t){return t}))}},{key:"searchProcedure",value:function(t){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=get-list&sub=search&ccode="+this.companyCode+"&key="+t).pipe((0,r.U)(function(t){return t}))}},{key:"checkPackage",value:function(){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=check&ccode="+this.companyCode).pipe((0,r.U)(function(t){return t}))}},{key:"lock",value:function(t,e){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=lock&ccode="+this.companyCode+"&id="+t+"&lock="+e).pipe((0,r.U)(function(t){return t}))}},{key:"delete",value:function(t){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=detele&ccode="+this.companyCode+"&procedure_id="+t).pipe((0,r.U)(function(t){return t}))}},{key:"updateProcedureInfo",value:function(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=updateInfo&&ccode="+this.companyCode,t)}},{key:"addToCustom",value:function(t){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=addToCustom&&ccode="+this.companyCode+"&procedure_id="+t)}},{key:"removeProceduresPrivate",value:function(t){return this.reqAPIService.get(this.API_PATH.EDIT+"?action=removeCustom&&ccode="+this.companyCode+"&procedure_id="+t)}},{key:"commonAdd",value:function(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=common&sub=add&&ccode="+this.companyCode,{id:this.selectedId,begin:t.begin,end:t.end,repeat:t.repeat,todo:t.todo})}},{key:"commonEdit",value:function(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=common&sub=update&&ccode="+this.companyCode,t)}},{key:"commonDelete",value:function(t){return this.reqAPIService.get(this.API_PATH.EDIT+"?action=common&sub=delete&&ccode="+this.companyCode+"&item="+t)}},{key:"curveAdd",value:function(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=curve&sub=add&&ccode="+this.companyCode,{id:this.selectedId,day:t.day,feed:t.feed,weight:t.weight})}},{key:"curveEdit",value:function(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=curve&sub=update&&ccode="+this.companyCode,t)}},{key:"curveDelete",value:function(t){return this.reqAPIService.get(this.API_PATH.EDIT+"?action=curve&sub=delete&&ccode="+this.companyCode+"&item="+t)}},{key:"problemAdd",value:function(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=problem&sub=add&&ccode="+this.companyCode,{id:this.selectedId,inday:t.inday,keyword:t.keyword,val_match:t.val_match,val_int:t.val_int,todo:t.todo})}},{key:"problemEdit",value:function(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=problem&sub=update&&ccode="+this.companyCode,t)}},{key:"problemDelete",value:function(t){return this.reqAPIService.get(this.API_PATH.EDIT+"?action=problem&sub=delete&&ccode="+this.companyCode+"&item="+t)}}]),t}()).\u0275fac=function(t){return new(t||a)(c.LFG(s.$))},a.\u0275prov=c.Yz7({token:a,factory:a.\u0275fac}),a)},54373:function(t,e,i){i.d(e,{i:function(){return r}});var o,a=i(37716),r=((o=function t(){n(this,t)}).\u0275fac=function(t){return new(t||o)},o.\u0275mod=a.oAB({type:o}),o.\u0275inj=a.cJS({}),o)},24023:function(t,e,i){i.d(e,{E:function(){return u}});var o,a=i(38583),r=i(90665),s=i(47063),c=i(81780),l=i(37716),u=((o=function t(){n(this,t)}).\u0275fac=function(t){return new(t||o)},o.\u0275mod=l.oAB({type:o}),o.\u0275inj=l.cJS({imports:[[s.Pc,a.ez,r.u5,c.aw]]}),o)},25375:function(t,i,o){o.d(i,{k:function(){return m}});var a=o(64762),r=o(37716),s=o(59865),c=o(84267),l=o(47063),u=o(81780),d=o(84465),g=o(38583);function p(t,e){if(1&t&&r._UZ(0,"img",3),2&t){var n=r.oxw();r.Q6J("src",n.data.base+n.data.path,r.LSH)}}function f(t,e){1&t&&r._UZ(0,"img",4)}var h,m=((h=function(){function t(e,i,o,a,s,c){n(this,t),this.actionSheetController=e,this.translate=i,this.camera=o,this.platform=a,this.filePath=s,this.toastService=c,this.toUpload=new r.vpe,this.base=""}return e(t,[{key:"ngOnInit",value:function(){console.log(this.data)}},{key:"upload",value:function(){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.actionSheetController.create({header:this.translate.instant("PHOTO_MOD.CHOOSE_IMAGE"),buttons:[{text:this.translate.instant("ACCOUNT_MOD.NEW_PHOTO"),icon:"camera-outline",handler:function(){e.takePicture(e.camera.PictureSourceType.CAMERA)}},{text:this.translate.instant("ACCOUNT_MOD.LIBRARY"),icon:"albums-outline",handler:function(){e.pickerImage(e.camera.PictureSourceType.PHOTOLIBRARY)}},{text:this.translate.instant("OPTION.CANCEL"),icon:"close-outline",role:"cancel",handler:function(){console.log("Cancel clicked")}}]});case 2:return t.next=4,t.sent.present();case 4:case"end":return t.stop()}},t,this)}))}},{key:"takePicture",value:function(t){var e=this;this.camera.getPicture({quality:100,sourceType:t,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,saveToPhotoAlbum:!1,correctOrientation:!0,targetHeight:500,targetWidth:500}).then(function(t){e.data.name=t.substr(t.lastIndexOf("/")+1),e.data.base="data:image/jpeg;base64,",e.data.path=t,e.convertImage()},function(t){e.toastService.warning(e.translate.instant("ACCOUNT_MOD.ERROR_LIBRARY"))})}},{key:"pickerImage",value:function(t){var e=this;this.camera.getPicture({quality:100,sourceType:t,saveToPhotoAlbum:!1,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,targetHeight:500,targetWidth:500}).then(function(n){e.platform.is("android")&&t===e.camera.PictureSourceType.PHOTOLIBRARY?e.filePath.resolveNativePath(n="file://"+n).then(function(t){e.data.name=n.substring(n.lastIndexOf("/")+1,n.lastIndexOf("?")),e.data.base="data:image/jpeg;base64,",e.data.path=t.replace("file://",""),e.convertImage()}).catch(function(t){console.log(t),e.toastService.warning(e.translate.instant("ACCOUNT_MOD.ERROR"))}):(e.data.base="data:image/jpeg;base64,",e.data.path=n,e.data.name=n.substring(n.lastIndexOf("/")+1,n.lastIndexOf("?")),e.convertImage())},function(t){e.toastService.warning(e.translate.instant("ACCOUNT_MOD.ERROR_LIBRARY"))})}},{key:"dataURItoBlob",value:function(t){for(var e=window.atob(t),n=new ArrayBuffer(e.length),i=new Uint8Array(n),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);return new Blob([i],{type:"image/jpeg"})}},{key:"convertImage",value:function(){var t=this.dataURItoBlob(this.data.path);this.data.file=t,this.toUpload.emit(this.data)}}]),t}()).\u0275fac=function(t){return new(t||h)(r.Y36(l.BX),r.Y36(u.sK),r.Y36(c.V1),r.Y36(l.t4),r.Y36(s.y),r.Y36(d.k))},h.\u0275cmp=r.Xpm({type:h,selectors:[["app-image-picker"]],inputs:{data:"data"},outputs:{toUpload:"toUpload"},decls:7,vars:5,consts:[[1,"ion-text-center",3,"click"],["class","imgRecord",3,"src",4,"ngIf"],["class","imgRecord","src","assets/img/camera.png",4,"ngIf"],[1,"imgRecord",3,"src"],["src","assets/img/camera.png",1,"imgRecord"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.NdJ("click",function(){return e.upload()}),r.TgZ(1,"div"),r.YNc(2,p,1,1,"img",1),r.YNc(3,f,1,0,"img",2),r.qZA(),r.TgZ(4,"ion-text"),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Q6J("ngIf",e.data.path),r.xp6(1),r.Q6J("ngIf",!e.data.path),r.xp6(2),r.Oqu(r.lcZ(6,3,"PHOTO_MOD.CHOOSE_IMAGE")))},directives:[g.O5,l.yW],pipes:[u.X$],styles:[".imgRecord[_ngcontent-%COMP%]{max-width:128px;padding:16px}"]}),h)},95631:function(t,i,o){o.d(i,{y:function(){return v}});var a=o(37716),r=o(47063),s=o(81780),c=o(38583),l=o(90665);function u(t,e){if(1&t&&(a.TgZ(0,"ion-item"),a.TgZ(1,"ion-label"),a._uU(2),a.qZA(),a.TgZ(3,"ion-checkbox",12),a.NdJ("ngModelChange",function(t){return e.$implicit.value=t}),a.qZA(),a.qZA()),2&t){var n=e.$implicit;a.xp6(2),a.Oqu(n.label),a.xp6(1),a.Q6J("ngModel",n.value)}}function d(t,e){if(1&t){var n=a.EpF();a.TgZ(0,"ion-col",13),a.TgZ(1,"ion-button",14),a.NdJ("click",function(){var t=a.CHM(n).index,e=a.oxw();return e.terms.USEFOR[t].filter=!e.terms.USEFOR[t].filter}),a._uU(2),a.qZA(),a.qZA()}if(2&t){var i=e.$implicit;a.xp6(1),a.Q6J("color",i.filter?"primary":"light"),a.xp6(1),a.hij(" ",i.name," ")}}function g(t,e){if(1&t){var n=a.EpF();a.TgZ(0,"ion-button",15),a.NdJ("click",function(){return a.CHM(n),a.oxw().full=!0}),a._UZ(1,"ion-icon",16),a.qZA()}}function p(t,e){if(1&t){var n=a.EpF();a.TgZ(0,"ion-col",13),a.TgZ(1,"ion-button",14),a.NdJ("click",function(){var t=a.CHM(n).index,e=a.oxw(2);return e.terms.USES[t].filter=!e.terms.USES[t].filter}),a._uU(2),a.qZA(),a.qZA()}if(2&t){var i=e.$implicit;a.xp6(1),a.Q6J("color",i.filter?"primary":"light"),a.xp6(1),a.hij(" ",i.name," ")}}function f(t,e){if(1&t){var n=a.EpF();a.TgZ(0,"ion-col",13),a.TgZ(1,"ion-button",14),a.NdJ("click",function(){var t=a.CHM(n).index,e=a.oxw(2);return e.terms.MATERIAL[t].filter=!e.terms.MATERIAL[t].filter}),a._uU(2),a.qZA(),a.qZA()}if(2&t){var i=e.$implicit;a.xp6(1),a.Q6J("color",i.filter?"primary":"light"),a.xp6(1),a.hij(" ",i.name," ")}}function h(t,e){if(1&t){var n=a.EpF();a.TgZ(0,"ion-button",15),a.NdJ("click",function(){return a.CHM(n),a.oxw(2).full=!1}),a._UZ(1,"ion-icon",17),a.qZA()}}function m(t,e){if(1&t&&(a.TgZ(0,"div"),a.TgZ(1,"ion-list-header",7),a.TgZ(2,"ion-label"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.qZA(),a.TgZ(5,"ion-grid"),a.TgZ(6,"ion-row"),a.YNc(7,p,3,2,"ion-col",8),a.qZA(),a.qZA(),a.TgZ(8,"ion-list-header",7),a.TgZ(9,"ion-label"),a._uU(10),a.ALo(11,"translate"),a.qZA(),a.qZA(),a.TgZ(12,"ion-grid"),a.TgZ(13,"ion-row"),a.YNc(14,f,3,2,"ion-col",8),a.qZA(),a.TgZ(15,"ion-row"),a.TgZ(16,"ion-col",9),a.YNc(17,h,2,0,"ion-button",10),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){var n=a.oxw();a.xp6(3),a.Oqu(a.lcZ(4,5,"SHOP.USES")),a.xp6(4),a.Q6J("ngForOf",n.terms.USES),a.xp6(3),a.Oqu(a.lcZ(11,7,"SHOP.MATERIAL")),a.xp6(4),a.Q6J("ngForOf",n.terms.MATERIAL),a.xp6(3),a.Q6J("ngIf",n.full)}}var Z,v=((Z=function(){function t(e,i){n(this,t),this.modalControl=e,this.translate=i,this.full=!1,this.checkBoxs=[{label:this.translate.instant("SHOP.CART.SHOP_PICKUP"),ship:0,value:!1},{label:this.translate.instant("SHOP.CART.SHIP_HOME"),ship:1,value:!1}]}return e(t,[{key:"ngOnInit",value:function(){2==this.data.ship?(this.checkBoxs[0].value=!0,this.checkBoxs[1].value=!0):1==this.data.ship?this.checkBoxs[1].value=!0:0==this.data.ship&&(this.checkBoxs[0].value=!0)}},{key:"save",value:function(){var t=this;this.data.ship=1==this.checkBoxs[0].value&&1==this.checkBoxs[1].value?2:1==this.checkBoxs[1].value?1:1==this.checkBoxs[0].value?0:2,this.data.terms=[],["USES","USEFOR","MATERIAL"].forEach(function(e){for(var n=0;n<t.terms[e].length;n++)t.terms[e][n].filter&&t.data.terms.push(t.terms[e][n].id)}),this.modalControl.dismiss({data:this.data,terms:this.terms})}},{key:"reset",value:function(){var t=this;this.checkBoxs[0].value=!0,this.checkBoxs[1].value=!0,this.data.ship=2,this.full=!1,this.data.terms=[],["USES","USEFOR","MATERIAL"].forEach(function(e){for(var n=0;n<t.terms[e].length;n++)t.terms[e][n].filter=!1})}}]),t}()).\u0275fac=function(t){return new(t||Z)(a.Y36(r.IN),a.Y36(s.sK))},Z.\u0275cmp=a.Xpm({type:Z,selectors:[["app-filter"]],inputs:{data:"data",terms:"terms"},decls:32,vars:16,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close-outline"],["slot","end"],["color","primary",3,"click"],["size","small","fill","outline","expand","round",3,"click"],[4,"ngFor","ngForOf"],["lines","none"],["size","6",4,"ngFor","ngForOf"],[1,"ion-text-center"],["fill","outline","shape","round","size","small","mode","ios",3,"click",4,"ngIf"],[4,"ngIf"],["slot","start",3,"ngModel","ngModelChange"],["size","6"],["expand","block","mode","ios",3,"color","click"],["fill","outline","shape","round","size","small","mode","ios",3,"click"],["slot","icon-only","name","chevron-down-outline"],["slot","icon-only","name","chevron-up-outline"]],template:function(t,e){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a.TgZ(3,"ion-button",1),a.NdJ("click",function(){return e.modalControl.dismiss()}),a._UZ(4,"ion-icon",2),a.qZA(),a.qZA(),a.TgZ(5,"ion-title"),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.TgZ(8,"ion-buttons",3),a.TgZ(9,"ion-button",4),a.NdJ("click",function(){return e.save()}),a._uU(10,"OK"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"ion-content"),a.TgZ(12,"ion-list"),a.TgZ(13,"ion-list-header"),a.TgZ(14,"ion-label"),a._uU(15),a.ALo(16,"translate"),a.qZA(),a.TgZ(17,"ion-button",5),a.NdJ("click",function(){return e.reset()}),a._uU(18),a.ALo(19,"translate"),a.qZA(),a.qZA(),a.YNc(20,u,4,2,"ion-item",6),a.qZA(),a.TgZ(21,"ion-list-header",7),a.TgZ(22,"ion-label"),a._uU(23),a.ALo(24,"translate"),a.qZA(),a.qZA(),a.TgZ(25,"ion-grid"),a.TgZ(26,"ion-row"),a.YNc(27,d,3,2,"ion-col",8),a.qZA(),a.TgZ(28,"ion-row"),a.TgZ(29,"ion-col",9),a.YNc(30,g,2,0,"ion-button",10),a.qZA(),a.qZA(),a.qZA(),a.YNc(31,m,18,9,"div",11),a.qZA()),2&t&&(a.xp6(6),a.Oqu(a.lcZ(7,8,"SHOP.FILTER.TITLE")),a.xp6(9),a.Oqu(a.lcZ(16,10,"SHOP.CART.SHIP_METHOD")),a.xp6(3),a.hij("",a.lcZ(19,12,"SHOP.FILTER.RESET")," "),a.xp6(2),a.Q6J("ngForOf",e.checkBoxs),a.xp6(3),a.Oqu(a.lcZ(24,14,"SHOP.USEFOR")),a.xp6(4),a.Q6J("ngForOf",e.terms.USEFOR),a.xp6(3),a.Q6J("ngIf",!e.full),a.xp6(1),a.Q6J("ngIf",e.full))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.wd,r.W2,r.q_,r.yh,r.Q$,c.sg,r.jY,r.Nd,r.wI,c.O5,r.Ie,r.nz,r.w,l.JJ,l.On],pipes:[s.X$],styles:[""]}),Z)},92803:function(t,i,o){o.d(i,{R:function(){return I}});var a=o(27887),r=o(15085),s=o(37716),c=o(47063),l=o(81780),u=o(84465),d=o(38583),g=o(90665);function p(t,e){1&t&&(s.TgZ(0,"div"),s._UZ(1,"ion-spinner",8),s.qZA())}function f(t,e){if(1&t){var n=s.EpF();s.TgZ(0,"ion-col",10),s.TgZ(1,"ion-button",11),s.NdJ("click",function(){var t=s.CHM(n).index;return s.oxw(2).selectCompany(t)}),s._uU(2),s.qZA(),s.qZA()}if(2&t){var i=e.$implicit,o=s.oxw(2);s.xp6(1),s.Q6J("color",i.id==o.selectedCompany?"primary":"light"),s.xp6(1),s.hij(" ",i.name," ")}}function h(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"ion-list"),s.TgZ(2,"ion-list-header"),s.TgZ(3,"ion-label"),s._uU(4),s.ALo(5,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"ion-grid"),s.TgZ(7,"ion-row"),s.YNc(8,f,3,2,"ion-col",9),s.qZA(),s.qZA(),s.qZA()),2&t){var n=s.oxw();s.xp6(4),s.Oqu(s.lcZ(5,2,"SHOP.FILTER.COMPANY")),s.xp6(4),s.Q6J("ngForOf",n.companyList)}}function m(t,e){if(1&t){var n=s.EpF();s.TgZ(0,"ion-col",10),s.TgZ(1,"ion-button",11),s.NdJ("click",function(){var t=s.CHM(n).index,e=s.oxw(2);return e.usefor[t].selected=!e.usefor[t].selected}),s._uU(2),s.qZA(),s.qZA()}if(2&t){var i=e.$implicit;s.xp6(1),s.Q6J("color",i.selected?"primary":"light"),s.xp6(1),s.hij(" ",i.name," ")}}function Z(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"ion-list-header",12),s.TgZ(2,"ion-label"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.TgZ(5,"ion-grid"),s.TgZ(6,"ion-row"),s.YNc(7,m,3,2,"ion-col",9),s.qZA(),s.qZA(),s.qZA()),2&t){var n=s.oxw();s.xp6(3),s.Oqu(s.lcZ(4,2,"SHOP.USEFOR")),s.xp6(4),s.Q6J("ngForOf",n.usefor)}}function v(t,e){if(1&t){var n=s.EpF();s.TgZ(0,"ion-col",10),s.TgZ(1,"ion-button",11),s.NdJ("click",function(){var t=s.CHM(n).index,e=s.oxw(3);return e.uses[t].selected=!e.uses[t].selected}),s._uU(2),s.qZA(),s.qZA()}if(2&t){var i=e.$implicit;s.xp6(1),s.Q6J("color",i.selected?"primary":"light"),s.xp6(1),s.hij(" ",i.name," ")}}function A(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"ion-list-header",12),s.TgZ(2,"ion-label"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.TgZ(5,"ion-grid"),s.TgZ(6,"ion-row"),s.YNc(7,v,3,2,"ion-col",9),s.qZA(),s.qZA(),s.qZA()),2&t){var n=s.oxw(2);s.xp6(3),s.Oqu(s.lcZ(4,2,"SHOP.USES")),s.xp6(4),s.Q6J("ngForOf",n.uses)}}function T(t,e){if(1&t){var n=s.EpF();s.TgZ(0,"ion-col",10),s.TgZ(1,"ion-button",11),s.NdJ("click",function(){var t=s.CHM(n).index,e=s.oxw(3);return e.material[t].selected=!e.material[t].selected}),s._uU(2),s.qZA(),s.qZA()}if(2&t){var i=e.$implicit;s.xp6(1),s.Q6J("color",i.selected?"primary":"light"),s.xp6(1),s.hij(" ",i.name," ")}}function q(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"ion-list-header",12),s.TgZ(2,"ion-label"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.TgZ(5,"ion-grid"),s.TgZ(6,"ion-row"),s.YNc(7,T,3,2,"ion-col",9),s.qZA(),s.qZA(),s.qZA()),2&t){var n=s.oxw(2);s.xp6(3),s.Oqu(s.lcZ(4,2,"SHOP.MATERIAL")),s.xp6(4),s.Q6J("ngForOf",n.material)}}function _(t,e){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,A,8,4,"div",6),s.YNc(2,q,8,4,"div",6),s.qZA()),2&t){var n=s.oxw();s.xp6(1),s.Q6J("ngIf",n.uses.length>0),s.xp6(1),s.Q6J("ngIf",n.material.length>0)}}function x(t,e){1&t&&s._UZ(0,"ion-icon",16)}function O(t,e){1&t&&s._UZ(0,"ion-icon",17)}function y(t,e){if(1&t){var n=s.EpF();s.TgZ(0,"ion-row"),s.TgZ(1,"ion-col",5),s.TgZ(2,"ion-button",13),s.NdJ("click",function(){s.CHM(n);var t=s.oxw();return t.showAll=!t.showAll}),s.YNc(3,x,1,0,"ion-icon",14),s.YNc(4,O,1,0,"ion-icon",15),s.qZA(),s.qZA(),s.qZA()}if(2&t){var i=s.oxw();s.xp6(3),s.Q6J("ngIf",!i.showAll),s.xp6(1),s.Q6J("ngIf",i.showAll)}}var S,I=((S=function(){function t(e,i,o,r){n(this,t),this.modalController=e,this.shopService=i,this.translate=o,this.toastService=r,this.homeDelivery=!1,this.shopPickup=!1,this.companyList=[],this.showAll=!1,this.loadingFlag=new a.E,this.usefor=[],this.uses=[],this.material=[]}return e(t,[{key:"ngOnInit",value:function(){this.prepareShipping(),this.getFilterOptions(),this.prepareTerms()}},{key:"prepareShipping",value:function(){("0"==this.selectedShipping||"2"==this.selectedShipping)&&(this.shopPickup=!0),("1"==this.selectedShipping||"2"==this.selectedShipping)&&(this.homeDelivery=!0)}},{key:"getFilterOptions",value:function(){var t=this;this.shopService.getFilterOptions({}).pipe().subscribe(function(e){"error"==e.status?t.toastService.warning(e.error.message):(t.companyList=[],t.companyList=t.prepareCompanyList(e.data.arr_company)),t.loadingFlag.setResult(!0)},function(e){t.loadingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"prepareCompanyList",value:function(t){var e=[];return t.split(".lhh_lv1.").forEach(function(t){var n=t.split(".lhh_lv2."),i=["id","name"];n=n.reduce(function(t,e,n){return t[i[n]]=e,t},{}),e.push(n)}),e}},{key:"prepareTerms",value:function(){var t=this;this.terms.USEFOR&&this.terms.USEFOR.forEach(function(e){t.usefor.push({id:e.id,name:e.name,selected:e.selected})}),this.terms.USES&&this.terms.USES.forEach(function(e){t.uses.push({id:e.id,name:e.name,selected:e.selected})}),this.terms.MATERIAL&&this.terms.MATERIAL.forEach(function(e){t.material.push({id:e.id,name:e.name,selected:e.selected})})}},{key:"selectCompany",value:function(t){this.selectedCompany=this.selectedCompany==this.companyList[t].id?"":this.companyList[t].id}},{key:"reset",value:function(){this.homeDelivery=!0,this.shopPickup=!0,this.selectedCompany="",this.usefor.forEach(function(t){t.selected=!1}),this.uses.forEach(function(t){t.selected=!1}),this.material.forEach(function(t){t.selected=!1})}},{key:"save",value:function(){var t;t=this.homeDelivery&&this.shopPickup?"2":this.homeDelivery&&!this.shopPickup?"1":!this.homeDelivery&&this.shopPickup?"0":"",this.modalController.dismiss({shipping:t,terms:{USEFOR:this.usefor,USES:this.uses,MATERIAL:this.material},company_id:this.selectedCompany})}}]),t}()).\u0275fac=function(t){return new(t||S)(s.Y36(c.IN),s.Y36(r.d),s.Y36(l.sK),s.Y36(u.k))},S.\u0275cmp=s.Xpm({type:S,selectors:[["app-shop-filter"]],inputs:{terms:"terms",selectedShipping:"selectedShipping",selectedCompany:"selectedCompany"},decls:36,vars:22,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close-outline"],["slot","end"],["color","primary",3,"click"],[1,"ion-text-center"],[4,"ngIf"],["slot","start",3,"ngModel","ngModelChange"],["name","dots"],["size","6",4,"ngFor","ngForOf"],["size","6"],["expand","block","mode","ios",3,"color","click"],["lines","none"],["fill","outline","shape","round","size","small","mode","ios",3,"click"],["slot","icon-only","name","chevron-down-outline",4,"ngIf"],["slot","icon-only","name","chevron-up-outline",4,"ngIf"],["slot","icon-only","name","chevron-down-outline"],["slot","icon-only","name","chevron-up-outline"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return e.modalController.dismiss()}),s._UZ(4,"ion-icon",2),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.TgZ(8,"ion-buttons",3),s.TgZ(9,"ion-button",1),s.NdJ("click",function(){return e.reset()}),s._uU(10),s.ALo(11,"translate"),s.qZA(),s.TgZ(12,"ion-button",4),s.NdJ("click",function(){return e.save()}),s._uU(13,"OK"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"ion-content"),s.TgZ(15,"div",5),s.YNc(16,p,2,0,"div",6),s.qZA(),s.TgZ(17,"ion-list"),s.TgZ(18,"ion-list-header"),s.TgZ(19,"ion-label"),s._uU(20),s.ALo(21,"translate"),s.qZA(),s.qZA(),s.TgZ(22,"ion-item"),s.TgZ(23,"ion-label"),s._uU(24),s.ALo(25,"translate"),s.qZA(),s.TgZ(26,"ion-checkbox",7),s.NdJ("ngModelChange",function(t){return e.homeDelivery=t}),s.qZA(),s.qZA(),s.TgZ(27,"ion-item"),s.TgZ(28,"ion-label"),s._uU(29),s.ALo(30,"translate"),s.qZA(),s.TgZ(31,"ion-checkbox",7),s.NdJ("ngModelChange",function(t){return e.shopPickup=t}),s.qZA(),s.qZA(),s.qZA(),s.YNc(32,h,9,4,"div",6),s.YNc(33,Z,8,4,"div",6),s.YNc(34,_,3,2,"div",6),s.YNc(35,y,5,2,"ion-row",6),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,12,"SHOP.FILTER.TITLE")),s.xp6(4),s.hij("",s.lcZ(11,14,"SHOP.FILTER.RESET")," "),s.xp6(6),s.Q6J("ngIf",e.loadingFlag.pending),s.xp6(4),s.Oqu(s.lcZ(21,16,"SHOP.CART.SHIP_METHOD")),s.xp6(4),s.Oqu(s.lcZ(25,18,"SHOP.CART.SHIP_HOME")),s.xp6(2),s.Q6J("ngModel",e.homeDelivery),s.xp6(3),s.Oqu(s.lcZ(30,20,"SHOP.CART.SHOP_PICKUP")),s.xp6(2),s.Q6J("ngModel",e.shopPickup),s.xp6(1),s.Q6J("ngIf",e.companyList),s.xp6(1),s.Q6J("ngIf",e.usefor.length>0),s.xp6(1),s.Q6J("ngIf",e.showAll),s.xp6(1),s.Q6J("ngIf",e.uses.length>0||e.material.length>0))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.wd,c.W2,d.O5,c.q_,c.yh,c.Q$,c.Ie,c.nz,c.w,g.JJ,g.On,c.PQ,c.jY,c.Nd,d.sg,c.wI],pipes:[l.X$],styles:[""]}),S)},5264:function(t,i,o){o.d(i,{E:function(){return O}});var a=o(64762),r=o(27887),s=o(80559),c=o(13819),l=o(22923),u=o(37716),d=o(81780),g=o(84465),p=o(47063),f=o(71239),h=o(38583),m=o(63771);function Z(t,e){1&t&&(u.TgZ(0,"div",6),u._UZ(1,"ion-spinner",7),u.qZA())}function v(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"ion-item",11),u.NdJ("click",function(){var t=u.CHM(n).$implicit;return u.oxw(2).presentDetail(t)}),u.TgZ(1,"ion-label",12),u.TgZ(2,"ion-text",13),u._uU(3),u.qZA(),u._uU(4),u.TgZ(5,"p"),u._uU(6),u.qZA(),u.qZA(),u.TgZ(7,"span",14),u._uU(8),u.qZA(),u.qZA()}if(2&t){var i=e.$implicit;u.xp6(3),u.hij("",i.manufacturer_name,"-"),u.xp6(1),u.hij("",i.name," "),u.xp6(2),u.Oqu(i.unit),u.xp6(2),u.Oqu(i.packing)}}function A(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"ion-item",11),u.NdJ("click",function(){var t=u.CHM(n).$implicit;return u.oxw(2).presentDetail(t)}),u.TgZ(1,"ion-label",12),u.TgZ(2,"ion-text",13),u._uU(3),u.qZA(),u._uU(4),u.TgZ(5,"p"),u._uU(6),u.qZA(),u.qZA(),u.TgZ(7,"span",14),u._uU(8),u.qZA(),u.qZA()}if(2&t){var i=e.$implicit;u.xp6(3),u.hij("",i.manufacturer_name,"-"),u.xp6(1),u.hij("",i.name," "),u.xp6(2),u.Oqu(i.unit),u.xp6(2),u.Oqu(i.packing)}}function T(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"ion-item",11),u.NdJ("click",function(){var t=u.CHM(n).$implicit;return u.oxw(2).presentDetail(t)}),u.TgZ(1,"ion-label",12),u.TgZ(2,"ion-text",13),u._uU(3),u.qZA(),u._uU(4),u.TgZ(5,"p"),u._uU(6),u.qZA(),u.qZA(),u.TgZ(7,"span",14),u._uU(8),u.qZA(),u.qZA()}if(2&t){var i=e.$implicit;u.xp6(3),u.hij("",i.manufacturer_name,"-"),u.xp6(1),u.hij("",i.name," "),u.xp6(2),u.Oqu(i.packing),u.xp6(2),u.Oqu(i.packing)}}function q(t,e){if(1&t&&(u.TgZ(0,"ion-list",8),u.TgZ(1,"ion-item-group"),u.TgZ(2,"ion-list-header",9),u.TgZ(3,"ion-label"),u._uU(4),u.ALo(5,"translate"),u.qZA(),u.qZA(),u.YNc(6,v,9,4,"ion-item",10),u.ALo(7,"productTypeFilter"),u.qZA(),u.TgZ(8,"ion-item-group"),u.TgZ(9,"ion-list-header",9),u.TgZ(10,"ion-label"),u._uU(11),u.ALo(12,"translate"),u.qZA(),u.qZA(),u.YNc(13,A,9,4,"ion-item",10),u.ALo(14,"productTypeFilter"),u.qZA(),u.TgZ(15,"ion-item-group"),u.TgZ(16,"ion-list-header",9),u.TgZ(17,"ion-label"),u._uU(18),u.ALo(19,"translate"),u.qZA(),u.qZA(),u.YNc(20,T,9,4,"ion-item",10),u.ALo(21,"productTypeFilter"),u.qZA(),u.qZA()),2&t){var n=u.oxw();u.xp6(4),u.Oqu(u.lcZ(5,6,"WAREHOUSE_MOD.FEED")),u.xp6(2),u.Q6J("ngForOf",u.xi3(7,8,n.products,1)),u.xp6(5),u.Oqu(u.lcZ(12,11,"WAREHOUSE_MOD.FEED_SUPPLEMENT")),u.xp6(2),u.Q6J("ngForOf",u.xi3(14,13,n.products,2)),u.xp6(5),u.Oqu(u.lcZ(19,16,"WAREHOUSE_MOD.TREATMENT")),u.xp6(2),u.Q6J("ngForOf",u.xi3(21,18,n.products,3))}}function _(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"div",15),u.TgZ(1,"ion-card",8),u.TgZ(2,"ion-card-content",16),u.TgZ(3,"p",15),u._uU(4),u.ALo(5,"translate"),u.qZA(),u.TgZ(6,"ion-button",17),u.NdJ("click",function(){return u.CHM(n),u.oxw().presentAddlist()}),u._uU(7),u.ALo(8,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}2&t&&(u.xp6(4),u.Oqu(u.lcZ(5,2,"WAREHOUSE_MOD.NO_PRODUCT")),u.xp6(3),u.hij(" ",u.lcZ(8,4,"WAREHOUSE_MOD.ADD_PRODUCT")," "))}var x,O=((x=function(){function t(e,i,o,a,s){n(this,t),this.translate=e,this.storeService=i,this.toastService=o,this.modalController=a,this.dbLocalService=s,this.products=[],this.loadingFlag=new r.E}return e(t,[{key:"ngOnInit",value:function(){this.getList()}},{key:"getList",value:function(){var t=this;this.loadingFlag.setPending(!0),this.storeService.getApiStore("getItems","&fcode="+this.storeService.getFarmCode(),"manager/store-api-mobie").subscribe(function(e){1==e.status?t.products=e.data:t.toastService.warning(e.error),t.loadingFlag.setResult(!0)},function(){t.loadingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"presentAddlist",value:function(){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:s.n,componentProps:{}});case 2:return(e=t.sent).onDidDismiss().then(function(t){console.log(t),1==t.data&&n.getList()}),t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"presentDetail",value:function(t){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:c.m,componentProps:{item:t,from:"farm"}});case 2:return(n=e.sent).onDidDismiss().then(function(t){i.getList()}),e.next=6,n.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"findProductIndexById",value:function(t){return this.products.findIndex(function(e){return e.id==t.id})}},{key:"doRefresh",value:function(t){this.getList(),t.target.complete()}}]),t}()).\u0275fac=function(t){return new(t||x)(u.Y36(d.sK),u.Y36(l.d),u.Y36(g.k),u.Y36(p.IN),u.Y36(f.T))},x.\u0275cmp=u.Xpm({type:x,selectors:[["app-store-item-list"]],decls:13,vars:6,consts:[["slot","start"],["text","","defaultHref","tabs/management"],["slot","fixed",3,"ionRefresh"],["class","spiner-loading",4,"ngIf"],["mode","ios",4,"ngIf"],["class","ion-padding",4,"ngIf"],[1,"spiner-loading"],["name","dots"],["mode","ios"],["lines","inset"],["detail","",3,"click",4,"ngFor","ngForOf"],["detail","",3,"click"],[1,"ion-text-wrap"],["color","medium"],["slot","end"],[1,"ion-padding"],[1,"ion-text-center"],["shape","round","color","primary",3,"click"]],template:function(t,e){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u._UZ(3,"ion-back-button",1),u.qZA(),u.TgZ(4,"ion-title"),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(7,"ion-content"),u.TgZ(8,"ion-refresher",2),u.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),u._UZ(9,"ion-refresher-content"),u.qZA(),u.YNc(10,Z,2,0,"div",3),u.YNc(11,q,22,21,"ion-list",4),u.YNc(12,_,9,6,"div",5),u.qZA()),2&t&&(u.xp6(5),u.Oqu(u.lcZ(6,4,"COMPANY_MOD.MENU")),u.xp6(5),u.Q6J("ngIf",e.loadingFlag.pending),u.xp6(1),u.Q6J("ngIf",e.products.length>0),u.xp6(1),u.Q6J("ngIf",0===e.products.length&&e.loadingFlag.result))},directives:[p.Gu,p.sr,p.Sm,p.oU,p.cs,p.wd,p.W2,p.nJ,p.Wo,h.O5,p.PQ,p.q_,p.Ub,p.yh,p.Q$,h.sg,p.Ie,p.yW,p.PM,p.FN,p.YG],pipes:[d.X$,m.g],styles:[""]}),x)},20714:function(t,i,o){o.d(i,{h:function(){return T}});var a=o(27887),r=o(69814),s=o(37716),c=o(47063),l=o(81780),u=o(84465),d=o(38583),g=o(56209);function p(t,e){1&t&&(s.TgZ(0,"div",6),s._UZ(1,"ion-spinner",7),s.qZA())}function f(t,e){1&t&&(s.TgZ(0,"p",8),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&t&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"DEVICE_MOD.DATA_NULL")))}function h(t,e){if(1&t&&(s.TgZ(0,"div"),s._UZ(1,"div",11),s.qZA()),2&t){var n=e.index,i=s.oxw(3);s.xp6(1),s.Q6J("options",i.getOptionBac(n))}}function m(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"p",8),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.YNc(4,h,2,1,"div",10),s.qZA()),2&t){var n=s.oxw(2);s.xp6(2),s.hij(" ",s.lcZ(3,2,"LAB_MOD.BACTERIA")," "),s.xp6(2),s.Q6J("ngForOf",n.dataBacte.arr)}}function Z(t,e){if(1&t&&s._UZ(0,"div",11),2&t){var n=s.oxw(2);s.Q6J("options",n.getOptionBar(n.result.antibiotic.data,n.result.antibiotic.group))}}function v(t,e){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,m,5,4,"div",5),s.YNc(2,Z,1,1,"div",9),s.qZA()),2&t){var n=s.oxw();s.xp6(1),s.Q6J("ngIf",n.dataBacte.arr.length>0),s.xp6(1),s.Q6J("ngIf",n.result.antibiotic)}}var A,T=((A=function(){function t(e,i,o,r){n(this,t),this.modalController=e,this.translate=i,this.toastService=o,this.wallService=r,this.dataBacte={label:[],data:[]},this.loadingFlag=new a.E}return e(t,[{key:"ngOnInit",value:function(){console.log(this.farms),this.loadData()}},{key:"loadData",value:function(){var t=this,e={farms:this.farms.map(function(t){return t.code})};this.loadingFlag.setPending(!0),this.wallService.loadAnalyze(e).subscribe(function(e){1==+e.status?(t.result=e.data,t.processData(e.data)):t.toastService.warning(e.message),t.loadingFlag.setResult(!0)},function(){t.loadingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"getJson",value:function(t){var e;try{e=JSON.parse(t)}catch(n){e={min:1e3,max:3e3}}return e}},{key:"getPondByString",value:function(t){var e=this,n=[];return t.split(",,,").forEach(function(t){var i=t.split(":::");0==n.filter(function(t){return t.pcode===i[2]}).length&&n.push({key:i[0],name:i[1],pcode:i[2],pname:i[3],fcode:i[4],fname:i[5],value:i[6],calculator:i[7]?e.getJson(i[7]):""})}),n}},{key:"getDailyByString",value:function(t){var e=this,n=[];return t.split(",,,").forEach(function(t){var i=t.split(":::");n.push({key:i[0],name:i[1],pcode:i[2],pname:i[3],fcode:i[4],fname:i[5],value:i[6],calculator:i[7]?e.getJson(i[7]):""})}),n}},{key:"getStatusBacte",value:function(t){return console.log(t),+t.value<+t.calculator.min?0:+t.value>+t.calculator.max?2:1}},{key:"getOptionBac",value:function(t){return{legend:{top:"bottom"},toolbox:{show:!0},tooltip:{trigger:"item",position:["30%","30%"]},series:[{name:this.dataBacte.arr[t].name,type:"pie",radius:[50,80],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:8},data:[{value:this.dataBacte.data[t][0],name:this.translate.instant("LAB_MOD.GOOD")},{value:this.dataBacte.data[t][1],name:this.translate.instant("WARNING")},{value:this.dataBacte.data[t][2],name:this.translate.instant("LAB_MOD.DANGER")}]}]}}},{key:"getOptionBar",value:function(t,e){var n=this.getDailyByString(t),i=[];n.forEach(function(t){i.findIndex(function(e){return e.code===t.fcode})<0&&i.push({code:t.fcode,name:t.fname})});var o=[];n.forEach(function(t){o.findIndex(function(e){return e.id===t.key})<0&&o.push({id:t.key,name:t.name})});var a=[];n.forEach(function(t){a.findIndex(function(e){return e.key==t.key&&e.pcode==t.pcode})<0&&a.push(t)});var r=[];return o.forEach(function(t){var e={name:t.name,type:"bar",data:[]};i.forEach(function(n){var i=a.filter(function(e){return e.key==t.id&&e.fcode==n.code}).length;e.data.push(0==i?"":i)}),r.push(e)}),{tooltip:{trigger:"axis",position:["30%","30%"],axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",boundaryGap:[0,.01]},xAxis:{type:"category",data:i.map(function(t){return t.name})},series:r}}},{key:"processData",value:function(t){var e=this,n=[],i=[];if(t.bacteria){var o=this.getPondByString(t.bacteria.data);console.log(o),o.forEach(function(t){var o=n.findIndex(function(e){return e.key===t.key});o>=0?i[o][e.getStatusBacte(t)]=+i[o][e.getStatusBacte(t)]+1:(n.push(t),i.push([0,0,0]),i[i.length-1][e.getStatusBacte(t)]=+i[i.length-1][e.getStatusBacte(t)]+1)})}this.dataBacte.arr=n,this.dataBacte.data=i}}]),t}()).\u0275fac=function(t){return new(t||A)(s.Y36(c.IN),s.Y36(l.sK),s.Y36(u.k),s.Y36(r.F))},A.\u0275cmp=s.Xpm({type:A,selectors:[["app-farm-analyst"]],inputs:{farms:"farms"},decls:12,vars:6,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["class","spiner-loading",4,"ngIf"],["class","ion-text-center",4,"ngIf"],[4,"ngIf"],[1,"spiner-loading"],["name","dots"],[1,"ion-text-center"],["echarts","","class","ion-margin-top",3,"options",4,"ngIf"],[4,"ngFor","ngForOf"],["echarts","",1,"ion-margin-top",3,"options"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return e.modalController.dismiss()}),s._UZ(4,"ion-icon",2),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"ion-content"),s.YNc(9,p,2,0,"div",3),s.YNc(10,f,3,3,"p",4),s.YNc(11,v,3,2,"div",5),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,4,"LAB_MOD.ANALYZE")),s.xp6(3),s.Q6J("ngIf",e.loadingFlag.pending),s.xp6(1),s.Q6J("ngIf",0==e.dataBacte.data.length&&!e.result.antibiotic),s.xp6(1),s.Q6J("ngIf",!e.loadingFlag.pending))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.wd,c.W2,d.O5,c.PQ,d.sg,g._w],pipes:[l.X$],styles:[""]}),A)},99045:function(t,i,o){o.d(i,{C:function(){return v}});var a=o(27887),r=o(69814),s=o(37716),c=o(47063),l=o(81780),u=o(84465),d=o(38583),g=o(56209);function p(t,e){1&t&&(s.TgZ(0,"div",5),s._UZ(1,"ion-spinner",6),s.qZA())}function f(t,e){if(1&t&&(s.TgZ(0,"ion-item"),s.TgZ(1,"ion-label"),s.TgZ(2,"p"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"ion-text"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.TgZ(8,"ion-text",10),s._uU(9),s.ALo(10,"translate"),s.qZA(),s.qZA()),2&t){var n=e.$implicit;s.xp6(3),s.AsE("",s.lcZ(4,6,"FARM")," ",n.name,""),s.xp6(3),s.AsE(" ",n.pond," ",s.lcZ(7,8,"POND")," "),s.xp6(3),s.AsE(" ",s.lcZ(10,10,"LAB_MOD.VACCINATED")," ",n.total," ")}}function h(t,e){if(1&t&&(s.TgZ(0,"ion-item"),s.TgZ(1,"ion-label"),s.TgZ(2,"p"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"ion-text"),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"ion-text",10),s._uU(8),s.ALo(9,"translate"),s.qZA(),s.qZA()),2&t){var n=e.$implicit;s.xp6(3),s.lnq("",n.farm_name," | ",s.lcZ(4,6,"POND")," ",n.name,""),s.xp6(3),s.hij(" ",n.seed," "),s.xp6(2),s.AsE(" ",s.lcZ(9,8,"POND_MOD.LOSS")," ",n.loss," ")}}function m(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"p",7),s._uU(2),s.ALo(3,"translate"),s.qZA(),s._UZ(4,"div",8),s.TgZ(5,"ion-list"),s.YNc(6,f,11,12,"ion-item",9),s.qZA(),s.TgZ(7,"p",7),s._uU(8),s.ALo(9,"translate"),s.qZA(),s._UZ(10,"div",8),s.TgZ(11,"ion-list"),s.TgZ(12,"ion-list-header"),s._uU(13),s.ALo(14,"translate"),s.qZA(),s.YNc(15,h,10,10,"ion-item",9),s.qZA(),s.qZA()),2&t){var n=s.oxw();s.xp6(2),s.Oqu(s.lcZ(3,7,"LAB_MOD.TIME_OLD")),s.xp6(2),s.Q6J("options",n.optionSeedOld),s.xp6(2),s.Q6J("ngForOf",n.result.pondVaccinated),s.xp6(2),s.Oqu(s.lcZ(9,9,"LAB_MOD.LOSS_RANGE")),s.xp6(2),s.Q6J("options",n.optionLoss),s.xp6(3),s.hij(" ",s.lcZ(14,11,"LAB_MOD.ACTUAL_LOSS")," "),s.xp6(2),s.Q6J("ngForOf",n.result.pondVaccinatedInLab)}}var Z,v=((Z=function(){function t(e,i,o,r){n(this,t),this.modalController=e,this.translate=i,this.toastService=o,this.wallService=r,this.loadingFlag=new a.E}return e(t,[{key:"ngOnInit",value:function(){this.loadData()}},{key:"loadData",value:function(){var t=this,e={farms:this.farms.map(function(t){return{code:t.code,id:t.id,name:t.name}})};this.loadingFlag.setPending(!0),this.wallService.loadReport(e).subscribe(function(e){1==+e.status?(t.result=e.data,t.processData(e.data)):t.toastService.warning(e.message),t.loadingFlag.setResult(!0)},function(){t.loadingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"processData",value:function(t){var e=this,n=[],i=[{name:"< 30 "+this.translate.instant("FARM_MOD.OLD_DAY"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[]},{name:"30-60 "+this.translate.instant("FARM_MOD.OLD_DAY"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[]},{name:">60 "+this.translate.instant("FARM_MOD.OLD_DAY"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[]}];t.listSeedOldInFarm&&(t.listSeedOldInFarm.forEach(function(t){var o=["","",""];t.data.split(",").forEach(function(t){var n=t.split(":::"),i=+n[1]>60?2:e.float2int(+n[1]/30);o[i.toString()]=+o[i]+1}),i[0].data.push(o[0]),i[1].data.push(o[1]),i[2].data.push(o[2]),n.push(t.farm_name)}),console.log(i)),this.optionSeedOld={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value"},xAxis:{type:"category",data:n},series:i};var o=[],a=[{name:"< 30 "+this.translate.instant("FARM_MOD.OLD_DAY"),type:"bar",data:[]},{name:"30-60 "+this.translate.instant("FARM_MOD.OLD_DAY"),type:"bar",data:[]},{name:">60 "+this.translate.instant("FARM_MOD.OLD_DAY"),type:"bar",data:[]}];t.lossInFarm&&t.lossInFarm.forEach(function(t){var n=[0,0,0],i=[0,0,0];t.data.split(",").forEach(function(t){var o=t.split(":::"),a=+o[1]>60?2:e.float2int(+o[1]/30);n[a]+=+o[2],i[a]+=+o[3]}),[0,1,2].forEach(function(t){a[t].data.push(0==n[t]||0==i[t]?"":(100*n[t]/i[t]).toFixed(2))}),o.push(t.farm_name)}),this.optionLoss={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",boundaryGap:[0,.01]},xAxis:{type:"category",data:o},series:a},console.log(a)}},{key:"float2int",value:function(t){return 0|t}},{key:"getListLoss",value:function(t){var e=[];t.split(",").forEach(function(t){e.push({})})}}]),t}()).\u0275fac=function(t){return new(t||Z)(s.Y36(c.IN),s.Y36(l.sK),s.Y36(u.k),s.Y36(r.F))},Z.\u0275cmp=s.Xpm({type:Z,selectors:[["app-farm-report"]],inputs:{farms:"farms"},decls:11,vars:5,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["class","spiner-loading",4,"ngIf"],[4,"ngIf"],[1,"spiner-loading"],["name","dots"],[1,"ion-text-center"],["echarts","",1,"ion-margin-top",3,"options"],[4,"ngFor","ngForOf"],["color","danger","slot","end"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return e.modalController.dismiss()}),s._UZ(4,"ion-icon",2),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"ion-content"),s.YNc(9,p,2,0,"div",3),s.YNc(10,m,16,13,"div",4),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,3,"LAB_MOD.REPORT")),s.xp6(3),s.Q6J("ngIf",e.loadingFlag.pending),s.xp6(1),s.Q6J("ngIf",!e.loadingFlag.pending))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.wd,c.W2,d.O5,c.PQ,g._w,c.q_,d.sg,c.yh,c.Ie,c.Q$,c.yW],pipes:[l.X$],styles:[""]}),Z)},66542:function(t,i,o){o.d(i,{J:function(){return Z}});var a=o(16738),r=o(27887),s=o(90650),c=o(37716),l=o(84465),u=o(47063),d=o(81780),g=o(38583),p=o(56209);function f(t,e){1&t&&(c.TgZ(0,"div",4),c._UZ(1,"ion-spinner",7),c.qZA())}function h(t,e){if(1&t&&c._UZ(0,"div",8),2&t){var n=c.oxw();c.Q6J("options",n.optionLine)("merge",n.chartData)}}var m,Z=((m=function(){function t(e,i,o){n(this,t),this.toastService=e,this.modalController=i,this.translate=o,this.rawData=[],this.processedData=[],this.chartData=[],this.loadingFlag=new r.E,this.show=!1}return e(t,[{key:"ngOnInit",value:function(){this.prepareData(),this.optionLine={tooltip:{trigger:"axis",formatter:function(t){var e=(t=t[0]).value[1],n=a(t.value[0]).format("DD-MM-YYYY")+"<br/>";return n+=e+" \u0111\u1ed9 C"},axisPointer:{animation:!0}},xAxis:{type:"time",splitLine:{show:!1},axisLabel:{formatter:function(t){var e=a(t),n=e.format("DD-MM")+"\n";return e.format("YYYY")!==a().year().toString()&&(n+=e.format("YYYY")),n}}},yAxis:{type:"value",name:"Nhi\u1ec7t \u0111\u1ed9",splitLine:{show:!1}},series:[{data:this.processedData,type:"line",smooth:!1,name:"Nhi\u1ec7t \u0111\u1ed9",showSymbol:!0,symbolSize:5,hoverAnimation:!0,areaStyle:{color:new s.Q.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 51, 51, 0.5)"},{offset:1,color:"rgb(0, 204, 204, 0.5)"}])}}]}}},{key:"prepareData",value:function(){var t=this;this.loadingFlag.setPending(!0),this.processedData=[],this.data.forEach(function(e){var n=a(new Date(1e3*e.dt),"YYYYMMDD");t.processedData.push({name:n.toString(),value:[n.format("YYYY-MM-DD"),+(e.temp.day-273.15).toFixed(2)]})}),this.processedData.reverse(),this.chartData={series:[{data:this.processedData}]},this.loadingFlag.setResult(!0)}},{key:"dismiss",value:function(){this.modalController.dismiss()}},{key:"ionViewDidEnter",value:function(){this.show=!0}}]),t}()).\u0275fac=function(t){return new(t||m)(c.Y36(l.k),c.Y36(u.IN),c.Y36(d.sK))},m.\u0275cmp=c.Xpm({type:m,selectors:[["app-predict-weather"]],inputs:{data:"data"},decls:20,vars:11,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"],[1,"ion-padding"],["echarts","","class","demo-chart",3,"options","merge",4,"ngIf"],["name","dots"],["echarts","",1,"demo-chart",3,"options","merge"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c.TgZ(3,"ion-button",1),c.NdJ("click",function(){return e.dismiss()}),c._UZ(4,"ion-icon",2),c.qZA(),c.qZA(),c.TgZ(5,"ion-title"),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"ion-content"),c.YNc(9,f,2,0,"div",3),c.TgZ(10,"div",4),c.TgZ(11,"div",5),c.TgZ(12,"h2"),c._uU(13),c.ALo(14,"translate"),c.qZA(),c.TgZ(15,"h2"),c._uU(16),c.ALo(17,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(18,"div",5),c.YNc(19,h,1,2,"div",6),c.qZA(),c.qZA()),2&t&&(c.xp6(6),c.Oqu(c.lcZ(7,5,"WALL.WEATHER_CHART_TITLE")),c.xp6(3),c.Q6J("ngIf",e.loadingFlag.pending),c.xp6(4),c.Oqu(c.lcZ(14,7,"WALL.WEATHER_CHART_SUBTITLE1")),c.xp6(3),c.Oqu(c.lcZ(17,9,"WALL.WEATHER_CHART_SUBTITLE2")),c.xp6(3),c.Q6J("ngIf",e.show))},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.wd,u.W2,g.O5,u.PQ,p._w],pipes:[d.X$],styles:[""]}),m)}}])}();