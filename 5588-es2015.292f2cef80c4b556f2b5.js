"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[5588],{54395:function(t,e,i){i.d(e,{b:function(){return s}});var n=i(77393),o=i(33637);function s(t,e=o.P){return i=>i.lift(new r(t,e))}class r{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new a(t,this.dueTime,this.scheduler))}}class a extends n.L{constructor(t,e,i){super(t),this.dueTime=e,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(c,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function c(t){t.debouncedNext()}},27887:function(t,e,i){i.d(e,{E:function(){return n}});class n{constructor(){this.start=null,this.end=null,this.pending=null,this.result=null,this.count=0}setStart(t){this.start=t,!0===t&&(this.pending=!0,this.end=!1),this.result=null,this.count++}setPending(t){this.pending=t,!1===t?this.start=!1:this.end=!0}setResult(t){this.result=t,this.pending=!1,this.start=!1,this.end=!0}}},83111:function(t,e,i){i.d(e,{o:function(){return Z}});var n=i(79765),o=i(25917),s=i(27887),r=i(15085),a=i(54395),c=i(87519),l=i(43190),g=i(37716),u=i(47063),h=i(84465),d=i(81780),p=i(71239),m=i(38583);function f(t,e){1&t&&(g.TgZ(0,"div"),g._UZ(1,"ion-spinner",11),g.qZA())}function A(t,e){if(1&t){const t=g.EpF();g.TgZ(0,"ion-item",2),g.NdJ("click",function(){const e=g.CHM(t).$implicit;return g.oxw().selectRegion(e)}),g.TgZ(1,"ion-label"),g._uU(2),g.qZA(),g._UZ(3,"ion-radio",12),g.qZA()}if(2&t){const t=e.$implicit;g.xp6(2),g.hij(" ",t.name," "),g.xp6(1),g.Q6J("value",t.id)}}function P(t,e){if(1&t&&(g.TgZ(0,"ion-item",13),g.TgZ(1,"ion-label"),g.TgZ(2,"p"),g._uU(3),g.qZA(),g.qZA(),g.qZA()),2&t){const t=g.oxw();g.xp6(3),g.Oqu(t.message)}}let Z=(()=>{class t{constructor(t,e,i,o,r,a){this.modalControl=t,this.shopService=e,this.toastService=i,this.translate=o,this.localDb=r,this.modalController=a,this.loadingFlag=new s.E,this.allRegions=[],this.keyword="",this.searchTerms=new n.xQ,this.message=""}ngOnInit(){let t=this.searchTerms.pipe((0,a.b)(300),(0,c.x)(),(0,l.w)(t=>this.searchRegion(t)));this.regions$=t,this.regions$.subscribe(t=>{t?(this.loadingFlag.setResult(!0),this.message=""):(this.loadingFlag.setResult(!1),this.message=this.translate.instant("SHOP.LOCATION.NOT_FOUND"))}),this.getRegion(),this.selectedRegion=null!==this.localDb.eShopRegion?this.localDb.eShopRegion:{id:"",name:this.translate.instant("SHOP.LOCATION.ALL")}}getRegion(){this.loadingFlag.setPending(!0),this.shopService.listUnitChild(0).pipe().subscribe(t=>{"error"==t.status?this.toastService.warning(t.error.message):(this.allRegions=t.data,this.searchTerms.next("")),this.loadingFlag.setResult(!0)},t=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}selectRegion(t){let e={id:t.id,name:t.name};this.localDb.setLocalData("eShopRegion",e),this.modalController.dismiss(e)}search(t){this.searchTerms.next(t.detail.value),this.keyword=t.detail.value}searchRegion(t){if(this.message="",this.loadingFlag.setPending(!0),!t.trim())return this.loadingFlag.setResult(!0),(0,o.of)(this.allRegions);let e=[],i=this.removeAccents(t.trim().toLowerCase());return this.allRegions.forEach(t=>{let n=this.removeAccents(t.name.trim().toLowerCase());(i.includes(n)||n.includes(i))&&e.push(t)}),this.loadingFlag.setResult(!0),this.translate.instant("SHOP.LOCATION.NOT_FOUND"),(0,o.of)(e)}removeAccents(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D").replace(/\s/g,"").toLowerCase()}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(u.IN),g.Y36(r.d),g.Y36(h.k),g.Y36(d.sK),g.Y36(p.T),g.Y36(u.IN))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-shop-location"]],decls:23,vars:14,consts:[["mode","ios"],["slot","start"],[3,"click"],["slot","icon-only","name","close-outline"],[3,"value","placeholder","ionChange"],[1,"ion-text-center"],[4,"ngIf"],[3,"value"],["slot","end","value",""],[3,"click",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],["name","dots"],["slot","end",3,"value"],["lines","none"]],template:function(t,e){1&t&&(g.TgZ(0,"ion-header",0),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",1),g.TgZ(3,"ion-button",2),g.NdJ("click",function(){return e.modalControl.dismiss()}),g._UZ(4,"ion-icon",3),g.qZA(),g.qZA(),g.TgZ(5,"ion-title"),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.qZA(),g.TgZ(8,"ion-toolbar"),g.TgZ(9,"ion-searchbar",4),g.NdJ("ionChange",function(t){return e.search(t)}),g.qZA(),g.qZA(),g.qZA(),g.TgZ(10,"ion-content"),g.TgZ(11,"div",5),g.YNc(12,f,2,0,"div",6),g.qZA(),g.TgZ(13,"ion-list"),g.TgZ(14,"ion-radio-group",7),g.TgZ(15,"ion-item",2),g.NdJ("click",function(){return e.selectRegion({id:"",name:e.translate.instant("SHOP.LOCATION.ALL")})}),g.TgZ(16,"ion-label"),g._uU(17),g.ALo(18,"translate"),g.qZA(),g._UZ(19,"ion-radio",8),g.qZA(),g.YNc(20,A,4,2,"ion-item",9),g.ALo(21,"async"),g.qZA(),g.YNc(22,P,4,1,"ion-item",10),g.qZA(),g.qZA()),2&t&&(g.xp6(6),g.Oqu(g.lcZ(7,8,"SHOP.LOCATION.TITLE")),g.xp6(3),g.Q6J("value",e.keyword)("placeholder",e.translate.instant("SHOP.LOCATION.SEARCH")),g.xp6(3),g.Q6J("ngIf",e.loadingFlag.pending),g.xp6(2),g.Q6J("value",e.selectedRegion.id),g.xp6(3),g.hij(" ",g.lcZ(18,10,"SHOP.LOCATION.ALL")," "),g.xp6(3),g.Q6J("ngForOf",g.lcZ(21,12,e.regions$)),g.xp6(2),g.Q6J("ngIf",e.message))},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.wd,u.VI,u.j9,u.W2,m.O5,u.q_,u.se,u.QI,u.Ie,u.Q$,u.B7,u.U5,m.sg,u.PQ],pipes:[d.X$,m.Ov],styles:[""]}),t})()},59308:function(t,e,i){i.d(e,{w:function(){return T}});var n=i(27887),o=i(15085),s=i(37716),r=i(47063),a=i(81780),c=i(84465),l=i(13619),g=i(38583);const u=["searchbar"];function h(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-col",9),s.TgZ(1,"ion-button",10),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(3).navigateToTerms(e)}),s._uU(2),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(2),s.hij(" ",t.name," ")}}function d(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"ion-list-header",7),s.TgZ(2,"ion-label"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.TgZ(5,"ion-grid"),s.TgZ(6,"ion-row"),s.YNc(7,h,3,1,"ion-col",8),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw(2);s.xp6(3),s.Oqu(s.lcZ(4,2,"SHOP.USES")),s.xp6(4),s.Q6J("ngForOf",t.uses)}}function p(t,e){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,d,8,4,"div",6),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngIf",t.uses.length>0)}}function m(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-col",9),s.TgZ(1,"ion-button",10),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(2).navigateToTerms(e)}),s._uU(2),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(2),s.hij(" ",t.name," ")}}function f(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-col",9),s.TgZ(1,"ion-button",10),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw(3).navigateToTerms(e)}),s._uU(2),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(2),s.hij(" ",t.name," ")}}function A(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"ion-list-header",7),s.TgZ(2,"ion-label"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.TgZ(5,"ion-grid"),s.TgZ(6,"ion-row"),s.YNc(7,f,3,1,"ion-col",8),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw(2);s.xp6(3),s.Oqu(s.lcZ(4,2,"SHOP.MATERIAL")),s.xp6(4),s.Q6J("ngForOf",t.material)}}function P(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"ion-list-header",7),s.TgZ(2,"ion-label"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.TgZ(5,"ion-grid"),s.TgZ(6,"ion-row"),s.YNc(7,m,3,1,"ion-col",8),s.qZA(),s.qZA(),s.YNc(8,A,8,4,"div",6),s.qZA()),2&t){const t=s.oxw();s.xp6(3),s.Oqu(s.lcZ(4,3,"SHOP.USEFOR")),s.xp6(4),s.Q6J("ngForOf",t.usefor),s.xp6(1),s.Q6J("ngIf",t.material.length>0)}}function Z(t,e){1&t&&s._UZ(0,"ion-icon",15)}function x(t,e){1&t&&s._UZ(0,"ion-icon",16)}function O(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-row"),s.TgZ(1,"ion-col",11),s.TgZ(2,"ion-button",12),s.NdJ("click",function(){s.CHM(t);const e=s.oxw();return e.showAll=!e.showAll}),s.YNc(3,Z,1,0,"ion-icon",13),s.YNc(4,x,1,0,"ion-icon",14),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(3),s.Q6J("ngIf",!t.showAll),s.xp6(1),s.Q6J("ngIf",t.showAll)}}let T=(()=>{class t{constructor(t,e,i,o,s,r){this.modalControl=t,this.shopService=e,this.translate=i,this.toastService=o,this.router=s,this.modalController=r,this.input="",this.usefor=[],this.uses=[],this.material=[],this.showAll=!1,this.loadingFlag=new n.E}ngOnInit(){this.getTermData()}ionViewDidEnter(){setTimeout(()=>{this.searchbar.setFocus()})}getTermData(){this.loadingFlag.setPending(!0),this.shopService.listTerm().pipe().subscribe(t=>{"error"==t.status?this.toastService.warning(t.error.message):(this.usefor=t.data.usefor,this.usefor=this.usefor.filter(t=>4==t.parent_id),this.uses=t.data.uses,this.material=t.data.material),this.loadingFlag.setResult(!0)},t=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}search(t){this.modalController.dismiss(),this.router.navigateByUrl("shop/search/search-result/"+t.target.value)}navigateToTerms(t){let e={id:t.id,name:t.name};this.modalController.dismiss(),this.router.navigateByUrl("shop/products",{state:e})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(r.IN),s.Y36(o.d),s.Y36(a.sK),s.Y36(c.k),s.Y36(l.F0),s.Y36(r.IN))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-shop-search"]],viewQuery:function(t,e){if(1&t&&s.Gf(u,5),2&t){let t;s.iGM(t=s.CRH())&&(e.searchbar=t.first)}},inputs:{input:"input"},decls:15,vars:8,consts:[["mode","ios"],["slot","start"],[3,"click"],["slot","icon-only","name","close-outline"],[3,"value","placeholder","search"],["searchbar",""],[4,"ngIf"],["lines","none"],["size","6",4,"ngFor","ngForOf"],["size","6"],["expand","block","mode","ios","color","light",3,"click"],[1,"ion-text-center"],["fill","outline","shape","round","size","small","mode","ios",3,"click"],["slot","icon-only","name","chevron-down-outline",4,"ngIf"],["slot","icon-only","name","chevron-up-outline",4,"ngIf"],["slot","icon-only","name","chevron-down-outline"],["slot","icon-only","name","chevron-up-outline"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header",0),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",1),s.TgZ(3,"ion-button",2),s.NdJ("click",function(){return e.modalControl.dismiss()}),s._UZ(4,"ion-icon",3),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.TgZ(8,"ion-toolbar"),s.TgZ(9,"ion-searchbar",4,5),s.NdJ("search",function(t){return e.search(t)}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(11,"ion-content"),s.YNc(12,p,2,1,"div",6),s.YNc(13,P,9,5,"div",6),s.YNc(14,O,5,2,"ion-row",6),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,6,"SHOP.SEARCH")),s.xp6(3),s.Q6J("value",e.input)("placeholder",e.translate.instant("SHOP.KEYWORD")),s.xp6(3),s.Q6J("ngIf",e.usefor.length>0),s.xp6(1),s.Q6J("ngIf",e.showAll),s.xp6(1),s.Q6J("ngIf",e.uses.length>0||e.material.length>0))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.wd,r.VI,r.j9,r.W2,g.O5,r.yh,r.Q$,r.jY,r.Nd,g.sg,r.wI],pipes:[a.X$],styles:[""]}),t})()},26177:function(t,e,i){i.d(e,{t:function(){return a}});var n=i(38583),o=i(47063),s=i(13619),r=i(37716);let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[n.ez,s.Bz,o.Pc]]}),t})()},4015:function(t,e,i){i.d(e,{g:function(){return u}});var n=i(64762),o=i(59308),s=i(37716),r=i(47063),a=i(71239),c=i(13619),l=i(38583);function g(t,e){if(1&t&&(s.TgZ(0,"div",5),s._uU(1),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Oqu(t.dbLocalService.cartLength.length)}}let u=(()=>{class t{constructor(t,e){this.modalControl=t,this.dbLocalService=e}ngOnInit(){return(0,n.mG)(this,void 0,void 0,function*(){yield this.dbLocalService.getDataCart()})}presentSearch(){return(0,n.mG)(this,void 0,void 0,function*(){return yield(yield this.modalControl.create({component:o.w})).present()})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(r.IN),s.Y36(a.T))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-shop-toolbar"]],decls:5,vars:2,consts:[[3,"click"],["slot","icon-only","name","search-outline"],["routerLink","/tabs/shop/cart"],["slot","icon-only","name","bag-outline",3,"color"],["class","bag-cart",4,"ngIf"],[1,"bag-cart"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-button",0),s.NdJ("click",function(){return e.presentSearch()}),s._UZ(1,"ion-icon",1),s.qZA(),s.TgZ(2,"ion-button",2),s._UZ(3,"ion-icon",3),s.YNc(4,g,2,1,"div",4),s.qZA()),2&t&&(s.xp6(3),s.Q6J("color",e.dbLocalService.cartLength.length>0?"danger":"medium"),s.xp6(1),s.Q6J("ngIf",e.dbLocalService.cartLength.length>0))},directives:[r.YG,r.gu,c.rH,r.YI,l.O5],styles:["[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:.94em;font-size:.8em}"]}),t})()},75588:function(t,e,i){i.r(e),i.d(e,{ShopPageModule:function(){return ot}});var n=i(38583),o=i(90665),s=i(47063),r=i(81780),a=i(13619),c=i(64762),l=i(16738),g=i(27887),u=i(83111),h=i(59308),d=i(15085),p=i(37716),m=i(84465),f=i(71239),A=i(4015);function P(t,e){1&t&&(p.TgZ(0,"div",18),p._UZ(1,"ion-spinner",19),p.qZA())}function Z(t,e){if(1&t){const t=p.EpF();p.TgZ(0,"ion-slide",1),p.NdJ("click",function(){const e=p.CHM(t).$implicit;return p.oxw().loadProduct(e.url)}),p.TgZ(1,"div"),p._UZ(2,"img",20),p.qZA(),p.qZA()}if(2&t){const t=e.$implicit,i=p.oxw();p.xp6(2),p.Q6J("src",i.shopService.SITE_PATH+"/upload/advertiment/ge_image/"+t.image,p.LSH)}}function x(t,e){1&t&&(p.TgZ(0,"ion-list-header",21),p.TgZ(1,"ion-label",22),p._uU(2,"T\xe9p b\u1ea1c t\xe0i tr\u1ee3"),p.qZA(),p.TgZ(3,"div",23),p._UZ(4,"ion-icon",24),p.qZA(),p.qZA())}function O(t,e){if(1&t&&p._UZ(0,"img",32),2&t){const t=p.oxw().$implicit,e=p.oxw(3);p.Q6J("src",e.shopService.SITE_PATH+"/upload/eventeshop/"+t.banner,p.LSH)}}function T(t,e){if(1&t&&(p.TgZ(0,"ion-col",28),p.TgZ(1,"div",29),p._UZ(2,"img",30),p.YNc(3,O,1,1,"img",31),p.TgZ(4,"h6"),p._uU(5),p.qZA(),p.qZA(),p.qZA()),2&t){const t=e.$implicit,i=p.oxw(3);p.MGl("routerLink","product/",t.id,""),p.xp6(2),p.Q6J("src",i.shopService.SITE_PATH+t.img_default,p.LSH),p.xp6(1),p.Q6J("ngIf",t.banner),p.xp6(2),p.Oqu(t.alias)}}function _(t,e){if(1&t&&(p.TgZ(0,"ion-slide"),p.TgZ(1,"ion-row"),p.YNc(2,T,6,4,"ion-col",27),p.qZA(),p.qZA()),2&t){const t=e.$implicit;p.xp6(2),p.Q6J("ngForOf",t)}}function S(t,e){if(1&t&&(p.TgZ(0,"div",25),p.TgZ(1,"div",26),p.TgZ(2,"ion-slides",8),p.YNc(3,_,3,1,"ion-slide",17),p.qZA(),p._UZ(4,"div",10),p.qZA(),p.qZA()),2&t){const t=p.oxw();p.xp6(2),p.Q6J("options",t.bannerOpts),p.xp6(1),p.Q6J("ngForOf",t.productSpecial.list)}}function b(t,e){1&t&&(p.TgZ(0,"span"),p._uU(1,"0"),p.qZA())}function v(t,e){1&t&&(p.TgZ(0,"span"),p._uU(1,"0"),p.qZA())}function C(t,e){1&t&&(p.TgZ(0,"span"),p._uU(1,"0"),p.qZA())}function q(t,e){if(1&t&&(p.TgZ(0,"ion-list-header",33),p.TgZ(1,"ion-label",34),p._uU(2,"Flash"),p._UZ(3,"ion-icon",35),p._uU(4,"sale"),p.qZA(),p.TgZ(5,"div",36),p.TgZ(6,"div",37),p.YNc(7,b,2,0,"span",16),p._uU(8),p.qZA(),p.TgZ(9,"div",37),p.YNc(10,v,2,0,"span",16),p._uU(11),p.qZA(),p.TgZ(12,"div",37),p.YNc(13,C,2,0,"span",16),p._uU(14),p.qZA(),p.qZA(),p.qZA()),2&t){const t=p.oxw();p.xp6(7),p.Q6J("ngIf",t.remainingTime.hour<10),p.xp6(1),p.Oqu(t.remainingTime.hour),p.xp6(2),p.Q6J("ngIf",t.remainingTime.min<10),p.xp6(1),p.Oqu(t.remainingTime.min),p.xp6(2),p.Q6J("ngIf",t.remainingTime.seconds<10),p.xp6(1),p.Oqu(t.remainingTime.seconds)}}function w(t,e){if(1&t&&(p.TgZ(0,"div",49),p.TgZ(1,"span"),p._uU(2),p.ALo(3,"number"),p.qZA(),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(2),p.hij("-",p.xi3(3,1,100*t.ratio,"0.0-0"),"%")}}function M(t,e){if(1&t&&p._UZ(0,"img",50),2&t){const t=p.oxw().$implicit,e=p.oxw(2);p.Q6J("src",e.shopService.SITE_PATH+"/upload/eventeshop/"+t.banner,p.LSH)}}function I(t,e){if(1&t&&(p.TgZ(0,"div",51),p._uU(1),p.ALo(2,"number"),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(1),p.hij(" ",p.xi3(2,1,t.maxPrice,"1.0-0"),"\u20ab ")}}function R(t,e){if(1&t&&(p.TgZ(0,"div",51),p._uU(1),p.ALo(2,"number"),p.ALo(3,"number"),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(1),p.AsE(" ",p.xi3(2,2,t.minPrice,"1.0-0")," ~ ",p.xi3(3,5,t.maxPrice,"1.0-0"),"\u20ab ")}}function N(t,e){if(1&t&&(p.TgZ(0,"ion-col",40),p.YNc(1,w,4,4,"div",41),p.TgZ(2,"div",42),p._UZ(3,"img",43),p.YNc(4,M,1,1,"img",44),p.qZA(),p.TgZ(5,"div",45),p._uU(6),p.qZA(),p.TgZ(7,"div",46),p.TgZ(8,"small",47),p._uU(9),p.ALo(10,"number"),p.qZA(),p.qZA(),p.YNc(11,I,3,4,"div",48),p.YNc(12,R,4,8,"div",48),p.qZA()),2&t){const t=e.$implicit,i=p.oxw(2);p.MGl("routerLink","product/",t.id,""),p.xp6(1),p.Q6J("ngIf",0!=t.ratio),p.xp6(2),p.Q6J("src",i.shopService.SITE_PATH+t.img_default,p.LSH),p.xp6(1),p.Q6J("ngIf",t.banner),p.xp6(2),p.Oqu(t.alias),p.xp6(3),p.hij("",p.xi3(10,8,t.maxFullPrice,"0.0-0"),"\u20ab"),p.xp6(2),p.Q6J("ngIf",t.minPrice==t.maxPrice),p.xp6(1),p.Q6J("ngIf",t.minPrice!=t.maxPrice)}}function L(t,e){if(1&t&&(p.TgZ(0,"ion-grid",38),p.TgZ(1,"ion-row"),p.YNc(2,N,13,11,"ion-col",39),p.qZA(),p.qZA()),2&t){const t=p.oxw();p.xp6(2),p.Q6J("ngForOf",t.flashSales.list)}}function U(t,e){if(1&t&&(p.TgZ(0,"ion-list-header",5),p.TgZ(1,"ion-label"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"ion-button",52),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.qZA()),2&t){const t=p.oxw();p.xp6(2),p.Oqu(p.lcZ(3,3,"SHOP.HOME.SALE")),p.xp6(3),p.AsE("",t.sales.numRows," ",p.lcZ(6,5,"SHOP.HOME.PRODUCT"),"")}}function E(t,e){if(1&t&&(p.TgZ(0,"div",49),p.TgZ(1,"span"),p._uU(2),p.ALo(3,"number"),p.qZA(),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(2),p.hij("-",p.xi3(3,1,100*t.ratio,"0.0-0"),"%")}}function F(t,e){if(1&t&&p._UZ(0,"img",50),2&t){const t=p.oxw().$implicit,e=p.oxw(2);p.Q6J("src",e.shopService.SITE_PATH+"/upload/eventeshop/"+t.banner,p.LSH)}}function J(t,e){if(1&t&&(p.TgZ(0,"div",51),p._uU(1),p.ALo(2,"number"),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(1),p.hij(" ",p.xi3(2,1,t.maxPrice,"1.0-0"),"\u20ab ")}}function D(t,e){if(1&t&&(p.TgZ(0,"div",51),p._uU(1),p.ALo(2,"number"),p.ALo(3,"number"),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(1),p.AsE(" ",p.xi3(2,2,t.minPrice,"1.0-0")," ~ ",p.xi3(3,5,t.maxPrice,"1.0-0"),"\u20ab ")}}function Y(t,e){if(1&t&&(p.TgZ(0,"ion-col",40),p.YNc(1,E,4,4,"div",41),p.TgZ(2,"div",42),p._UZ(3,"img",43),p.YNc(4,F,1,1,"img",44),p.qZA(),p.TgZ(5,"div",45),p._uU(6),p.qZA(),p.TgZ(7,"div",46),p.TgZ(8,"small",47),p._uU(9),p.ALo(10,"number"),p.qZA(),p.qZA(),p.YNc(11,J,3,4,"div",48),p.YNc(12,D,4,8,"div",48),p.qZA()),2&t){const t=e.$implicit,i=p.oxw(2);p.MGl("routerLink","product/",t.id,""),p.xp6(1),p.Q6J("ngIf",0!=t.ratio),p.xp6(2),p.Q6J("src",i.shopService.SITE_PATH+t.img_default,p.LSH),p.xp6(1),p.Q6J("ngIf",t.banner),p.xp6(2),p.Oqu(t.alias),p.xp6(3),p.hij("",p.xi3(10,8,t.maxFullPrice,"0.0-0"),"\u20ab"),p.xp6(2),p.Q6J("ngIf",t.minPrice==t.maxPrice),p.xp6(1),p.Q6J("ngIf",t.minPrice!=t.maxPrice)}}function y(t,e){if(1&t&&(p.TgZ(0,"ion-grid",38),p.TgZ(1,"ion-row"),p.YNc(2,Y,13,11,"ion-col",39),p.qZA(),p.qZA()),2&t){const t=p.oxw();p.xp6(2),p.Q6J("ngForOf",t.sales.list)}}function Q(t,e){if(1&t&&(p.TgZ(0,"ion-list-header",5),p.TgZ(1,"ion-label"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"ion-button",53),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.qZA()),2&t){const t=p.oxw();p.xp6(2),p.Oqu(p.lcZ(3,3,"SHOP.HOME.COMPANY")),p.xp6(3),p.AsE("",t.company.numRows," ",p.lcZ(6,5,"SHOP.HOME.COMPANIES")," ")}}function k(t,e){if(1&t&&(p.TgZ(0,"ion-col",56),p.TgZ(1,"div",57),p._UZ(2,"img",58),p.qZA(),p.qZA()),2&t){const t=e.$implicit,i=p.oxw(2);p.MGl("routerLink","companys/company/",t.id,""),p.xp6(2),p.Q6J("src",i.shopService.SITE_PATH+"/upload/company/thumb_image/"+t.image,p.LSH)}}function H(t,e){1&t&&(p.TgZ(0,"ion-item"),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&t&&(p.xp6(1),p.Oqu(p.lcZ(2,1,"SHOP.HOME.NO_COMPANIES")))}function $(t,e){if(1&t&&(p.TgZ(0,"ion-grid"),p.TgZ(1,"ion-row",54),p.YNc(2,k,3,2,"ion-col",55),p.qZA(),p.YNc(3,H,3,3,"ion-item",16),p.qZA()),2&t){const t=p.oxw();p.xp6(2),p.Q6J("ngForOf",t.company.list),p.xp6(1),p.Q6J("ngIf",0==t.company.numRows)}}const z=function(t,e){return{name:t,id:e}};function j(t,e){if(1&t&&(p.TgZ(0,"ion-list-header",5),p.TgZ(1,"ion-label"),p._uU(2),p.qZA(),p.TgZ(3,"ion-button",59),p._uU(4),p.ALo(5,"translate"),p.qZA(),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(2),p.Oqu(t.name),p.xp6(1),p.Q6J("state",p.WLB(6,z,t.name,t.id)),p.xp6(1),p.AsE("",t.num," ",p.lcZ(5,4,"SHOP.HOME.PRODUCT")," ")}}function G(t,e){if(1&t&&(p.TgZ(0,"div",49),p.TgZ(1,"span"),p._uU(2),p.ALo(3,"number"),p.qZA(),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(2),p.hij("-",p.xi3(3,1,100*t.ratio,"0.0-0"),"%")}}function B(t,e){if(1&t&&p._UZ(0,"img",50),2&t){const t=p.oxw().$implicit,e=p.oxw(2);p.Q6J("src",e.shopService.SITE_PATH+"/upload/eventeshop/"+t.banner,p.LSH)}}function V(t,e){if(1&t&&(p.TgZ(0,"div",46),p.TgZ(1,"small",61),p._uU(2),p.ALo(3,"number"),p.qZA(),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(2),p.hij("",p.xi3(3,1,t.maxFullPrice,"1.0-0"),"\u20ab")}}function W(t,e){if(1&t&&(p.TgZ(0,"div",51),p._uU(1),p.ALo(2,"number"),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(1),p.hij(" ",p.xi3(2,1,t.maxPrice,"1.0-0"),"\u20ab ")}}function X(t,e){if(1&t&&(p.TgZ(0,"div",51),p._uU(1),p.ALo(2,"number"),p.ALo(3,"number"),p.qZA()),2&t){const t=p.oxw().$implicit;p.xp6(1),p.AsE(" ",p.xi3(2,2,t.minPrice,"1.0-0")," ~ ",p.xi3(3,5,t.maxPrice,"1.0-0"),"\u20ab ")}}function K(t,e){if(1&t&&(p.TgZ(0,"ion-col",40),p.YNc(1,G,4,4,"div",41),p.TgZ(2,"div",42),p._UZ(3,"img",43),p.YNc(4,B,1,1,"img",44),p.qZA(),p.TgZ(5,"div",45),p._uU(6),p.qZA(),p.YNc(7,V,4,4,"div",60),p.YNc(8,W,3,4,"div",48),p.YNc(9,X,4,8,"div",48),p.qZA()),2&t){const t=e.$implicit,i=p.oxw(2);p.MGl("routerLink","product/",t.id,""),p.xp6(1),p.Q6J("ngIf",0!=t.ratio),p.xp6(2),p.Q6J("src",i.shopService.SITE_PATH+t.img_default,p.LSH),p.xp6(1),p.Q6J("ngIf",t.banner),p.xp6(2),p.Oqu(t.alias),p.xp6(1),p.Q6J("ngIf",0!=t.ratio),p.xp6(1),p.Q6J("ngIf",t.minPrice==t.maxPrice),p.xp6(1),p.Q6J("ngIf",t.minPrice!=t.maxPrice)}}function tt(t,e){if(1&t&&(p.TgZ(0,"div"),p.YNc(1,j,6,9,"ion-list-header",15),p.TgZ(2,"ion-grid",38),p.TgZ(3,"ion-row"),p.YNc(4,K,10,8,"ion-col",39),p.qZA(),p.qZA(),p.qZA()),2&t){const t=e.$implicit,i=p.oxw();p.xp6(1),p.Q6J("ngIf",i.terms),p.xp6(3),p.Q6J("ngForOf",t.list)}}const et=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,s){this.modalController=t,this.shopService=e,this.toastService=i,this.translate=n,this.localDb=o,this.route=s,this.loadingFlag=new g.E,this.listADS=[],this.remainingTime={hour:0,min:0,seconds:0},this.bannerOpts={speed:400,pagination:{el:".swiper-pagination",dynamicBullets:!0}},this.productSpecial={numRows:0,list:[]}}ngOnInit(){this.selectedRegion=this.localDb.eShopRegion?this.localDb.eShopRegion:{id:"",name:this.translate.instant("SHOP.LOCATION.ALL")},this.getHomeProducts(this.selectedRegion.id),this.loadFlashsale(),this.loadProductSpecial(),this.loadAds()}presentLocation(){return(0,c.mG)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:u.o});return t.onDidDismiss().then(t=>{t.data&&(this.selectedRegion=t.data,this.getHomeProducts(this.selectedRegion.id))}),yield t.present()})}getHomeProducts(t=""){this.loadingFlag.setPending(!0),this.shopService.getHomeProducts(t).pipe().subscribe(t=>{"error"==t.status?this.toastService.warning(t.error.message):(this.sales=t.data.sales,this.sales.list=this.prepareProductPrice(t.data.sales.list),this.company=t.data.company,this.terms=this.prepareTermData(t.data.terms),t.data.flashsales&&(this.flashSales=t.data.flashsales,this.flashSales.list=this.prepareProductPrice(this.flashSales.list),this.prepareFlashsale())),this.loadingFlag.setResult(!0)},t=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}loadFlashsale(){this.shopService.loadFlashsale().pipe().subscribe(t=>{"error"==t.status?console.log(t.error.message):t.data.flashsales&&(this.flashSales=t.data.flashsales,this.flashSales.list=this.prepareProductPrice(this.flashSales.list),this.prepareFlashsale())},t=>{console.log(this.translate.instant("ERROR_CONNECT"))})}prepareTermData(t){let e=[];return t.forEach((t,i)=>{e.push(t);let n=[];t.list=t.list.split(".lhhlv1."),t.list.forEach(t=>{let e=t.split(".lhhlv2."),i=["id","alias","name","rate_score","rate_count","buyed_count","hit","company_id","label_price","ratio","img_default","banner","type_key","type_value"];e=e.reduce(function(t,e,n){return t[i[n]]=e,t},{}),n.push(e)}),e[i].list=this.prepareProductPrice(n)}),e}prepareProductPrice(t){let e=[];return t.forEach(t=>{let i=t.label_price.split("~");t.minPrice=i[0],t.maxPrice=i[1],t.maxFullPrice=t.maxPrice/(1-t.ratio),e.push(t)}),e}loadAds(){this.shopService.getAds().subscribe(t=>{"success"==t.status?(this.listADS="EWM"in t.data?t.data.EWM:[],console.log(this.listADS)):this.toastService.danger(this.translate.instant("ERROR_CONNECT"))},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}loadProduct(t){let e=t.trim().split("//"),i=e[e.length-1].split("/");console.log(i);let n={company:"shop/companys/company/",detail:"shop/product/",shop:"shop/store/",term:"shop/products/"};if(4==i.length){let t=i[3].split("-");this.route.navigateByUrl(n[i[2]]+parseInt(t[t.length-1]))}}prepareFlashsale(){let t=this.flashSales.listFrames[this.flashSales.currentFrameIndex],e=new Date,i=(new Date(e.getFullYear(),e.getMonth()+1,e.getDate(),t[0],0,0,0),new Date(e.getFullYear(),e.getMonth(),e.getDate(),t[1],0,0,0)),n=l.utc(l(i.getTime()).diff(e.getTime())).format("HH:mm:ss").split(":");this.remainingTime.hour=parseInt(n[0]),this.remainingTime.min=parseInt(n[1]),this.remainingTime.seconds=parseInt(n[2]);let o=this;this.timeCountDown=setInterval(()=>{o.remainingTime.seconds=0==o.remainingTime.seconds?0:o.remainingTime.seconds-=1,0==o.remainingTime.seconds&&(o.remainingTime.min>0&&(o.remainingTime.seconds=59),o.remainingTime.min=0==o.remainingTime.min?0:o.remainingTime.min-=1),0==o.remainingTime.min&&(o.remainingTime.hour>0?(o.remainingTime.hour=o.remainingTime.hour>0?o.remainingTime.hour-=1:0,o.remainingTime.min=59,o.remainingTime.seconds=59):o.remainingTime.hour=0),0==o.remainingTime.hour&&0==o.remainingTime.min&&0==o.remainingTime.seconds&&(this.flashSales.list=[],this.flashSales.numRows=0,clearInterval(this.timeCountDown))},1e3)}presentSearch(){return(0,c.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:h.w})).present()})}doRefresh(t){this.timeCountDown&&clearInterval(this.timeCountDown),this.selectedRegion=this.localDb.eShopRegion?this.localDb.eShopRegion:{id:"",name:this.translate.instant("SHOP.LOCATION.ALL")},this.getHomeProducts(this.selectedRegion.id),this.loadFlashsale(),this.loadProductSpecial(),t.target.complete()}loadProductSpecial(){this.shopService.getListProductSpecial(0,0).subscribe(t=>{if("success"==t.status){this.productSpecial.numRows=t.data.numRows;let i=this.prepareProductPrice(t.data.list);console.log(i);for(var e=0;e<i.length;e++)e%2==0?this.productSpecial.list.push([i[e]]):this.productSpecial.list[this.productSpecial.list.length-1].push(i[e]);console.log(this.productSpecial)}else this.toastService.danger(this.translate.instant("ERROR_CONNECT"))},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}return t.\u0275fac=function(e){return new(e||t)(p.Y36(s.IN),p.Y36(d.d),p.Y36(m.k),p.Y36(r.sK),p.Y36(f.T),p.Y36(a.F0))},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-shop"]],decls:25,vars:13,consts:[["slot","start"],[3,"click"],["slot","end","name","caret-down-outline"],["slot","end"],["slot","fixed",3,"ionRefresh"],["mode","ios"],["class","spiner-loading",4,"ngIf"],[1,"banner"],[3,"options"],[3,"click",4,"ngFor","ngForOf"],[1,"swiper-pagination"],["mode","ios","routerLink","shop-special",4,"ngIf"],["style","position: relative;",4,"ngIf"],["mode","ios","routerLink","shop-flashsales",4,"ngIf"],["class","grid-product",4,"ngIf"],["mode","ios",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"spiner-loading"],["name","dots"],[3,"src"],["mode","ios","routerLink","shop-special"],["color","primary"],[1,"arrowButton"],["name","chevron-forward-outline"],[2,"position","relative"],[1,"banner","ion-margin"],["size","6",3,"routerLink",4,"ngFor","ngForOf"],["size","6",3,"routerLink"],[1,"boxSpecial"],["onError","this.src='assets/img/1235.jpg'",1,"imgProductSpecial",3,"src"],["class","bannerSpecial",3,"src",4,"ngIf"],[1,"bannerSpecial",3,"src"],["mode","ios","routerLink","shop-flashsales"],["color","danger"],["name","flash-outline"],[1,"boxTimeFlashsale"],[1,"boxTime"],[1,"grid-product"],["size","6","size-sm","3",3,"routerLink",4,"ngFor","ngForOf"],["size","6","size-sm","3",3,"routerLink"],["class","discount-label",4,"ngIf"],[1,"img-box"],["onError","this.src='assets/img/1235.jpg'",1,"m-auto",3,"src"],["class","bannerProduct",3,"src",4,"ngIf"],[1,"product-alias"],[1,"promotion-box"],[1,"strike","ion-align-self-center"],["class","price-box",4,"ngIf"],[1,"discount-label"],[1,"bannerProduct",3,"src"],[1,"price-box"],["fill","outline","routerLink","promotion"],["fill","outline","routerLink","companys"],[1,"ion-justify-content-center"],["size","4","class","ion-text-center",3,"routerLink",4,"ngFor","ngForOf"],["size","4",1,"ion-text-center",3,"routerLink"],[1,"brand-box"],["onError","this.src='assets/img/shop-img-default.png'",3,"src"],["routerLink","products","fill","outline",3,"state"],["class","promotion-box",4,"ngIf"],[1,"strike"]],template:function(t,e){1&t&&(p.TgZ(0,"ion-header"),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-buttons",0),p.TgZ(3,"ion-button",1),p.NdJ("click",function(){return e.presentLocation()}),p._uU(4),p._UZ(5,"ion-icon",2),p.qZA(),p.qZA(),p.TgZ(6,"ion-buttons",3),p._UZ(7,"app-shop-toolbar"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(8,"ion-content"),p.TgZ(9,"ion-refresher",4),p.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),p._UZ(10,"ion-refresher-content",5),p.qZA(),p.YNc(11,P,2,0,"div",6),p.TgZ(12,"div",7),p.TgZ(13,"ion-slides",8),p.YNc(14,Z,3,1,"ion-slide",9),p.qZA(),p._UZ(15,"div",10),p.qZA(),p.YNc(16,x,5,0,"ion-list-header",11),p.YNc(17,S,5,2,"div",12),p.YNc(18,q,15,6,"ion-list-header",13),p.YNc(19,L,3,1,"ion-grid",14),p.YNc(20,U,7,7,"ion-list-header",15),p.YNc(21,y,3,1,"ion-grid",14),p.YNc(22,Q,7,7,"ion-list-header",15),p.YNc(23,$,4,2,"ion-grid",16),p.YNc(24,tt,5,2,"div",17),p.qZA()),2&t&&(p.xp6(4),p.hij(" ",e.selectedRegion.name," "),p.xp6(7),p.Q6J("ngIf",e.loadingFlag.pending),p.xp6(2),p.Q6J("options",e.bannerOpts),p.xp6(1),p.Q6J("ngForOf",e.listADS),p.xp6(2),p.Q6J("ngIf",e.productSpecial.numRows>0),p.xp6(1),p.Q6J("ngIf",e.productSpecial.numRows>0),p.xp6(1),p.Q6J("ngIf",e.flashSales),p.xp6(1),p.Q6J("ngIf",e.flashSales),p.xp6(1),p.Q6J("ngIf",e.sales&&e.sales.numRows>0),p.xp6(1),p.Q6J("ngIf",e.sales&&e.sales.numRows>0),p.xp6(1),p.Q6J("ngIf",e.company),p.xp6(1),p.Q6J("ngIf",e.company),p.xp6(1),p.Q6J("ngForOf",e.terms))},directives:[s.Gu,s.sr,s.Sm,s.YG,s.gu,A.g,s.W2,s.nJ,s.Wo,n.O5,s.Hr,n.sg,s.PQ,s.A$,s.yh,s.YI,a.rH,s.Q$,s.Nd,s.wI,s.jY,s.Ie],pipes:[n.JJ,r.X$],styles:['[_nghost-%COMP%]{--bullet-background-active: var(--ion-color-light);--bullet-background: var(--ion-color-dark)}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}[_nghost-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:"Averta";font-size:.8em}[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:1em;font-size:.8em}[_nghost-%COMP%]   .brand-box[_ngcontent-%COMP%]{text-align:center;padding:3px 5px;height:100%;max-width:140px;margin:0 auto;overflow:hidden;border:1px solid rgba(192,192,192,.5);border-radius:10px;display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .brand-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%!important;margin:auto;border-radius:5px}[_nghost-%COMP%]   .text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-height:16px;height:32px;-webkit-box-orient:vertical}[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]   .swiper-pagination[_ngcontent-%COMP%]{z-index:1000;position:absolute;bottom:10px;left:5px}','[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}[_nghost-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:"Averta";font-size:.8em}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;margin-top:29px;margin-bottom:6px;font-family:"Averta";font-size:.8em;display:flex;margin-right:16px}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]   .boxTime[_ngcontent-%COMP%]{color:#fff;background-color:#000;padding-left:2px;padding-right:2px;margin-right:2px;margin-left:2px;border-radius:2px;max-width:27px;width:27px;text-align:center}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]{min-height:150px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .bannerSpecial[_ngcontent-%COMP%]{max-height:50px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .imgProductSpecial[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .arrowButton[_ngcontent-%COMP%]{vertical-align:middle;margin-right:16px}[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:1em;font-size:.8em}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:240px;width:100%}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border-top:1px solid rgba(192,192,192,.2);border-left:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border-right:1px solid rgba(192,192,192,.2);border-bottom:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]{flex:auto;text-align:center;margin:0 auto;overflow:hidden;position:relative}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:80x!important;margin-bottom:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   .bannerProduct[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;max-height:60px;max-width:80%;width:auto}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .product-alias[_ngcontent-%COMP%]{line-height:1.2em;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;height:2.4em;-webkit-box-orient:vertical}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]{margin:3px 0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .mr[_ngcontent-%COMP%]{margin-left:3px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .strike[_ngcontent-%COMP%]{text-decoration:line-through}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]{margin:3px 0;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;height:1.3em;-webkit-box-orient:vertical;color:var(--ion-color-danger)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]{padding:5px;position:absolute;right:5px;top:10px;float:left;width:43px;background-color:#de2525;z-index:9999;transform:rotate(20deg);border-radius:4px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:after{right:42px;border:solid transparent;content:" ";height:0;width:0;position:absolute;border-color:#88b7d500;border-right-color:#de2525;border-width:13.5px;top:50%;margin-top:-13.6px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:before{content:"";z-index:2;position:absolute;top:44%;right:100%;width:5px;height:5px;opacity:.95;background:#fff;border-radius:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center;font-family:"Averta"}']}),t})()},{path:"search",loadChildren:()=>i.e(6963).then(i.bind(i,36963)).then(t=>t.ShopSearchPageModule)},{path:"location",loadChildren:()=>i.e(2036).then(i.bind(i,52036)).then(t=>t.ShopLocationPageModule)},{path:"cart",loadChildren:()=>i.e(3607).then(i.bind(i,93607)).then(t=>t.ShopCartPageModule)},{path:"category",loadChildren:()=>i.e(5173).then(i.bind(i,45173)).then(t=>t.ShopCategoryPageModule)},{path:"store/:id",loadChildren:()=>i.e(4432).then(i.bind(i,24432)).then(t=>t.ShopStorePageModule)},{path:"product/:id",loadChildren:()=>Promise.all([i.e(1224),i.e(2222)]).then(i.bind(i,82222)).then(t=>t.ShopProductPageModule)},{path:"stores",loadChildren:()=>i.e(4758).then(i.bind(i,54758)).then(t=>t.ShopStoresPageModule)},{path:"promotion",loadChildren:()=>Promise.all([i.e(8592),i.e(9834)]).then(i.bind(i,29834)).then(t=>t.ShopPromotionPageModule)},{path:"products",loadChildren:()=>Promise.all([i.e(8592),i.e(565)]).then(i.bind(i,20565)).then(t=>t.ShopProductsPageModule)},{path:"shop-filter",loadChildren:()=>Promise.all([i.e(8592),i.e(676)]).then(i.bind(i,90676)).then(t=>t.ShopFilterPageModule)},{path:"shop-order",loadChildren:()=>i.e(947).then(i.bind(i,70947)).then(t=>t.ShopOrderPageModule)},{path:"companys",loadChildren:()=>i.e(1468).then(i.bind(i,81468)).then(t=>t.ShopCompanysPageModule)},{path:"shop-flashsales",loadChildren:()=>i.e(3469).then(i.bind(i,73469)).then(t=>t.ShopFlashsalesPageModule)},{path:"shop-special",loadChildren:()=>i.e(8625).then(i.bind(i,28625)).then(t=>t.ShopSpecialPageModule)}];let it=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[a.Bz.forChild(et)],a.Bz]}),t})();var nt=i(26177);let ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[n.ez,o.u5,s.Pc,it,r.aw.forChild(),nt.t]]}),t})()},15085:function(t,e,i){i.d(e,{d:function(){return r}});var n=i(15189),o=i(92340),s=i(37716);let r=(()=>{class t{constructor(t){this.requestApiService=t,this.SITE_PATH=o.h_.SITE_PATH,this.PRODUCT_API=this.SITE_PATH+"/eproduct/eproduct-api",this.COMMENT_API=this.SITE_PATH+"/eproduct/comment-api",this.DISCOUNT_API=this.SITE_PATH+"/eproduct/discount-api",this.ADDRESS_API=this.SITE_PATH+"/eproduct/address-api",this.ORDER_API=this.SITE_PATH+"/eproduct/order-api"}getHomeProducts(t){return this.requestApiService.getOutSite(this.PRODUCT_API+"&action=home&province_id="+t)}getPromotionProducts(t,e,i){return this.requestApiService.postOutSite(this.PRODUCT_API+"&action=productDiscount&page="+e+"&province_id="+t,i)}getTermProducts(t,e,i){return this.requestApiService.postOutSite(this.PRODUCT_API+"&action=productPerTerms&page="+e+"&province_id="+t,i)}getShopProducts(t){return this.requestApiService.getOutSite(this.PRODUCT_API+"&action=productPerShops&shop_id="+t)}getFilterOptions(t){return this.requestApiService.postOutSite(this.PRODUCT_API+"&action=optionFilter",t)}getAProduct(t){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=get&id="+t)}getListComment(t,e){return this.requestApiService.getOutSite(this.COMMENT_API+"?action=listAProduct&product_id="+t+"&page="+e)}getListRep(t,e,i){return this.requestApiService.getOutSite(this.COMMENT_API+"?action=listRepComment&product_id="+e+"&id="+t+"&page="+i)}likeComment(t){return this.requestApiService.getOutSite(this.COMMENT_API+"?action=like&id="+t)}addComment(t){return this.requestApiService.postOutSite(this.COMMENT_API+"?action=add",t)}getAShop(t){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=getShop&id="+t)}getListDiscount(t){return this.requestApiService.getOutSite(this.DISCOUNT_API+"?action=list&shop_id="+t)}getListAddress(){return this.requestApiService.getOutSite(this.ADDRESS_API+"?action=list")}getAAddress(t){return this.requestApiService.getOutSite(this.ADDRESS_API+"?action=get&id="+t)}addAddress(t){return this.requestApiService.postOutSite(this.ADDRESS_API+"?action=add",t)}updateAddress(t,e){return this.requestApiService.postOutSite(this.ADDRESS_API+"?action=edit&id="+t,e)}chooseDefaultAddress(t){return this.requestApiService.getOutSite(this.ADDRESS_API+"?action=chooseDefault&id="+t)}deleteAddress(t){return this.requestApiService.getOutSite(this.ADDRESS_API+"?action=delete&id="+t)}listUnitChild(t){return this.requestApiService.getOutSite(this.ADDRESS_API+"?action=getChildUnit&parent_id="+t)}listOrder(){return this.requestApiService.getOutSite(this.ORDER_API+"?action=list")}saveOrder(t){return this.requestApiService.postOutSite(this.ORDER_API+"?action=save",t)}getOrder(t){return this.requestApiService.getOutSite(this.ORDER_API+"?action=detail&id="+t)}rating(t){return this.requestApiService.postOutSite(this.ORDER_API+"?action=rating",t)}listCompany(t){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=getListCompany&page="+t)}listProductPerCompany(t,e){return this.requestApiService.postOutSite(this.PRODUCT_API+"?action=productPerCompany&page="+e,t)}listTerm(){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=list-terms")}searchByKeyword(t){return this.requestApiService.postOutSite(this.PRODUCT_API+"?action=listSearch",t)}getAds(){return this.requestApiService.getOutSite(this.SITE_PATH+"/advertiment/load?mod=eshop")}getShippingFee(t){return this.requestApiService.postOutSite(this.ORDER_API+"?action=getShippingFee",t)}loadFlashsale(){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=loadFlashsale")}saveCancelOrder(t,e){return this.requestApiService.postOutSite(this.ORDER_API+"?action=cancel&id="+t,e)}loadFlashsaleFull(t,e,i){let n="";return e&&(n+="&term_id="+e),void 0!==i&&(n+="&fs_time="+i),this.requestApiService.getOutSite(this.PRODUCT_API+"?action=listFlashsales&page="+t+n)}calPriceEvent(t,e,i){let n=t;switch(e){case"same":n=i;break;case"sale_percent":n=t*(100-i)/100;break;case"sale_price":n=t-i}return n<0&&(n=0),n}getCodeEshop(t){return this.requestApiService.getOutSite(this.ORDER_API+"?action=checkCodeEshop&code="+t)}geListCodeEshop(){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=listPromoteCode")}getListProductSpecial(t,e){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=listProductSpecial&page="+t+"&term_id="+e)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(n.$))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);