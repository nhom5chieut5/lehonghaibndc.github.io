!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[5728],{27887:function(e,i,o){o.d(i,{E:function(){return r}});var r=function(){function e(){t(this,e),this.start=null,this.end=null,this.pending=null,this.result=null,this.count=0}return n(e,[{key:"setStart",value:function(t){this.start=t,!0===t&&(this.pending=!0,this.end=!1),this.result=null,this.count++}},{key:"setPending",value:function(t){this.pending=t,!1===t?this.start=!1:this.end=!0}},{key:"setResult",value:function(t){this.result=t,this.pending=!1,this.start=!1,this.end=!0}}]),e}()},25728:function(e,n,i){i.r(n),i.d(n,{StoreReportPageModule:function(){return f}});var o,r=i(38583),a=i(90665),s=i(47063),u=i(13619),c=i(96351),l=i(37716),h=[{path:"",component:c.E}],d=((o=function e(){t(this,e)}).\u0275fac=function(t){return new(t||o)},o.\u0275mod=l.oAB({type:o}),o.\u0275inj=l.cJS({imports:[[u.Bz.forChild(h)],u.Bz]}),o),f=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[r.ez,a.u5,s.Pc,d]]}),e}()},96351:function(e,i,o){o.d(i,{E:function(){return g}});var r=o(27887),a=o(22923),s=o(37716),u=o(47063),c=o(81780),l=o(84465),h=o(56209),d=o(38583);function f(t,e){1&t&&(s.TgZ(0,"div"),s._UZ(1,"ion-spinner",6),s.qZA())}var p,g=((p=function(){function e(n,i,o,a){t(this,e),this.modalControler=n,this.translate=i,this.storeService=o,this.toastService=a,this.loadingFlag=new r.E}return n(e,[{key:"ngOnInit",value:function(){this.loadData()}},{key:"loadData",value:function(){var t=this;this.loadingFlag.setPending(!0),this.storeService.getApiStore("analyze","&fcode="+this.storeService.getFarmCode(),"manager/store-api-mobie").subscribe(function(e){1==e.status?t.initChart(e.data):t.toastService.warning(e.error),t.loadingFlag.setResult(!0)},function(){t.toastService.danger(t.translate.instant("ERROR_CONNECT")),t.loadingFlag.setResult(!1)})}},{key:"initChart",value:function(t){var e=[],n=[],i=[];for(var o in t.usePerDay)for(var r in e.push(o),t.usePerDay[o])-1==i.indexOf(r)&&(i.push(r),n.push({name:r,type:"bar",stack:"total",label:{show:!1},emphasis:{focus:"series"},data:[]}));e.forEach(function(e){for(var o=0;o<i.length;o++){var r=0;t.usePerDay[e][i[o]]&&(r=+(+t.usePerDay[e][i[o]]).toFixed(0)),n[o].data.push(r)}});var a=[],s=[{name:this.translate.instant("COST"),type:"bar",stack:"total",label:{show:!1},emphasis:{focus:"series"},data:[]}];t.costPerDay.forEach(function(t){a.push(t.date),s[0].data.push((+t.total).toFixed(0))}),this.optionDay={title:{text:this.translate.instant("WAREHOUSE_MOD.TOTAL_QUANTITY"),padding:0,left:"center",textStyle:{fontFamily:"averta",fontSize:17,fontWeight:600}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:"0"},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},yAxis:{type:"value"},xAxis:{type:"category",data:e},series:n},this.optionCost={title:{text:this.translate.instant("WAREHOUSE_MOD.TOTAL_COST"),padding:0,left:"center",textStyle:{fontFamily:"averta",fontSize:17,fontWeight:600}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:"0"},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},yAxis:{type:"value"},xAxis:{type:"category",data:a},series:s}}}]),e}()).\u0275fac=function(t){return new(t||p)(s.Y36(u.IN),s.Y36(c.sK),s.Y36(a.d),s.Y36(l.k))},p.\u0275cmp=s.Xpm({type:p,selectors:[["app-store-report"]],decls:13,vars:6,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["echarts","",1,"ion-margin-top",3,"options"],[1,"ion-text-center"],[4,"ngIf"],["name","dots"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return e.modalControler.dismiss()}),s._UZ(4,"ion-icon",2),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"ion-content"),s._UZ(9,"div",3),s._UZ(10,"div",3),s.TgZ(11,"div",4),s.YNc(12,f,2,0,"div",5),s.qZA(),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,4,"WAREHOUSE_MOD.REPORT")),s.xp6(3),s.Q6J("options",e.optionDay),s.xp6(1),s.Q6J("options",e.optionCost),s.xp6(2),s.Q6J("ngIf",e.loadingFlag.pending))},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.wd,u.W2,h._w,d.O5,u.PQ],pipes:[c.X$],styles:[""]}),p)},22923:function(e,i,o){o.d(i,{d:function(){return l}});var r,a=o(88002),s=o(26215),u=o(15189),c=o(37716),l=((r=function(){function e(n){t(this,e),this.reqAPIService=n,this.urlApi="/manager/store-api-mobie",this.NEW_URL_API="/manager/warehouse-api",this.changeDataStore=!1,this.onLoaded$=new s.X(0)}return n(e,[{key:"destroy",value:function(){this.fcode=null,this.store=null}},{key:"setFarmCode",value:function(t){this.fcode=t}},{key:"getFarmCode",value:function(){return this.fcode}},{key:"setStoreCode",value:function(t){this.wcode=t}},{key:"getStoreCode",value:function(){return this.wcode}},{key:"setStore",value:function(t){this.store=t}},{key:"getStore",value:function(){return this.store}},{key:"itemChanged",value:function(t,e){void 0!==this.store[t]&&Object.assign(this.store[t],e)}},{key:"getApiStore",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t=""===i?this.NEW_URL_API+"?action="+e+"&wcode="+this.wcode+n:"/".concat(i,"?action=")+e+n,this.reqAPIService.get(t).pipe((0,a.U)(function(t){return t}))}},{key:"sendPost",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return t=""===o?this.NEW_URL_API+"?action="+e+"&wcode="+this.wcode+i:"/".concat(o,"?action=")+e+i,this.reqAPIService.post(t,n).pipe((0,a.U)(function(t){return t}))}},{key:"sendPostWithFile",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.reqAPIService.postApiWithFile(t,e,"&wcode="+this.wcode+n,this.NEW_URL_API)}},{key:"postEdit",value:function(t,e){return this.reqAPIService.post(this.urlApi+"?action=edit-product-private&fcode="+this.fcode+"&id="+t,e)}}]),e}()).\u0275fac=function(t){return new(t||r)(c.LFG(u.$))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r)}}])}();