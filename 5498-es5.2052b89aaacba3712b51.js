!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[5498],{73473:function(e,i,o){o.d(i,{l:function(){return s}});var a,r=o(37716),s=((a=function(){function e(n){t(this,e),this.el=n,this.permissionsCanShow=[],this.el.nativeElement.style.visibility="hidden",this.el.nativeElement.style.display="none"}return n(e,[{key:"PermissionsShow",set:function(t){this.permissionsCanShow=t}},{key:"CurrentPermisson",set:function(t){this.currentPermission=t,this.setShow()}},{key:"PermissionAction",set:function(t){this.currentPermission=t,this.setPointEvents()}},{key:"ngOnInit",value:function(){}},{key:"setShow",value:function(){this.permissionsCanShow.includes(this.currentPermission)?(this.el.nativeElement.style.visibility="visible",this.el.nativeElement.style.display="block"):(this.el.nativeElement.style.visibility="hidden",this.el.nativeElement.style.display="none")}},{key:"setPointEvents",value:function(){this.el.nativeElement.style.visibility="visible",this.el.nativeElement.style.display="block",this.el.nativeElement.style["pointer-events"]=this.permissionsCanShow.includes(this.currentPermission)?"visible":"none"}}]),e}()).\u0275fac=function(t){return new(t||a)(r.Y36(r.SBq))},a.\u0275dir=r.lG2({type:a,selectors:[["","appPermission",""]],inputs:{PermissionsShow:["appPermission","PermissionsShow"],CurrentPermisson:["currentPermission","CurrentPermisson"],PermissionAction:["permissionAction","PermissionAction"]}}),a)},66031:function(e,i,o){o.d(i,{O:function(){return T}});var a=o(64762),r=o(27887),s=o(80272),c=o(37716),l=o(47063),u=o(81780),d=o(84465),m=o(38583),g=o(56209);function p(t,e){if(1&t&&(c.TgZ(0,"ion-item"),c.TgZ(1,"ion-label"),c._uU(2),c.ALo(3,"date"),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"ion-text"),c._uU(6),c.qZA(),c.TgZ(7,"ion-text",7),c._uU(8),c.ALo(9,"number"),c.qZA(),c.qZA()),2&t){var n=e.$implicit;c.xp6(2),c.Oqu(c.xi3(3,3,n.date,c.lcZ(4,6,"FORMAT_DATE"))),c.xp6(4),c.Oqu(n.quantity),c.xp6(2),c.Oqu(c.xi3(9,8,n.quantity*n.price,"0.0-0"))}}function f(t,e){if(1&t&&(c.TgZ(0,"ion-content"),c._UZ(1,"div",5),c.TgZ(2,"ion-list"),c.YNc(3,p,10,11,"ion-item",6),c.qZA(),c.qZA()),2&t){var n=c.oxw();c.xp6(1),c.Q6J("loading",n.view)("options",n.options),c.xp6(2),c.Q6J("ngForOf",n.list)}}var Z,h=((Z=function(){function e(n,i,o,a){t(this,e),this.modalController=n,this.pondService=i,this.translate=o,this.toastService=a,this.list=[],this.options={},this.view=!1}return n(e,[{key:"ngOnInit",value:function(){this.getListDetail()}},{key:"getListDetail",value:function(){var t=this;this.list=[],this.pondService.getProductUsed(this.code,this.type,this.product_id).subscribe(function(e){1==e.status?(t.list=e.data,t.list.sort(function(t,e){return e.date.localeCompare(t.date)}),t.initChart()):t.toastService.warning(e.error)},function(){t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"ionViewDidEnter",value:function(){this.view=!0}},{key:"initChart",value:function(){var t=this;this.options={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{data:[]},yAxis:{type:"value",boundaryGap:[0,.01]},series:[{name:this.translate.instant("COMPANY_MOD.QUANTITY"),type:"bar",data:[]}]},this.list.forEach(function(e){t.options.xAxis.data.unshift(e.date),t.options.series[0].data.unshift(e.quantity)})}}]),e}()).\u0275fac=function(t){return new(t||Z)(c.Y36(l.IN),c.Y36(s.p),c.Y36(u.sK),c.Y36(d.k))},Z.\u0275cmp=c.Xpm({type:Z,selectors:[["app-season-material-history"]],inputs:{type:"type",code:"code",product_id:"product_id",infor:"infor"},decls:9,vars:5,consts:[["mode","ios"],["slot","start"],[3,"click"],["slot","icon-only","name","close"],[4,"ngIf"],["echarts","",3,"loading","options"],[4,"ngFor","ngForOf"],["slot","end","color","danger"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header",0),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",1),c.TgZ(3,"ion-button",2),c.NdJ("click",function(){return e.modalController.dismiss()}),c._UZ(4,"ion-icon",3),c.qZA(),c.qZA(),c.TgZ(5,"ion-title"),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.qZA(),c.qZA(),c.YNc(8,f,4,3,"ion-content",4)),2&t&&(c.xp6(6),c.AsE("",c.lcZ(7,3,"ANALYTICS")," ",e.infor.name,""),c.xp6(2),c.Q6J("ngIf",e.view))},directives:[l.Gu,l.sr,l.Sm,l.YG,l.gu,l.wd,m.O5,l.W2,g._w,l.q_,m.sg,l.Ie,l.Q$,l.yW],pipes:[u.X$,m.uU,m.JJ],styles:[""]}),Z);function v(t,e){if(1&t){var n=c.EpF();c.TgZ(0,"ion-row",2),c.NdJ("click",function(){var t=c.CHM(n).$implicit;return c.oxw().presentMaterialHistory(t)}),c.TgZ(1,"ion-col",8),c._uU(2),c.qZA(),c.TgZ(3,"ion-col",9),c._uU(4),c.qZA(),c.TgZ(5,"ion-col",10),c._uU(6),c.ALo(7,"number"),c.qZA(),c.TgZ(8,"ion-col",11),c.TgZ(9,"ion-text",15),c._uU(10),c.ALo(11,"number"),c.qZA(),c.qZA(),c.TgZ(12,"ion-col",8),c._UZ(13,"ion-icon",16),c.qZA(),c.qZA()}if(2&t){var i=e.$implicit,o=e.index;c.xp6(2),c.hij(" ",o+1," "),c.xp6(2),c.hij(" ",i.name," "),c.xp6(2),c.hij(" ",c.xi3(7,4,i.quantity.replace(",",""),"0.0-1")," "),c.xp6(4),c.hij(" ",c.xi3(11,7,i.total,"0.0-0")," ")}}function A(t,e){1&t&&(c.TgZ(0,"div",17),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"POND_MOD.NO_ITEM")," "))}function x(t,e){1&t&&(c.TgZ(0,"div",18),c._UZ(1,"ion-spinner",19),c.qZA())}var T=function(){var e=function(){function e(n,i,o,a){t(this,e),this.modalController=n,this.pondService=i,this.toastService=o,this.translate=a,this.list=[],this.loadingFlag=new r.E}return n(e,[{key:"ngOnInit",value:function(){this.getListProduct()}},{key:"getListProduct",value:function(){var t=this;this.loadingFlag.setStart(!0),this.list=[],this.pondService.getListItemUsed(this.code,this.type).subscribe(function(e){1==e.status?t.list=e.data:t.toastService.warning(e.error),t.loadingFlag.setResult(!0)},function(){t.loadingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"presentMaterialHistory",value:function(t){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:h,componentProps:{product_id:t.id,type:this.type,code:this.code,infor:t}});case 2:return e.next=4,e.sent.present();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))}},{key:"loadMaterial",value:function(t){this.type=t.detail.value,this.getListProduct()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.IN),c.Y36(s.p),c.Y36(d.k),c.Y36(u.sK))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-season-material-list"]],inputs:{type:"type",code:"code",time:"time"},decls:39,vars:25,consts:[["mode","ios"],["slot","start"],[3,"click"],["slot","icon-only","name","close"],["mode","ios","color","medium",3,"value","ionChange"],["value","feed"],["value","blend"],["value","enviro"],["size","1"],["size","3"],["size","3",1,"ion-text-right"],["size","4",1,"ion-text-right"],[3,"click",4,"ngFor","ngForOf"],["class","ion-padding ion-text-center",4,"ngIf"],["class","spiner-loading",4,"ngIf"],["color","danger"],["name","chevron-forward-outline"],[1,"ion-padding","ion-text-center"],[1,"spiner-loading"],["name","dots"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header",0),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",1),c.TgZ(3,"ion-button",2),c.NdJ("click",function(){return e.modalController.dismiss()}),c._UZ(4,"ion-icon",3),c.qZA(),c.qZA(),c.TgZ(5,"ion-title"),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.qZA(),c.TgZ(8,"ion-toolbar"),c.TgZ(9,"ion-segment",4),c.NdJ("ionChange",function(t){return e.loadMaterial(t)}),c.TgZ(10,"ion-segment-button",5),c.TgZ(11,"ion-text"),c._uU(12),c.ALo(13,"translate"),c.qZA(),c.qZA(),c.TgZ(14,"ion-segment-button",6),c.TgZ(15,"ion-text"),c._uU(16),c.ALo(17,"translate"),c.qZA(),c.qZA(),c.TgZ(18,"ion-segment-button",7),c.TgZ(19,"ion-text"),c._uU(20),c.ALo(21,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(22,"ion-content"),c.TgZ(23,"ion-grid"),c.TgZ(24,"ion-row"),c.TgZ(25,"ion-col",8),c._uU(26,"#"),c.qZA(),c.TgZ(27,"ion-col",9),c._uU(28),c.ALo(29,"translate"),c.qZA(),c.TgZ(30,"ion-col",10),c._uU(31),c.ALo(32,"translate"),c.qZA(),c.TgZ(33,"ion-col",11),c._uU(34),c.ALo(35,"translate"),c.qZA(),c.qZA(),c.YNc(36,v,14,10,"ion-row",12),c.qZA(),c.YNc(37,A,3,3,"div",13),c.YNc(38,x,2,0,"div",14),c.qZA()),2&t&&(c.xp6(6),c.Oqu(c.lcZ(7,11,"SHOP.MATERIAL")),c.xp6(3),c.Q6J("value",e.type),c.xp6(3),c.Oqu(c.lcZ(13,13,"COMPANY_MOD.FEED")),c.xp6(4),c.Oqu(c.lcZ(17,15,"POND_MOD.BLEND")),c.xp6(4),c.Oqu(c.lcZ(21,17,"POND_MOD.CHEMICAL_TREATMENT")),c.xp6(8),c.Oqu(c.lcZ(29,19,"NAME")),c.xp6(3),c.Oqu(c.lcZ(32,21,"UNIT")),c.xp6(3),c.Oqu(c.lcZ(35,23,"CURRENCY_L")),c.xp6(2),c.Q6J("ngForOf",e.list),c.xp6(1),c.Q6J("ngIf",(null==e.list?null:e.list.length)<=0),c.xp6(1),c.Q6J("ngIf",e.loadingFlag.pending))},directives:[l.Gu,l.sr,l.Sm,l.YG,l.gu,l.wd,l.cJ,l.QI,l.GO,l.yW,l.W2,l.jY,l.Nd,l.wI,m.sg,m.O5,l.PQ],pipes:[u.X$,m.JJ],styles:["[_nghost-%COMP%]   ion-row[_ngcontent-%COMP%]{border-bottom:.5px solid rgba(71,70,70,.2);padding:5px 0}"]}),e}()},30454:function(e,i,o){o.d(i,{m:function(){return Z}});var a=o(90665),r=o(16738),s=o(27887),c=o(80272),l=o(37716),u=o(47063),d=o(84465),m=o(81780),g=o(38583);function p(t,e){if(1&t&&(l.TgZ(0,"ion-select-option",18),l._uU(1),l.qZA()),2&t){var n=e.$implicit;l.Q6J("value",n.id),l.xp6(1),l.hij(" ",n.name," ")}}var f,Z=((f=function(){function e(n,i,o,c){t(this,e),this.modalController=n,this.pondService=i,this.toastService=o,this.translate=c,this.maxDate=r(),this.minDate=r().subtract(180,"days"),this.saveLoading=new s.E,this.form=new a.cw({volume_exchange:new a.NI("",[a.kI.required,a.kI.min(1)]),to_code:new a.NI("",a.kI.required),time:new a.NI(r().format("YYYY-MM-DD"),a.kI.required)}),this.targetPonds=[],this.totalWater=0}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.minDate=this.pondService.seasonStartTime,this.totalWater+=this.data.stock.map(function(t){return+t.volume}).reduce(function(t,e){return t+e},0),console.log(this.totalWater),this.totalWater+=this.data.exchange.map(function(e){return e.from_code==t.pondService.pond.current_season?-e.volume_exchange:+e.volume_exchange}).reduce(function(t,e){return t+e},0),console.log(this.totalWater),this.getPondTargets()}},{key:"changeDate",value:function(t){var e=r(this.form.value.time).add(t,"days");if(e<this.minDate||e>this.maxDate)return!1;this.form.patchValue({time:e.format("YYYY-MM-DD")}),console.log(this.form.value)}},{key:"getPondTargets",value:function(){var t=this;this.pondService.listPondTargets().subscribe(function(e){1==+e.status?t.targetPonds=e.data:t.toastService.warning(e.error)},function(){t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"selectPond",value:function(t){var e=this.targetPonds.findIndex(function(e){return e.id==t.target.value});this.form.patchValue({to_code:this.targetPonds[e].current_season})}},{key:"save",value:function(){var t=this,e={volume_exchange:this.form.value.volume_exchange,to_code:this.form.value.to_code,time:r(this.form.value.time).valueOf()/1e3};this.saveLoading.setPending(!0),this.pondService.addExchange(e).subscribe(function(e){1==+e.status?(t.toastService.success(t.translate.instant("SHOP.CART.ADDRESS.ADD_SUCCESS")),t.modalController.dismiss(!0)):t.toastService.warning(e.error),t.saveLoading.setResult(!0)},function(){t.saveLoading.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}}]),e}()).\u0275fac=function(t){return new(t||f)(l.Y36(u.IN),l.Y36(c.p),l.Y36(d.k),l.Y36(m.sK))},f.\u0275cmp=l.Xpm({type:f,selectors:[["app-add-exchange-water"]],inputs:{data:"data"},decls:49,vars:31,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],["color","primary",3,"disabled","click"],[3,"formGroup"],[1,"ion-text-center"],[1,"title","ion-padding"],["size","2"],["fill","clear",3,"disabled","click"],["slot","icon-only","name","arrow-back"],["size","8"],["formControlName","time",1,"ion-text-center","w-100",3,"displayFormat","min","max"],["slot","icon-only","name","arrow-forward"],["color","primary","position","floating"],[3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["inputmode","numeric","type","number","formControlName","volume_exchange"],[3,"value"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",0),l.TgZ(3,"ion-button",1),l.NdJ("click",function(){return e.modalController.dismiss()}),l._UZ(4,"ion-icon",2),l.qZA(),l.qZA(),l.TgZ(5,"ion-title"),l._uU(6),l.ALo(7,"translate"),l.ALo(8,"translate"),l.qZA(),l.TgZ(9,"ion-buttons",3),l.TgZ(10,"ion-button",4),l.NdJ("click",function(){return e.save()}),l._uU(11),l.ALo(12,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"ion-content",5),l.TgZ(14,"div",6),l.TgZ(15,"h1",7),l._uU(16),l.ALo(17,"translate"),l.ALo(18,"number"),l.TgZ(19,"small"),l._uU(20,"m"),l.TgZ(21,"sup"),l._uU(22,"3"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(23,"ion-grid"),l.TgZ(24,"ion-row"),l.TgZ(25,"ion-col",8),l.TgZ(26,"ion-button",9),l.NdJ("click",function(){return e.changeDate(-1)}),l._UZ(27,"ion-icon",10),l.qZA(),l.qZA(),l.TgZ(28,"ion-col",11),l.TgZ(29,"ion-item",6),l._UZ(30,"ion-datetime",12),l.ALo(31,"translate"),l.qZA(),l.qZA(),l.TgZ(32,"ion-col",8),l.TgZ(33,"ion-button",9),l.NdJ("click",function(){return e.changeDate(1)}),l._UZ(34,"ion-icon",13),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(35,"ion-item"),l.TgZ(36,"ion-label",14),l._uU(37),l.ALo(38,"translate"),l.qZA(),l.TgZ(39,"ion-select",15),l.NdJ("ionChange",function(t){return e.selectPond(t)}),l.YNc(40,p,2,2,"ion-select-option",16),l.qZA(),l.qZA(),l.TgZ(41,"ion-item"),l.TgZ(42,"ion-label",14),l._uU(43),l.ALo(44,"translate"),l.TgZ(45,"sup"),l._uU(46,"3"),l.qZA(),l._uU(47,")"),l.qZA(),l._UZ(48,"ion-input",17),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(6),l.AsE("",l.lcZ(7,15,"ADD")," ",l.lcZ(8,17,"CROP_MOD.WATER_EXCHANGE"),""),l.xp6(4),l.Q6J("disabled",e.form.invalid||e.totalWater<=0||e.form.value.volume_exchange>e.totalWater),l.xp6(1),l.hij(" ",l.lcZ(12,19,"SAVE")," "),l.xp6(2),l.Q6J("formGroup",e.form),l.xp6(3),l.AsE("",l.lcZ(17,21,"POND_MOD.TOTAL")," ",l.lcZ(18,23,e.totalWater)," "),l.xp6(10),l.Q6J("disabled",e.form.value.time<=e.minDate.format("YYYY-MM-DD")),l.xp6(4),l.Q6J("displayFormat",l.lcZ(31,25,"FORMAT_DATE_MOMENT"))("min",e.minDate.format("YYYY-MM-DD"))("max",e.maxDate.format("YYYY-MM-DD")),l.xp6(3),l.Q6J("disabled",e.form.value.time>=e.maxDate.format("YYYY-MM-DD")),l.xp6(4),l.Oqu(l.lcZ(38,27,"POND_MOD.CHOOSE_POND_DES")),l.xp6(3),l.Q6J("ngForOf",e.targetPonds),l.xp6(3),l.hij("",l.lcZ(44,29,"CROP_MOD.VOLUME")," (m"))},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.wd,u.W2,a.JL,a.sg,u.jY,u.Nd,u.wI,u.Ie,u.x4,u.QI,a.JJ,a.u,u.Q$,u.t9,g.sg,u.pK,u.as,u.n0],pipes:[m.X$,g.JJ],styles:[""]}),f)},7539:function(e,i,o){o.d(i,{j:function(){return p}});var a,r=o(90665),s=o(16738),c=o(27887),l=o(80272),u=o(37716),d=o(47063),m=o(84465),g=o(81780),p=((a=function(){function e(n,i,o,a){t(this,e),this.modalController=n,this.pondService=i,this.toastService=o,this.translate=a,this.form=new r.cw({volume:new r.NI("",[r.kI.required,r.kI.min(1)]),time:new r.NI(s().format("YYYY-MM-DD"),r.kI.required)}),this.maxDate=s(),this.minDate=s().subtract(180,"days"),this.saveLoading=new c.E}return n(e,[{key:"ngOnInit",value:function(){this.minDate=this.pondService.seasonStartTime}},{key:"changeDate",value:function(t){var e=s(this.form.value.time).add(t,"days");if(e<this.minDate||e>this.maxDate)return!1;this.form.patchValue({time:e.format("YYYY-MM-DD")}),console.log(this.form.value)}},{key:"save",value:function(){var t=this,e={volume:this.form.value.volume,time:s(this.form.value.time).valueOf()/1e3};this.saveLoading.setPending(!0),this.pondService.addStock(e).subscribe(function(e){1==+e.status?(t.toastService.success(t.translate.instant("SHOP.CART.ADDRESS.ADD_SUCCESS")),t.modalController.dismiss(!0)):t.toastService.warning(e.error),t.saveLoading.setResult(!0)},function(){t.saveLoading.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}}]),e}()).\u0275fac=function(t){return new(t||a)(u.Y36(d.IN),u.Y36(l.p),u.Y36(m.k),u.Y36(g.sK))},a.\u0275cmp=u.Xpm({type:a,selectors:[["app-add-finished-water"]],decls:30,vars:21,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],["color","primary",3,"disabled","click"],[3,"formGroup"],[1,"ion-text-center"],["size","2"],["fill","clear",3,"disabled","click"],["slot","icon-only","name","arrow-back"],["size","8"],["formControlName","time",1,"ion-text-center","w-100",3,"displayFormat","min","max"],["slot","icon-only","name","arrow-forward"],["lines","none",1,"ion-text-center"],["type","tel","inputmode","decimal","required","","autofocus","","formControlName","volume",1,"l-r",3,"placeholder"]],template:function(t,e){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u.TgZ(3,"ion-button",1),u.NdJ("click",function(){return e.modalController.dismiss()}),u._UZ(4,"ion-icon",2),u.qZA(),u.qZA(),u.TgZ(5,"ion-title"),u._uU(6),u.ALo(7,"translate"),u.ALo(8,"translate"),u.qZA(),u.TgZ(9,"ion-buttons",3),u.TgZ(10,"ion-button",4),u.NdJ("click",function(){return e.save()}),u._uU(11),u.ALo(12,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(13,"ion-content",5),u.TgZ(14,"div",6),u.TgZ(15,"ion-grid"),u.TgZ(16,"ion-row"),u.TgZ(17,"ion-col",7),u.TgZ(18,"ion-button",8),u.NdJ("click",function(){return e.changeDate(-1)}),u._UZ(19,"ion-icon",9),u.qZA(),u.qZA(),u.TgZ(20,"ion-col",10),u.TgZ(21,"ion-item",6),u._UZ(22,"ion-datetime",11),u.ALo(23,"translate"),u.qZA(),u.qZA(),u.TgZ(24,"ion-col",7),u.TgZ(25,"ion-button",8),u.NdJ("click",function(){return e.changeDate(1)}),u._UZ(26,"ion-icon",12),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(27,"ion-item",13),u._UZ(28,"ion-input",14),u.ALo(29,"translate"),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(6),u.AsE("",u.lcZ(7,11,"ADD")," ",u.lcZ(8,13,"CROP_MOD.FINISHED_WATER"),""),u.xp6(4),u.Q6J("disabled",e.form.invalid),u.xp6(1),u.hij(" ",u.lcZ(12,15,"SAVE")," "),u.xp6(2),u.Q6J("formGroup",e.form),u.xp6(5),u.Q6J("disabled",e.form.value.time<=e.minDate.format("YYYY-MM-DD")),u.xp6(4),u.Q6J("displayFormat",u.lcZ(23,17,"FORMAT_DATE_MOMENT"))("min",e.minDate.format("YYYY-MM-DD"))("max",e.maxDate.format("YYYY-MM-DD")),u.xp6(3),u.Q6J("disabled",e.form.value.time>=e.maxDate.format("YYYY-MM-DD")),u.xp6(3),u.Q6J("placeholder",u.lcZ(29,19,"CROP_MOD.VOLUME")))},directives:[d.Gu,d.sr,d.Sm,d.YG,d.gu,d.wd,d.W2,r.JL,r.sg,d.jY,d.Nd,d.wI,d.Ie,d.x4,d.QI,r.JJ,r.u,d.pK,d.j9,r.Q7],pipes:[g.X$],styles:[""]}),a)},43284:function(e,i,o){o.d(i,{V:function(){return h}});var a=o(90665),r=o(16738),s=o(27887),c=o(80272),l=o(37716),u=o(47063),d=o(84465),m=o(81780),g=o(38583);function p(t,e){if(1&t&&(l.TgZ(0,"ion-select-option",19),l._uU(1),l.qZA()),2&t){var n=e.$implicit;l.Q6J("value",n.id),l.xp6(1),l.hij(" ",n.name," ")}}function f(t,e){if(1&t){var n=l.EpF();l.TgZ(0,"ion-content",6),l.TgZ(1,"div",7),l.TgZ(2,"h1",8),l._uU(3),l.ALo(4,"translate"),l.ALo(5,"number"),l.TgZ(6,"small"),l._uU(7,"m"),l.TgZ(8,"sup"),l._uU(9,"3"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"ion-grid"),l.TgZ(11,"ion-row"),l.TgZ(12,"ion-col",9),l.TgZ(13,"ion-button",10),l.NdJ("click",function(){return l.CHM(n),l.oxw().changeDate(-1)}),l._UZ(14,"ion-icon",11),l.qZA(),l.qZA(),l.TgZ(15,"ion-col",12),l.TgZ(16,"ion-item",7),l._UZ(17,"ion-datetime",13),l.ALo(18,"translate"),l.qZA(),l.qZA(),l.TgZ(19,"ion-col",9),l.TgZ(20,"ion-button",10),l.NdJ("click",function(){return l.CHM(n),l.oxw().changeDate(1)}),l._UZ(21,"ion-icon",14),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(22,"ion-item"),l.TgZ(23,"ion-label",15),l._uU(24),l.ALo(25,"translate"),l.qZA(),l.TgZ(26,"ion-select",16),l.NdJ("ionChange",function(t){return l.CHM(n),l.oxw().selectPond(t)}),l.YNc(27,p,2,2,"ion-select-option",17),l.qZA(),l.qZA(),l.TgZ(28,"ion-item"),l.TgZ(29,"ion-label",15),l._uU(30),l.ALo(31,"translate"),l.TgZ(32,"sup"),l._uU(33,"3"),l.qZA(),l._uU(34,")"),l.qZA(),l._UZ(35,"ion-input",18),l.qZA(),l.qZA(),l.qZA()}if(2&t){var i=l.oxw();l.Q6J("formGroup",i.form),l.xp6(3),l.AsE("",l.lcZ(4,11,"POND_MOD.TOTAL")," ",l.lcZ(5,13,i.totalWater)," "),l.xp6(10),l.Q6J("disabled",i.form.value.time<=i.minDate.format("YYYY-MM-DD")),l.xp6(4),l.Q6J("displayFormat",l.lcZ(18,15,"FORMAT_DATE_MOMENT"))("min",i.minDate.format("YYYY-MM-DD"))("max",i.maxDate.format("YYYY-MM-DD")),l.xp6(3),l.Q6J("disabled",i.form.value.time>=i.maxDate.format("YYYY-MM-DD")),l.xp6(4),l.Oqu(l.lcZ(25,17,"POND_MOD.CHOOSE_POND_DES")),l.xp6(3),l.Q6J("ngForOf",i.targetPonds),l.xp6(3),l.hij("",l.lcZ(31,19,"CROP_MOD.VOLUME")," (m")}}var Z,h=((Z=function(){function e(n,i,o,c){t(this,e),this.modalController=n,this.pondService=i,this.toastService=o,this.translate=c,this.maxDate=r(),this.minDate=r().subtract(180,"days"),this.saveLoading=new s.E,this.form=new a.cw({volume_exchange:new a.NI("",[a.kI.required,a.kI.min(1)]),to_code:new a.NI("",a.kI.required),time:new a.NI(r().format("YYYY-MM-DD"),a.kI.required),pid:new a.NI("")}),this.targetPonds=[],this.totalWater=0,this.show=!1}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.minDate=this.pondService.seasonStartTime,this.totalWater+=this.data.stock.map(function(t){return+t.volume}).reduce(function(t,e){return t+e},0),this.totalWater+=this.data.exchange.map(function(e){return e.from_code==t.pondService.pond.current_season&&e.id!=t.infor.id?-e.volume_exchange:e.id!=t.infor.id?+e.volume_exchange:0}).reduce(function(t,e){return t+e},0),this.getPondTargets()}},{key:"changeDate",value:function(t){var e=r(this.form.value.time).add(t,"days");if(e<this.minDate||e>this.maxDate)return!1;this.form.patchValue({time:e.format("YYYY-MM-DD")}),console.log(this.form.value)}},{key:"getPondTargets",value:function(){var t=this;this.pondService.listPondTargets().subscribe(function(e){if(1==+e.status){t.targetPonds=e.data;var n=t.targetPonds.find(function(e){return e.current_season==t.infor.to_code});t.form.setValue({volume_exchange:t.infor.volume_exchange,to_code:t.infor.to_code,time:r(1e3*t.infor.time).format("YYYY-MM-DD"),pid:n?n.id:""})}else t.toastService.warning(e.error)},function(){t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"selectPond",value:function(t){var e=this.targetPonds.findIndex(function(e){return e.id==t.target.value});this.form.patchValue({to_code:e>=0?this.targetPonds[e].current_season:""})}},{key:"save",value:function(){var t=this,e={volume_exchange:this.form.value.volume_exchange,to_code:this.form.value.to_code,time:r(this.form.value.time).valueOf()/1e3};this.saveLoading.setPending(!0),this.pondService.editExchange(this.infor.id,e).subscribe(function(e){1==+e.status?(t.toastService.success(t.translate.instant("SHOP.CART.ADDRESS.ADD_SUCCESS")),t.modalController.dismiss(!0)):t.toastService.warning(e.error),t.saveLoading.setResult(!0)},function(){t.saveLoading.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"ionViewDidEnter",value:function(){this.show=!0}}]),e}()).\u0275fac=function(t){return new(t||Z)(l.Y36(u.IN),l.Y36(c.p),l.Y36(d.k),l.Y36(m.sK))},Z.\u0275cmp=l.Xpm({type:Z,selectors:[["app-edit-exchange-water"]],inputs:{data:"data",infor:"infor"},decls:14,vars:11,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],["color","primary",3,"disabled","click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"ion-text-center"],[1,"title","ion-padding"],["size","2"],["fill","clear",3,"disabled","click"],["slot","icon-only","name","arrow-back"],["size","8"],["formControlName","time",1,"ion-text-center","w-100",3,"displayFormat","min","max"],["slot","icon-only","name","arrow-forward"],["color","primary","position","floating"],["formControlName","pid",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],["inputmode","numeric","type","number","formControlName","volume_exchange"],[3,"value"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",0),l.TgZ(3,"ion-button",1),l.NdJ("click",function(){return e.modalController.dismiss()}),l._UZ(4,"ion-icon",2),l.qZA(),l.qZA(),l.TgZ(5,"ion-title"),l._uU(6),l.ALo(7,"translate"),l.ALo(8,"translate"),l.qZA(),l.TgZ(9,"ion-buttons",3),l.TgZ(10,"ion-button",4),l.NdJ("click",function(){return e.save()}),l._uU(11),l.ALo(12,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(13,f,36,21,"ion-content",5)),2&t&&(l.xp6(6),l.AsE("",l.lcZ(7,5,"EDIT")," ",l.lcZ(8,7,"CROP_MOD.WATER_EXCHANGE"),""),l.xp6(4),l.Q6J("disabled",e.form.invalid||e.totalWater<=0||e.form.value.volume_exchange>e.totalWater),l.xp6(1),l.hij(" ",l.lcZ(12,9,"SAVE")," "),l.xp6(2),l.Q6J("ngIf",e.show))},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.wd,g.O5,u.W2,a.JL,a.sg,u.jY,u.Nd,u.wI,u.Ie,u.x4,u.QI,a.JJ,a.u,u.Q$,u.t9,g.sg,u.pK,u.as,u.n0],pipes:[m.X$,g.JJ],styles:[""]}),Z)},41955:function(e,i,o){o.d(i,{j:function(){return p}});var a,r=o(90665),s=o(16738),c=o(27887),l=o(80272),u=o(37716),d=o(47063),m=o(84465),g=o(81780),p=((a=function(){function e(n,i,o,a){t(this,e),this.modalController=n,this.pondService=i,this.toastService=o,this.translate=a,this.form=new r.cw({volume:new r.NI("",[r.kI.required,r.kI.min(1)]),time:new r.NI(s().format("YYYY-MM-DD"),r.kI.required)}),this.maxDate=s(),this.minDate=s().subtract(180,"days"),this.saveLoading=new c.E}return n(e,[{key:"ngOnInit",value:function(){this.minDate=this.pondService.seasonStartTime,this.form.setValue({volume:this.infor.volume,time:s(1e3*this.infor.time).format("YYYY-MM-DD")})}},{key:"changeDate",value:function(t){var e=s(this.form.value.time).add(t,"days");if(e<this.minDate||e>this.maxDate)return!1;this.form.patchValue({time:e.format("YYYY-MM-DD")}),console.log(this.form.value)}},{key:"save",value:function(){var t=this,e={volume:this.form.value.volume,time:s(this.form.value.time).valueOf()/1e3};this.saveLoading.setPending(!0),this.pondService.editStock(this.infor.id,e).subscribe(function(e){1==+e.status?(t.toastService.success(t.translate.instant("SHOP.CART.ADDRESS.UPDATE_SUCCESS")),t.modalController.dismiss(!0)):t.toastService.warning(e.error),t.saveLoading.setResult(!0)},function(){t.saveLoading.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}}]),e}()).\u0275fac=function(t){return new(t||a)(u.Y36(d.IN),u.Y36(l.p),u.Y36(m.k),u.Y36(g.sK))},a.\u0275cmp=u.Xpm({type:a,selectors:[["app-edit-finished-water"]],inputs:{infor:"infor"},decls:30,vars:21,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],["color","primary",3,"disabled","click"],[3,"formGroup"],[1,"ion-text-center"],["size","2"],["fill","clear",3,"disabled","click"],["slot","icon-only","name","arrow-back"],["size","8"],["formControlName","time",1,"ion-text-center","w-100",3,"displayFormat","min","max"],["slot","icon-only","name","arrow-forward"],["lines","none",1,"ion-text-center"],["type","tel","inputmode","decimal","required","","autofocus","","formControlName","volume",1,"l-r",3,"placeholder"]],template:function(t,e){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u.TgZ(3,"ion-button",1),u.NdJ("click",function(){return e.modalController.dismiss()}),u._UZ(4,"ion-icon",2),u.qZA(),u.qZA(),u.TgZ(5,"ion-title"),u._uU(6),u.ALo(7,"translate"),u.ALo(8,"translate"),u.qZA(),u.TgZ(9,"ion-buttons",3),u.TgZ(10,"ion-button",4),u.NdJ("click",function(){return e.save()}),u._uU(11),u.ALo(12,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(13,"ion-content",5),u.TgZ(14,"div",6),u.TgZ(15,"ion-grid"),u.TgZ(16,"ion-row"),u.TgZ(17,"ion-col",7),u.TgZ(18,"ion-button",8),u.NdJ("click",function(){return e.changeDate(-1)}),u._UZ(19,"ion-icon",9),u.qZA(),u.qZA(),u.TgZ(20,"ion-col",10),u.TgZ(21,"ion-item",6),u._UZ(22,"ion-datetime",11),u.ALo(23,"translate"),u.qZA(),u.qZA(),u.TgZ(24,"ion-col",7),u.TgZ(25,"ion-button",8),u.NdJ("click",function(){return e.changeDate(1)}),u._UZ(26,"ion-icon",12),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(27,"ion-item",13),u._UZ(28,"ion-input",14),u.ALo(29,"translate"),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(6),u.AsE("",u.lcZ(7,11,"EDIT")," ",u.lcZ(8,13,"CROP_MOD.FINISHED_WATER"),""),u.xp6(4),u.Q6J("disabled",e.form.invalid),u.xp6(1),u.hij(" ",u.lcZ(12,15,"SAVE")," "),u.xp6(2),u.Q6J("formGroup",e.form),u.xp6(5),u.Q6J("disabled",e.form.value.time<=e.minDate.format("YYYY-MM-DD")),u.xp6(4),u.Q6J("displayFormat",u.lcZ(23,17,"FORMAT_DATE_MOMENT"))("min",e.minDate.format("YYYY-MM-DD"))("max",e.maxDate.format("YYYY-MM-DD")),u.xp6(3),u.Q6J("disabled",e.form.value.time>=e.maxDate.format("YYYY-MM-DD")),u.xp6(3),u.Q6J("placeholder",u.lcZ(29,19,"CROP_MOD.VOLUME")))},directives:[d.Gu,d.sr,d.Sm,d.YG,d.gu,d.wd,d.W2,r.JL,r.sg,d.jY,d.Nd,d.wI,d.Ie,d.x4,d.QI,r.JJ,r.u,d.pK,d.j9,r.Q7],pipes:[g.X$],styles:[""]}),a)},35498:function(e,i,o){o.d(i,{f:function(){return k}});var a=o(64762),r=o(37716),s=o(27887),c=o(80272),l=o(66031),u=o(30454),d=o(7539),m=o(43284),g=o(41955),p=o(47063),f=o(81780),Z=o(13619),h=o(84465),v=o(38583),A=o(73473),x=function(){return["company_manager","farm_manager","pond_operator","pond_manager"]};function T(t,e){if(1&t&&r._UZ(0,"ion-icon",7),2&t){var n=r.oxw();r.Q6J("appPermission",r.DdM(2,x))("currentPermission",n.pondService.permission)}}function _(t,e){if(1&t){var n=r.EpF();r.TgZ(0,"ion-item"),r.TgZ(1,"ion-label"),r._uU(2),r.ALo(3,"date"),r.ALo(4,"translate"),r.qZA(),r.TgZ(5,"span",12),r._uU(6),r.ALo(7,"number"),r.TgZ(8,"sup"),r._uU(9,"3"),r.qZA(),r.qZA(),r.TgZ(10,"ion-button",13),r.NdJ("click",function(t){var e=r.CHM(n),i=e.$implicit,o=e.index,a=r.oxw(2);return a.enableSort?t.stopPropagation():a.openEditFinishedWater(i,o)}),r._UZ(11,"ion-icon",14),r.qZA(),r.qZA()}if(2&t){var i=e.$implicit,o=e.index,a=r.oxw(2);r.xp6(2),r.hij(" ",r.xi3(3,5,1e3*i.time,r.lcZ(4,8,"FORMAT_DATE_S"))," "),r.xp6(4),r.hij("",r.xi3(7,10,i.volume,"1.0-0")," m"),r.xp6(4),r.Q6J("appPermission",r.DdM(13,x))("currentPermission",a.pondService.permission)("disabled",o<a.data.stock.length-1)}}function q(t,e){if(1&t){var n=r.EpF();r.TgZ(0,"ion-item"),r.TgZ(1,"ion-label"),r.TgZ(2,"p"),r._uU(3),r.ALo(4,"date"),r.ALo(5,"translate"),r.qZA(),r.TgZ(6,"ion-text",15),r._UZ(7,"ion-icon",16),r._uU(8),r.qZA(),r.qZA(),r.TgZ(9,"span",12),r._uU(10),r.ALo(11,"number"),r.TgZ(12,"sup"),r._uU(13,"3"),r.qZA(),r.qZA(),r.TgZ(14,"ion-button",13),r.NdJ("click",function(t){var e=r.CHM(n),i=e.$implicit,o=e.index,a=r.oxw(2);return a.enableSort?t.stopPropagation():a.openEditExchangeWater(i,o)}),r._UZ(15,"ion-icon",14),r.qZA(),r.qZA()}if(2&t){var i=e.$implicit,o=e.index,a=r.oxw(2);r.xp6(3),r.hij(" ",r.xi3(4,7,1e3*i.time,r.lcZ(5,10,"FORMAT_DATE_S"))," "),r.xp6(4),r.Q6J("name","in"==i.type?"arrow-back-circle-outline":"arrow-forward-circle-outline"),r.xp6(1),r.hij(" ",i.name_target,""),r.xp6(2),r.hij("",r.xi3(11,12,i.volume_exchange,"1.0-0")," m"),r.xp6(4),r.Q6J("appPermission",r.DdM(15,x))("currentPermission",a.pondService.permission)("disabled",a.checkExchangeAvaiable(i,o))}}function D(t,e){if(1&t){var n=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"ion-list",8),r.TgZ(2,"ion-item"),r.TgZ(3,"ion-label"),r.TgZ(4,"p"),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA(),r.TgZ(7,"ion-button",9),r.NdJ("click",function(t){r.CHM(n);var e=r.oxw();return e.enableSort?t.stopPropagation():e.openAddFinishedWater()}),r._UZ(8,"ion-icon",10),r.qZA(),r.qZA(),r.YNc(9,_,12,14,"ion-item",11),r.qZA(),r.TgZ(10,"ion-list",8),r.TgZ(11,"ion-item"),r.TgZ(12,"ion-label"),r.TgZ(13,"p"),r._uU(14),r.ALo(15,"translate"),r.qZA(),r.qZA(),r.TgZ(16,"ion-button",9),r.NdJ("click",function(t){r.CHM(n);var e=r.oxw();return e.enableSort?t.stopPropagation():e.openAddExchangeWater()}),r._UZ(17,"ion-icon",10),r.qZA(),r.qZA(),r.YNc(18,q,16,16,"ion-item",11),r.qZA(),r.qZA()}if(2&t){var i=r.oxw();r.xp6(5),r.Oqu(r.lcZ(6,8,"CROP_MOD.FINISHED_WATER")),r.xp6(2),r.Q6J("appPermission",r.DdM(12,x))("currentPermission",i.pondService.permission),r.xp6(2),r.Q6J("ngForOf",i.data.stock),r.xp6(5),r.Oqu(r.lcZ(15,10,"CROP_MOD.WATER_EXCHANGE")),r.xp6(2),r.Q6J("appPermission",r.DdM(13,x))("currentPermission",i.pondService.permission),r.xp6(2),r.Q6J("ngForOf",i.data.exchange)}}function b(t,e){1&t&&(r.TgZ(0,"div"),r._UZ(1,"ion-spinner",17),r.qZA())}function Y(t,e){if(1&t&&(r.TgZ(0,"p"),r._uU(1),r.qZA()),2&t){var n=r.oxw();r.xp6(1),r.Oqu(n.message)}}function y(t,e){if(1&t){var n=r.EpF();r.TgZ(0,"ion-buttons",18),r.TgZ(1,"ion-button",19),r.NdJ("click",function(){return r.CHM(n),r.oxw().upBlockProperty()}),r._UZ(2,"ion-icon",20),r.qZA(),r.TgZ(3,"ion-button",19),r.NdJ("click",function(){return r.CHM(n),r.oxw().downBlockProperty()}),r._UZ(4,"ion-icon",21),r.qZA(),r.qZA()}}var w,k=((w=function(){function e(n,i,o,a,c){t(this,e),this.pondService=n,this.modalController=i,this.translate=o,this.router=a,this.toastService=c,this.loadingFlag=new s.E,this.message="",this.data={stock:[],exchange:[]},this.eventUp=new r.vpe,this.eventDown=new r.vpe,this.eventRemove=new r.vpe}return n(e,[{key:"ngOnInit",value:function(){this.loadData()}},{key:"loadData",value:function(){var t=this;this.loadingFlag.setPending(!0),this.pondService.listWater().subscribe(function(e){t.loadingFlag.setResult(!0),1==+e.status?t.data=e.data:t.message=e.error},function(){t.loadingFlag.setResult(!1),t.message=t.translate.instant("ERROR_CONNECT")})}},{key:"upBlockProperty",value:function(){this.eventUp.emit(this.index)}},{key:"downBlockProperty",value:function(){this.eventDown.emit(this.index)}},{key:"removeBlock",value:function(){this.eventRemove.emit(this.index)}},{key:"openDetail",value:function(){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:l.O,componentProps:{type:"enviro",code:this.pondService.pond.current_season,time:this.pondService.seasonStartTime}});case 2:return t.next=4,t.sent.present();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}))}},{key:"openAddExchangeWater",value:function(){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:u.m,componentProps:{data:this.data}});case 2:return(e=t.sent).onDidDismiss().then(function(t){t.data&&n.loadData()}),t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"openAddFinishedWater",value:function(){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:d.j,componentProps:{data:this.data}});case 2:return(e=t.sent).onDidDismiss().then(function(t){t.data&&n.loadData()}),t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"openEditFinishedWater",value:function(t,e){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:g.j,componentProps:{infor:t,data:this.data}});case 2:return(n=e.sent).onDidDismiss().then(function(t){t.data&&i.loadData()}),e.next=6,n.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"openEditExchangeWater",value:function(t,e){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:m.V,componentProps:{infor:t,data:this.data}});case 2:return(n=e.sent).onDidDismiss().then(function(t){t.data&&i.loadData()}),e.next=6,n.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"checkExchangeAvaiable",value:function(t,e){if("in"==t.type)return!0;var n=this.data.exchange.filter(function(t){return"out"==t.type}),i=n.length-1;return i>=0&&t.id!=n[i].id}}]),e}()).\u0275fac=function(t){return new(t||w)(r.Y36(c.p),r.Y36(p.IN),r.Y36(f.sK),r.Y36(Z.F0),r.Y36(h.k))},w.\u0275cmp=r.Xpm({type:w,selectors:[["app-treatment"]],inputs:{enableSort:"enableSort",index:"index"},outputs:{eventUp:"eventUp",eventDown:"eventDown",eventRemove:"eventRemove"},decls:14,vars:9,consts:[["mode","ios",3,"ngClass"],[1,"treatment",3,"click"],["name","git-compare-outline",1,"icon-f"],["class","icon-detail","name","chevron-forward-outline",3,"appPermission","currentPermission",4,"ngIf"],[4,"ngIf"],[1,"ion-text-center"],["class","ion-float-end",4,"ngIf"],["name","chevron-forward-outline",1,"icon-detail",3,"appPermission","currentPermission"],["lines","none","mode","ios"],["shape","round","fill","clear","size","default","slot","end",3,"appPermission","currentPermission","click"],["name","add-circle-outline","slot","icon-only"],[4,"ngFor","ngForOf"],["slot","end",1,"ion-margin"],["slot","end","shape","round","fill","clear","size","default",3,"appPermission","currentPermission","disabled","click"],["src","assets/icon/edit-24px.svg","slot","icon-only"],[1,"pondTarget"],[3,"name"],["name","dots"],[1,"ion-float-end"],["size","small","color","tertiary",3,"click"],["name","chevron-up-circle-outline"],["name","chevron-down-circle-outline"]],template:function(t,e){1&t&&(r.TgZ(0,"div"),r.TgZ(1,"ion-card",0),r.TgZ(2,"ion-card-header",1),r.NdJ("click",function(t){return e.enableSort?t.stopPropagation():e.openDetail()}),r.TgZ(3,"ion-card-subtitle"),r._UZ(4,"ion-icon",2),r._uU(5),r.ALo(6,"translate"),r.YNc(7,T,1,3,"ion-icon",3),r.qZA(),r.qZA(),r.YNc(8,D,19,14,"div",4),r.TgZ(9,"div",5),r.YNc(10,b,2,0,"div",4),r.YNc(11,Y,2,1,"p",4),r.qZA(),r.TgZ(12,"div"),r.YNc(13,y,5,0,"ion-buttons",6),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngClass",e.enableSort?"jiggleBlock":""),r.xp6(4),r.hij(" ",r.lcZ(6,7,"POND_MOD.WATER_TREAMENT")," "),r.xp6(2),r.Q6J("ngIf",!e.enableSort),r.xp6(1),r.Q6J("ngIf",!e.enableSort),r.xp6(2),r.Q6J("ngIf",e.loadingFlag.pending),r.xp6(1),r.Q6J("ngIf",e.message),r.xp6(2),r.Q6J("ngIf",e.enableSort))},directives:[p.PM,v.mk,p.Zi,p.tO,p.gu,v.O5,A.l,p.q_,p.Ie,p.Q$,p.YG,v.sg,p.yW,p.PQ,p.Sm],pipes:[f.X$,v.uU,v.JJ],styles:["[_nghost-%COMP%]   .treatment[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#3C3B3F,#605C3C)}[_nghost-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{color:#fff!important;padding-left:3em}[_nghost-%COMP%]   ion-icon.icon-f[_ngcontent-%COMP%]{font-size:2em;position:absolute;left:0;top:-.2em}[_nghost-%COMP%]   .jiggleBlock[_ngcontent-%COMP%]{animation:jiggle .4s infinite;-webkit-animation:jiggle .4s infinite;-moz-animation-duration:.4s;-moz-animation-name:jiggle;-moz-animation-iteration-count:infinite;-webkit-transform:rotate(-1deg);-moz-transform:rotate(-1deg)}@keyframes jiggle{0%{transform:rotate(-1deg)}50%{transform:rotate(1deg)}}@-webkit-keyframes jiggle{0%{-webkit-transform:rotate(-1deg)}50%{-webkit-transform:rotate(1deg)}}[_nghost-%COMP%]   .btnRemoveBlock[_ngcontent-%COMP%]{position:absolute;top:0;right:0}[_nghost-%COMP%]   .disableEvent[_ngcontent-%COMP%]{pointer-events:none!important}[_nghost-%COMP%]   .pondTarget[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:start}"]}),w)}}])}();