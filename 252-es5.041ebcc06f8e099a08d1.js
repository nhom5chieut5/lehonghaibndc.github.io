!function(){"use strict";function e(t,n){return(e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(t,n)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var o,a=i(e);if(t){var s=i(this).constructor;o=Reflect.construct(a,arguments,s)}else o=a.apply(this,arguments);return n(this,o)}}function n(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[252],{54395:function(n,i,a){a.d(i,{b:function(){return c}});var r=a(77393),l=a(33637);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.P;return function(n){return n.lift(new u(e,t))}}var u=function(){function e(t,n){o(this,e),this.dueTime=t,this.scheduler=n}return s(e,[{key:"call",value:function(e,t){return t.subscribe(new h(e,this.dueTime,this.scheduler))}}]),e}(),h=function(n){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}(a,n);var i=t(a);function a(e,t,n){var s;return o(this,a),(s=i.call(this,e)).dueTime=t,s.scheduler=n,s.debouncedSubscription=null,s.lastValue=null,s.hasValue=!1,s}return s(a,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(p,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),a}(r.L);function p(e){e.debouncedNext()}},23453:function(e,t,n){n.d(t,{U:function(){return x}});var i=n(27887),a=n(69814),r=n(79765),l=n(25917),c=n(54395),u=n(87519),h=n(43190),p=n(37716),f=n(47063),d=n(84465),g=n(81780),v=n(71239),b=n(38583);function Z(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"ion-item"),p.TgZ(1,"ion-label"),p.TgZ(2,"h3"),p._uU(3),p.qZA(),p.qZA(),p.TgZ(4,"ion-button",10),p.NdJ("click",function(){var e=p.CHM(n).index;return p.oxw(2).removeSpecies(e)}),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.qZA()}if(2&e){var i=t.$implicit;p.xp6(3),p.Oqu(i),p.xp6(2),p.hij(" ",p.lcZ(6,2,"POND_MOD.DELETE")," ")}}function m(e,t){if(1&e&&(p.TgZ(0,"ion-list"),p.YNc(1,Z,7,4,"ion-item",7),p.qZA()),2&e){var n=p.oxw();p.xp6(1),p.Q6J("ngForOf",n.speciesFollowing)}}function y(e,t){1&e&&(p.TgZ(0,"ion-list-header"),p.TgZ(1,"ion-label"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.qZA()),2&e&&(p.xp6(2),p.Oqu(p.lcZ(3,1,"POND_MOD.RESULT")))}function A(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"ion-item"),p.TgZ(1,"ion-label"),p.TgZ(2,"h3"),p._uU(3),p.qZA(),p.qZA(),p.TgZ(4,"ion-button",11),p.NdJ("click",function(){var e=p.CHM(n).$implicit;return p.oxw().addSpecies(e.title)}),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.qZA()}if(2&e){var i=t.$implicit;p.xp6(3),p.Oqu(i.title),p.xp6(2),p.hij(" ",p.lcZ(6,2,"POND_MOD.SELECT")," ")}}function T(e,t){if(1&e&&(p.TgZ(0,"ion-item",12),p.TgZ(1,"ion-label"),p.TgZ(2,"p"),p._uU(3),p.qZA(),p.qZA(),p.qZA()),2&e){var n=p.oxw();p.xp6(3),p.Oqu(n.message)}}function w(e,t){1&e&&(p.TgZ(0,"div"),p._UZ(1,"ion-spinner",13),p.qZA())}var q,x=((q=function(){function e(t,n,a,s,l){o(this,e),this.modalController=t,this.service=n,this.toastService=a,this.translate=s,this.localDb=l,this.speciesFollowing=[],this.savingFlag=new i.E,this.loadingFlag=new i.E,this.searchTerms=new r.xQ,this.keyword=""}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.localDb.speciesFollowing.forEach(function(t){e.speciesFollowing.push(t)});var t=this.searchTerms.pipe((0,c.b)(300),(0,u.x)(),(0,h.w)(function(t){return e.getSpeciesByTerm(t)}));this.species$=t,this.species$.subscribe(function(t){t?(e.loadingFlag.setResult(!0),e.message=""):(e.loadingFlag.setResult(!1),e.message=e.translate.instant("POND_MOD.NOT_FOUND"))})}},{key:"getSpeciesByTerm",value:function(e){return this.loadingFlag.setPending(!0),e.trim()?this.service.searchSpecies(e).pipe():(this.loadingFlag.setResult(!0),(0,l.of)([]))}},{key:"search",value:function(e){this.searchTerms.next(e.detail.value),this.keyword=e.detail.value}},{key:"addSpecies",value:function(e){this.speciesFollowing.find(function(t){return t==e})?this.toastService.success(this.translate.instant("WALL.MANAGE_SPECIES.FOLLOWED")):this.speciesFollowing.push(e)}},{key:"removeSpecies",value:function(e){this.speciesFollowing.splice(e,1)}},{key:"onSave",value:function(){this.savingFlag.setPending(!0),this.localDb.speciesFollowing=this.speciesFollowing,this.localDb.setLocalData("speciesFollowing",this.speciesFollowing),this.savingFlag.setResult(!1),this.modalController.dismiss({res:"success"})}}]),e}()).\u0275fac=function(e){return new(e||q)(p.Y36(f.IN),p.Y36(a.F),p.Y36(d.k),p.Y36(g.sK),p.Y36(v.T))},q.\u0275cmp=p.Xpm({type:q,selectors:[["app-manage-species"]],decls:23,vars:18,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],["color","primary",3,"disabled","click"],[3,"value","placeholder","ionChange"],[4,"ngIf"],[4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],[1,"ion-text-center"],["fill","outline","slot","end","color","danger",3,"click"],["fill","outline","slot","end",3,"click"],["lines","none"],["name","dots"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-header"),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-buttons",0),p.TgZ(3,"ion-button",1),p.NdJ("click",function(){return t.modalController.dismiss()}),p._UZ(4,"ion-icon",2),p.qZA(),p.qZA(),p.TgZ(5,"ion-title"),p._uU(6),p.ALo(7,"translate"),p.qZA(),p.TgZ(8,"ion-buttons",3),p.TgZ(9,"ion-button",4),p.NdJ("click",function(){return t.onSave()}),p._uU(10),p.ALo(11,"translate"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(12,"ion-content"),p.TgZ(13,"ion-searchbar",5),p.NdJ("ionChange",function(e){return t.search(e)}),p.ALo(14,"translate"),p.qZA(),p.YNc(15,m,2,1,"ion-list",6),p.TgZ(16,"ion-list"),p.YNc(17,y,4,3,"ion-list-header",6),p.YNc(18,A,7,4,"ion-item",7),p.ALo(19,"async"),p.YNc(20,T,4,1,"ion-item",8),p.qZA(),p.TgZ(21,"div",9),p.YNc(22,w,2,0,"div",6),p.qZA(),p.qZA()),2&e&&(p.xp6(6),p.Oqu(p.lcZ(7,10,"WALL.MANAGE_SPECIES.TITLE")),p.xp6(3),p.Q6J("disabled",t.savingFlag.pending),p.xp6(1),p.Oqu(p.lcZ(11,12,"POND_MOD.SAVE")),p.xp6(3),p.Q6J("value",t.keyword)("placeholder",p.lcZ(14,14,"WALL.MANAGE_SPECIES.SEARCH_SPECIES")),p.xp6(2),p.Q6J("ngIf",(null==t.speciesFollowing?null:t.speciesFollowing.length)>0),p.xp6(2),p.Q6J("ngIf",""!=t.keyword),p.xp6(1),p.Q6J("ngForOf",p.lcZ(19,16,t.species$)),p.xp6(2),p.Q6J("ngIf",t.message),p.xp6(2),p.Q6J("ngIf",t.loadingFlag.pending))},directives:[f.Gu,f.sr,f.Sm,f.YG,f.gu,f.wd,f.W2,f.VI,f.j9,b.O5,f.q_,b.sg,f.Ie,f.Q$,f.yh,f.PQ],pipes:[g.X$,b.Ov],styles:[""]}),q)},58149:function(e,t,n){n.d(t,{A:function(){return Z}});var i=n(27887),a=n(69814),r=n(37716),l=n(84465),c=n(47063),u=n(81780),h=n(38583),p=n(56209);function f(e,t){1&e&&(r.TgZ(0,"div",4),r._UZ(1,"ion-spinner",8),r.qZA())}function d(e,t){if(1&e&&r._UZ(0,"div",9),2&e){var n=r.oxw();r.Q6J("options",n.optionLine)}}function g(e,t){if(1&e&&(r.TgZ(0,"ion-item"),r.TgZ(1,"ion-text",0),r.TgZ(2,"small"),r.TgZ(3,"b"),r._uU(4),r.qZA(),r._uU(5),r.qZA(),r.qZA(),r.TgZ(6,"ion-text",12),r._uU(7),r.qZA(),r.qZA()),2&e){var n=t.$implicit;r.xp6(4),r.Oqu(n.user_name),r.xp6(1),r.hij(" | ",n.time,""),r.xp6(2),r.hij("",n.price,"\u0111")}}function v(e,t){if(1&e&&(r.TgZ(0,"ion-list",10),r.YNc(1,g,8,3,"ion-item",11),r.qZA()),2&e){var n=r.oxw();r.xp6(1),r.Q6J("ngForOf",null==n.rawData?null:n.rawData.logs)}}var b,Z=((b=function(){function e(t,n,a,s){o(this,e),this.service=t,this.toastService=n,this.modalController=a,this.translate=s,this.rawData=[],this.processedData=[],this.chartData=[],this.loadingFlag=new i.E,this.show=!1,this.optionLine={title:{},tooltip:{trigger:"axis",position:["30%","60%"],formatter:function(e){var t="L\xfac "+e[0].name+"<br>";return t+="T\u1eeb t\xe9p b\u1ea1c: "+(0==e[0].value?"Ch\u01b0a c\u1eadp nh\u1eadt":e[0].value+" \u0111\u1ed3ng ")+"<br>",t+="T\u1eeb th\xe0nh vi\xean : "+(0==e[1].value?"Ch\u01b0a c\u1eadp nh\u1eadt":e[1].value+" \u0111\u1ed3ng")},textStyle:{fontFamily:"-apple-system,BlinkMacSystemFont,Roboto,Arial,sans-serif"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value",show:!0}],series:[{name:"\u0110\xe3 Duy\u1ec7t",type:"line",stack:"vertical",smooth:!0,areaStyle:{color:"rgb(96, 165, 250, 0.5)"},lineStyle:{color:"rgb(29, 78, 216)"},itemStyle:{color:"rgb(29, 78, 216)"},emphasis:{focus:"series"},data:[]},{name:"Th\xe0nh Vi\xean",type:"line",stack:"user",smooth:!0,areaStyle:{color:"rgb(252, 211, 77, 0.1)"},lineStyle:{color:"rgb(245, 158, 11)"},itemStyle:{color:"rgb(245, 158, 11)"},emphasis:{focus:"series"},data:[]}]}}return s(e,[{key:"ngOnInit",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;this.loadingFlag.setPending(!0),this.service.getPriceHistory(this.data).pipe().subscribe(function(t){0==t.status?(e.toastService.warning(t.error),e.loadingFlag.setResult(!1)):(e.rawData=t.data,e.prepareData(e.rawData),e.loadingFlag.setResult(!0))},function(t){e.loadingFlag.setResult(!1),e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"prepareData",value:function(e){this.optionLine.xAxis[0].data=this.rawData.labels,this.optionLine.series[0].data=this.rawData.history,this.optionLine.series[1].data=this.rawData.history_user}},{key:"dismiss",value:function(){this.modalController.dismiss()}},{key:"ionViewDidEnter",value:function(){this.show=!0}}]),e}()).\u0275fac=function(e){return new(e||b)(r.Y36(a.F),r.Y36(l.k),r.Y36(c.IN),r.Y36(u.sK))},b.\u0275cmp=r.Xpm({type:b,selectors:[["app-price-history"]],inputs:{data:"data"},decls:17,vars:7,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"],[1,"ion-padding"],["echarts","","class","demo-chart",3,"options",4,"ngIf"],["lines","none",4,"ngIf"],["name","dots"],["echarts","",1,"demo-chart",3,"options"],["lines","none"],[4,"ngFor","ngForOf"],["slot","end","color","success"]],template:function(e,t){1&e&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-buttons",0),r.TgZ(3,"ion-button",1),r.NdJ("click",function(){return t.dismiss()}),r._UZ(4,"ion-icon",2),r.qZA(),r.qZA(),r.TgZ(5,"ion-title"),r._uU(6),r.ALo(7,"translate"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(8,"ion-content"),r.YNc(9,f,2,0,"div",3),r.TgZ(10,"div",4),r.TgZ(11,"div",5),r.TgZ(12,"h2"),r._uU(13),r.qZA(),r.qZA(),r.qZA(),r.TgZ(14,"div"),r.YNc(15,d,1,1,"div",6),r.qZA(),r.YNc(16,v,2,1,"ion-list",7),r.qZA()),2&e&&(r.xp6(6),r.Oqu(r.lcZ(7,5,"WALL.PRICE_HISTORY.TITLE")),r.xp6(3),r.Q6J("ngIf",t.loadingFlag.pending),r.xp6(4),r.Oqu(null==t.rawData.species?null:t.rawData.species.title),r.xp6(2),r.Q6J("ngIf",t.show),r.xp6(1),r.Q6J("ngIf",t.rawData))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.wd,c.W2,h.O5,c.PQ,p._w,c.q_,h.sg,c.Ie,c.yW],pipes:[u.X$],styles:[""]}),b)},69814:function(e,t,n){n.d(t,{F:function(){return u}});var i=n(15189),a=n(92340),r=n(88002),l=n(37716),c=n(81780),u=function(){var e=function(){function e(t,n){o(this,e),this.reqAPIService=t,this.translate=n,this.farmextApi="/manager/disease-neighboor-api",this.farmextWall="/manager/wall-api",this.tepbacApi="/farmext/update-api",this.weatherPath="http://api.openweathermap.org/data/2.5/onecall"}return s(e,[{key:"listDisease",value:function(){return this.reqAPIService.get(this.farmextApi)}},{key:"listUpdate",value:function(e,t){return this.reqAPIService.postOutSiteNoneToken(a.h_.SITE_PATH+this.tepbacApi+"&action=list&page="+e,t)}},{key:"getPriceHistory",value:function(e){return this.reqAPIService.getOutSite(a.h_.SITE_PATH+this.tepbacApi+"&action=get-price&sid="+e)}},{key:"searchSpecies",value:function(e){return this.reqAPIService.getOutSite(a.h_.SITE_PATH+this.tepbacApi+"&action=search-species&keyword="+e).pipe((0,r.U)(function(e){return e.data}))}},{key:"loadAnalyze",value:function(e){return this.reqAPIService.post(this.farmextWall+"?action=analyze",e)}},{key:"loadReport",value:function(e){return this.reqAPIService.post(this.farmextWall+"?action=report",e)}},{key:"getWeatherToday",value:function(e,t){return this.reqAPIService.getOutSiteNoneToken(this.weatherPath+"?lat="+e+"&lon="+t+"&appid=9d7acdb5a0b7977b5dbd5dddf54c1fb4&lang="+this.translate.currentLang)}},{key:"getWeather",value:function(e,t){return this.reqAPIService.getOutSiteNoneToken(this.weatherPath+"?lat="+e+"&lon="+t+"&appid=9d7acdb5a0b7977b5dbd5dddf54c1fb4&lang="+this.translate.currentLang).toPromise()}},{key:"getWeatherYesterday",value:function(e,t,n){return this.reqAPIService.getOutSiteNoneToken(this.weatherPath+"?/timemachine?dt="+e+"&lat="+t+"&lon="+n+"&appid=9d7acdb5a0b7977b5dbd5dddf54c1fb4&lang="+this.translate.currentLang).toPromise()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.LFG(i.$),l.LFG(c.sK))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();