!function(){"use strict";function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function e(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[947],{73394:function(t,i,o){o.d(i,{c:function(){return O}});var r=o(64762),s=o(15085),a=o(85976),c=o(37716),u=o(47063),l=o(84465),d=o(81780),g=o(38583);function p(n,t){if(1&n&&(c.TgZ(0,"ion-text",13),c._uU(1),c.qZA()),2&n){var e=c.oxw(2);c.xp6(1),c.Oqu(e.infor.history[e.infor.history.length-1].meta_value)}}function f(n,t){1&n&&(c.TgZ(0,"ion-text",14),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&n&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"SHOP.CART.CANCELLED")))}function Z(n,t){if(1&n&&(c.TgZ(0,"ion-text",13),c.TgZ(1,"p"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.qZA()),2&n){var e=c.oxw().$implicit;c.xp6(2),c.lnq("",c.lcZ(3,3,"SHOP.CART.PROMO_CODE")," ",e.discount_code," -",e.discount_value,"%")}}function h(n,t){if(1&n){var e=c.EpF();c.TgZ(0,"ion-item",1),c.NdJ("click",function(){var n=c.CHM(e).index;return c.oxw(2).presentRating(n)}),c.TgZ(1,"ion-thumbnail",0),c._UZ(2,"img",15),c.qZA(),c.TgZ(3,"ion-label",16),c.TgZ(4,"ion-text",17),c.TgZ(5,"h3"),c._uU(6),c.qZA(),c.TgZ(7,"p"),c._uU(8),c.qZA(),c.YNc(9,Z,4,5,"ion-text",5),c.qZA(),c.qZA(),c.TgZ(10,"div",18),c.TgZ(11,"ion-text",14),c._uU(12),c.qZA(),c.qZA(),c.qZA()}if(2&n){var i=t.$implicit,o=c.oxw(2);c.xp6(2),c.Q6J("src",o.service.SITE_PATH+i.img,c.LSH),c.xp6(4),c.Oqu(i.alias),c.xp6(2),c.Oqu(i.option_name),c.xp6(1),c.Q6J("ngIf",i.discount_value>0),c.xp6(3),c.hij("",o.numberWithCommas(i.price),"\u0111")}}function m(n,t){if(1&n&&(c.TgZ(0,"p"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&n){var e=c.oxw(2);c.xp6(1),c.AsE(" ",c.lcZ(2,2,"SHOP.SHIP_COST")," : ",e.numberWithCommas(e.infor.shipping_fee)," \u0111 ")}}function A(n,t){if(1&n&&(c.TgZ(0,"p"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&n){var e=c.oxw(2);c.xp6(1),c.lnq(" ",c.lcZ(2,3,"SHOP.CART.CODE")," : ",e.infor.discount_code," -",e.numberWithCommas(e.infor.total_discount)," \u0111 ")}}function T(n,t){if(1&n){var e=c.EpF();c.TgZ(0,"ion-button",19),c.NdJ("click",function(){return c.CHM(e),c.oxw(2).openDetailCancel()}),c._uU(1),c.ALo(2,"translate"),c.qZA()}2&n&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"SHOP.CART.CANCEL_ORDER")))}function _(n,t){if(1&n&&(c.TgZ(0,"ion-content"),c.TgZ(1,"div"),c.TgZ(2,"ion-card"),c.TgZ(3,"ion-card-header"),c._UZ(4,"ion-icon",4),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.TgZ(7,"ion-card-content"),c.YNc(8,p,2,1,"ion-text",5),c.YNc(9,f,3,3,"ion-text",6),c.qZA(),c.qZA(),c.TgZ(10,"ion-card"),c.TgZ(11,"ion-card-header"),c._UZ(12,"ion-icon",4),c._uU(13),c.ALo(14,"translate"),c.qZA(),c.TgZ(15,"ion-card-content"),c._UZ(16,"ion-text",7),c.qZA(),c.qZA(),c.TgZ(17,"ion-card"),c.TgZ(18,"ion-card-header"),c._UZ(19,"ion-icon",8),c._uU(20),c.ALo(21,"translate"),c.qZA(),c.TgZ(22,"ion-card-content"),c.TgZ(23,"p"),c._uU(24),c.qZA(),c.TgZ(25,"p"),c._uU(26),c.qZA(),c.qZA(),c.qZA(),c.TgZ(27,"ion-card"),c.TgZ(28,"ion-card-header"),c._UZ(29,"ion-icon",9),c._uU(30),c.ALo(31,"translate"),c.qZA(),c.TgZ(32,"ion-card-content"),c.TgZ(33,"ion-list"),c.YNc(34,h,13,5,"ion-item",10),c.qZA(),c.TgZ(35,"div",11),c.YNc(36,m,3,4,"p",3),c.YNc(37,A,3,5,"p",3),c.TgZ(38,"p"),c._uU(39),c.ALo(40,"translate"),c.TgZ(41,"b"),c._uU(42),c.qZA(),c.qZA(),c.YNc(43,T,3,3,"ion-button",12),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&n){var e=c.oxw();c.xp6(5),c.hij(" ",c.lcZ(6,16,"SHOP.ORDER_STATUS")," "),c.xp6(3),c.Q6J("ngIf",1==e.infor.status),c.xp6(1),c.Q6J("ngIf",0==e.infor.status),c.xp6(4),c.hij("",c.lcZ(14,18,"SHOP.CART.SHIP_METHOD")," "),c.xp6(3),c.Q6J("innerHTML",e.translate.instant(1==e.infor.ship?"SHOP.CART.SHIP_HOME":"SHOP.CART.SHOP_PICKUP"),c.oJD),c.xp6(4),c.hij(" ",c.lcZ(21,20,"SHOP.RECEIVER")," "),c.xp6(4),c.AsE(" ",e.infor.name_user,"-",e.infor.phone_user," "),c.xp6(2),c.hij(" ",e.infor.address_user," "),c.xp6(4),c.hij(" ",c.lcZ(31,22,"SHOP.PRODUCTS")," "),c.xp6(4),c.Q6J("ngForOf",e.products),c.xp6(2),c.Q6J("ngIf",1==e.infor.ship),c.xp6(1),c.Q6J("ngIf",e.infor.discount_value>0),c.xp6(2),c.hij(" ",c.lcZ(40,24,"SHOP.CART.TOTAL")," "),c.xp6(3),c.hij("",e.numberWithCommas(e.infor.total+e.infor.shipping_fee)," \u0111"),c.xp6(1),c.Q6J("ngIf",e.infor.history.length<=2&&1==e.infor.status)}}var v,O=((v=function(){function t(e,i,o,r,s){n(this,t),this.modalController=e,this.service=i,this.toastService=o,this.translate=r,this.alertController=s}return e(t,[{key:"ngOnInit",value:function(){var n=this;this.service.getOrder(this.id).subscribe(function(t){"success"==t.status?(n.infor=t.data.infor,n.infor.total=parseInt(n.infor.total),n.infor.shipping_fee=parseInt(n.infor.shipping_fee),n.products=t.data.products,console.log(n.products)):n.toastService.warning(t.error.message)},function(t){n.toastService.danger(n.translate.instant("ERROR_CONNECT"))})}},{key:"numberWithCommas",value:function(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}},{key:"presentRating",value:function(n){return(0,r.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:a.L,componentProps:{product_id:this.products[n].product_id,shop_id:this.infor.shop_id},cssClass:"my-custom-class"});case 2:return(e=t.sent).onDidDismiss().then(function(n){n.data&&i.addRating(n.data)}),t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"addRating",value:function(n){var t=this;this.service.rating(n).subscribe(function(n){"success"==n.status?t.toastService.success(t.translate.instant("SHOP.RATE_SUCCESS")):t.toastService.warning(n.error.message)},function(n){t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"openDetailCancel",value:function(){return(0,r.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var t=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("SHOP.CART.CANCEL_ORDER"),inputs:[{name:"detail",type:"text",id:"name2-id",value:"",placeholder:this.translate.instant("SHOP.CART.REASON_CANCEL")}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel")}},{text:"Ok",handler:function(n){t.cancelOrder(n)}}]});case 2:return n.next=4,n.sent.present();case 4:case"end":return n.stop()}},n,this)}))}},{key:"cancelOrder",value:function(n){var t=this;this.service.saveCancelOrder(this.infor.id,n).subscribe(function(n){"success"==n.status?(t.toastService.success(t.translate.instant("SHOP.CART.CANCEL_SUCCESS")),t.modalController.dismiss(!0)):t.toastService.warning(n.error.message)},function(n){t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}}]),t}()).\u0275fac=function(n){return new(n||v)(c.Y36(u.IN),c.Y36(s.d),c.Y36(l.k),c.Y36(d.sK),c.Y36(u.Br))},v.\u0275cmp=c.Xpm({type:v,selectors:[["app-detail-order"]],inputs:{id:"id"},decls:9,vars:4,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[4,"ngIf"],["name","car-outline"],["color","success",4,"ngIf"],["color","danger",4,"ngIf"],["color","dark",3,"innerHTML"],["name","person-outline"],["name","document-text-outline"],[3,"click",4,"ngFor","ngForOf"],["color","dark",2,"text-align","end"],["color","danger","size","small",3,"click",4,"ngIf"],["color","success"],["color","danger"],[3,"src"],[1,"ion-text-wrap"],["color","primary"],["slot","end"],["color","danger","size","small",3,"click"]],template:function(n,t){1&n&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c.TgZ(3,"ion-button",1),c.NdJ("click",function(){return t.modalController.dismiss(!1)}),c._UZ(4,"ion-icon",2),c.qZA(),c.qZA(),c.TgZ(5,"ion-title"),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.qZA(),c.qZA(),c.YNc(8,_,44,26,"ion-content",3)),2&n&&(c.xp6(6),c.Oqu(c.lcZ(7,2,"SHOP.ORDER_DETAIL")),c.xp6(2),c.Q6J("ngIf",t.infor))},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.wd,g.O5,u.W2,u.PM,u.Zi,u.FN,u.yW,u.q_,g.sg,u.Ie,u.Bs,u.Q$],pipes:[d.X$],styles:[""]}),v)},85976:function(t,i,o){o.d(i,{L:function(){return p}});var r=o(37716),s=o(47063),a=o(38583),c=o(90665),u=o(81780);function l(n,t){if(1&n){var e=r.EpF();r.TgZ(0,"ion-icon",10),r.NdJ("click",function(){var n=r.CHM(e).$implicit;return r.oxw().rating=n}),r.qZA()}if(2&n){var i=t.$implicit,o=r.oxw();r.Q6J("name",o.rating>=i?"star":"star-outline")}}var d,g=function(){return[1,2,3,4,5]},p=((d=function(){function t(e){n(this,t),this.modalController=e,this.rating=5,this.content=""}return e(t,[{key:"ngOnInit",value:function(){}},{key:"closeWithData",value:function(){this.modalController.dismiss({product_id:this.product_id,shop_id:this.shop_id,rate:this.rating,content:this.content})}}]),t}()).\u0275fac=function(n){return new(n||d)(r.Y36(s.IN))},d.\u0275cmp=r.Xpm({type:d,selectors:[["app-rating"]],inputs:{product_id:"product_id",shop_id:"shop_id"},decls:22,vars:13,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],[3,"disabled","click"],["lines","none"],["color","warning",3,"name","click",4,"ngFor","ngForOf"],["lines","inset"],["position","floating"],[3,"ngModel","ngModelChange"],["color","warning",3,"name","click"]],template:function(n,t){1&n&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-buttons",0),r.TgZ(3,"ion-button",1),r.NdJ("click",function(){return t.modalController.dismiss(!1)}),r._UZ(4,"ion-icon",2),r.qZA(),r.qZA(),r.TgZ(5,"ion-title"),r._uU(6),r.ALo(7,"translate"),r.qZA(),r.TgZ(8,"ion-buttons",3),r.TgZ(9,"ion-button",4),r.NdJ("click",function(){return t.closeWithData()}),r._uU(10),r.ALo(11,"translate"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(12,"ion-content"),r.TgZ(13,"ion-list"),r.TgZ(14,"ion-item",5),r.TgZ(15,"div"),r.YNc(16,l,1,1,"ion-icon",6),r.qZA(),r.qZA(),r.TgZ(17,"ion-item",7),r.TgZ(18,"ion-label",8),r._uU(19),r.ALo(20,"translate"),r.qZA(),r.TgZ(21,"ion-textarea",9),r.NdJ("ngModelChange",function(n){return t.content=n}),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&n&&(r.xp6(6),r.Oqu(r.lcZ(7,6,"SHOP.RATE")),r.xp6(3),r.Q6J("disabled",""==t.content),r.xp6(1),r.hij(" ",r.lcZ(11,8,"SAVE")," "),r.xp6(6),r.Q6J("ngForOf",r.DdM(12,g)),r.xp6(3),r.Oqu(r.lcZ(20,10,"SHOP.RATE_COMMENT")),r.xp6(2),r.Q6J("ngModel",t.content))},directives:[s.Gu,s.sr,s.Sm,s.YG,s.gu,s.wd,s.W2,s.q_,s.Ie,a.sg,s.Q$,s.g2,s.j9,c.JJ,c.On],pipes:[u.X$],styles:[""]}),d)},70947:function(t,i,o){o.r(i),o.d(i,{ShopOrderPageModule:function(){return O}});var r=o(38583),s=o(90665),a=o(47063),c=o(13619),u=o(64762),l=o(27887),d=o(15085),g=o(73394),p=o(37716),f=o(81780),Z=o(84465),h=o(71239);function m(n,t){if(1&n){var e=p.EpF();p.TgZ(0,"ion-item",4),p.NdJ("click",function(){var n=p.CHM(e),t=n.$implicit,i=n.index;return p.oxw().detail(t.id,i)}),p.TgZ(1,"ion-text",0),p.TgZ(2,"b"),p._uU(3),p.qZA(),p.qZA(),p.TgZ(4,"ion-text"),p._uU(5),p.ALo(6,"date"),p.qZA(),p.TgZ(7,"ion-text",5),p._uU(8),p.qZA(),p.qZA()}if(2&n){var i=t.$implicit,o=p.oxw();p.xp6(3),p.hij("#",i.id,""),p.xp6(2),p.Oqu(p.xi3(6,3,1e3*i.add_time,"d-M-y")),p.xp6(3),p.hij("",o.numberWithCommas(o.totalBill(i.total,i.shipping_fee)),"\u0111")}}function A(n,t){1&n&&(p.TgZ(0,"ion-item",6),p.TgZ(1,"ion-label"),p.TgZ(2,"p"),p._uU(3),p.ALo(4,"translate"),p.qZA(),p.qZA(),p.qZA()),2&n&&(p.xp6(3),p.Oqu(p.lcZ(4,1,"SHOP_MOD.TRY_TO_BY_THE_FIRST_ORDER")))}var T,_=[{path:"",component:(T=function(){function t(e,i,o,r,s,a){n(this,t),this.service=e,this.translate=i,this.toastService=o,this.modalController=r,this.dbLocalService=s,this.platform=a,this.listOrder=[],this.loadingFlag=new l.E}return e(t,[{key:"ngOnInit",value:function(){this.getListOrder()}},{key:"getListOrder",value:function(){var n=this;this.loadingFlag.setPending(!0),this.service.listOrder().subscribe(function(t){"success"==t.status?n.listOrder=t.data:n.toastService.warning(t.error.message),n.loadingFlag.setResult(!0)},function(t){n.loadingFlag.setResult(!1),n.toastService.danger(n.translate.instant("ERROR_CONNECT"))})}},{key:"totalBill",value:function(n,t){return parseInt(n)+parseInt(t)}},{key:"numberWithCommas",value:function(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}},{key:"detail",value:function(n,t){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:g.c,cssClass:"my-custom-class",componentProps:{id:n}});case 2:return(i=e.sent).onDidDismiss().then(function(n){n.data&&(o.listOrder[t].status=0)}),e.next=6,i.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}}]),t}(),T.\u0275fac=function(n){return new(n||T)(p.Y36(d.d),p.Y36(f.sK),p.Y36(Z.k),p.Y36(a.IN),p.Y36(h.T),p.Y36(a.t4))},T.\u0275cmp=p.Xpm({type:T,selectors:[["app-shop-order"]],decls:11,vars:5,consts:[["slot","start"],["text","","defaultHref","tabs/shop"],[3,"click",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],[3,"click"],["slot","end","color","success"],["lines","none"]],template:function(n,t){1&n&&(p.TgZ(0,"ion-header"),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-buttons",0),p._UZ(3,"ion-back-button",1),p.qZA(),p.TgZ(4,"ion-title"),p._uU(5),p.ALo(6,"translate"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(7,"ion-content"),p.TgZ(8,"ion-list"),p.YNc(9,m,9,6,"ion-item",2),p.YNc(10,A,5,3,"ion-item",3),p.qZA(),p.qZA()),2&n&&(p.xp6(5),p.Oqu(p.lcZ(6,3,"SHOP.ORDER_HISTORY")),p.xp6(4),p.Q6J("ngForOf",t.listOrder),p.xp6(1),p.Q6J("ngIf",0==t.listOrder.length))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.wd,a.W2,a.q_,r.sg,r.O5,a.Ie,a.yW,a.Q$],pipes:[f.X$,r.uU],styles:[""]}),T)},{path:"detail-order",loadChildren:function(){return o.e(6110).then(o.bind(o,56110)).then(function(n){return n.DetailOrderPageModule})}},{path:"rating",loadChildren:function(){return o.e(1704).then(o.bind(o,1704)).then(function(n){return n.RatingPageModule})}}],v=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[c.Bz.forChild(_)],c.Bz]}),t}(),O=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[r.ez,s.u5,a.Pc,v,f.aw.forChild()]]}),t}()}}])}();