"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[7096],{54395:function(e,t,i){i.d(t,{b:function(){return o}});var n=i(77393),s=i(33637);function o(e,t=s.P){return i=>i.lift(new r(e,t))}class r{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new a(e,this.dueTime,this.scheduler))}}class a extends n.L{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function l(e){e.debouncedNext()}},73473:function(e,t,i){i.d(t,{l:function(){return s}});var n=i(37716);let s=(()=>{class e{constructor(e){this.el=e,this.permissionsCanShow=[],this.el.nativeElement.style.visibility="hidden",this.el.nativeElement.style.display="none"}set PermissionsShow(e){this.permissionsCanShow=e}set CurrentPermisson(e){this.currentPermission=e,this.setShow()}set PermissionAction(e){this.currentPermission=e,this.setPointEvents()}ngOnInit(){}setShow(){this.permissionsCanShow.includes(this.currentPermission)?(this.el.nativeElement.style.visibility="visible",this.el.nativeElement.style.display="block"):(this.el.nativeElement.style.visibility="hidden",this.el.nativeElement.style.display="none")}setPointEvents(){this.el.nativeElement.style.visibility="visible",this.el.nativeElement.style.display="block",this.el.nativeElement.style["pointer-events"]=this.permissionsCanShow.includes(this.currentPermission)?"visible":"none"}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq))},e.\u0275dir=n.lG2({type:e,selectors:[["","appPermission",""]],inputs:{PermissionsShow:["appPermission","PermissionsShow"],CurrentPermisson:["currentPermission","CurrentPermisson"],PermissionAction:["permissionAction","PermissionAction"]}}),e})()},7096:function(e,t,i){i.r(t),i.d(t,{FarmPageModule:function(){return Ne}});var n=i(38583),s=i(90665),o=i(13619),r=i(47063),a=i(64762),l=i(27887),c=i(51937),d=i(79765),u=i(25917),m=i(54395),g=i(87519),p=i(43190),h=i(66341),Z=i(37716),f=i(84465),A=i(81780);function v(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"ion-item"),Z.TgZ(1,"ion-avatar",0),Z._UZ(2,"img",8),Z.qZA(),Z.TgZ(3,"ion-label"),Z.TgZ(4,"h3"),Z._uU(5),Z.TgZ(6,"span",9),Z._uU(7),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(8,"ion-button",10),Z.NdJ("click",function(){const t=Z.CHM(e).index;return Z.oxw().presentRemoveUser(t)}),Z._uU(9),Z.ALo(10,"translate"),Z.qZA(),Z.qZA()}if(2&e){const e=t.$implicit,i=Z.oxw();Z.xp6(5),Z.hij("",e.user_name," - "),Z.xp6(2),Z.Oqu(i.permissions[e.key]),Z.xp6(2),Z.hij(" ",Z.lcZ(10,3,"FARM_MOD.DELETE")," ")}}function _(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"ion-item"),Z.TgZ(1,"ion-avatar",0),Z._UZ(2,"img",11),Z.qZA(),Z.TgZ(3,"ion-label"),Z.TgZ(4,"h3"),Z._uU(5),Z.qZA(),Z.TgZ(6,"p"),Z._uU(7),Z.qZA(),Z.qZA(),Z.TgZ(8,"ion-button",12),Z.NdJ("click",function(){const t=Z.CHM(e).$implicit;return Z.oxw().presentAddUser(t)}),Z._uU(9),Z.ALo(10,"translate"),Z.qZA(),Z.qZA()}if(2&e){const e=t.$implicit,i=Z.oxw();Z.xp6(2),Z.Q6J("src",i.memberService.getSitePath()+"/upload/users/avatars/medium/"+e.photo,Z.LSH),Z.xp6(3),Z.Oqu(e.username),Z.xp6(2),Z.Oqu(e.email),Z.xp6(1),Z.Q6J("disabled",i.checkExistUser(e)),Z.xp6(1),Z.hij(" ",Z.lcZ(10,5,"FARM_MOD.SELECT")," ")}}function T(e,t){if(1&e&&(Z.TgZ(0,"ion-item",13),Z.TgZ(1,"ion-label"),Z.TgZ(2,"p"),Z._uU(3),Z.qZA(),Z.qZA(),Z.qZA()),2&e){const e=Z.oxw();Z.xp6(3),Z.Oqu(e.message)}}function q(e,t){1&e&&(Z.TgZ(0,"div"),Z._UZ(1,"ion-spinner",14),Z.qZA())}let O=(()=>{class e{constructor(e,t,i,n,s,o){this.modalController=e,this.farmService=t,this.memberService=i,this.toastService=n,this.translate=s,this.alertController=o,this.savingFlag=new l.E,this.loadingFlag=new l.E,this.searchTerms=new d.xQ}ngOnInit(){let e=this.searchTerms.pipe((0,m.b)(300),(0,g.x)(),(0,p.w)(e=>this.getListMember(e)));this.members$=e,this.members$.subscribe(e=>{e?(this.loadingFlag.setResult(!0),this.message=""):(this.loadingFlag.setResult(!1),this.message=this.translate.instant("FARM_MOD.NOT_FOUND"))}),this.permissions={farm_manager:this.translate.instant("FARM_MOD.FARM_MANAGER"),farm_operation:this.translate.instant("FARM_MOD.FARM_OPERATION"),store_manager:this.translate.instant("FARM_MOD.STORE_MANAGER"),keeper_manager:this.translate.instant("FARM_MOD.KEEPER_MANAGER")}}search(e){this.searchTerms.next(e.detail.value)}getListMember(e){return this.loadingFlag.setPending(!0),e.trim()?this.memberService.searchMember(e).pipe():(this.loadingFlag.setResult(!0),(0,u.of)([]))}onSelect(e){this.memberSelected=e}addPermission(e,t){this.farmService.updatePrivate({user_manager:e.user_id,fid:this.farmService.farm.id,position:t}).pipe().subscribe(i=>{0==i.status?this.toastService.warning(i.error):(this.manager.push({user_name:e.username,user_id:e.user_id,key:t}),this.toastService.success(this.translate.instant("FARM_MOD.ADDED_STAFF"))),this.savingFlag.setResult(!0)},e=>{this.savingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}removePermission(e){this.farmService.removePermission(this.manager[e].user_id,this.manager[e].key).pipe().subscribe(t=>{0==t.status?this.toastService.warning(t.error):(this.manager.splice(e,1),this.toastService.success(this.translate.instant("FARM_MOD.REMOVED_STAFF"))),this.savingFlag.setResult(!0)},e=>{this.savingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}presentRemoveUser(e){return(0,a.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("CONFIRM")+"!",message:this.translate.instant("FARM_MOD.CONFIRM_REMOVE"),buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:e=>{console.log("Confirm Cancel: blah")}},{text:"Okay",handler:()=>{this.removePermission(e)}}]})).present()})}presentAddUser(e){return(0,a.mG)(this,void 0,void 0,function*(){let t=[];for(let e in this.permissions)t.push({name:this.permissions[e],type:"radio",value:e,label:this.permissions[e],checked:!1});t[0].checked=!0,yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("CONFIRM")+"!",message:this.translate.instant("FARM_MOD.CONFIRM_ADD"),inputs:t,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:e=>{console.log("Confirm Cancel: blah")}},{text:"Okay",handler:t=>{this.addPermission(e,t)}}]})).present()})}close(){this.modalController.dismiss(this.manager)}checkExistUser(e){for(let t=0;t<this.manager.length;t++)if(this.manager[t].user_name==e.username)return!0;return!1}}return e.\u0275fac=function(t){return new(t||e)(Z.Y36(r.IN),Z.Y36(c.D),Z.Y36(h.n),Z.Y36(f.k),Z.Y36(A.sK),Z.Y36(r.Br))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-farm-select-manager"]],inputs:{manager:"manager"},decls:22,vars:13,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[3,"placeholder","ionChange"],[4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],[1,"ion-text-center"],[4,"ngIf"],["src","assets/img/default-profile.jpg"],[2,"color","red"],["slot","end","color","danger",3,"click"],["onError","this.src='assets/img/default-profile.jpg'",3,"src"],["slot","end",3,"disabled","click"],["lines","none"],["name","dots"]],template:function(e,t){1&e&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z.TgZ(3,"ion-button",1),Z.NdJ("click",function(){return t.close()}),Z._UZ(4,"ion-icon",2),Z.qZA(),Z.qZA(),Z.TgZ(5,"ion-title"),Z._uU(6),Z.ALo(7,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(8,"ion-content"),Z.TgZ(9,"ion-searchbar",3),Z.NdJ("ionChange",function(e){return t.search(e)}),Z.qZA(),Z.TgZ(10,"ion-list"),Z.YNc(11,v,11,5,"ion-item",4),Z.qZA(),Z.TgZ(12,"ion-list"),Z.TgZ(13,"ion-list-header"),Z.TgZ(14,"ion-label"),Z._uU(15),Z.ALo(16,"translate"),Z.qZA(),Z.qZA(),Z.YNc(17,_,11,7,"ion-item",4),Z.ALo(18,"async"),Z.YNc(19,T,4,1,"ion-item",5),Z.qZA(),Z.TgZ(20,"div",6),Z.YNc(21,q,2,0,"div",7),Z.qZA(),Z.qZA()),2&e&&(Z.xp6(6),Z.Oqu(Z.lcZ(7,7,"FARM_MOD.MANAGER")),Z.xp6(3),Z.Q6J("placeholder",t.translate.instant("FARM_MOD.MANAGER_EMAIL")),Z.xp6(2),Z.Q6J("ngForOf",t.manager),Z.xp6(4),Z.Oqu(Z.lcZ(16,9,"FARM_MOD.RESULT")),Z.xp6(2),Z.Q6J("ngForOf",Z.lcZ(18,11,t.members$)),Z.xp6(2),Z.Q6J("ngIf",t.message),Z.xp6(2),Z.Q6J("ngIf",t.loadingFlag.pending))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.wd,r.W2,r.VI,r.j9,r.q_,n.sg,r.yh,r.Q$,n.O5,r.Ie,r.BJ,r.PQ],pipes:[A.X$,n.Ov],styles:[""]}),e})();var x=i(71239);function M(e,t){1&e&&(Z.TgZ(0,"div"),Z._UZ(1,"ion-spinner",11),Z.qZA())}let b=(()=>{class e{constructor(e,t,i,n,s){this.modalController=e,this.farmService=t,this.toastService=i,this.translate=n,this.dblocalService=s,this.savingFlag=new l.E,this.viewModeCode=0}ngOnInit(){this.indexFarm=this.dblocalService.farms.findIndex(e=>e.infor.code===this.farmService.fcode)}selected(e){this.viewModeCode=e.detail.value}save(){this.savingFlag.setPending(!0),this.farmService.updatePrivate({public:this.viewModeCode,fid:this.farmService.farm.id}).pipe().subscribe(e=>{0==e.status?this.toastService.warning(e.error):(this.farmService.farm.public=this.viewModeCode,this.dblocalService.farms[this.indexFarm].infor.public=this.viewModeCode,this.dblocalService.setLocalData("farms",this.dblocalService.farms),this.toastService.success(e.message)),this.savingFlag.setResult(!0),this.modalController.dismiss()},e=>{this.savingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}return e.\u0275fac=function(t){return new(t||e)(Z.Y36(r.IN),Z.Y36(c.D),Z.Y36(f.k),Z.Y36(A.sK),Z.Y36(x.T))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-farm-view-mode"]],decls:50,vars:31,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],[3,"disabled","click"],[1,"ion-padding","ion-text-center"],[4,"ngIf"],[3,"value","ionChange"],["slot","start","value","3"],["slot","start","value","2"],["slot","start","value","1"],["name","dots"]],template:function(e,t){1&e&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z.TgZ(3,"ion-button",1),Z.NdJ("click",function(){return t.modalController.dismiss()}),Z._UZ(4,"ion-icon",2),Z.qZA(),Z.qZA(),Z.TgZ(5,"ion-title"),Z._uU(6),Z.ALo(7,"translate"),Z.qZA(),Z.TgZ(8,"ion-buttons",3),Z.TgZ(9,"ion-button",4),Z.NdJ("click",function(){return t.save()}),Z._uU(10),Z.ALo(11,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(12,"ion-content"),Z.TgZ(13,"div",5),Z.TgZ(14,"h1"),Z._uU(15),Z.qZA(),Z.YNc(16,M,2,0,"div",6),Z.qZA(),Z.TgZ(17,"ion-list"),Z.TgZ(18,"ion-radio-group",7),Z.NdJ("ionChange",function(e){return t.selected(e)}),Z.TgZ(19,"ion-list-header"),Z.TgZ(20,"ion-label"),Z._uU(21),Z.ALo(22,"translate"),Z.qZA(),Z.qZA(),Z.TgZ(23,"ion-item"),Z.TgZ(24,"ion-label"),Z.TgZ(25,"h3"),Z._uU(26),Z.ALo(27,"translate"),Z.qZA(),Z.TgZ(28,"p"),Z._uU(29),Z.ALo(30,"translate"),Z.qZA(),Z.qZA(),Z._UZ(31,"ion-radio",8),Z.qZA(),Z.TgZ(32,"ion-item"),Z.TgZ(33,"ion-label"),Z.TgZ(34,"h3"),Z._uU(35),Z.ALo(36,"translate"),Z.qZA(),Z.TgZ(37,"p"),Z._uU(38),Z.ALo(39,"translate"),Z.qZA(),Z.qZA(),Z._UZ(40,"ion-radio",9),Z.qZA(),Z.TgZ(41,"ion-item"),Z.TgZ(42,"ion-label"),Z.TgZ(43,"h3"),Z._uU(44),Z.ALo(45,"translate"),Z.qZA(),Z.TgZ(46,"p"),Z._uU(47),Z.ALo(48,"translate"),Z.qZA(),Z.qZA(),Z._UZ(49,"ion-radio",10),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&e&&(Z.xp6(6),Z.Oqu(Z.lcZ(7,13,"FARM_MOD.PRIVATE")),Z.xp6(3),Z.Q6J("disabled",t.savingFlag.pending),Z.xp6(1),Z.Oqu(Z.lcZ(11,15,"FARM_MOD.SAVE")),Z.xp6(5),Z.Oqu(t.farmService.farm.name),Z.xp6(1),Z.Q6J("ngIf",t.savingFlag.pending),Z.xp6(2),Z.Q6J("value",t.farmService.farm.public),Z.xp6(3),Z.Oqu(Z.lcZ(22,17,"FARM_MOD.WHO_SEE")),Z.xp6(5),Z.Oqu(Z.lcZ(27,19,"FARM_MOD.PUPLIC")),Z.xp6(3),Z.Oqu(Z.lcZ(30,21,"FARM_MOD.ANYONE")),Z.xp6(6),Z.Oqu(Z.lcZ(36,23,"FARM_MOD.FOLLOW")),Z.xp6(3),Z.Oqu(Z.lcZ(39,25,"FARM_MOD.RULE_FOLLOW")),Z.xp6(6),Z.Oqu(Z.lcZ(45,27,"FARM_MOD.PRIVATE")),Z.xp6(3),Z.Oqu(Z.lcZ(48,29,"FARM_MOD.RULE_PRIVATE")))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.wd,r.W2,n.O5,r.q_,r.se,r.QI,r.yh,r.Q$,r.Ie,r.B7,r.U5,r.PQ],pipes:[A.X$],styles:[""]}),e})();var S=i(87152);function R(e,t){1&e&&(Z.TgZ(0,"div"),Z._UZ(1,"ion-spinner",18),Z.qZA())}function C(e,t){if(1&e&&(Z.TgZ(0,"ion-select-option",21),Z._uU(1),Z.qZA()),2&e){const e=t.$implicit;Z.Q6J("value",e.id),Z.xp6(1),Z.Oqu(e.name)}}function E(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"ion-item",8),Z.TgZ(1,"ion-label",9),Z._uU(2),Z.ALo(3,"translate"),Z.qZA(),Z.TgZ(4,"ion-select",19),Z.NdJ("ionChange",function(t){return Z.CHM(e),Z.oxw().changeProvince(t)}),Z.YNc(5,C,2,2,"ion-select-option",20),Z.qZA(),Z.qZA()}if(2&e){const e=Z.oxw();Z.xp6(2),Z.Oqu(Z.lcZ(3,2,"PROVINCE")),Z.xp6(3),Z.Q6J("ngForOf",e.listProvince)}}function N(e,t){if(1&e&&(Z.TgZ(0,"ion-select-option",21),Z._uU(1),Z.qZA()),2&e){const e=t.$implicit;Z.Q6J("value",e.id),Z.xp6(1),Z.Oqu(e.name)}}function F(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"ion-item",8),Z.TgZ(1,"ion-label",9),Z._uU(2),Z.ALo(3,"translate"),Z.qZA(),Z.TgZ(4,"ion-select",22),Z.NdJ("ionChange",function(t){return Z.CHM(e),Z.oxw().changeDistrict(t)}),Z.YNc(5,N,2,2,"ion-select-option",20),Z.qZA(),Z.qZA()}if(2&e){const e=Z.oxw();Z.xp6(2),Z.Oqu(Z.lcZ(3,2,"DISTRICT")),Z.xp6(3),Z.Q6J("ngForOf",e.listDistrict)}}function L(e,t){if(1&e&&(Z.TgZ(0,"ion-select-option",21),Z._uU(1),Z.qZA()),2&e){const e=t.$implicit;Z.Q6J("value",e.id),Z.xp6(1),Z.Oqu(e.name)}}function U(e,t){if(1&e&&(Z.TgZ(0,"ion-item",8),Z.TgZ(1,"ion-label",9),Z._uU(2),Z.ALo(3,"translate"),Z.qZA(),Z.TgZ(4,"ion-select",23),Z.YNc(5,L,2,2,"ion-select-option",20),Z.qZA(),Z.qZA()),2&e){const e=Z.oxw();Z.xp6(2),Z.Oqu(Z.lcZ(3,2,"WARDS")),Z.xp6(3),Z.Q6J("ngForOf",e.listWards)}}function D(e,t){if(1&e&&(Z.TgZ(0,"ion-select-option",21),Z._uU(1),Z.qZA()),2&e){const e=t.$implicit;Z.Q6J("value",e.species_id),Z.xp6(1),Z.Oqu(e.name)}}function P(e,t){if(1&e&&(Z.TgZ(0,"ion-item",8),Z.TgZ(1,"ion-label",24),Z._uU(2),Z.ALo(3,"translate"),Z.qZA(),Z.TgZ(4,"ion-select",25),Z.YNc(5,D,2,2,"ion-select-option",20),Z.qZA(),Z.qZA()),2&e){const e=Z.oxw();Z.xp6(2),Z.Oqu(Z.lcZ(3,2,"FARM_MOD.SPECIES")),Z.xp6(3),Z.Q6J("ngForOf",e.species)}}let w=(()=>{class e{constructor(e,t,i,n,o,r,a){this._formBuilder=e,this.farmService=t,this.modalController=i,this.toastService=n,this.translate=o,this.geolocation=r,this.dbLocalService=a,this.savingFlag=new l.E,this.form=new s.cw({name:new s.NI(["",s.kI.required]),address:new s.NI(["",[s.kI.required,s.kI.minLength(5)]]),area:new s.NI(["",s.kI.required]),species_id:new s.NI(["",s.kI.required]),longitude:new s.NI([""]),latitude:new s.NI([""]),province:new s.NI([""]),district:new s.NI([""]),wards:new s.NI([""])}),this.species=[]}ngOnInit(){this.data=this.farmService.farm,this.indexFarm=this.dbLocalService.farms.findIndex(e=>e.infor.code===this.farmService.fcode),this.getSpecies(),this.createForm(),this.getListProvince(0),this.getListDistrict(this.data.province_id),this.getListWards(this.data.district_id)}createForm(){this.form.setValue({name:this.data.name,address:this.data.address,area:this.data.area,species_id:this.data.species_id,longitude:this.data.longitude,latitude:this.data.latitude,province:this.data.province_id,district:this.data.district_id,wards:this.data.wards_id})}getSpecies(){this.farmService.getSpecies().subscribe(e=>{e.error||1!=e.status?this.toastService.warning(e.error):(this.species=e.data,this.form.patchValue({species_id:this.data.species_id}))},e=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}getListProvince(e){this.farmService.listAddress(e).subscribe(e=>{1==e.status?this.listProvince=e.data:this.toastService.warning(e.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}getListDistrict(e){this.farmService.listAddress(e).subscribe(e=>{1==e.status?this.listDistrict=e.data:this.toastService.warning(e.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}getListWards(e){this.farmService.listAddress(e).subscribe(e=>{1==e.status?this.listWards=e.data:this.toastService.warning(e.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}changeProvince(e){let t=e.detail.value;this.listDistrict=[],this.form.value.district_id=0,this.getListDistrict(t)}changeDistrict(e){let t=e.detail.value;this.listWards=[],this.form.value.wards_id=0,this.getListWards(t)}save(){this.savingFlag.setPending(!0),this.farmService.updateFarm(this.form.value).subscribe(e=>{e.error||1!=e.status?this.toastService.warning(e.error):(this.toastService.success(e.message),this.farmService.farm.name=this.form.value.name,this.farmService.farm.address=this.form.value.address,this.farmService.farm.area=this.form.value.area,this.farmService.farm.species_id=this.form.value.species_id,this.farmService.farm.longitude=this.form.value.longitude,this.farmService.farm.latitude=this.form.value.latitude,this.farmService.farm.provice_id=this.form.value.province,this.farmService.farm.district_id=this.form.value.district,this.farmService.farm.wards_id=this.form.value.wards,-1!=this.indexFarm&&(this.dbLocalService.farms[this.indexFarm].infor=this.farmService.farm,this.dbLocalService.setLocalData("farms",this.dbLocalService.farms)),this.modalController.dismiss()),this.savingFlag.setResult(!0)},e=>{this.toastService.warning(this.translate.instant("FARM_MOD.ERROR_SAVE")),this.savingFlag.setResult(!1)})}getLocation(){this.geolocation.getCurrentPosition().then(e=>{console.log(e),e.coords.latitude&&e.coords.longitude&&(this.form.controls.latitude.setValue(e.coords.latitude),this.form.controls.longitude.setValue(e.coords.longitude))}).catch(()=>{this.toastService.danger(this.translate.instant("COMPANY_MOD.ERROR_LOCATE"))})}}return e.\u0275fac=function(t){return new(t||e)(Z.Y36(s.qu),Z.Y36(c.D),Z.Y36(r.IN),Z.Y36(f.k),Z.Y36(A.sK),Z.Y36(S.b),Z.Y36(x.T))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-farm-edit"]],decls:51,vars:32,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],[3,"disabled","click"],[3,"formGroup"],[1,"ion-padding","ion-text-center"],[4,"ngIf"],["lines","inset"],["position","floating"],["formControlName","name"],["formControlName","address","type","text","inputmode","text"],["lines","inset",4,"ngIf"],["formControlName","area","type","tel","inputmode","decimal"],["formControlName","longitude","type","tel","inputmode","decimal"],["formControlName","latitude","type","tel","inputmode","decimal"],["lines","none"],["slot","end","fill","outline",3,"click"],["name","dots"],["formControlName","province",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","district",3,"ionChange"],["formControlName","wards"],["position","stacked"],["formControlName","species_id"]],template:function(e,t){1&e&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z.TgZ(3,"ion-button",1),Z.NdJ("click",function(){return t.modalController.dismiss()}),Z._UZ(4,"ion-icon",2),Z.qZA(),Z.qZA(),Z.TgZ(5,"ion-title"),Z._uU(6),Z.ALo(7,"translate"),Z.qZA(),Z.TgZ(8,"ion-buttons",3),Z.TgZ(9,"ion-button",4),Z.NdJ("click",function(){return t.save()}),Z._uU(10),Z.ALo(11,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(12,"ion-content",5),Z.TgZ(13,"div",6),Z.TgZ(14,"h1"),Z._uU(15),Z.qZA(),Z.YNc(16,R,2,0,"div",7),Z.qZA(),Z.TgZ(17,"ion-list"),Z.TgZ(18,"ion-item",8),Z.TgZ(19,"ion-label",9),Z._uU(20),Z.ALo(21,"translate"),Z.qZA(),Z._UZ(22,"ion-input",10),Z.qZA(),Z.TgZ(23,"ion-item",8),Z.TgZ(24,"ion-label",9),Z._uU(25),Z.ALo(26,"translate"),Z.qZA(),Z._UZ(27,"ion-input",11),Z.qZA(),Z.YNc(28,E,6,4,"ion-item",12),Z.YNc(29,F,6,4,"ion-item",12),Z.YNc(30,U,6,4,"ion-item",12),Z.TgZ(31,"ion-item",8),Z.TgZ(32,"ion-label",9),Z._uU(33),Z.ALo(34,"translate"),Z.qZA(),Z._UZ(35,"ion-input",13),Z.qZA(),Z.YNc(36,P,6,4,"ion-item",12),Z.TgZ(37,"ion-item",8),Z.TgZ(38,"ion-label",9),Z._uU(39),Z.ALo(40,"translate"),Z.qZA(),Z._UZ(41,"ion-input",14),Z.qZA(),Z.TgZ(42,"ion-item",8),Z.TgZ(43,"ion-label",9),Z._uU(44),Z.ALo(45,"translate"),Z.qZA(),Z._UZ(46,"ion-input",15),Z.qZA(),Z.TgZ(47,"ion-item",16),Z.TgZ(48,"ion-button",17),Z.NdJ("click",function(){return t.getLocation()}),Z._uU(49),Z.ALo(50,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&e&&(Z.xp6(6),Z.Oqu(Z.lcZ(7,16,"FARM_MOD.EDIT")),Z.xp6(3),Z.Q6J("disabled",t.form.invalid||t.savingFlag.pending),Z.xp6(1),Z.Oqu(Z.lcZ(11,18,"FARM_MOD.SAVE")),Z.xp6(2),Z.Q6J("formGroup",t.form),Z.xp6(3),Z.Oqu(t.data.name),Z.xp6(1),Z.Q6J("ngIf",t.savingFlag.pending),Z.xp6(4),Z.Oqu(Z.lcZ(21,20,"FARM_MOD.NAME_FARM")),Z.xp6(5),Z.Oqu(Z.lcZ(26,22,"FARM_MOD.ADDRESS")),Z.xp6(3),Z.Q6J("ngIf",t.listProvince),Z.xp6(1),Z.Q6J("ngIf",t.listDistrict),Z.xp6(1),Z.Q6J("ngIf",t.listWards),Z.xp6(3),Z.hij("",Z.lcZ(34,24,"AREA")," (ha)"),Z.xp6(3),Z.Q6J("ngIf",t.species.length>0),Z.xp6(3),Z.Oqu(Z.lcZ(40,26,"FARM_MOD.LONG")),Z.xp6(5),Z.Oqu(Z.lcZ(45,28,"FARM_MOD.LAT")),Z.xp6(5),Z.Oqu(Z.lcZ(50,30,"COMPANY_MOD.CURRENT_LOCATE")))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.wd,r.W2,s.JL,s.sg,n.O5,r.q_,r.Ie,r.Q$,r.pK,r.j9,s.JJ,s.u,r.PQ,r.t9,r.QI,n.sg,r.n0],pipes:[A.X$],styles:[""]}),e})();var y=i(62014),I=i(16738);function Y(e,t){1&e&&(Z.TgZ(0,"div"),Z._UZ(1,"ion-spinner",20),Z.qZA())}function k(e,t){if(1&e&&(Z.TgZ(0,"ion-item",9),Z.TgZ(1,"ion-label"),Z._uU(2),Z.ALo(3,"translate"),Z.qZA(),Z._UZ(4,"ion-datetime",21),Z.ALo(5,"translate"),Z.ALo(6,"translate"),Z.qZA()),2&e){const e=Z.oxw();Z.xp6(2),Z.Oqu(Z.lcZ(3,5,"POND_MOD.SEASON_CREATE_DATE")),Z.xp6(2),Z.Q6J("displayFormat",Z.lcZ(5,7,"FORMAT_DATE_MOMENT"))("placeholder",Z.lcZ(6,9,"SELECT_DATE"))("min",e.minDate.format("YYYY-MM-DD"))("max",e.maxDate.format("YYYY-MM-DD"))}}let J=(()=>{class e{constructor(e,t,i,n,s,o){this.modalController=e,this._formBuilder=t,this.farmService=i,this.toastService=n,this.translate=s,this.dbLocalService=o,this.savingFlag=new l.E,this.numberFormatCost=new y.y(""),this.maxDate=I(),this.minDate=I().subtract(180,"days")}ngOnInit(){this.createForm()}createForm(){this.form=this._formBuilder.group({name:["",[s.kI.required,s.kI.maxLength(20)]],area:["",[s.kI.required,s.kI.max(5e4),s.kI.min(0)]],deep:["",[s.kI.required,s.kI.min(0),s.kI.max(10)]],cost:[""],expire:[""],type:["pond",[s.kI.required]],time_start:[I().format("YYYY-MM-DD")]})}createPond(){this.form.patchValue({cost:this.numberFormatCost.realValue});let e={fid:this.farmService.farm.id,name:this.form.value.name,area:this.form.value.area,deep:this.form.value.deep,cost:this.form.value.cost,expire:this.form.value.expire,type:this.form.value.type,time_start:I(this.form.value.time_start).valueOf()/1e3};this.savingFlag.setPending(!0),this.farmService.insertOnePond(e).subscribe(t=>{if(t.error)this.toastService.warning(t.error);else{this.toastService.success(this.translate.instant("FARM_MOD.NOTI_CREATE"));let i={infor:{id:0,code:t.data.code,name:e.name,public:1,area:e.area,create_cost:e.cost,deep:e.deep,expire_date:e.expire,add_time:(new Date).getTime(),warning:0,current_season:"",farm_id:this.farmService.farm.id,permission:"farm_manager"},devices:[]};this.dbLocalService.ponds.push(i),this.dbLocalService.setLocalData("ponds",this.dbLocalService.ponds),this.modalController.dismiss(i)}this.savingFlag.setResult(!0)},e=>{this.savingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}return e.\u0275fac=function(t){return new(t||e)(Z.Y36(r.IN),Z.Y36(s.qu),Z.Y36(c.D),Z.Y36(f.k),Z.Y36(A.sK),Z.Y36(x.T))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-pond-create"]],decls:73,vars:54,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],["color","primary",3,"disabled","click"],[3,"formGroup"],[1,"ion-padding","ion-text-center"],[4,"ngIf"],["lines","lines"],["lines","inset"],["position","floating"],["formControlName","name"],["slot","end","formControlName","type","okText","Ok","cancelText","Dismiss",3,"placeholder"],["value","pond"],["value","handle"],["lines","inset",4,"ngIf"],["formControlName","area","type","tel","inputmode","decimal"],["formControlName","deep","type","tel","inputmode","decimal"],["formControlName","cost","type","tel","inputmode","numeric",3,"value","ionChange"],["type","number","inputmode","numeric","formControlName","expire"],["name","dots"],["formControlName","time_start",3,"displayFormat","placeholder","min","max"]],template:function(e,t){1&e&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z.TgZ(3,"ion-button",1),Z.NdJ("click",function(){return t.modalController.dismiss()}),Z._UZ(4,"ion-icon",2),Z.qZA(),Z.qZA(),Z.TgZ(5,"ion-title"),Z._uU(6),Z.ALo(7,"translate"),Z.qZA(),Z.TgZ(8,"ion-buttons",3),Z.TgZ(9,"ion-button",4),Z.NdJ("click",function(){return t.createPond()}),Z._uU(10),Z.ALo(11,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(12,"ion-content",5),Z.TgZ(13,"div",6),Z.TgZ(14,"h1"),Z._uU(15),Z.ALo(16,"translate"),Z.qZA(),Z.YNc(17,Y,2,0,"div",7),Z.qZA(),Z.TgZ(18,"ion-list",8),Z.TgZ(19,"ion-item",9),Z.TgZ(20,"ion-label",10),Z._uU(21),Z.ALo(22,"translate"),Z.TgZ(23,"ion-text"),Z.TgZ(24,"small"),Z._uU(25,"(T\u1eeb 1 \u0111\u1ebfn 7 k\xfd t\u1ef1)"),Z.qZA(),Z.qZA(),Z.qZA(),Z._UZ(26,"ion-input",11),Z.qZA(),Z.TgZ(27,"ion-item",9),Z.TgZ(28,"ion-label"),Z._uU(29),Z.ALo(30,"translate"),Z.qZA(),Z.TgZ(31,"ion-select",12),Z.ALo(32,"translate"),Z.TgZ(33,"ion-select-option",13),Z._uU(34),Z.ALo(35,"translate"),Z.qZA(),Z.TgZ(36,"ion-select-option",14),Z._uU(37),Z.ALo(38,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.YNc(39,k,7,11,"ion-item",15),Z.TgZ(40,"ion-item",9),Z.TgZ(41,"ion-label",10),Z._uU(42),Z.ALo(43,"translate"),Z.TgZ(44,"sup"),Z._uU(45,"2"),Z.qZA(),Z._uU(46,")"),Z.qZA(),Z._UZ(47,"ion-input",16),Z.qZA(),Z.TgZ(48,"ion-item",9),Z.TgZ(49,"ion-label",10),Z._uU(50),Z.ALo(51,"translate"),Z.qZA(),Z._UZ(52,"ion-input",17),Z.qZA(),Z.TgZ(53,"ion-item",9),Z.TgZ(54,"ion-label",10),Z._uU(55),Z.ALo(56,"translate"),Z.ALo(57,"translate"),Z.qZA(),Z.TgZ(58,"ion-input",18),Z.NdJ("ionChange",function(e){return t.numberFormatCost.setValue(e.detail.value)}),Z.qZA(),Z.qZA(),Z.TgZ(59,"ion-item",9),Z.TgZ(60,"ion-label",10),Z._uU(61),Z.ALo(62,"translate"),Z.qZA(),Z._UZ(63,"ion-input",19),Z.qZA(),Z.TgZ(64,"ion-item",9),Z.TgZ(65,"ion-label"),Z.TgZ(66,"p"),Z._uU(67),Z.ALo(68,"translate"),Z.ALo(69,"translate"),Z.qZA(),Z.TgZ(70,"span"),Z._uU(71),Z.ALo(72,"number"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&e&&(Z.xp6(6),Z.Oqu(Z.lcZ(7,21,"FARM_MOD.CREATE")),Z.xp6(3),Z.Q6J("disabled",t.form.invalid||t.savingFlag.pending),Z.xp6(1),Z.hij(" ",Z.lcZ(11,23,"FARM_MOD.SAVE"),""),Z.xp6(2),Z.Q6J("formGroup",t.form),Z.xp6(3),Z.Oqu(Z.lcZ(16,25,"FARM_MOD.NEW_POND")),Z.xp6(2),Z.Q6J("ngIf",t.savingFlag.pending),Z.xp6(4),Z.hij("",Z.lcZ(22,27,"FARM_MOD.NAME_POND")," "),Z.xp6(8),Z.Oqu(Z.lcZ(30,29,"MONEY_MOD.CATEGORY")),Z.xp6(2),Z.Q6J("placeholder",Z.lcZ(32,31,"MONEY_MOD.CATEGORY")),Z.xp6(3),Z.Oqu(Z.lcZ(35,33,"POND_MOD.FARMING")),Z.xp6(3),Z.Oqu(Z.lcZ(38,35,"POND_MOD.WATER_TREAMENT")),Z.xp6(2),Z.Q6J("ngIf","handle"==t.form.value.type),Z.xp6(3),Z.hij("",Z.lcZ(43,37,"AREA")," (m"),Z.xp6(8),Z.hij("",Z.lcZ(51,39,"FARM_MOD.DEPTH")," (m)"),Z.xp6(5),Z.AsE("",Z.lcZ(56,41,"FARM_MOD.COST")," (",Z.lcZ(57,43,"CURRENCY_S"),")"),Z.xp6(3),Z.Q6J("value",t.numberFormatCost.fakeView),Z.xp6(3),Z.Oqu(Z.lcZ(62,45,"FARM_MOD.NUM_SEASON")),Z.xp6(6),Z.AsE("",Z.lcZ(68,47,"FARM_MOD.NUM_CROP")," (",Z.lcZ(69,49,"CURRENCY_S"),")"),Z.xp6(4),Z.Oqu(Z.xi3(72,51,t.numberFormatCost.realValue/t.form.value.expire,"1.0-0")))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.wd,r.W2,s.JL,s.sg,n.O5,r.q_,r.Ie,r.Q$,r.yW,r.pK,r.j9,s.JJ,s.u,r.t9,r.QI,r.n0,r.as,r.PQ,r.x4],pipes:[A.X$,n.JJ],styles:[""]}),e})();function Q(e,t){1&e&&(Z.TgZ(0,"span"),Z._uU(1),Z.ALo(2,"translate"),Z.qZA()),2&e&&(Z.xp6(1),Z.Oqu(Z.lcZ(2,1,"FARM_MOD.PEOPLE_CAN_SEE")))}function G(e,t){1&e&&(Z.TgZ(0,"span"),Z._uU(1),Z.ALo(2,"translate"),Z.qZA()),2&e&&(Z.xp6(1),Z.Oqu(Z.lcZ(2,1,"FARM_MOD.ONLY_FOLLOWER")))}function V(e,t){1&e&&(Z.TgZ(0,"span"),Z._uU(1),Z.ALo(2,"translate"),Z.qZA()),2&e&&(Z.xp6(1),Z.Oqu(Z.lcZ(2,1,"FARM_MOD.ONLY_MANAGERS")))}let j=(()=>{class e{constructor(e,t){this.modalController=e,this.farmService=t,this.manager=[]}ngOnInit(){this.loadSetting()}loadSetting(){this.farmService.getSeting().pipe().subscribe(e=>{1==e.status&&("farm_manager"in e.data.manager&&e.data.manager.farm_manager.forEach(e=>{e.key="farm_manager",this.manager.push(e)}),"farm_operation"in e.data.manager&&e.data.manager.farm_operation.forEach(e=>{e.key="farm_operation",this.manager.push(e)}),"store_manager"in e.data.manager&&e.data.manager.store_manager.forEach(e=>{e.key="store_manager",this.manager.push(e)}),"keeper_manager"in e.data.manager&&e.data.manager.keeper_manager.forEach(e=>{e.key="keeper_manager",this.manager.push(e)}))})}presentManager(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:O,componentProps:{manager:this.manager}});return e.onDidDismiss().then(e=>{e.data&&(this.manager=e.data)}),yield e.present()})}presentEdit(){return(0,a.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:w})).present()})}presentViewMode(){return(0,a.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:b})).present()})}presentPondCreate(){return(0,a.mG)(this,void 0,void 0,function*(){return this.modalController.dismiss(),yield(yield this.modalController.create({component:J})).present()})}}return e.\u0275fac=function(t){return new(t||e)(Z.Y36(r.IN),Z.Y36(c.D))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-farm-info"]],decls:75,vars:43,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding","ion-text-center"],[1,""],["src","assets/icon/adress.svg","slot","start"],["src","assets/icon/select.svg","slot","start"],["src","assets/icon/location_on-24px.svg","slot","start"],["detail","",3,"click"],["src","assets/icon/remove_red_eye-24px.svg","slot","start"],[4,"ngIf"],["src","assets/icon/supervised_user_circle-24px.svg","slot","start"],["mode","ios"],["name","options"],["size","large","expand","block","shape","round","fill","outline",3,"click"],["name","create-outline","slot","start"],["name","add-circle-outline","slot","start"]],template:function(e,t){1&e&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z.TgZ(3,"ion-button",1),Z.NdJ("click",function(){return t.modalController.dismiss()}),Z._UZ(4,"ion-icon",2),Z.qZA(),Z.qZA(),Z.TgZ(5,"ion-title"),Z._uU(6),Z.ALo(7,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(8,"ion-content"),Z.TgZ(9,"div",3),Z.TgZ(10,"h1",4),Z._uU(11),Z.qZA(),Z.TgZ(12,"span"),Z._uU(13),Z.qZA(),Z.qZA(),Z.TgZ(14,"ion-list"),Z.TgZ(15,"ion-item"),Z._UZ(16,"ion-icon",5),Z.TgZ(17,"ion-label"),Z.TgZ(18,"h3"),Z._uU(19),Z.ALo(20,"translate"),Z.qZA(),Z.TgZ(21,"p"),Z._uU(22),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(23,"ion-item"),Z._UZ(24,"ion-icon",6),Z.TgZ(25,"ion-label"),Z.TgZ(26,"h3"),Z._uU(27),Z.ALo(28,"translate"),Z.qZA(),Z.TgZ(29,"p"),Z._uU(30),Z.ALo(31,"number"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(32,"ion-item"),Z._UZ(33,"ion-icon",7),Z.TgZ(34,"ion-label"),Z.TgZ(35,"h3"),Z._uU(36),Z.ALo(37,"translate"),Z.qZA(),Z.TgZ(38,"p"),Z._uU(39),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(40,"ion-item",8),Z.NdJ("click",function(){return t.presentViewMode()}),Z._UZ(41,"ion-icon",9),Z.TgZ(42,"ion-label"),Z.TgZ(43,"h3"),Z._uU(44),Z.ALo(45,"translate"),Z.qZA(),Z.TgZ(46,"p"),Z.YNc(47,Q,3,3,"span",10),Z.YNc(48,G,3,3,"span",10),Z.YNc(49,V,3,3,"span",10),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(50,"ion-item",8),Z.NdJ("click",function(){return t.presentManager()}),Z._UZ(51,"ion-icon",11),Z.TgZ(52,"ion-label"),Z.TgZ(53,"h3"),Z._uU(54),Z.ALo(55,"translate"),Z.qZA(),Z.TgZ(56,"p"),Z._uU(57),Z.ALo(58,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(59,"div"),Z.TgZ(60,"ion-card",12),Z.TgZ(61,"ion-card-header"),Z.TgZ(62,"ion-card-subtitle"),Z._UZ(63,"ion-icon",13),Z._uU(64),Z.ALo(65,"translate"),Z.qZA(),Z.qZA(),Z.TgZ(66,"ion-card-content"),Z.TgZ(67,"ion-button",14),Z.NdJ("click",function(){return t.presentEdit()}),Z._UZ(68,"ion-icon",15),Z._uU(69),Z.ALo(70,"translate"),Z.qZA(),Z.TgZ(71,"ion-button",14),Z.NdJ("click",function(){return t.presentPondCreate()}),Z._UZ(72,"ion-icon",16),Z._uU(73),Z.ALo(74,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&e&&(Z.xp6(6),Z.Oqu(Z.lcZ(7,20,"FARM_MOD.FARM_INFO")),Z.xp6(5),Z.Oqu(t.farmService.farm.name),Z.xp6(2),Z.hij("#",t.farmService.farm.code,""),Z.xp6(6),Z.Oqu(Z.lcZ(20,22,"FARM_MOD.ADDRESS")),Z.xp6(3),Z.Oqu(t.farmService.farm.address),Z.xp6(5),Z.Oqu(Z.lcZ(28,24,"AREA")),Z.xp6(3),Z.hij("",Z.xi3(31,26,t.farmService.farm.area,"1.0-0")," ha"),Z.xp6(6),Z.Oqu(Z.lcZ(37,29,"FARM_MOD.LOCATE")),Z.xp6(3),Z.AsE("",t.farmService.farm.longitude," : ",t.farmService.farm.latitude,""),Z.xp6(5),Z.Oqu(Z.lcZ(45,31,"FARM_MOD.DISPLAY")),Z.xp6(3),Z.Q6J("ngIf",3==t.farmService.farm.public),Z.xp6(1),Z.Q6J("ngIf",2==t.farmService.farm.public),Z.xp6(1),Z.Q6J("ngIf",1==t.farmService.farm.public),Z.xp6(5),Z.Oqu(Z.lcZ(55,33,"FARM_MOD.MANAGER")),Z.xp6(3),Z.AsE("",null==t.manager?null:t.manager.length," ",Z.lcZ(58,35,"FARM_MOD.MEMBER"),""),Z.xp6(7),Z.hij(" ",Z.lcZ(65,37,"FARM_MOD.CONFIG")," "),Z.xp6(5),Z.hij(" ",Z.lcZ(70,39,"FARM_MOD.EDIT")," "),Z.xp6(4),Z.hij(" ",Z.lcZ(74,41,"FARM_MOD.CREATE_POND")," "))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.wd,r.W2,r.q_,r.Ie,r.Q$,n.O5,r.PM,r.Zi,r.tO,r.FN],pipes:[A.X$,n.JJ],styles:[""]}),e})();var H=i(2426),$=i(40044),W=i(23211),B=i(73473),X=i(75853),z=i(82196);function K(e,t){1&e&&(Z.TgZ(0,"div",8),Z._UZ(1,"ion-spinner",9),Z.qZA())}function ee(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"ion-button",10),Z.NdJ("click",function(){return Z.CHM(e),Z.oxw().changeModeView("list")}),Z._UZ(1,"ion-icon",11),Z.qZA()}}function te(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"ion-button",10),Z.NdJ("click",function(){return Z.CHM(e),Z.oxw().changeModeView("grid")}),Z._UZ(1,"ion-icon",12),Z.qZA()}}function ie(e,t){if(1&e&&(Z.TgZ(0,"div"),Z._uU(1),Z.ALo(2,"number"),Z.TgZ(3,"small"),Z._uU(4),Z.ALo(5,"translate"),Z.qZA(),Z.qZA()),2&e){const e=Z.oxw(3).$implicit,t=Z.oxw(3);Z.xp6(1),Z.hij("",Z.xi3(2,2,(t.now-e.infor.start_time)/86400+1,"0.0-0")," "),Z.xp6(3),Z.Oqu(Z.lcZ(5,5,"FARM_MOD.DAY"))}}function ne(e,t){if(1&e&&(Z.TgZ(0,"div"),Z._uU(1),Z.ALo(2,"number"),Z.TgZ(3,"small"),Z._uU(4),Z.ALo(5,"translate"),Z.qZA(),Z.qZA()),2&e){const e=Z.oxw(3).$implicit,t=Z.oxw(3);Z.xp6(1),Z.hij("",Z.xi3(2,2,(t.now-e.infor.seed_date)/86400+1,"0.0-0")," "),Z.xp6(3),Z.Oqu(Z.lcZ(5,5,"FARM_MOD.OLD_DAY"))}}function se(e,t){if(1&e&&(Z.TgZ(0,"ion-card-content"),Z.TgZ(1,"div",23),Z._uU(2),Z.qZA(),Z.YNc(3,ie,6,7,"div",7),Z.YNc(4,ne,6,7,"div",7),Z.qZA()),2&e){const e=Z.oxw(2).$implicit;Z.xp6(2),Z.hij(" ",e.infor.species," "),Z.xp6(1),Z.Q6J("ngIf",0==e.infor.seed_date),Z.xp6(1),Z.Q6J("ngIf",e.infor.seed_date>0)}}function oe(e,t){1&e&&(Z.TgZ(0,"ion-card-content"),Z.TgZ(1,"div",23),Z._uU(2),Z.ALo(3,"translate"),Z.qZA(),Z.TgZ(4,"div"),Z._uU(5,"--"),Z.qZA(),Z.qZA()),2&e&&(Z.xp6(2),Z.hij(" ",Z.lcZ(3,1,"FARM_MOD.EMPTY")," "))}function re(e,t){if(1&e&&(Z.TgZ(0,"ion-col",16),Z.TgZ(1,"ion-card",20),Z.TgZ(2,"ion-card-header",21),Z.TgZ(3,"ion-card-title",22),Z._uU(4),Z.qZA(),Z.qZA(),Z.YNc(5,se,5,3,"ion-card-content",7),Z.YNc(6,oe,6,3,"ion-card-content",7),Z.qZA(),Z.qZA()),2&e){const e=Z.oxw().$implicit;Z.xp6(1),Z.MGl("routerLink","/pond/",e.infor.code,""),Z.xp6(2),Z.Q6J("color",0!=e.infor.current_season&&0==e.infor.warning?"primary":0!=e.infor.current_season&&1==e.infor.warning?"danger":"medium"),Z.xp6(1),Z.hij(" ",e.infor.name,""),Z.xp6(1),Z.Q6J("ngIf",0!=e.infor.current_season),Z.xp6(1),Z.Q6J("ngIf",0==e.infor.current_season)}}function ae(e,t){if(1&e&&(Z.ynx(0),Z.YNc(1,re,7,5,"ion-col",19),Z.BQk()),2&e){const e=t.$implicit,i=Z.oxw(3);Z.xp6(1),Z.Q6J("ngIf",!i.isActive||1==i.isActive&&0!=(null==e?null:e.infor.current_season))}}function le(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"div",14),Z.TgZ(1,"ion-grid"),Z.TgZ(2,"ion-row"),Z.YNc(3,ae,2,1,"ng-container",15),Z.TgZ(4,"ion-col",16),Z.TgZ(5,"ion-card",17),Z.NdJ("click",function(){return Z.CHM(e),Z.oxw(2).presentPondCreate()}),Z.TgZ(6,"ion-card-content"),Z._UZ(7,"ion-icon",18),Z.TgZ(8,"p"),Z._uU(9),Z.ALo(10,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()}if(2&e){const e=Z.oxw(2);Z.xp6(3),Z.Q6J("ngForOf",e.pondListFilter),Z.xp6(6),Z.Oqu(Z.lcZ(10,2,"FARM_MOD.POND_CREATE"))}}function ce(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"div"),Z.TgZ(1,"ion-card",24),Z.TgZ(2,"ion-card-content",25),Z.TgZ(3,"p",26),Z._uU(4),Z.ALo(5,"translate"),Z.qZA(),Z.TgZ(6,"ion-button",27),Z.NdJ("click",function(){return Z.CHM(e),Z.oxw(2).presentPondCreate()}),Z._uU(7),Z.ALo(8,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()}2&e&&(Z.xp6(4),Z.Oqu(Z.lcZ(5,2,"FARM_MOD.THIS_FARM_HAVE_NOT_POND")),Z.xp6(3),Z.hij(" ",Z.lcZ(8,4,"FARM_MOD.POND_CREATE")," "))}function de(e,t){if(1&e&&(Z.TgZ(0,"div"),Z.YNc(1,le,11,4,"div",13),Z.YNc(2,ce,9,6,"div",7),Z.qZA()),2&e){const e=Z.oxw();Z.xp6(1),Z.Q6J("ngIf",e.farmService.numberOfPonds>0),Z.xp6(1),Z.Q6J("ngIf",0===e.farmService.numberOfPonds)}}function ue(e,t){if(1&e&&(Z.TgZ(0,"ion-text",33),Z._uU(1),Z.ALo(2,"number"),Z.TgZ(3,"small"),Z._uU(4),Z.ALo(5,"translate"),Z.qZA(),Z.qZA()),2&e){const e=Z.oxw(2).$implicit,t=Z.oxw(3);Z.xp6(1),Z.hij("",Z.xi3(2,2,(t.now-e.infor.start_time)/86400,"0.0-0")," "),Z.xp6(3),Z.Oqu(Z.lcZ(5,5,"FARM_MOD.DAY"))}}function me(e,t){if(1&e&&(Z.TgZ(0,"ion-text",34),Z._uU(1),Z.ALo(2,"number"),Z.TgZ(3,"small"),Z._uU(4),Z.ALo(5,"translate"),Z.qZA(),Z.qZA()),2&e){const e=Z.oxw(2).$implicit,t=Z.oxw(3);Z.xp6(1),Z.hij("",Z.xi3(2,2,(t.now-e.infor.seed_date)/86400,"0.0-0")," "),Z.xp6(3),Z.Oqu(Z.lcZ(5,5,"FARM_MOD.OLD_DAY"))}}function ge(e,t){if(1&e&&(Z.TgZ(0,"ion-item",29),Z.TgZ(1,"ion-label"),Z.TgZ(2,"ion-text",30),Z.TgZ(3,"h3"),Z._uU(4),Z.qZA(),Z.qZA(),Z.TgZ(5,"p"),Z._uU(6),Z.qZA(),Z.qZA(),Z.YNc(7,ue,6,7,"ion-text",31),Z.YNc(8,me,6,7,"ion-text",32),Z.qZA()),2&e){const e=Z.oxw().$implicit;Z.MGl("routerLink","/pond/",e.infor.code,""),Z.xp6(2),Z.Q6J("color",0!=e.infor.current_season&&0==e.infor.warning?"primary":0!=e.infor.current_season&&1==e.infor.warning?"danger":"medium"),Z.xp6(2),Z.Oqu(e.infor.name),Z.xp6(2),Z.Oqu(e.infor.species),Z.xp6(1),Z.Q6J("ngIf",0==e.infor.seed_date),Z.xp6(1),Z.Q6J("ngIf",e.infor.seed_date>0)}}function pe(e,t){if(1&e&&(Z.ynx(0),Z.YNc(1,ge,9,6,"ion-item",28),Z.BQk()),2&e){const e=t.$implicit,i=Z.oxw(3);Z.xp6(1),Z.Q6J("ngIf",!i.isActive||1==i.isActive&&0!=(null==e?null:e.infor.current_season))}}function he(e,t){if(1&e&&(Z.TgZ(0,"div"),Z.TgZ(1,"ion-list"),Z.YNc(2,pe,2,1,"ng-container",15),Z.qZA(),Z.qZA()),2&e){const e=Z.oxw(2);Z.xp6(2),Z.Q6J("ngForOf",e.pondListFilter)}}function Ze(e,t){if(1&e&&(Z.TgZ(0,"div"),Z.YNc(1,he,3,1,"div",7),Z.qZA()),2&e){const e=Z.oxw();Z.xp6(1),Z.Q6J("ngIf",e.farmService.numberOfPonds>0)}}let fe=(()=>{class e{constructor(e,t,i,n,s,o,r,a){this.farmService=e,this.toastService=t,this.modalController=i,this.translate=n,this.alertController=s,this.packageService=o,this.dbLocalService=r,this.settingService=a,this.reloadEvent=new Z.vpe,this.loadingFlag=new l.E,this.now=(new Date).valueOf()/1e3,this.pondListFilter=[],this.isActive=!1}ngOnInit(){this.getPonds(),this.packageService.check(this.farmService.fcode,"farm")}doRefresh(e){this.getPonds(),e.target.complete()}changeModeView(e){this.settingService.farmModeView=e,this.settingService.settingChange("farmModeView",e)}getPonds(){this.loadingFlag.setPending(!0),this.farmService.loadPonds().pipe().subscribe(e=>{if(0==e.status)this.toastService.warning(e.error);else{this.farmService.numberOfPonds=e.data.length,e.data.reverse();let t="";void 0!==e.permission?t=e.permission:(t=this.farmService.permission,console.log(t)),e.data.forEach(e=>{e.permission=t;let i=this.dbLocalService.ponds.findIndex(t=>t.infor.code==e.code);i<0?this.dbLocalService.ponds.push({infor:e,devices:[]}):this.dbLocalService.ponds[i]={infor:e,devices:[]}}),this.pondListFilter=this.dbLocalService.filterPond("farm_id",this.farmService.farm.id),this.pondListFilter.sort((e,t)=>e.infor.name.localeCompare(t.infor.name)),this.dbLocalService.setLocalData("ponds",this.dbLocalService.ponds)}this.loadingFlag.setResult(!0)},e=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}presentPondCreate(){return(0,a.mG)(this,void 0,void 0,function*(){if(!this.packageService.localCheck(this.farmService.fcode,"pond_quantity"))return void this.presentAlertPackage();const e=yield this.modalController.create({component:J});return e.onDidDismiss().then(e=>{e.data&&(this.farmService.numberOfPonds+=1,this.pondListFilter=this.dbLocalService.filterPond("farm_id",this.farmService.farm.id),this.pondListFilter.sort((e,t)=>e.infor.name.localeCompare(t.infor.name)))}),yield e.present()})}presentAlertPackage(){return(0,a.mG)(this,void 0,void 0,function*(){let e;e=this.packageService.checkIsOwner()?yield this.alertController.create({header:this.translate.instant("COMPANY_MOD.UPGRADE"),message:this.translate.instant("COMPANY_MOD.YOU_NEED_UPGRADE_TO CREATE"),buttons:[{text:this.translate.instant("CANCEL"),role:"cancel",cssClass:"secondary"},{text:this.translate.instant("OKAY"),handler:()=>{this.packageService.goToUpgrade()}}]}):yield this.alertController.create({header:this.translate.instant("COMPANY_MOD.UPGRADE"),message:this.translate.instant("COMPANY_MOD.YOU_NEED_UPGRADE_TO CREATE"),buttons:[{text:this.translate.instant("CANCEL"),role:"cancel",cssClass:"secondary"}]}),yield e.present()})}filter(e){const t=e.target.value;this.pondListFilter=this.dbLocalService.filterPond("farm_id",this.farmService.farm.id).filter(e=>e.infor.name.toLowerCase().indexOf(t.toLowerCase())>-1),this.pondListFilter.sort((e,t)=>e.infor.name.localeCompare(t.infor.name))}}return e.\u0275fac=function(t){return new(t||e)(Z.Y36(c.D),Z.Y36(f.k),Z.Y36(r.IN),Z.Y36(A.sK),Z.Y36(r.Br),Z.Y36(X.M),Z.Y36(x.T),Z.Y36(z.R))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-pond-list"]],outputs:{reloadEvent:"reloadEvent"},decls:14,vars:12,consts:[["slot","fixed",3,"ionRefresh"],["class","spiner-loading",4,"ngIf"],["lines","none"],["slot","start",3,"ngModel","ngModelChange"],["slot","start"],["slot","end","mode","ios",1,"ion-no-margin",3,"placeholder","ionInput"],["class","ion-no-margin","slot","end","fill","clear","size","small","color","primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"spiner-loading"],["name","dots"],["slot","end","fill","clear","size","small","color","primary",1,"ion-no-margin",3,"click"],["slot","icon-only","name","list-outline"],["slot","icon-only","name","grid-outline"],["class","list-pond",4,"ngIf"],[1,"list-pond"],[4,"ngFor","ngForOf"],["size","6"],["mode","ios",1,"ion-text-center","ion-text-nowrap","add-pond",3,"click"],["name","add-outline","color","primary"],["size","6",4,"ngIf"],["mode","ios",1,"ion-text-center","ion-text-nowrap",3,"routerLink"],[1,"ion-text-nowrap"],[1,"pond-name",3,"color"],[1,"sm-text"],["mode","ios"],[1,"ion-text-center"],[1,"ion-padding"],["shape","round","color","primary",3,"click"],["detail","",3,"routerLink",4,"ngIf"],["detail","",3,"routerLink"],[3,"color"],["slot","end",4,"ngIf"],["color","primary","slot","end",4,"ngIf"],["slot","end"],["color","primary","slot","end"]],template:function(e,t){1&e&&(Z.TgZ(0,"ion-refresher",0),Z.NdJ("ionRefresh",function(e){return t.doRefresh(e)}),Z._UZ(1,"ion-refresher-content"),Z.qZA(),Z.YNc(2,K,2,0,"div",1),Z.TgZ(3,"ion-item",2),Z.TgZ(4,"ion-toggle",3),Z.NdJ("ngModelChange",function(e){return t.isActive=e}),Z.qZA(),Z.TgZ(5,"span",4),Z._uU(6),Z.ALo(7,"translate"),Z.qZA(),Z.TgZ(8,"ion-searchbar",5),Z.NdJ("ionInput",function(e){return t.filter(e)}),Z.ALo(9,"translate"),Z.qZA(),Z.YNc(10,ee,2,0,"ion-button",6),Z.YNc(11,te,2,0,"ion-button",6),Z.qZA(),Z.YNc(12,de,3,2,"div",7),Z.YNc(13,Ze,2,1,"div",7)),2&e&&(Z.xp6(2),Z.Q6J("ngIf",t.loadingFlag.pending),Z.xp6(2),Z.Q6J("ngModel",t.isActive),Z.xp6(2),Z.Oqu(Z.lcZ(7,8,"POND_MOD.IS_ACTIVE")),Z.xp6(2),Z.Q6J("placeholder",Z.lcZ(9,10,"FARM_MOD.SEARCH")),Z.xp6(2),Z.Q6J("ngIf","grid"===t.settingService.farmModeView),Z.xp6(1),Z.Q6J("ngIf","list"===t.settingService.farmModeView),Z.xp6(1),Z.Q6J("ngIf","grid"==t.settingService.farmModeView),Z.xp6(1),Z.Q6J("ngIf","list"==t.settingService.farmModeView))},directives:[r.nJ,r.Wo,n.O5,r.Ie,r.ho,r.w,s.JJ,s.On,r.VI,r.j9,r.PQ,r.YG,r.gu,r.jY,r.Nd,n.sg,r.wI,r.PM,r.FN,r.YI,o.rH,r.Zi,r.gZ,r.q_,r.Q$,r.yW],pipes:[A.X$,n.JJ],styles:["[_nghost-%COMP%]   .list-pond[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .list-pond[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{display:flex;justify-content:center;--ion-grid-column-padding-xs: { padding: 1px; } }[_nghost-%COMP%]   .list-pond[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .list-pond[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .add-pond[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3em}[_nghost-%COMP%]   ion-card-title.pond-name[_ngcontent-%COMP%]{font-size:1.5em;overflow:hidden}"]}),e})();function Ae(e,t){1&e&&(Z.TgZ(0,"div",24),Z._UZ(1,"ion-spinner",25),Z.qZA())}function ve(e,t){if(1&e&&(Z.TgZ(0,"div"),Z.YNc(1,Ae,2,0,"div",23),Z.qZA()),2&e){const e=Z.oxw();Z.xp6(1),Z.Q6J("ngIf",e.loadingFlag.pending)}}function _e(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"app-pond-list",26),Z.NdJ("reloadEvent",function(){return Z.CHM(e),Z.oxw().getFarm()}),Z.qZA()}}function Te(e,t){if(1&e){const e=Z.EpF();Z.TgZ(0,"div",27),Z.TgZ(1,"ion-button",20),Z.NdJ("click",function(){return Z.CHM(e),Z.oxw().presentConfirmRemoveLab()}),Z._UZ(2,"ion-icon",28),Z._uU(3),Z.ALo(4,"translate"),Z.qZA(),Z.qZA()}2&e&&(Z.xp6(3),Z.hij(" ",Z.lcZ(4,1,"LAB_MOD.REMOVE_FARM")," "))}const qe=function(){return["company_manager","farm_manager"]},Oe=function(){return["company_manager","farm_manager","keeper_manager"]},xe=function(){return["company_manager","farm_manager","farm_operation"]},Me=function(){return["company_manager","farm_manager","farm_operation","keeper_manager","store_manager"]};let be=(()=>{class e{constructor(e,t,i,n,s,o,r,a,c,d,u){this.farmService=e,this.toastService=t,this.route=i,this.modalController=n,this.translate=s,this.tour=o,this.menu=r,this.dblocalService=a,this.alertController=c,this.labService=d,this.router=u,this.loadingFlag=new l.E,this.view=!1}ngOnInit(){console.log("inite farm"),this.fcode=this.route.snapshot.paramMap.get("id"),this.farmService.setCode(this.fcode),console.log(this.fcode),this.getFarm()}ngOnDestroy(){console.log("destroy farm"),this.farmService.destroyValue()}ionViewDidEnter(){this.view=!0,this.tour.show("farm")}findFarm(){return this.dblocalService.farms.find(e=>e.infor.code===this.fcode)}getFarm(){console.log("vao day"),this.loadingFlag.setPending(!0),this.farmService.loadFarm().pipe().subscribe(e=>{if(0==e.status)this.toastService.warning(e.error);else{let t=e.data;t.permission=e.permission,this.farmService.setFarm(t),this.farmLab=e.farm_lab,console.log(this.farmLab),!this.findFarm()&&!this.farmLab&&this.dblocalService.addItem("farms",{infor:t,store:[]}),this.farmService.permission=e.permission,this.permission=e.permission,this.estimate=e.estimate,this.store=e.store,this.farmService.storeCommon=e.store,e.lab&&(this.labService.setCode(e.lab.lcode),this.lab=e.lab)}this.loadingFlag.setResult(!0)},e=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}presentInfomation(){return(0,a.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:j})).present()})}presentEstimate(){return(0,a.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:H.O})).present()})}openList(){this.menu.enable(!0,"list"),this.menu.close("userMenu"),this.menu.open("list")}reLoadFarm(e){console.log("chay")}presentConfirmRemoveLab(){return(0,a.mG)(this,void 0,void 0,function*(){console.log(this.labService.code),yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("CONFIRM"),message:this.translate.instant("LAB_MOD.REMOVE_FARM"),buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:e=>{console.log("Confirm Cancel: blah")}},{text:"Okay",handler:()=>{this.labService.removeFarm(this.fcode).subscribe(e=>{1==e.status?(this.toastService.success(this.translate.instant("LAB_MOD.REMOVE_FARM_SUCCESS")),this.router.navigateByUrl("/tabs/subscription")):this.toastService.warning(e.message)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}]})).present()})}}return e.\u0275fac=function(t){return new(t||e)(Z.Y36(c.D),Z.Y36(f.k),Z.Y36(o.gz),Z.Y36(r.IN),Z.Y36(A.sK),Z.Y36(W.M),Z.Y36(r._q),Z.Y36(x.T),Z.Y36(r.Br),Z.Y36($.y),Z.Y36(o.F0))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-farm"]],decls:49,vars:38,consts:[["slot","start"],["text","","defaultHref","tabs/management"],[3,"click"],["slot","end","name","chevron-forward-circle-outline"],["slot","end",3,"appPermission","currentPermission"],["name","stats-chart-outline"],["slot","icon-only","name","cog-outline"],[3,"appPermission","currentPermission"],["mode","ios",1,"menu-icon-square",3,"routerLink"],["color","primary","src","assets/icon/003-accounting.svg",1,"icon-large"],["color","primary","src","assets/icon/004-todolist.svg",1,"icon-large"],["id","line","lines","none",1,"ion-margin"],[1,"ion-margin-end"],["name","home-outline"],["color","primary"],["size","small","color","danger","fill","outline",3,"routerLink"],["color","primary","slot","end"],[4,"ngIf"],[3,"reloadEvent",4,"ngIf"],[1,"ion-padding",3,"appPermission","currentPermission"],["color","medium","expand","block","shape","round","fill","clear",3,"click"],["name","cog-outline","slot","start"],["class","ion-padding",4,"ngIf"],["class","spiner-loading",4,"ngIf"],[1,"spiner-loading"],["name","dots"],[3,"reloadEvent"],[1,"ion-padding"],["name","trash-bin-outline"]],template:function(e,t){1&e&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z.TgZ(3,"ion-buttons",0),Z._UZ(4,"ion-back-button",1),Z.qZA(),Z.TgZ(5,"ion-button",2),Z.NdJ("click",function(){return t.openList()}),Z._uU(6),Z._UZ(7,"ion-icon",3),Z.qZA(),Z.qZA(),Z.TgZ(8,"ion-buttons",4),Z.TgZ(9,"ion-button",2),Z.NdJ("click",function(){return t.presentEstimate()}),Z._UZ(10,"ion-icon",5),Z.qZA(),Z.TgZ(11,"ion-button",2),Z.NdJ("click",function(){return t.presentInfomation()}),Z._UZ(12,"ion-icon",6),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(13,"ion-content"),Z.TgZ(14,"div"),Z.TgZ(15,"ion-grid"),Z.TgZ(16,"ion-row"),Z.TgZ(17,"ion-col",7),Z.TgZ(18,"ion-card",8),Z._UZ(19,"ion-icon",9),Z._uU(20),Z.ALo(21,"translate"),Z.qZA(),Z.qZA(),Z.TgZ(22,"ion-col",7),Z.TgZ(23,"ion-card",8),Z._UZ(24,"ion-icon",10),Z._uU(25),Z.ALo(26,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(27,"div",7),Z.TgZ(28,"ion-item",11),Z.TgZ(29,"h1",12),Z._UZ(30,"ion-icon",13),Z.qZA(),Z.TgZ(31,"ion-label"),Z.TgZ(32,"p"),Z._uU(33),Z.ALo(34,"translate"),Z.qZA(),Z.TgZ(35,"ion-text",14),Z._uU(36),Z.ALo(37,"number"),Z.qZA(),Z.qZA(),Z.TgZ(38,"ion-button",15),Z._uU(39,"Xem"),Z.qZA(),Z._UZ(40,"ion-text",16),Z.qZA(),Z.qZA(),Z.qZA(),Z.YNc(41,ve,2,1,"div",17),Z.YNc(42,_e,1,0,"app-pond-list",18),Z.TgZ(43,"div",19),Z.TgZ(44,"ion-button",20),Z.NdJ("click",function(){return t.presentInfomation()}),Z._UZ(45,"ion-icon",21),Z._uU(46),Z.ALo(47,"translate"),Z.qZA(),Z.qZA(),Z.YNc(48,Te,5,3,"div",22),Z.qZA()),2&e&&(Z.xp6(6),Z.hij(" ",null==t.farmService.farm?null:t.farmService.farm.name," "),Z.xp6(2),Z.Q6J("appPermission",Z.DdM(33,qe))("currentPermission",t.farmService.permission),Z.xp6(9),Z.Q6J("appPermission",Z.DdM(34,Oe))("currentPermission",t.farmService.permission),Z.xp6(1),Z.MGl("routerLink","/money/",t.farmService.fcode,""),Z.xp6(2),Z.hij(" ",Z.lcZ(21,23,"FARM_MOD.BUDGET")," "),Z.xp6(2),Z.Q6J("appPermission",Z.DdM(35,xe))("currentPermission",t.farmService.permission),Z.xp6(1),Z.MGl("routerLink","/calendar/",t.farmService.fcode,""),Z.xp6(2),Z.hij(" ",Z.lcZ(26,25,"FARM_MOD.CALENDAR")," "),Z.xp6(2),Z.Q6J("appPermission",Z.DdM(36,Me))("currentPermission",t.farmService.permission),Z.xp6(6),Z.AsE("",null==t.store?null:t.store.totalStore," ",Z.lcZ(34,27,"FARM_MOD.WAREHOUSE"),""),Z.xp6(3),Z.hij(" ",Z.lcZ(37,29,null==t.store?null:t.store.totalCost),"\u0111 "),Z.xp6(2),Z.MGl("routerLink","/store/",t.farmService.fcode,"/list"),Z.xp6(3),Z.Q6J("ngIf",t.view),Z.xp6(1),Z.Q6J("ngIf",!t.loadingFlag.pending),Z.xp6(1),Z.Q6J("appPermission",Z.DdM(37,qe))("currentPermission",t.farmService.permission),Z.xp6(3),Z.hij(" ",Z.lcZ(47,31,"FARM_MOD.SETTING")," "),Z.xp6(2),Z.Q6J("ngIf",t.farmLab))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.YG,r.gu,B.l,r.W2,r.jY,r.Nd,r.wI,r.PM,r.YI,o.rH,r.Ie,r.Q$,r.yW,n.O5,r.PQ,fe],pipes:[A.X$,n.JJ],styles:["#line[_ngcontent-%COMP%]{border:.7px solid #f5f6f9}ion-card[_ngcontent-%COMP%]{margin-inline:5px}"]}),e})();var Se=i(54373),Re=i(56209),Ce=i(24023);const Ee=[{path:"",component:be,children:[{path:"",children:[{path:"",redirectTo:"pond",pathMatch:"full"},{path:"pond",component:fe}]}]}];let Ne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Z.oAB({type:e}),e.\u0275inj=Z.cJS({providers:[h.n,$.y,S.b],imports:[[n.ez,s.u5,r.Pc,s.UX,Re.Ns,A.aw.forChild(),o.Bz.forChild(Ee),Se.i,Ce.E]]}),e})()},40044:function(e,t,i){i.d(t,{y:function(){return r}});var n=i(88002),s=i(15189),o=i(37716);let r=(()=>{class e{constructor(e){this.reqAPIService=e,this.PATH={MEMBER:"/manager/lab-member-api",MANAGER:"/manager/lab-manager-api",ROOT:"/user/user-lab-api"}}setCode(e){this.code=e,console.log("set lab code")}getApiStore(e="",t="",i=""){return this.reqAPIService.get(i+="?action="+e+"&lcode="+this.code+t).pipe((0,n.U)(e=>e))}postApiStore(e="",t={},i="",s=""){return this.reqAPIService.post(s+="?action="+e+"&lcode="+this.code+i,t).pipe((0,n.U)(e=>e))}loadLab(){return this.getApiStore("home","",this.PATH.MEMBER)}loadLabRoot(){return this.getApiStore("get","",this.PATH.ROOT)}loadFarm(e){return this.getApiStore("searchFarm","&keyword="+e,this.PATH.MANAGER)}addFarm(e){return this.getApiStore("addFarm","&fcode="+e,this.PATH.MANAGER)}removeFarm(e){return this.getApiStore("removeFarm","&fcode="+e,this.PATH.MANAGER)}getLab(){return this.getApiStore("getLab","",this.PATH.MANAGER)}addLab(e){return this.postApiStore("addLab",e,"",this.PATH.ROOT)}register(e){return this.postApiStore("register",e,"",this.PATH.ROOT)}updateLabOwner(e){return this.postApiStore("updateInfor",e,"",this.PATH.ROOT)}updateLab(e){return this.postApiStore("updateLab",e,"",this.PATH.MANAGER)}addMember(e){return this.getApiStore("addManager","&user_id="+e,this.PATH.ROOT)}removeMember(e){return this.getApiStore("removeManager","&user_id="+e,this.PATH.ROOT)}removeLab(e){return this.getApiStore("removeLab","&id="+e,this.PATH.ROOT)}loadSpecies(){return this.getApiStore("listSpecies","",this.PATH.MANAGER)}loadReport(e){return this.postApiStore("reportLab",e,"",this.PATH.MANAGER)}loadAnalyze(e){return this.postApiStore("analyzeLab",e,"",this.PATH.MANAGER)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(s.$))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e})()},62014:function(e,t,i){i.d(t,{y:function(){return n}});class n{constructor(e,t="currency"){this.setType(t),this.setInput(e),this.processConvert()}setInput(e){"string"!=typeof e&&(e=String(e)),this.input=e}setValue(e){"string"!=typeof e&&(e=String(e)),this.input=e,this.processConvert()}setType(e){this.type=e}processConvert(){let e,t,i=this.input.split(",").join("");if(i.indexOf(".")!=i.lastIndexOf(".")&&(i=i.slice(0,i.lastIndexOf("."))),-1!=i.indexOf(".")){t=i.indexOf(".");let n=i.split(".");i=n[0],"float"===this.type&&(e=n[1].substring(0,2))}else t=i.length;let n=new Array,s=1;for(var o=-3;Math.abs(o)<t;o-=3)n.push(i.slice(o,t+o+3)),s++;let r=i.slice(0,t-3*(s-1));r.length>0&&n.push(r),n.reverse();let a=i.replace(/,/gi,""),l="";this.fakeView=n.join(),"float"===this.type&&null!=e&&(this.fakeView=this.fakeView+"."+e,l=e),this.realValue=parseFloat(a+"."+l)}}},66341:function(e,t,i){i.d(t,{n:function(){return r}});var n=i(88002),s=i(15189),o=i(37716);let r=(()=>{class e{constructor(e){this.reqAPIService=e,this.urlApi="/manager/farm-api"}searchMember(e){return this.reqAPIService.get("/user/list-api-mobie?action=get-user&key="+e).pipe((0,n.U)(e=>e.data))}searchExpert(e){return this.reqAPIService.get("/user/list-api-mobie?action=get-expert&key="+e).pipe((0,n.U)(e=>e.data))}getSitePath(){return this.reqAPIService.FILE_PATH}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(s.$))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e})()}}]);