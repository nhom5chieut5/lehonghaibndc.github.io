"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[8625],{28625:function(t,n,o){o.r(n),o.d(n,{ShopSpecialPageModule:function(){return w}});var e=o(38583),i=o(90665),r=o(47063),s=o(13619),a=o(27887),l=o(15085),c=o(37716),g=o(84465),d=o(81780),p=o(71239),h=o(4015);function u(t,n){if(1&t){const t=c.EpF();c.TgZ(0,"ion-segment-button",11),c.NdJ("click",function(){const n=c.CHM(t).$implicit;return c.oxw().segmentTermChanged(n.id)}),c._uU(1),c.qZA()}if(2&t){const t=n.$implicit;c.Q6J("value",t.id),c.xp6(1),c.hij(" ",t.name," ")}}function m(t,n){1&t&&(c.TgZ(0,"div"),c.TgZ(1,"p",12),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.Oqu(c.lcZ(3,1,"SHOP.HOME.NO_PRODUCTS")))}function f(t,n){1&t&&c._UZ(0,"ion-progress-bar",13)}function x(t,n){if(1&t&&(c.TgZ(0,"div",24),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"number"),c.qZA(),c.qZA()),2&t){const t=c.oxw().$implicit;c.xp6(2),c.hij("-",c.xi3(3,1,100*t.ratio,"0.0-0"),"%")}}function P(t,n){if(1&t&&(c.TgZ(0,"div",25),c._uU(1),c.ALo(2,"number"),c.qZA()),2&t){const t=c.oxw().$implicit;c.xp6(1),c.hij(" ",c.xi3(2,1,t.maxPrice,"1.0-0"),"\u20ab ")}}function _(t,n){if(1&t&&(c.TgZ(0,"div",25),c._uU(1),c.ALo(2,"number"),c.ALo(3,"number"),c.qZA()),2&t){const t=c.oxw().$implicit;c.xp6(1),c.AsE(" ",c.xi3(2,2,t.minPrice,"1.0-0")," ~ ",c.xi3(3,5,t.maxPrice,"1.0-0"),"\u20ab ")}}function O(t,n){if(1&t&&(c.TgZ(0,"ion-col",16),c.YNc(1,x,4,4,"div",17),c.TgZ(2,"div",18),c._UZ(3,"img",19),c.qZA(),c.TgZ(4,"div",20),c._uU(5),c.qZA(),c.TgZ(6,"div",21),c.TgZ(7,"small",22),c._uU(8),c.ALo(9,"number"),c.qZA(),c.qZA(),c.YNc(10,P,3,4,"div",23),c.YNc(11,_,4,8,"div",23),c.qZA()),2&t){const t=n.$implicit,o=c.oxw(2);c.MGl("routerLink","../product/",t.id,""),c.xp6(1),c.Q6J("ngIf",0!=t.ratio),c.xp6(2),c.Q6J("src",o.shopService.SITE_PATH+t.img_default,c.LSH),c.xp6(2),c.Oqu(t.alias),c.xp6(3),c.hij("",c.xi3(9,7,t.maxFullPrice,"0.0-0"),"\u20ab"),c.xp6(2),c.Q6J("ngIf",t.minPrice==t.maxPrice),c.xp6(1),c.Q6J("ngIf",t.minPrice!=t.maxPrice)}}function C(t,n){if(1&t&&(c.TgZ(0,"ion-grid",14),c.TgZ(1,"ion-row"),c.YNc(2,O,12,10,"ion-col",15),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(2),c.Q6J("ngForOf",t.flashSales.list)}}const b=[{path:"",component:(()=>{class t{constructor(t,n,o,e,i,r){this.modalController=t,this.shopService=n,this.toastService=o,this.translate=e,this.localDb=i,this.route=r,this.loadingFlag=new a.E,this.listADS=[],this.flashSales={list:[],numRows:0,listTerms:[]},this.page=0,this.currentTerm=0,this.remainingTime={hour:0,min:0,seconds:0},this.bannerOpts={speed:400,pagination:{el:".swiper-pagination",dynamicBullets:!0}}}ngOnInit(){this.loadData(),this.loadAds()}loadData(){this.loadingFlag.setPending(!0),this.shopService.getListProductSpecial(this.page,this.currentTerm).pipe().subscribe(t=>{"error"==t.status?this.loadingFlag.setResult(!1):(this.flashSales.numRows=t.data.numRows,this.flashSales.list=this.flashSales.list.concat(this.prepareProductPrice(t.data.list)),this.listTerms=t.data.listTerms,this.currentTerm||(this.currentTerm=t.data.currentTerm),this.currentTerm||(this.currentTerm=t.data.currentTerm),this.loadingFlag.setResult(!0))},t=>{this.loadingFlag.setResult(!1)})}prepareProductPrice(t){let n=[];return t.forEach(t=>{let o=t.label_price.split("~");t.minPrice=o[0],t.maxPrice=o[1],t.maxFullPrice=t.maxPrice/(1-t.ratio),n.push(t)}),n}loadAds(){this.shopService.getAds().subscribe(t=>{"success"==t.status?(this.listADS="EFW"in t.data?t.data.EFW:[],console.log(this.listADS)):this.toastService.danger(this.translate.instant("ERROR_CONNECT"))},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}loadProduct(t){let n=t.trim().split("//"),o=n[n.length-1].split("/");console.log(o);let e={company:"shop/companys/company/",detail:"shop/product/",shop:"shop/store/",term:"shop/products/"};if(4==o.length){let t=o[3].split("-");this.route.navigateByUrl(e[o[2]]+parseInt(t[t.length-1]))}}doRefresh(t){this.timeCountDown&&clearInterval(this.timeCountDown),this.page=0,this.flashSales.list=[],this.flashSales.numRows=0,this.loadData(),t.target.complete()}loadMoreProducts(t){this.page+=1,this.loadData(),setTimeout(()=>{t.target.complete()},500)}segmentTermChanged(t){this.currentTerm=t,this.page=0,this.flashSales.list=[],this.flashSales.numRows=0,this.loadData()}segmentFrameChanged(t){this.currentIndex=t,this.page=0,this.flashSales.list=[],this.flashSales.numRows=0,this.loadData()}}return t.\u0275fac=function(n){return new(n||t)(c.Y36(r.IN),c.Y36(l.d),c.Y36(g.k),c.Y36(d.sK),c.Y36(p.T),c.Y36(s.F0))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-shop-special"]],decls:19,vars:6,consts:[["slot","start"],["text","","defaultHref","tabs/shop"],["slot","end"],["slot","fixed",3,"ionRefresh"],["mode","ios"],["scrollable","true","mode","ios",3,"ngModel","ngModelChange"],[3,"value","click",4,"ngFor","ngForOf"],[4,"ngIf"],["type","indeterminate",4,"ngIf"],["class","grid-product",4,"ngIf"],["threshold","100px",3,"disabled","ionInfinite"],[3,"value","click"],[1,"ion-text-center"],["type","indeterminate"],[1,"grid-product"],["size","6","size-sm","3",3,"routerLink",4,"ngFor","ngForOf"],["size","6","size-sm","3",3,"routerLink"],["class","discount-label",4,"ngIf"],[1,"img-box"],["onError","this.src='assets/img/1235.jpg'",1,"m-auto",3,"src"],[1,"product-alias"],[1,"promotion-box"],[1,"strike","ion-align-self-center"],["class","price-box",4,"ngIf"],[1,"discount-label"],[1,"price-box"]],template:function(t,n){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c._UZ(3,"ion-back-button",1),c.qZA(),c.TgZ(4,"ion-title"),c._uU(5,"T\xe9p b\u1ea1c t\xe0i tr\u1ee3"),c.qZA(),c.TgZ(6,"ion-buttons",2),c._UZ(7,"app-shop-toolbar"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"ion-content"),c.TgZ(9,"ion-refresher",3),c.NdJ("ionRefresh",function(t){return n.doRefresh(t)}),c._UZ(10,"ion-refresher-content",4),c.qZA(),c.TgZ(11,"ion-toolbar"),c.TgZ(12,"ion-segment",5),c.NdJ("ngModelChange",function(t){return n.currentTerm=t}),c.YNc(13,u,2,2,"ion-segment-button",6),c.qZA(),c.qZA(),c.YNc(14,m,4,3,"div",7),c.YNc(15,f,1,0,"ion-progress-bar",8),c.YNc(16,C,3,1,"ion-grid",9),c.TgZ(17,"ion-infinite-scroll",10),c.NdJ("ionInfinite",function(t){return n.loadMoreProducts(t)}),c._UZ(18,"ion-infinite-scroll-content"),c.qZA(),c.qZA()),2&t&&(c.xp6(12),c.Q6J("ngModel",n.currentTerm),c.xp6(1),c.Q6J("ngForOf",n.listTerms),c.xp6(1),c.Q6J("ngIf",!n.flashSales),c.xp6(1),c.Q6J("ngIf",n.loadingFlag.pending),c.xp6(1),c.Q6J("ngIf",n.flashSales),c.xp6(1),c.Q6J("disabled",(null==n.flashSales?null:n.flashSales.numRows)==(null==n.flashSales?null:n.flashSales.list.length)))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,h.g,r.W2,r.nJ,r.Wo,r.cJ,r.QI,i.JJ,i.On,e.sg,e.O5,r.ju,r.MB,r.GO,r.X7,r.jY,r.Nd,r.wI,r.YI,s.rH],pipes:[d.X$,e.JJ],styles:["[_nghost-%COMP%]{--bullet-background-active: var(--ion-color-light);--bullet-background: var(--ion-color-dark)}[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]   .swiper-pagination[_ngcontent-%COMP%]{z-index:1000;position:absolute;bottom:10px;left:5px}[_nghost-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{min-width:auto!important}",'[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}[_nghost-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:"Averta";font-size:.8em}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;margin-top:29px;margin-bottom:6px;font-family:"Averta";font-size:.8em;display:flex;margin-right:16px}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]   .boxTime[_ngcontent-%COMP%]{color:#fff;background-color:#000;padding-left:2px;padding-right:2px;margin-right:2px;margin-left:2px;border-radius:2px;max-width:27px;width:27px;text-align:center}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]{min-height:150px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .bannerSpecial[_ngcontent-%COMP%]{max-height:50px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .imgProductSpecial[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .arrowButton[_ngcontent-%COMP%]{vertical-align:middle;margin-right:16px}[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:1em;font-size:.8em}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:240px;width:100%}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border-top:1px solid rgba(192,192,192,.2);border-left:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border-right:1px solid rgba(192,192,192,.2);border-bottom:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]{flex:auto;text-align:center;margin:0 auto;overflow:hidden;position:relative}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:80x!important;margin-bottom:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   .bannerProduct[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;max-height:60px;max-width:80%;width:auto}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .product-alias[_ngcontent-%COMP%]{line-height:1.2em;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;height:2.4em;-webkit-box-orient:vertical}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]{margin:3px 0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .mr[_ngcontent-%COMP%]{margin-left:3px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .strike[_ngcontent-%COMP%]{text-decoration:line-through}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]{margin:3px 0;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;height:1.3em;-webkit-box-orient:vertical;color:var(--ion-color-danger)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]{padding:5px;position:absolute;right:5px;top:10px;float:left;width:43px;background-color:#de2525;z-index:9999;transform:rotate(20deg);border-radius:4px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:after{right:42px;border:solid transparent;content:" ";height:0;width:0;position:absolute;border-color:#88b7d500;border-right-color:#de2525;border-width:13.5px;top:50%;margin-top:-13.6px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:before{content:"";z-index:2;position:absolute;top:44%;right:100%;width:5px;height:5px;opacity:.95;background:#fff;border-radius:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center;font-family:"Averta"}']}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[s.Bz.forChild(b)],s.Bz]}),t})();var Z=o(26177);let w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[e.ez,i.u5,r.Pc,M,d.aw.forChild(),Z.t]]}),t})()}}]);