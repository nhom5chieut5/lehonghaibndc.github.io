!function(){"use strict";function e(t,n){return(e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(t,n)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var o,r=i(e);if(t){var s=i(this).constructor;o=Reflect.construct(r,arguments,s)}else o=r.apply(this,arguments);return n(this,o)}}function n(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[5588],{54395:function(n,i,r){r.d(i,{b:function(){return u}});var a=r(77393),c=r(33637);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.P;return function(n){return n.lift(new l(e,t))}}var l=function(){function e(t,n){o(this,e),this.dueTime=t,this.scheduler=n}return s(e,[{key:"call",value:function(e,t){return t.subscribe(new g(e,this.dueTime,this.scheduler))}}]),e}(),g=function(n){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}(r,n);var i=t(r);function r(e,t,n){var s;return o(this,r),(s=i.call(this,e)).dueTime=t,s.scheduler=n,s.debouncedSubscription=null,s.lastValue=null,s.hasValue=!1,s}return s(r,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(p,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),r}(a.L);function p(e){e.debouncedNext()}},27887:function(e,t,n){n.d(t,{E:function(){return i}});var i=function(){function e(){o(this,e),this.start=null,this.end=null,this.pending=null,this.result=null,this.count=0}return s(e,[{key:"setStart",value:function(e){this.start=e,!0===e&&(this.pending=!0,this.end=!1),this.result=null,this.count++}},{key:"setPending",value:function(e){this.pending=e,!1===e?this.start=!1:this.end=!0}},{key:"setResult",value:function(e){this.result=e,this.pending=!1,this.start=!1,this.end=!0}}]),e}()},83111:function(e,t,n){n.d(t,{o:function(){return Z}});var i=n(79765),r=n(25917),a=n(27887),c=n(15085),u=n(54395),l=n(87519),g=n(43190),p=n(37716),d=n(47063),h=n(84465),f=n(81780),m=n(71239),v=n(38583);function A(e,t){1&e&&(p.TgZ(0,"div"),p._UZ(1,"ion-spinner",11),p.qZA())}function P(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"ion-item",2),p.NdJ("click",function(){var e=p.CHM(n).$implicit;return p.oxw().selectRegion(e)}),p.TgZ(1,"ion-label"),p._uU(2),p.qZA(),p._UZ(3,"ion-radio",12),p.qZA()}if(2&e){var i=t.$implicit;p.xp6(2),p.hij(" ",i.name," "),p.xp6(1),p.Q6J("value",i.id)}}function x(e,t){if(1&e&&(p.TgZ(0,"ion-item",13),p.TgZ(1,"ion-label"),p.TgZ(2,"p"),p._uU(3),p.qZA(),p.qZA(),p.qZA()),2&e){var n=p.oxw();p.xp6(3),p.Oqu(n.message)}}var O,Z=((O=function(){function e(t,n,r,s,c,u){o(this,e),this.modalControl=t,this.shopService=n,this.toastService=r,this.translate=s,this.localDb=c,this.modalController=u,this.loadingFlag=new a.E,this.allRegions=[],this.keyword="",this.searchTerms=new i.xQ,this.message=""}return s(e,[{key:"ngOnInit",value:function(){var e=this,t=this.searchTerms.pipe((0,u.b)(300),(0,l.x)(),(0,g.w)(function(t){return e.searchRegion(t)}));this.regions$=t,this.regions$.subscribe(function(t){t?(e.loadingFlag.setResult(!0),e.message=""):(e.loadingFlag.setResult(!1),e.message=e.translate.instant("SHOP.LOCATION.NOT_FOUND"))}),this.getRegion(),this.selectedRegion=null!==this.localDb.eShopRegion?this.localDb.eShopRegion:{id:"",name:this.translate.instant("SHOP.LOCATION.ALL")}}},{key:"getRegion",value:function(){var e=this;this.loadingFlag.setPending(!0),this.shopService.listUnitChild(0).pipe().subscribe(function(t){"error"==t.status?e.toastService.warning(t.error.message):(e.allRegions=t.data,e.searchTerms.next("")),e.loadingFlag.setResult(!0)},function(t){e.loadingFlag.setResult(!1),e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"selectRegion",value:function(e){var t={id:e.id,name:e.name};this.localDb.setLocalData("eShopRegion",t),this.modalController.dismiss(t)}},{key:"search",value:function(e){this.searchTerms.next(e.detail.value),this.keyword=e.detail.value}},{key:"searchRegion",value:function(e){var t=this;if(this.message="",this.loadingFlag.setPending(!0),!e.trim())return this.loadingFlag.setResult(!0),(0,r.of)(this.allRegions);var n=[],i=this.removeAccents(e.trim().toLowerCase());return this.allRegions.forEach(function(e){var o=t.removeAccents(e.name.trim().toLowerCase());(i.includes(o)||o.includes(i))&&n.push(e)}),this.loadingFlag.setResult(!0),this.translate.instant("SHOP.LOCATION.NOT_FOUND"),(0,r.of)(n)}},{key:"removeAccents",value:function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D").replace(/\s/g,"").toLowerCase()}}]),e}()).\u0275fac=function(e){return new(e||O)(p.Y36(d.IN),p.Y36(c.d),p.Y36(h.k),p.Y36(f.sK),p.Y36(m.T),p.Y36(d.IN))},O.\u0275cmp=p.Xpm({type:O,selectors:[["app-shop-location"]],decls:23,vars:14,consts:[["mode","ios"],["slot","start"],[3,"click"],["slot","icon-only","name","close-outline"],[3,"value","placeholder","ionChange"],[1,"ion-text-center"],[4,"ngIf"],[3,"value"],["slot","end","value",""],[3,"click",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],["name","dots"],["slot","end",3,"value"],["lines","none"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-header",0),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-buttons",1),p.TgZ(3,"ion-button",2),p.NdJ("click",function(){return t.modalControl.dismiss()}),p._UZ(4,"ion-icon",3),p.qZA(),p.qZA(),p.TgZ(5,"ion-title"),p._uU(6),p.ALo(7,"translate"),p.qZA(),p.qZA(),p.TgZ(8,"ion-toolbar"),p.TgZ(9,"ion-searchbar",4),p.NdJ("ionChange",function(e){return t.search(e)}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(10,"ion-content"),p.TgZ(11,"div",5),p.YNc(12,A,2,0,"div",6),p.qZA(),p.TgZ(13,"ion-list"),p.TgZ(14,"ion-radio-group",7),p.TgZ(15,"ion-item",2),p.NdJ("click",function(){return t.selectRegion({id:"",name:t.translate.instant("SHOP.LOCATION.ALL")})}),p.TgZ(16,"ion-label"),p._uU(17),p.ALo(18,"translate"),p.qZA(),p._UZ(19,"ion-radio",8),p.qZA(),p.YNc(20,P,4,2,"ion-item",9),p.ALo(21,"async"),p.qZA(),p.YNc(22,x,4,1,"ion-item",10),p.qZA(),p.qZA()),2&e&&(p.xp6(6),p.Oqu(p.lcZ(7,8,"SHOP.LOCATION.TITLE")),p.xp6(3),p.Q6J("value",t.keyword)("placeholder",t.translate.instant("SHOP.LOCATION.SEARCH")),p.xp6(3),p.Q6J("ngIf",t.loadingFlag.pending),p.xp6(2),p.Q6J("value",t.selectedRegion.id),p.xp6(3),p.hij(" ",p.lcZ(18,10,"SHOP.LOCATION.ALL")," "),p.xp6(3),p.Q6J("ngForOf",p.lcZ(21,12,t.regions$)),p.xp6(2),p.Q6J("ngIf",t.message))},directives:[d.Gu,d.sr,d.Sm,d.YG,d.gu,d.wd,d.VI,d.j9,d.W2,v.O5,d.q_,d.se,d.QI,d.Ie,d.Q$,d.B7,d.U5,v.sg,d.PQ],pipes:[f.X$,v.Ov],styles:[""]}),O)},59308:function(e,t,n){n.d(t,{w:function(){return b}});var i=n(27887),r=n(15085),a=n(37716),c=n(47063),u=n(81780),l=n(84465),g=n(13619),p=n(38583),d=["searchbar"];function h(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"ion-col",9),a.TgZ(1,"ion-button",10),a.NdJ("click",function(){var e=a.CHM(n).$implicit;return a.oxw(3).navigateToTerms(e)}),a._uU(2),a.qZA(),a.qZA()}if(2&e){var i=t.$implicit;a.xp6(2),a.hij(" ",i.name," ")}}function f(e,t){if(1&e&&(a.TgZ(0,"div"),a.TgZ(1,"ion-list-header",7),a.TgZ(2,"ion-label"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.qZA(),a.TgZ(5,"ion-grid"),a.TgZ(6,"ion-row"),a.YNc(7,h,3,1,"ion-col",8),a.qZA(),a.qZA(),a.qZA()),2&e){var n=a.oxw(2);a.xp6(3),a.Oqu(a.lcZ(4,2,"SHOP.USES")),a.xp6(4),a.Q6J("ngForOf",n.uses)}}function m(e,t){if(1&e&&(a.TgZ(0,"div"),a.YNc(1,f,8,4,"div",6),a.qZA()),2&e){var n=a.oxw();a.xp6(1),a.Q6J("ngIf",n.uses.length>0)}}function v(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"ion-col",9),a.TgZ(1,"ion-button",10),a.NdJ("click",function(){var e=a.CHM(n).$implicit;return a.oxw(2).navigateToTerms(e)}),a._uU(2),a.qZA(),a.qZA()}if(2&e){var i=t.$implicit;a.xp6(2),a.hij(" ",i.name," ")}}function A(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"ion-col",9),a.TgZ(1,"ion-button",10),a.NdJ("click",function(){var e=a.CHM(n).$implicit;return a.oxw(3).navigateToTerms(e)}),a._uU(2),a.qZA(),a.qZA()}if(2&e){var i=t.$implicit;a.xp6(2),a.hij(" ",i.name," ")}}function P(e,t){if(1&e&&(a.TgZ(0,"div"),a.TgZ(1,"ion-list-header",7),a.TgZ(2,"ion-label"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.qZA(),a.TgZ(5,"ion-grid"),a.TgZ(6,"ion-row"),a.YNc(7,A,3,1,"ion-col",8),a.qZA(),a.qZA(),a.qZA()),2&e){var n=a.oxw(2);a.xp6(3),a.Oqu(a.lcZ(4,2,"SHOP.MATERIAL")),a.xp6(4),a.Q6J("ngForOf",n.material)}}function x(e,t){if(1&e&&(a.TgZ(0,"div"),a.TgZ(1,"ion-list-header",7),a.TgZ(2,"ion-label"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.qZA(),a.TgZ(5,"ion-grid"),a.TgZ(6,"ion-row"),a.YNc(7,v,3,1,"ion-col",8),a.qZA(),a.qZA(),a.YNc(8,P,8,4,"div",6),a.qZA()),2&e){var n=a.oxw();a.xp6(3),a.Oqu(a.lcZ(4,3,"SHOP.USEFOR")),a.xp6(4),a.Q6J("ngForOf",n.usefor),a.xp6(1),a.Q6J("ngIf",n.material.length>0)}}function O(e,t){1&e&&a._UZ(0,"ion-icon",15)}function Z(e,t){1&e&&a._UZ(0,"ion-icon",16)}function _(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"ion-row"),a.TgZ(1,"ion-col",11),a.TgZ(2,"ion-button",12),a.NdJ("click",function(){a.CHM(n);var e=a.oxw();return e.showAll=!e.showAll}),a.YNc(3,O,1,0,"ion-icon",13),a.YNc(4,Z,1,0,"ion-icon",14),a.qZA(),a.qZA(),a.qZA()}if(2&e){var i=a.oxw();a.xp6(3),a.Q6J("ngIf",!i.showAll),a.xp6(1),a.Q6J("ngIf",i.showAll)}}var T,b=((T=function(){function e(t,n,r,s,a,c){o(this,e),this.modalControl=t,this.shopService=n,this.translate=r,this.toastService=s,this.router=a,this.modalController=c,this.input="",this.usefor=[],this.uses=[],this.material=[],this.showAll=!1,this.loadingFlag=new i.E}return s(e,[{key:"ngOnInit",value:function(){this.getTermData()}},{key:"ionViewDidEnter",value:function(){var e=this;setTimeout(function(){e.searchbar.setFocus()})}},{key:"getTermData",value:function(){var e=this;this.loadingFlag.setPending(!0),this.shopService.listTerm().pipe().subscribe(function(t){"error"==t.status?e.toastService.warning(t.error.message):(e.usefor=t.data.usefor,e.usefor=e.usefor.filter(function(e){return 4==e.parent_id}),e.uses=t.data.uses,e.material=t.data.material),e.loadingFlag.setResult(!0)},function(t){e.loadingFlag.setResult(!1),e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"search",value:function(e){this.modalController.dismiss(),this.router.navigateByUrl("shop/search/search-result/"+e.target.value)}},{key:"navigateToTerms",value:function(e){var t={id:e.id,name:e.name};this.modalController.dismiss(),this.router.navigateByUrl("shop/products",{state:t})}}]),e}()).\u0275fac=function(e){return new(e||T)(a.Y36(c.IN),a.Y36(r.d),a.Y36(u.sK),a.Y36(l.k),a.Y36(g.F0),a.Y36(c.IN))},T.\u0275cmp=a.Xpm({type:T,selectors:[["app-shop-search"]],viewQuery:function(e,t){var n;1&e&&a.Gf(d,5),2&e&&a.iGM(n=a.CRH())&&(t.searchbar=n.first)},inputs:{input:"input"},decls:15,vars:8,consts:[["mode","ios"],["slot","start"],[3,"click"],["slot","icon-only","name","close-outline"],[3,"value","placeholder","search"],["searchbar",""],[4,"ngIf"],["lines","none"],["size","6",4,"ngFor","ngForOf"],["size","6"],["expand","block","mode","ios","color","light",3,"click"],[1,"ion-text-center"],["fill","outline","shape","round","size","small","mode","ios",3,"click"],["slot","icon-only","name","chevron-down-outline",4,"ngIf"],["slot","icon-only","name","chevron-up-outline",4,"ngIf"],["slot","icon-only","name","chevron-down-outline"],["slot","icon-only","name","chevron-up-outline"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-header",0),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",1),a.TgZ(3,"ion-button",2),a.NdJ("click",function(){return t.modalControl.dismiss()}),a._UZ(4,"ion-icon",3),a.qZA(),a.qZA(),a.TgZ(5,"ion-title"),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.TgZ(8,"ion-toolbar"),a.TgZ(9,"ion-searchbar",4,5),a.NdJ("search",function(e){return t.search(e)}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"ion-content"),a.YNc(12,m,2,1,"div",6),a.YNc(13,x,9,5,"div",6),a.YNc(14,_,5,2,"ion-row",6),a.qZA()),2&e&&(a.xp6(6),a.Oqu(a.lcZ(7,6,"SHOP.SEARCH")),a.xp6(3),a.Q6J("value",t.input)("placeholder",t.translate.instant("SHOP.KEYWORD")),a.xp6(3),a.Q6J("ngIf",t.usefor.length>0),a.xp6(1),a.Q6J("ngIf",t.showAll),a.xp6(1),a.Q6J("ngIf",t.uses.length>0||t.material.length>0))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.wd,c.VI,c.j9,c.W2,p.O5,c.yh,c.Q$,c.jY,c.Nd,p.sg,c.wI],pipes:[u.X$],styles:[""]}),T)},26177:function(e,t,n){n.d(t,{t:function(){return u}});var i,r=n(38583),s=n(47063),a=n(13619),c=n(37716),u=((i=function e(){o(this,e)}).\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[r.ez,a.Bz,s.Pc]]}),i)},4015:function(e,t,n){n.d(t,{g:function(){return h}});var i=n(64762),r=n(59308),a=n(37716),c=n(47063),u=n(71239),l=n(13619),g=n(38583);function p(e,t){if(1&e&&(a.TgZ(0,"div",5),a._uU(1),a.qZA()),2&e){var n=a.oxw();a.xp6(1),a.Oqu(n.dbLocalService.cartLength.length)}}var d,h=((d=function(){function e(t,n){o(this,e),this.modalControl=t,this.dbLocalService=n}return s(e,[{key:"ngOnInit",value:function(){return(0,i.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dbLocalService.getDataCart();case 2:case"end":return e.stop()}},e,this)}))}},{key:"presentSearch",value:function(){return(0,i.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalControl.create({component:r.w});case 2:return e.next=4,e.sent.present();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))}}]),e}()).\u0275fac=function(e){return new(e||d)(a.Y36(c.IN),a.Y36(u.T))},d.\u0275cmp=a.Xpm({type:d,selectors:[["app-shop-toolbar"]],decls:5,vars:2,consts:[[3,"click"],["slot","icon-only","name","search-outline"],["routerLink","/tabs/shop/cart"],["slot","icon-only","name","bag-outline",3,"color"],["class","bag-cart",4,"ngIf"],[1,"bag-cart"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-button",0),a.NdJ("click",function(){return t.presentSearch()}),a._UZ(1,"ion-icon",1),a.qZA(),a.TgZ(2,"ion-button",2),a._UZ(3,"ion-icon",3),a.YNc(4,p,2,1,"div",4),a.qZA()),2&e&&(a.xp6(3),a.Q6J("color",t.dbLocalService.cartLength.length>0?"danger":"medium"),a.xp6(1),a.Q6J("ngIf",t.dbLocalService.cartLength.length>0))},directives:[c.YG,c.gu,l.rH,c.YI,g.O5],styles:["[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:.94em;font-size:.8em}"]}),d)},75588:function(e,t,n){n.r(t),n.d(t,{ShopPageModule:function(){return ae}});var i=n(38583),r=n(90665),a=n(47063),c=n(81780),u=n(13619),l=n(64762),g=n(16738),p=n(27887),d=n(83111),h=n(59308),f=n(15085),m=n(37716),v=n(84465),A=n(71239),P=n(4015);function x(e,t){1&e&&(m.TgZ(0,"div",18),m._UZ(1,"ion-spinner",19),m.qZA())}function O(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"ion-slide",1),m.NdJ("click",function(){var e=m.CHM(n).$implicit;return m.oxw().loadProduct(e.url)}),m.TgZ(1,"div"),m._UZ(2,"img",20),m.qZA(),m.qZA()}if(2&e){var i=t.$implicit,o=m.oxw();m.xp6(2),m.Q6J("src",o.shopService.SITE_PATH+"/upload/advertiment/ge_image/"+i.image,m.LSH)}}function Z(e,t){1&e&&(m.TgZ(0,"ion-list-header",21),m.TgZ(1,"ion-label",22),m._uU(2,"T\xe9p b\u1ea1c t\xe0i tr\u1ee3"),m.qZA(),m.TgZ(3,"div",23),m._UZ(4,"ion-icon",24),m.qZA(),m.qZA())}function _(e,t){if(1&e&&m._UZ(0,"img",32),2&e){var n=m.oxw().$implicit,i=m.oxw(3);m.Q6J("src",i.shopService.SITE_PATH+"/upload/eventeshop/"+n.banner,m.LSH)}}function T(e,t){if(1&e&&(m.TgZ(0,"ion-col",28),m.TgZ(1,"div",29),m._UZ(2,"img",30),m.YNc(3,_,1,1,"img",31),m.TgZ(4,"h6"),m._uU(5),m.qZA(),m.qZA(),m.qZA()),2&e){var n=t.$implicit,i=m.oxw(3);m.MGl("routerLink","product/",n.id,""),m.xp6(2),m.Q6J("src",i.shopService.SITE_PATH+n.img_default,m.LSH),m.xp6(1),m.Q6J("ngIf",n.banner),m.xp6(2),m.Oqu(n.alias)}}function b(e,t){if(1&e&&(m.TgZ(0,"ion-slide"),m.TgZ(1,"ion-row"),m.YNc(2,T,6,4,"ion-col",27),m.qZA(),m.qZA()),2&e){var n=t.$implicit;m.xp6(2),m.Q6J("ngForOf",n)}}function S(e,t){if(1&e&&(m.TgZ(0,"div",25),m.TgZ(1,"div",26),m.TgZ(2,"ion-slides",8),m.YNc(3,b,3,1,"ion-slide",17),m.qZA(),m._UZ(4,"div",10),m.qZA(),m.qZA()),2&e){var n=m.oxw();m.xp6(2),m.Q6J("options",n.bannerOpts),m.xp6(1),m.Q6J("ngForOf",n.productSpecial.list)}}function C(e,t){1&e&&(m.TgZ(0,"span"),m._uU(1,"0"),m.qZA())}function q(e,t){1&e&&(m.TgZ(0,"span"),m._uU(1,"0"),m.qZA())}function w(e,t){1&e&&(m.TgZ(0,"span"),m._uU(1,"0"),m.qZA())}function y(e,t){if(1&e&&(m.TgZ(0,"ion-list-header",33),m.TgZ(1,"ion-label",34),m._uU(2,"Flash"),m._UZ(3,"ion-icon",35),m._uU(4,"sale"),m.qZA(),m.TgZ(5,"div",36),m.TgZ(6,"div",37),m.YNc(7,C,2,0,"span",16),m._uU(8),m.qZA(),m.TgZ(9,"div",37),m.YNc(10,q,2,0,"span",16),m._uU(11),m.qZA(),m.TgZ(12,"div",37),m.YNc(13,w,2,0,"span",16),m._uU(14),m.qZA(),m.qZA(),m.qZA()),2&e){var n=m.oxw();m.xp6(7),m.Q6J("ngIf",n.remainingTime.hour<10),m.xp6(1),m.Oqu(n.remainingTime.hour),m.xp6(2),m.Q6J("ngIf",n.remainingTime.min<10),m.xp6(1),m.Oqu(n.remainingTime.min),m.xp6(2),m.Q6J("ngIf",n.remainingTime.seconds<10),m.xp6(1),m.Oqu(n.remainingTime.seconds)}}function M(e,t){if(1&e&&(m.TgZ(0,"div",49),m.TgZ(1,"span"),m._uU(2),m.ALo(3,"number"),m.qZA(),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(2),m.hij("-",m.xi3(3,1,100*n.ratio,"0.0-0"),"%")}}function I(e,t){if(1&e&&m._UZ(0,"img",50),2&e){var n=m.oxw().$implicit,i=m.oxw(2);m.Q6J("src",i.shopService.SITE_PATH+"/upload/eventeshop/"+n.banner,m.LSH)}}function k(e,t){if(1&e&&(m.TgZ(0,"div",51),m._uU(1),m.ALo(2,"number"),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(1),m.hij(" ",m.xi3(2,1,n.maxPrice,"1.0-0"),"\u20ab ")}}function R(e,t){if(1&e&&(m.TgZ(0,"div",51),m._uU(1),m.ALo(2,"number"),m.ALo(3,"number"),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(1),m.AsE(" ",m.xi3(2,2,n.minPrice,"1.0-0")," ~ ",m.xi3(3,5,n.maxPrice,"1.0-0"),"\u20ab ")}}function N(e,t){if(1&e&&(m.TgZ(0,"ion-col",40),m.YNc(1,M,4,4,"div",41),m.TgZ(2,"div",42),m._UZ(3,"img",43),m.YNc(4,I,1,1,"img",44),m.qZA(),m.TgZ(5,"div",45),m._uU(6),m.qZA(),m.TgZ(7,"div",46),m.TgZ(8,"small",47),m._uU(9),m.ALo(10,"number"),m.qZA(),m.qZA(),m.YNc(11,k,3,4,"div",48),m.YNc(12,R,4,8,"div",48),m.qZA()),2&e){var n=t.$implicit,i=m.oxw(2);m.MGl("routerLink","product/",n.id,""),m.xp6(1),m.Q6J("ngIf",0!=n.ratio),m.xp6(2),m.Q6J("src",i.shopService.SITE_PATH+n.img_default,m.LSH),m.xp6(1),m.Q6J("ngIf",n.banner),m.xp6(2),m.Oqu(n.alias),m.xp6(3),m.hij("",m.xi3(10,8,n.maxFullPrice,"0.0-0"),"\u20ab"),m.xp6(2),m.Q6J("ngIf",n.minPrice==n.maxPrice),m.xp6(1),m.Q6J("ngIf",n.minPrice!=n.maxPrice)}}function E(e,t){if(1&e&&(m.TgZ(0,"ion-grid",38),m.TgZ(1,"ion-row"),m.YNc(2,N,13,11,"ion-col",39),m.qZA(),m.qZA()),2&e){var n=m.oxw();m.xp6(2),m.Q6J("ngForOf",n.flashSales.list)}}function L(e,t){if(1&e&&(m.TgZ(0,"ion-list-header",5),m.TgZ(1,"ion-label"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.TgZ(4,"ion-button",52),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.qZA()),2&e){var n=m.oxw();m.xp6(2),m.Oqu(m.lcZ(3,3,"SHOP.HOME.SALE")),m.xp6(3),m.AsE("",n.sales.numRows," ",m.lcZ(6,5,"SHOP.HOME.PRODUCT"),"")}}function U(e,t){if(1&e&&(m.TgZ(0,"div",49),m.TgZ(1,"span"),m._uU(2),m.ALo(3,"number"),m.qZA(),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(2),m.hij("-",m.xi3(3,1,100*n.ratio,"0.0-0"),"%")}}function F(e,t){if(1&e&&m._UZ(0,"img",50),2&e){var n=m.oxw().$implicit,i=m.oxw(2);m.Q6J("src",i.shopService.SITE_PATH+"/upload/eventeshop/"+n.banner,m.LSH)}}function D(e,t){if(1&e&&(m.TgZ(0,"div",51),m._uU(1),m.ALo(2,"number"),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(1),m.hij(" ",m.xi3(2,1,n.maxPrice,"1.0-0"),"\u20ab ")}}function J(e,t){if(1&e&&(m.TgZ(0,"div",51),m._uU(1),m.ALo(2,"number"),m.ALo(3,"number"),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(1),m.AsE(" ",m.xi3(2,2,n.minPrice,"1.0-0")," ~ ",m.xi3(3,5,n.maxPrice,"1.0-0"),"\u20ab ")}}function Y(e,t){if(1&e&&(m.TgZ(0,"ion-col",40),m.YNc(1,U,4,4,"div",41),m.TgZ(2,"div",42),m._UZ(3,"img",43),m.YNc(4,F,1,1,"img",44),m.qZA(),m.TgZ(5,"div",45),m._uU(6),m.qZA(),m.TgZ(7,"div",46),m.TgZ(8,"small",47),m._uU(9),m.ALo(10,"number"),m.qZA(),m.qZA(),m.YNc(11,D,3,4,"div",48),m.YNc(12,J,4,8,"div",48),m.qZA()),2&e){var n=t.$implicit,i=m.oxw(2);m.MGl("routerLink","product/",n.id,""),m.xp6(1),m.Q6J("ngIf",0!=n.ratio),m.xp6(2),m.Q6J("src",i.shopService.SITE_PATH+n.img_default,m.LSH),m.xp6(1),m.Q6J("ngIf",n.banner),m.xp6(2),m.Oqu(n.alias),m.xp6(3),m.hij("",m.xi3(10,8,n.maxFullPrice,"0.0-0"),"\u20ab"),m.xp6(2),m.Q6J("ngIf",n.minPrice==n.maxPrice),m.xp6(1),m.Q6J("ngIf",n.minPrice!=n.maxPrice)}}function Q(e,t){if(1&e&&(m.TgZ(0,"ion-grid",38),m.TgZ(1,"ion-row"),m.YNc(2,Y,13,11,"ion-col",39),m.qZA(),m.qZA()),2&e){var n=m.oxw();m.xp6(2),m.Q6J("ngForOf",n.sales.list)}}function H(e,t){if(1&e&&(m.TgZ(0,"ion-list-header",5),m.TgZ(1,"ion-label"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.TgZ(4,"ion-button",53),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.qZA()),2&e){var n=m.oxw();m.xp6(2),m.Oqu(m.lcZ(3,3,"SHOP.HOME.COMPANY")),m.xp6(3),m.AsE("",n.company.numRows," ",m.lcZ(6,5,"SHOP.HOME.COMPANIES")," ")}}function $(e,t){if(1&e&&(m.TgZ(0,"ion-col",56),m.TgZ(1,"div",57),m._UZ(2,"img",58),m.qZA(),m.qZA()),2&e){var n=t.$implicit,i=m.oxw(2);m.MGl("routerLink","companys/company/",n.id,""),m.xp6(2),m.Q6J("src",i.shopService.SITE_PATH+"/upload/company/thumb_image/"+n.image,m.LSH)}}function j(e,t){1&e&&(m.TgZ(0,"ion-item"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.Oqu(m.lcZ(2,1,"SHOP.HOME.NO_COMPANIES")))}function z(e,t){if(1&e&&(m.TgZ(0,"ion-grid"),m.TgZ(1,"ion-row",54),m.YNc(2,$,3,2,"ion-col",55),m.qZA(),m.YNc(3,j,3,3,"ion-item",16),m.qZA()),2&e){var n=m.oxw();m.xp6(2),m.Q6J("ngForOf",n.company.list),m.xp6(1),m.Q6J("ngIf",0==n.company.numRows)}}var G=function(e,t){return{name:e,id:t}};function B(e,t){if(1&e&&(m.TgZ(0,"ion-list-header",5),m.TgZ(1,"ion-label"),m._uU(2),m.qZA(),m.TgZ(3,"ion-button",59),m._uU(4),m.ALo(5,"translate"),m.qZA(),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(2),m.Oqu(n.name),m.xp6(1),m.Q6J("state",m.WLB(6,G,n.name,n.id)),m.xp6(1),m.AsE("",n.num," ",m.lcZ(5,4,"SHOP.HOME.PRODUCT")," ")}}function V(e,t){if(1&e&&(m.TgZ(0,"div",49),m.TgZ(1,"span"),m._uU(2),m.ALo(3,"number"),m.qZA(),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(2),m.hij("-",m.xi3(3,1,100*n.ratio,"0.0-0"),"%")}}function W(e,t){if(1&e&&m._UZ(0,"img",50),2&e){var n=m.oxw().$implicit,i=m.oxw(2);m.Q6J("src",i.shopService.SITE_PATH+"/upload/eventeshop/"+n.banner,m.LSH)}}function X(e,t){if(1&e&&(m.TgZ(0,"div",46),m.TgZ(1,"small",61),m._uU(2),m.ALo(3,"number"),m.qZA(),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(2),m.hij("",m.xi3(3,1,n.maxFullPrice,"1.0-0"),"\u20ab")}}function K(e,t){if(1&e&&(m.TgZ(0,"div",51),m._uU(1),m.ALo(2,"number"),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(1),m.hij(" ",m.xi3(2,1,n.maxPrice,"1.0-0"),"\u20ab ")}}function ee(e,t){if(1&e&&(m.TgZ(0,"div",51),m._uU(1),m.ALo(2,"number"),m.ALo(3,"number"),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(1),m.AsE(" ",m.xi3(2,2,n.minPrice,"1.0-0")," ~ ",m.xi3(3,5,n.maxPrice,"1.0-0"),"\u20ab ")}}function te(e,t){if(1&e&&(m.TgZ(0,"ion-col",40),m.YNc(1,V,4,4,"div",41),m.TgZ(2,"div",42),m._UZ(3,"img",43),m.YNc(4,W,1,1,"img",44),m.qZA(),m.TgZ(5,"div",45),m._uU(6),m.qZA(),m.YNc(7,X,4,4,"div",60),m.YNc(8,K,3,4,"div",48),m.YNc(9,ee,4,8,"div",48),m.qZA()),2&e){var n=t.$implicit,i=m.oxw(2);m.MGl("routerLink","product/",n.id,""),m.xp6(1),m.Q6J("ngIf",0!=n.ratio),m.xp6(2),m.Q6J("src",i.shopService.SITE_PATH+n.img_default,m.LSH),m.xp6(1),m.Q6J("ngIf",n.banner),m.xp6(2),m.Oqu(n.alias),m.xp6(1),m.Q6J("ngIf",0!=n.ratio),m.xp6(1),m.Q6J("ngIf",n.minPrice==n.maxPrice),m.xp6(1),m.Q6J("ngIf",n.minPrice!=n.maxPrice)}}function ne(e,t){if(1&e&&(m.TgZ(0,"div"),m.YNc(1,B,6,9,"ion-list-header",15),m.TgZ(2,"ion-grid",38),m.TgZ(3,"ion-row"),m.YNc(4,te,10,8,"ion-col",39),m.qZA(),m.qZA(),m.qZA()),2&e){var n=t.$implicit,i=m.oxw();m.xp6(1),m.Q6J("ngIf",i.terms),m.xp6(3),m.Q6J("ngForOf",n.list)}}var ie,oe=[{path:"",component:(ie=function(){function e(t,n,i,r,s,a){o(this,e),this.modalController=t,this.shopService=n,this.toastService=i,this.translate=r,this.localDb=s,this.route=a,this.loadingFlag=new p.E,this.listADS=[],this.remainingTime={hour:0,min:0,seconds:0},this.bannerOpts={speed:400,pagination:{el:".swiper-pagination",dynamicBullets:!0}},this.productSpecial={numRows:0,list:[]}}return s(e,[{key:"ngOnInit",value:function(){this.selectedRegion=this.localDb.eShopRegion?this.localDb.eShopRegion:{id:"",name:this.translate.instant("SHOP.LOCATION.ALL")},this.getHomeProducts(this.selectedRegion.id),this.loadFlashsale(),this.loadProductSpecial(),this.loadAds()}},{key:"presentLocation",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:d.o});case 2:return(t=e.sent).onDidDismiss().then(function(e){e.data&&(n.selectedRegion=e.data,n.getHomeProducts(n.selectedRegion.id))}),e.next=6,t.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"getHomeProducts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.loadingFlag.setPending(!0),this.shopService.getHomeProducts(t).pipe().subscribe(function(t){"error"==t.status?e.toastService.warning(t.error.message):(e.sales=t.data.sales,e.sales.list=e.prepareProductPrice(t.data.sales.list),e.company=t.data.company,e.terms=e.prepareTermData(t.data.terms),t.data.flashsales&&(e.flashSales=t.data.flashsales,e.flashSales.list=e.prepareProductPrice(e.flashSales.list),e.prepareFlashsale())),e.loadingFlag.setResult(!0)},function(t){e.loadingFlag.setResult(!1),e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"loadFlashsale",value:function(){var e=this;this.shopService.loadFlashsale().pipe().subscribe(function(t){"error"==t.status?console.log(t.error.message):t.data.flashsales&&(e.flashSales=t.data.flashsales,e.flashSales.list=e.prepareProductPrice(e.flashSales.list),e.prepareFlashsale())},function(t){console.log(e.translate.instant("ERROR_CONNECT"))})}},{key:"prepareTermData",value:function(e){var t=this,n=[];return e.forEach(function(e,i){n.push(e);var o=[];e.list=e.list.split(".lhhlv1."),e.list.forEach(function(e){var t=e.split(".lhhlv2."),n=["id","alias","name","rate_score","rate_count","buyed_count","hit","company_id","label_price","ratio","img_default","banner","type_key","type_value"];t=t.reduce(function(e,t,i){return e[n[i]]=t,e},{}),o.push(t)}),n[i].list=t.prepareProductPrice(o)}),n}},{key:"prepareProductPrice",value:function(e){var t=[];return e.forEach(function(e){var n=e.label_price.split("~");e.minPrice=n[0],e.maxPrice=n[1],e.maxFullPrice=e.maxPrice/(1-e.ratio),t.push(e)}),t}},{key:"loadAds",value:function(){var e=this;this.shopService.getAds().subscribe(function(t){"success"==t.status?(e.listADS="EWM"in t.data?t.data.EWM:[],console.log(e.listADS)):e.toastService.danger(e.translate.instant("ERROR_CONNECT"))},function(){e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"loadProduct",value:function(e){var t=e.trim().split("//"),n=t[t.length-1].split("/");if(console.log(n),4==n.length){var i=n[3].split("-");this.route.navigateByUrl({company:"shop/companys/company/",detail:"shop/product/",shop:"shop/store/",term:"shop/products/"}[n[2]]+parseInt(i[i.length-1]))}}},{key:"prepareFlashsale",value:function(){var e=this,t=this.flashSales.listFrames[this.flashSales.currentFrameIndex],n=new Date,i=(new Date(n.getFullYear(),n.getMonth()+1,n.getDate(),t[0],0,0,0),new Date(n.getFullYear(),n.getMonth(),n.getDate(),t[1],0,0,0)),o=g.utc(g(i.getTime()).diff(n.getTime())).format("HH:mm:ss").split(":");this.remainingTime.hour=parseInt(o[0]),this.remainingTime.min=parseInt(o[1]),this.remainingTime.seconds=parseInt(o[2]);var r=this;this.timeCountDown=setInterval(function(){r.remainingTime.seconds=0==r.remainingTime.seconds?0:r.remainingTime.seconds-=1,0==r.remainingTime.seconds&&(r.remainingTime.min>0&&(r.remainingTime.seconds=59),r.remainingTime.min=0==r.remainingTime.min?0:r.remainingTime.min-=1),0==r.remainingTime.min&&(r.remainingTime.hour>0?(r.remainingTime.hour=r.remainingTime.hour>0?r.remainingTime.hour-=1:0,r.remainingTime.min=59,r.remainingTime.seconds=59):r.remainingTime.hour=0),0==r.remainingTime.hour&&0==r.remainingTime.min&&0==r.remainingTime.seconds&&(e.flashSales.list=[],e.flashSales.numRows=0,clearInterval(e.timeCountDown))},1e3)}},{key:"presentSearch",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:h.w});case 2:return e.next=4,e.sent.present();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))}},{key:"doRefresh",value:function(e){this.timeCountDown&&clearInterval(this.timeCountDown),this.selectedRegion=this.localDb.eShopRegion?this.localDb.eShopRegion:{id:"",name:this.translate.instant("SHOP.LOCATION.ALL")},this.getHomeProducts(this.selectedRegion.id),this.loadFlashsale(),this.loadProductSpecial(),e.target.complete()}},{key:"loadProductSpecial",value:function(){var e=this;this.shopService.getListProductSpecial(0,0).subscribe(function(t){if("success"==t.status){e.productSpecial.numRows=t.data.numRows;var n=e.prepareProductPrice(t.data.list);console.log(n);for(var i=0;i<n.length;i++)i%2==0?e.productSpecial.list.push([n[i]]):e.productSpecial.list[e.productSpecial.list.length-1].push(n[i]);console.log(e.productSpecial)}else e.toastService.danger(e.translate.instant("ERROR_CONNECT"))},function(){e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}}]),e}(),ie.\u0275fac=function(e){return new(e||ie)(m.Y36(a.IN),m.Y36(f.d),m.Y36(v.k),m.Y36(c.sK),m.Y36(A.T),m.Y36(u.F0))},ie.\u0275cmp=m.Xpm({type:ie,selectors:[["app-shop"]],decls:25,vars:13,consts:[["slot","start"],[3,"click"],["slot","end","name","caret-down-outline"],["slot","end"],["slot","fixed",3,"ionRefresh"],["mode","ios"],["class","spiner-loading",4,"ngIf"],[1,"banner"],[3,"options"],[3,"click",4,"ngFor","ngForOf"],[1,"swiper-pagination"],["mode","ios","routerLink","shop-special",4,"ngIf"],["style","position: relative;",4,"ngIf"],["mode","ios","routerLink","shop-flashsales",4,"ngIf"],["class","grid-product",4,"ngIf"],["mode","ios",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"spiner-loading"],["name","dots"],[3,"src"],["mode","ios","routerLink","shop-special"],["color","primary"],[1,"arrowButton"],["name","chevron-forward-outline"],[2,"position","relative"],[1,"banner","ion-margin"],["size","6",3,"routerLink",4,"ngFor","ngForOf"],["size","6",3,"routerLink"],[1,"boxSpecial"],["onError","this.src='assets/img/1235.jpg'",1,"imgProductSpecial",3,"src"],["class","bannerSpecial",3,"src",4,"ngIf"],[1,"bannerSpecial",3,"src"],["mode","ios","routerLink","shop-flashsales"],["color","danger"],["name","flash-outline"],[1,"boxTimeFlashsale"],[1,"boxTime"],[1,"grid-product"],["size","6","size-sm","3",3,"routerLink",4,"ngFor","ngForOf"],["size","6","size-sm","3",3,"routerLink"],["class","discount-label",4,"ngIf"],[1,"img-box"],["onError","this.src='assets/img/1235.jpg'",1,"m-auto",3,"src"],["class","bannerProduct",3,"src",4,"ngIf"],[1,"product-alias"],[1,"promotion-box"],[1,"strike","ion-align-self-center"],["class","price-box",4,"ngIf"],[1,"discount-label"],[1,"bannerProduct",3,"src"],[1,"price-box"],["fill","outline","routerLink","promotion"],["fill","outline","routerLink","companys"],[1,"ion-justify-content-center"],["size","4","class","ion-text-center",3,"routerLink",4,"ngFor","ngForOf"],["size","4",1,"ion-text-center",3,"routerLink"],[1,"brand-box"],["onError","this.src='assets/img/shop-img-default.png'",3,"src"],["routerLink","products","fill","outline",3,"state"],["class","promotion-box",4,"ngIf"],[1,"strike"]],template:function(e,t){1&e&&(m.TgZ(0,"ion-header"),m.TgZ(1,"ion-toolbar"),m.TgZ(2,"ion-buttons",0),m.TgZ(3,"ion-button",1),m.NdJ("click",function(){return t.presentLocation()}),m._uU(4),m._UZ(5,"ion-icon",2),m.qZA(),m.qZA(),m.TgZ(6,"ion-buttons",3),m._UZ(7,"app-shop-toolbar"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(8,"ion-content"),m.TgZ(9,"ion-refresher",4),m.NdJ("ionRefresh",function(e){return t.doRefresh(e)}),m._UZ(10,"ion-refresher-content",5),m.qZA(),m.YNc(11,x,2,0,"div",6),m.TgZ(12,"div",7),m.TgZ(13,"ion-slides",8),m.YNc(14,O,3,1,"ion-slide",9),m.qZA(),m._UZ(15,"div",10),m.qZA(),m.YNc(16,Z,5,0,"ion-list-header",11),m.YNc(17,S,5,2,"div",12),m.YNc(18,y,15,6,"ion-list-header",13),m.YNc(19,E,3,1,"ion-grid",14),m.YNc(20,L,7,7,"ion-list-header",15),m.YNc(21,Q,3,1,"ion-grid",14),m.YNc(22,H,7,7,"ion-list-header",15),m.YNc(23,z,4,2,"ion-grid",16),m.YNc(24,ne,5,2,"div",17),m.qZA()),2&e&&(m.xp6(4),m.hij(" ",t.selectedRegion.name," "),m.xp6(7),m.Q6J("ngIf",t.loadingFlag.pending),m.xp6(2),m.Q6J("options",t.bannerOpts),m.xp6(1),m.Q6J("ngForOf",t.listADS),m.xp6(2),m.Q6J("ngIf",t.productSpecial.numRows>0),m.xp6(1),m.Q6J("ngIf",t.productSpecial.numRows>0),m.xp6(1),m.Q6J("ngIf",t.flashSales),m.xp6(1),m.Q6J("ngIf",t.flashSales),m.xp6(1),m.Q6J("ngIf",t.sales&&t.sales.numRows>0),m.xp6(1),m.Q6J("ngIf",t.sales&&t.sales.numRows>0),m.xp6(1),m.Q6J("ngIf",t.company),m.xp6(1),m.Q6J("ngIf",t.company),m.xp6(1),m.Q6J("ngForOf",t.terms))},directives:[a.Gu,a.sr,a.Sm,a.YG,a.gu,P.g,a.W2,a.nJ,a.Wo,i.O5,a.Hr,i.sg,a.PQ,a.A$,a.yh,a.YI,u.rH,a.Q$,a.Nd,a.wI,a.jY,a.Ie],pipes:[i.JJ,c.X$],styles:['[_nghost-%COMP%]{--bullet-background-active: var(--ion-color-light);--bullet-background: var(--ion-color-dark)}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}[_nghost-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:"Averta";font-size:.8em}[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:1em;font-size:.8em}[_nghost-%COMP%]   .brand-box[_ngcontent-%COMP%]{text-align:center;padding:3px 5px;height:100%;max-width:140px;margin:0 auto;overflow:hidden;border:1px solid rgba(192,192,192,.5);border-radius:10px;display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .brand-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%!important;margin:auto;border-radius:5px}[_nghost-%COMP%]   .text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-height:16px;height:32px;-webkit-box-orient:vertical}[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]   .swiper-pagination[_ngcontent-%COMP%]{z-index:1000;position:absolute;bottom:10px;left:5px}','[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}[_nghost-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:"Averta";font-size:.8em}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;margin-top:29px;margin-bottom:6px;font-family:"Averta";font-size:.8em;display:flex;margin-right:16px}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]   .boxTime[_ngcontent-%COMP%]{color:#fff;background-color:#000;padding-left:2px;padding-right:2px;margin-right:2px;margin-left:2px;border-radius:2px;max-width:27px;width:27px;text-align:center}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]{min-height:150px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .bannerSpecial[_ngcontent-%COMP%]{max-height:50px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .imgProductSpecial[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .arrowButton[_ngcontent-%COMP%]{vertical-align:middle;margin-right:16px}[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:1em;font-size:.8em}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:240px;width:100%}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border-top:1px solid rgba(192,192,192,.2);border-left:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border-right:1px solid rgba(192,192,192,.2);border-bottom:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]{flex:auto;text-align:center;margin:0 auto;overflow:hidden;position:relative}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:80x!important;margin-bottom:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   .bannerProduct[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;max-height:60px;max-width:80%;width:auto}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .product-alias[_ngcontent-%COMP%]{line-height:1.2em;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;height:2.4em;-webkit-box-orient:vertical}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]{margin:3px 0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .mr[_ngcontent-%COMP%]{margin-left:3px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .strike[_ngcontent-%COMP%]{text-decoration:line-through}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]{margin:3px 0;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;height:1.3em;-webkit-box-orient:vertical;color:var(--ion-color-danger)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]{padding:5px;position:absolute;right:5px;top:10px;float:left;width:43px;background-color:#de2525;z-index:9999;transform:rotate(20deg);border-radius:4px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:after{right:42px;border:solid transparent;content:" ";height:0;width:0;position:absolute;border-color:#88b7d500;border-right-color:#de2525;border-width:13.5px;top:50%;margin-top:-13.6px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:before{content:"";z-index:2;position:absolute;top:44%;right:100%;width:5px;height:5px;opacity:.95;background:#fff;border-radius:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center;font-family:"Averta"}']}),ie)},{path:"search",loadChildren:function(){return n.e(6963).then(n.bind(n,36963)).then(function(e){return e.ShopSearchPageModule})}},{path:"location",loadChildren:function(){return n.e(2036).then(n.bind(n,52036)).then(function(e){return e.ShopLocationPageModule})}},{path:"cart",loadChildren:function(){return n.e(3607).then(n.bind(n,93607)).then(function(e){return e.ShopCartPageModule})}},{path:"category",loadChildren:function(){return n.e(5173).then(n.bind(n,45173)).then(function(e){return e.ShopCategoryPageModule})}},{path:"store/:id",loadChildren:function(){return n.e(4432).then(n.bind(n,24432)).then(function(e){return e.ShopStorePageModule})}},{path:"product/:id",loadChildren:function(){return Promise.all([n.e(1224),n.e(2222)]).then(n.bind(n,82222)).then(function(e){return e.ShopProductPageModule})}},{path:"stores",loadChildren:function(){return n.e(4758).then(n.bind(n,54758)).then(function(e){return e.ShopStoresPageModule})}},{path:"promotion",loadChildren:function(){return Promise.all([n.e(8592),n.e(9834)]).then(n.bind(n,29834)).then(function(e){return e.ShopPromotionPageModule})}},{path:"products",loadChildren:function(){return Promise.all([n.e(8592),n.e(565)]).then(n.bind(n,20565)).then(function(e){return e.ShopProductsPageModule})}},{path:"shop-filter",loadChildren:function(){return Promise.all([n.e(8592),n.e(676)]).then(n.bind(n,90676)).then(function(e){return e.ShopFilterPageModule})}},{path:"shop-order",loadChildren:function(){return n.e(947).then(n.bind(n,70947)).then(function(e){return e.ShopOrderPageModule})}},{path:"companys",loadChildren:function(){return n.e(1468).then(n.bind(n,81468)).then(function(e){return e.ShopCompanysPageModule})}},{path:"shop-flashsales",loadChildren:function(){return n.e(3469).then(n.bind(n,73469)).then(function(e){return e.ShopFlashsalesPageModule})}},{path:"shop-special",loadChildren:function(){return n.e(8625).then(n.bind(n,28625)).then(function(e){return e.ShopSpecialPageModule})}}],re=function(){var e=function e(){o(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.oAB({type:e}),e.\u0275inj=m.cJS({imports:[[u.Bz.forChild(oe)],u.Bz]}),e}(),se=n(26177),ae=function(){var e=function e(){o(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.oAB({type:e}),e.\u0275inj=m.cJS({imports:[[i.ez,r.u5,a.Pc,re,c.aw.forChild(),se.t]]}),e}()},15085:function(e,t,n){n.d(t,{d:function(){return u}});var i,r=n(15189),a=n(92340),c=n(37716),u=((i=function(){function e(t){o(this,e),this.requestApiService=t,this.SITE_PATH=a.h_.SITE_PATH,this.PRODUCT_API=this.SITE_PATH+"/eproduct/eproduct-api",this.COMMENT_API=this.SITE_PATH+"/eproduct/comment-api",this.DISCOUNT_API=this.SITE_PATH+"/eproduct/discount-api",this.ADDRESS_API=this.SITE_PATH+"/eproduct/address-api",this.ORDER_API=this.SITE_PATH+"/eproduct/order-api"}return s(e,[{key:"getHomeProducts",value:function(e){return this.requestApiService.getOutSite(this.PRODUCT_API+"&action=home&province_id="+e)}},{key:"getPromotionProducts",value:function(e,t,n){return this.requestApiService.postOutSite(this.PRODUCT_API+"&action=productDiscount&page="+t+"&province_id="+e,n)}},{key:"getTermProducts",value:function(e,t,n){return this.requestApiService.postOutSite(this.PRODUCT_API+"&action=productPerTerms&page="+t+"&province_id="+e,n)}},{key:"getShopProducts",value:function(e){return this.requestApiService.getOutSite(this.PRODUCT_API+"&action=productPerShops&shop_id="+e)}},{key:"getFilterOptions",value:function(e){return this.requestApiService.postOutSite(this.PRODUCT_API+"&action=optionFilter",e)}},{key:"getAProduct",value:function(e){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=get&id="+e)}},{key:"getListComment",value:function(e,t){return this.requestApiService.getOutSite(this.COMMENT_API+"?action=listAProduct&product_id="+e+"&page="+t)}},{key:"getListRep",value:function(e,t,n){return this.requestApiService.getOutSite(this.COMMENT_API+"?action=listRepComment&product_id="+t+"&id="+e+"&page="+n)}},{key:"likeComment",value:function(e){return this.requestApiService.getOutSite(this.COMMENT_API+"?action=like&id="+e)}},{key:"addComment",value:function(e){return this.requestApiService.postOutSite(this.COMMENT_API+"?action=add",e)}},{key:"getAShop",value:function(e){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=getShop&id="+e)}},{key:"getListDiscount",value:function(e){return this.requestApiService.getOutSite(this.DISCOUNT_API+"?action=list&shop_id="+e)}},{key:"getListAddress",value:function(){return this.requestApiService.getOutSite(this.ADDRESS_API+"?action=list")}},{key:"getAAddress",value:function(e){return this.requestApiService.getOutSite(this.ADDRESS_API+"?action=get&id="+e)}},{key:"addAddress",value:function(e){return this.requestApiService.postOutSite(this.ADDRESS_API+"?action=add",e)}},{key:"updateAddress",value:function(e,t){return this.requestApiService.postOutSite(this.ADDRESS_API+"?action=edit&id="+e,t)}},{key:"chooseDefaultAddress",value:function(e){return this.requestApiService.getOutSite(this.ADDRESS_API+"?action=chooseDefault&id="+e)}},{key:"deleteAddress",value:function(e){return this.requestApiService.getOutSite(this.ADDRESS_API+"?action=delete&id="+e)}},{key:"listUnitChild",value:function(e){return this.requestApiService.getOutSite(this.ADDRESS_API+"?action=getChildUnit&parent_id="+e)}},{key:"listOrder",value:function(){return this.requestApiService.getOutSite(this.ORDER_API+"?action=list")}},{key:"saveOrder",value:function(e){return this.requestApiService.postOutSite(this.ORDER_API+"?action=save",e)}},{key:"getOrder",value:function(e){return this.requestApiService.getOutSite(this.ORDER_API+"?action=detail&id="+e)}},{key:"rating",value:function(e){return this.requestApiService.postOutSite(this.ORDER_API+"?action=rating",e)}},{key:"listCompany",value:function(e){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=getListCompany&page="+e)}},{key:"listProductPerCompany",value:function(e,t){return this.requestApiService.postOutSite(this.PRODUCT_API+"?action=productPerCompany&page="+t,e)}},{key:"listTerm",value:function(){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=list-terms")}},{key:"searchByKeyword",value:function(e){return this.requestApiService.postOutSite(this.PRODUCT_API+"?action=listSearch",e)}},{key:"getAds",value:function(){return this.requestApiService.getOutSite(this.SITE_PATH+"/advertiment/load?mod=eshop")}},{key:"getShippingFee",value:function(e){return this.requestApiService.postOutSite(this.ORDER_API+"?action=getShippingFee",e)}},{key:"loadFlashsale",value:function(){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=loadFlashsale")}},{key:"saveCancelOrder",value:function(e,t){return this.requestApiService.postOutSite(this.ORDER_API+"?action=cancel&id="+e,t)}},{key:"loadFlashsaleFull",value:function(e,t,n){var i="";return t&&(i+="&term_id="+t),void 0!==n&&(i+="&fs_time="+n),this.requestApiService.getOutSite(this.PRODUCT_API+"?action=listFlashsales&page="+e+i)}},{key:"calPriceEvent",value:function(e,t,n){var i=e;switch(t){case"same":i=n;break;case"sale_percent":i=e*(100-n)/100;break;case"sale_price":i=e-n}return i<0&&(i=0),i}},{key:"getCodeEshop",value:function(e){return this.requestApiService.getOutSite(this.ORDER_API+"?action=checkCodeEshop&code="+e)}},{key:"geListCodeEshop",value:function(){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=listPromoteCode")}},{key:"getListProductSpecial",value:function(e,t){return this.requestApiService.getOutSite(this.PRODUCT_API+"?action=listProductSpecial&page="+e+"&term_id="+t)}}]),e}()).\u0275fac=function(e){return new(e||i)(c.LFG(r.$))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)}}])}();