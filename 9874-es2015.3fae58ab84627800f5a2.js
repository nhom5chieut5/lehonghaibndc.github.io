"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[9874],{26164:function(e,t,i){i.d(t,{J:function(){return c}});var n=i(15189),a=i(88002),s=i(37716),o=i(71239);let c=(()=>{class e{constructor(e,t){this.reqAPIService=e,this.dblocalservice=t,this.urlApi="/manager/company-api",this.urlApiDashboard="/manager/company-dashboard-api-mobie",this.listFarm=[],this.setCompany(this.dblocalservice.company)}setCode(e){this.ccode=e}setCompany(e){this.company=e}loadFarms(){return this.reqAPIService.get(this.urlApiDashboard+"?ccode="+this.ccode).pipe((0,a.U)(e=>e))}loadCompany(){return this.reqAPIService.get(this.urlApi+"?ccode="+this.ccode).pipe((0,a.U)(e=>e))}loadLog(e){return this.reqAPIService.get("/manager/log-api?action=company&id="+e).pipe((0,a.U)(e=>e))}loadSpecies(){return this.reqAPIService.get("/manager/farm-create-api?action=get-species").pipe((0,a.U)(e=>e))}createFarm(e){return this.reqAPIService.post("/manager/farm-create-api?action=farm-create&ccode="+this.ccode,e)}getInforCompany(){return this.reqAPIService.get("/manager/company-edit-api-mobie?action=get&cid="+this.company.id).pipe((0,a.U)(e=>e))}updateInforCompany(e){return this.reqAPIService.post("/manager/company-edit-api-mobie?action=edit&cid="+this.company.id,e)}registerCode(e){return this.reqAPIService.post("/manager/company-register-code-api",e)}registerCompany(e){return this.reqAPIService.post("/manager/company-register-api",e)}getFirstSetup(){return this.reqAPIService.get("/manager/company-first-setup-api&action=get-info&ccode="+this.ccode)}firstSetup(e){return this.reqAPIService.post("/manager/company-first-setup-api&action=setup&ccode="+this.ccode,e)}loadPackages(){return this.reqAPIService.get("/manager/company-packages-api-mobie?action=get&cid="+this.company.id).pipe((0,a.U)(e=>e))}getPackages(){return this.reqAPIService.get("/manager/company-packages-api-mobie?action=get-package&cid="+this.company.id).pipe((0,a.U)(e=>e))}upgradePackage(e){return this.reqAPIService.post("/manager/company-packages-api-mobie?action=edit&cid="+this.company.id,e).pipe((0,a.U)(e=>e))}renewPackage(e){return this.reqAPIService.post("/manager/company-packages-api-mobie?action=edit&cid="+this.company.id,e).pipe((0,a.U)(e=>e))}saveQuickCreate(e){return this.reqAPIService.post("/manager/quick-create-api",e)}getApi(e="",t="",i=""){return this.reqAPIService.get(`/${i}?action=`+e+t).pipe((0,a.U)(e=>e))}sendPost(e="",t={},i="",n=""){return this.reqAPIService.post(`/${n}?action=`+e+i,t).pipe((0,a.U)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(n.$),s.LFG(o.T))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},19874:function(e,t,i){i.d(t,{W:function(){return C}});var n=i(90665),a=i(26164),s=i(27887),o=i(26215),c=i(16738),r=i(62014),l=i(37716),p=i(84465),d=i(47063),u=i(81780),g=i(38583);const h=["slides"];function A(e,t){1&e&&l._UZ(0,"ion-icon",21)}function Z(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ion-chip",8),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().onSelectedSpecies(t)}),l.TgZ(1,"ion-label"),l._uU(2),l.qZA(),l.YNc(3,A,1,0,"ion-icon",9),l.qZA()}if(2&e){const e=t.$implicit,i=l.oxw();l.xp6(2),l.Oqu(e.name),l.xp6(1),l.Q6J("ngIf",e==i.speciesSelected)}}function m(e,t){1&e&&l._UZ(0,"ion-icon",21)}function f(e,t){1&e&&l._UZ(0,"ion-icon",21)}function O(e,t){1&e&&l._UZ(0,"ion-icon",22)}function _(e,t){1&e&&l._UZ(0,"ion-icon",22)}let C=(()=>{class e{constructor(e,t,i,a,l){this.companyService=e,this.toastService=t,this.navCtrl=i,this.translate=a,this.modalCtrl=l,this.listSpecies=[],this.saveWaiting=new s.E,this.$processing=new o.X(0),this.dateForm=new n.NI(c().format("YYYY-MM-DD")),this.maxDate=c(),this.minDate=c().subtract(180,"days"),this.numberFormatCost=new r.y("")}ngOnInit(){this.data={species:0,type_season:"intensive",procedureDefault:!0,startDate:c().format("YYYY-MM-DD"),prepareCost:0},this.getListSpecies()}formatCost(e){this.numberFormatCost.setValue(e.detail.value)}getListSpecies(){this.companyService.loadSpecies().subscribe(e=>{e.error||1!=e.status?this.toastService.warning(this.translate.instant("COMPANY_MOD.DATA_ERROR")):this.listSpecies=e.data},e=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}finishCreate(){this.data.prepareCost=this.numberFormatCost.realValue,this.data.startDate=(c(this.data.startDate).valueOf()/1e3).toString(),this.saveWaiting.setPending(!0),this.companyService.saveQuickCreate(this.data).subscribe(e=>{0==e.status&&e.message?this.toastService.warning(e.message):(this.$processing.next(1),this.modalCtrl.dismiss(e.data)),this.saveWaiting.setResult(!0)},e=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT")),this.saveWaiting.setResult(!1)})}onSelectedSpecies(e){this.speciesSelected=e,this.data.species=e.species_id,this.slides.lockSwipes(!1)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(a.J),l.Y36(p.k),l.Y36(d.SH),l.Y36(u.sK),l.Y36(d.IN))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-quick-create"]],viewQuery:function(e,t){if(1&e&&l.Gf(h,5),2&e){let e;l.iGM(e=l.CRH())&&(t.slides=e.first)}},decls:97,vars:75,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slides",""],[1,"w-100","ion-padding"],["color","primary",3,"click",4,"ngFor","ngForOf"],[1,"ion-padding"],["shape","round",3,"disabled","click"],["color","primary",3,"click"],["name","checkmark-circle-outline",4,"ngIf"],["shape","round",3,"click"],[1,"tip"],["color","medium","shape","round","fill","outline",3,"click"],["slot","start","name","checkmark-circle-outline",4,"ngIf"],["color","primary","shape","round","fill","outline",3,"click"],["shape","round","fill","clear",3,"click"],["slot","start","name","arrow-back"],["lines","inset"],[3,"displayFormat","placeholder","ngModel","min","max","ngModelChange"],["position","floating"],["inputmode","numeric",3,"value","ionChange"],["name","checkmark-circle-outline"],["slot","start","name","checkmark-circle-outline"]],template:function(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",0),l.TgZ(3,"ion-button",1),l.NdJ("click",function(){return t.modalCtrl.dismiss()}),l._UZ(4,"ion-icon",2),l.qZA(),l.qZA(),l.TgZ(5,"ion-title"),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(8,"ion-content"),l.TgZ(9,"ion-slides",null,3),l.TgZ(11,"ion-slide"),l.TgZ(12,"div",4),l.TgZ(13,"h1"),l._uU(14),l.ALo(15,"translate"),l.qZA(),l.TgZ(16,"div"),l.YNc(17,Z,4,2,"ion-chip",5),l.TgZ(18,"div",6),l.TgZ(19,"ion-button",7),l.NdJ("click",function(){return l.CHM(e),l.MAs(10).slideNext()}),l._uU(20),l.ALo(21,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(22,"ion-slide"),l.TgZ(23,"div",4),l.TgZ(24,"h1"),l._uU(25),l.ALo(26,"translate"),l.qZA(),l.TgZ(27,"div"),l.TgZ(28,"ion-chip",8),l.NdJ("click",function(){return t.data.type_season="intensive"}),l.TgZ(29,"ion-label"),l._uU(30),l.ALo(31,"translate"),l.qZA(),l.YNc(32,m,1,0,"ion-icon",9),l.qZA(),l.TgZ(33,"ion-chip",8),l.NdJ("click",function(){return t.data.type_season="extensive"}),l.TgZ(34,"ion-label"),l._uU(35),l.ALo(36,"translate"),l.qZA(),l.YNc(37,f,1,0,"ion-icon",9),l.qZA(),l.TgZ(38,"div",6),l.TgZ(39,"ion-button",10),l.NdJ("click",function(){return l.CHM(e),l.MAs(10).slideNext()}),l._uU(40),l.ALo(41,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(42,"ion-slide"),l.TgZ(43,"div",4),l.TgZ(44,"h1"),l._uU(45),l.ALo(46,"translate"),l.qZA(),l.TgZ(47,"p",11),l._uU(48),l.ALo(49,"translate"),l.TgZ(50,"b"),l._uU(51),l.qZA(),l._uU(52),l.ALo(53,"translate"),l.qZA(),l.TgZ(54,"div"),l.TgZ(55,"div"),l.TgZ(56,"ion-button",12),l.NdJ("click",function(){return t.data.procedureDefault=!1}),l.YNc(57,O,1,0,"ion-icon",13),l._uU(58),l.ALo(59,"translate"),l.qZA(),l.TgZ(60,"ion-button",14),l.NdJ("click",function(){return t.data.procedureDefault=!0}),l.YNc(61,_,1,0,"ion-icon",13),l._uU(62),l.ALo(63,"translate"),l.qZA(),l.qZA(),l.TgZ(64,"div",6),l.TgZ(65,"ion-button",15),l.NdJ("click",function(){return l.CHM(e),l.MAs(10).slidePrev()}),l._UZ(66,"ion-icon",16),l._uU(67),l.ALo(68,"translate"),l.qZA(),l.TgZ(69,"ion-button",10),l.NdJ("click",function(){return l.CHM(e),l.MAs(10).slideNext()}),l._uU(70),l.ALo(71,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(72,"ion-slide"),l.TgZ(73,"div",4),l.TgZ(74,"ion-item",17),l.TgZ(75,"ion-label"),l._uU(76),l.ALo(77,"translate"),l.qZA(),l.TgZ(78,"ion-datetime",18),l.NdJ("ngModelChange",function(e){return t.data.startDate=e}),l.ALo(79,"translate"),l.ALo(80,"translate"),l.qZA(),l.qZA(),l.TgZ(81,"ion-item",17),l.TgZ(82,"ion-label",19),l._uU(83),l.ALo(84,"translate"),l.qZA(),l.TgZ(85,"ion-input",20),l.NdJ("ionChange",function(e){return t.formatCost(e)}),l.qZA(),l.qZA(),l.TgZ(86,"p",11),l._uU(87),l.ALo(88,"translate"),l.qZA(),l.TgZ(89,"div",6),l.TgZ(90,"ion-button",15),l.NdJ("click",function(){return l.CHM(e),l.MAs(10).slidePrev()}),l._UZ(91,"ion-icon",16),l._uU(92),l.ALo(93,"translate"),l.qZA(),l.TgZ(94,"ion-button",7),l.NdJ("click",function(){return t.finishCreate()}),l._uU(95),l.ALo(96,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}2&e&&(l.xp6(6),l.Oqu(l.lcZ(7,33,"COMPANY_MOD.QUICK_START")),l.xp6(8),l.Oqu(l.lcZ(15,35,"COMPANY_MOD.RAISE")),l.xp6(3),l.Q6J("ngForOf",t.listSpecies),l.xp6(2),l.Q6J("disabled",!t.speciesSelected),l.xp6(1),l.hij("",l.lcZ(21,37,"NEXT")," "),l.xp6(5),l.Oqu(l.lcZ(26,39,"POND_MOD.TYPE_SEASON")),l.xp6(5),l.Oqu(l.lcZ(31,41,"POND_MOD.TYPE_SEASON_INTENSIVE")),l.xp6(2),l.Q6J("ngIf","intensive"==t.data.type_season),l.xp6(3),l.Oqu(l.lcZ(36,43,"POND_MOD.TYPE_SEASON_EXTENSIVE")),l.xp6(2),l.Q6J("ngIf","extensive"==t.data.type_season),l.xp6(3),l.hij("",l.lcZ(41,45,"NEXT")," "),l.xp6(5),l.Oqu(l.lcZ(46,47,"COMPANY_MOD.ADD_PROCEDURE")),l.xp6(3),l.hij("",l.lcZ(49,49,"COMPANY_MOD.SOME_PROCEDURE")," "),l.xp6(3),l.Oqu(null==t.speciesSelected?null:t.speciesSelected.name),l.xp6(1),l.hij(" ",l.lcZ(53,51,"COMPANY_MOD.WILL_ADD_PROCEDURE"),""),l.xp6(5),l.Q6J("ngIf",0==t.data.procedureDefault),l.xp6(1),l.hij(" ",l.lcZ(59,53,"COMPANY_MOD.NO")," "),l.xp6(3),l.Q6J("ngIf",1==t.data.procedureDefault),l.xp6(1),l.hij(" ",l.lcZ(63,55,"COMPANY_MOD.YES")," "),l.xp6(5),l.hij("",l.lcZ(68,57,"BACK")," "),l.xp6(3),l.Oqu(l.lcZ(71,59,"NEXT")),l.xp6(6),l.Oqu(l.lcZ(77,61,"POND_MOD.SEASON_CREATE_DATE")),l.xp6(2),l.Q6J("displayFormat",l.lcZ(79,63,"FORMAT_DATE_MOMENT"))("placeholder",l.lcZ(80,65,"SELECT_DATE"))("ngModel",t.data.startDate)("min",t.minDate.format("YYYY-MM-DD"))("max",t.maxDate.format("YYYY-MM-DD")),l.xp6(5),l.Oqu(l.lcZ(84,67,"POND_MOD.PREPARED_CODE")),l.xp6(2),l.Q6J("value",t.numberFormatCost.fakeView),l.xp6(2),l.hij(" ",l.lcZ(88,69,"POND_MOD.NOTE_PREPARE")," "),l.xp6(5),l.hij("",l.lcZ(93,71,"BACK")," "),l.xp6(2),l.Q6J("disabled",t.saveWaiting.pending),l.xp6(1),l.hij(" ",l.lcZ(96,73,"CONFIRM"),""))},directives:[d.Gu,d.sr,d.Sm,d.YG,d.gu,d.wd,d.W2,d.Hr,d.A$,g.sg,d.hM,d.Q$,g.O5,d.Ie,d.x4,d.QI,n.JJ,n.On,d.pK,d.j9],pipes:[u.X$],styles:["[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .w-100[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%]{font-size:.6em;font-style:italic;padding:10px}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .p-info[_ngcontent-%COMP%]{padding:5px 0}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .guide[_ngcontent-%COMP%]{position:absolute;top:20px;border-radius:5px;border:1px solid #ffeeba;left:10%;width:80%;color:#856404;background-color:#fff3cd;text-align:left}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .guide[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{font-size:.8em;padding:10px}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .guide[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .guide[_ngcontent-%COMP%]   .containter[_ngcontent-%COMP%]{vertical-align:middle;padding:10px}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .guide[_ngcontent-%COMP%]   .containter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.8em;padding:0 3px}"]}),e})()},62014:function(e,t,i){i.d(t,{y:function(){return n}});class n{constructor(e,t="currency"){this.setType(t),this.setInput(e),this.processConvert()}setInput(e){"string"!=typeof e&&(e=String(e)),this.input=e}setValue(e){"string"!=typeof e&&(e=String(e)),this.input=e,this.processConvert()}setType(e){this.type=e}processConvert(){let e,t,i=this.input.split(",").join("");if(i.indexOf(".")!=i.lastIndexOf(".")&&(i=i.slice(0,i.lastIndexOf("."))),-1!=i.indexOf(".")){t=i.indexOf(".");let n=i.split(".");i=n[0],"float"===this.type&&(e=n[1].substring(0,2))}else t=i.length;let n=new Array,a=1;for(var s=-3;Math.abs(s)<t;s-=3)n.push(i.slice(s,t+s+3)),a++;let o=i.slice(0,t-3*(a-1));o.length>0&&n.push(o),n.reverse();let c=i.replace(/,/gi,""),r="";this.fakeView=n.join(),"float"===this.type&&null!=e&&(this.fakeView=this.fakeView+"."+e,r=e),this.realValue=parseFloat(c+"."+r)}}}}]);