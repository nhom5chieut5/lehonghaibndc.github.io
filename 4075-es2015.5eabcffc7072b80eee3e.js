"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[4075],{14075:function(e,t,i){i.r(t),i.d(t,{HomePageModule:function(){return qe}});var n=i(38583),o=i(90665),s=i(47063),r=i(13619),a=i(64762),l=i(16738),c=i(55019),d=i(71847),g=i(37716),p=i(84465),m=i(81780);function u(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"ion-item",1),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(2).seenNoti(t)}),g.TgZ(1,"ion-label",12),g.TgZ(2,"h3"),g.TgZ(3,"ion-text",13),g._uU(4,"Admin"),g.qZA(),g._uU(5,"\xa0"),g.TgZ(6,"small"),g._uU(7),g.qZA(),g.qZA(),g.TgZ(8,"p"),g._uU(9),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit;g.xp6(7),g.Oqu(e.time),g.xp6(2),g.Oqu(e.content)}}function h(e,t){if(1&e&&(g.TgZ(0,"ion-list",6),g.TgZ(1,"ion-list-header"),g.TgZ(2,"ion-label"),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.qZA(),g.YNc(5,u,10,2,"ion-item",11),g.qZA()),2&e){const e=g.oxw();g.xp6(3),g.Oqu(g.lcZ(4,2,"SYSTEM")),g.xp6(2),g.Q6J("ngForOf",e.listNotiSystem)}}function f(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"ion-item",14),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw().seenNoti(t)}),g.TgZ(1,"ion-label",12),g.TgZ(2,"h3"),g.TgZ(3,"ion-text",15),g._uU(4),g.qZA(),g._uU(5,"\xa0"),g.TgZ(6,"small"),g._uU(7),g.qZA(),g.qZA(),g.TgZ(8,"p"),g._uU(9),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit;g.Q6J("routerLink",e.link),g.xp6(3),g.Q6J("color",0==e.seen?"primary":"dark"),g.xp6(1),g.Oqu(e.username),g.xp6(3),g.Oqu(e.time),g.xp6(2),g.Oqu(e.content)}}function Z(e,t){1&e&&(g.TgZ(0,"ion-item"),g.TgZ(1,"ion-label"),g.TgZ(2,"p"),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(3),g.Oqu(g.lcZ(4,1,"NOTIFICATIONS_MOD.EMPTY")))}let A=(()=>{class e{constructor(e,t,i,n,o,s){this.modalController=e,this.fcmService=t,this.toastService=i,this.alertController=n,this.translate=o,this.badge=s,this.page=0,this.listNoti=[],this.listNotiSystem=[]}ngOnInit(){this.getListNoti()}getListNoti(){this.fcmService.loadListNoti(this.page).subscribe(e=>{1==e.status?(e.data.system.forEach(e=>{e.time=l(new Date(1e3*e.add_time),"YYYYMMDD").fromNow(),this.listNotiSystem.push(e)}),e.data.user.forEach(e=>{e.time=l(new Date(1e3*e.add_time),"YYYYMMDD").fromNow(),e.link=this.filterLink(e.mod_name,e.item_code),this.listNoti.push(e)})):this.toastService.warning(e.error)})}filterLink(e,t){switch(e){case"farm":return"/farm/"+t+"/pond";case"pond":return"/pond/"+t;case"store_farm":return"/store/"+t;case"money":return"/money/"+t;default:return"/tabs/management"}}seenNoti(e){this.fcmService.seen(e.mod_name,e.id).subscribe(e=>{1==e.status?(console.log("seen"),this.fcmService.reload.next(!0)):console.log("no seen")}),this.modalController.dismiss()}loadData(e){this.page+=1,this.getListNoti(),setTimeout(()=>{console.log("Done"),e.target.complete()},500)}seeAll(){this.fcmService.seeAll().subscribe(e=>{1==e.status?(this.badge.clear(),this.toastService.success(this.translate.instant("ACCOUNT_MOD.SEEN_ALL")),this.listNoti=[],this.listNotiSystem=[],this.fcmService.reload.next(!0)):this.toastService.warning(e.error)})}presentAlertConfirm(){return(0,a.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Confirm!",message:this.translate.instant("ACCOUNT_MOD.CONFIRM_SEEN"),buttons:[{text:"NO",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"YES",handler:()=>{this.seeAll()}}]})).present()})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(s.IN),g.Y36(c.E),g.Y36(p.k),g.Y36(s.Br),g.Y36(m.sK),g.Y36(d.C))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-notifications"]],decls:19,vars:9,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],["color","primary",3,"click"],["lines","none",4,"ngIf"],["lines","none"],[3,"routerLink","click",4,"ngFor","ngForOf"],[4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","dots"],[3,"click",4,"ngFor","ngForOf"],[1,"ion-text-wrap"],["color","primary"],[3,"routerLink","click"],[3,"color"]],template:function(e,t){1&e&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",0),g.TgZ(3,"ion-button",1),g.NdJ("click",function(){return t.modalController.dismiss()}),g._UZ(4,"ion-icon",2),g.qZA(),g.qZA(),g.TgZ(5,"ion-title"),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.TgZ(8,"ion-buttons",3),g.TgZ(9,"ion-button",4),g.NdJ("click",function(){return t.presentAlertConfirm()}),g._uU(10),g.ALo(11,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"ion-content"),g.YNc(13,h,6,4,"ion-list",5),g.TgZ(14,"ion-list",6),g.YNc(15,f,10,5,"ion-item",7),g.YNc(16,Z,5,3,"ion-item",8),g.qZA(),g.TgZ(17,"ion-infinite-scroll",9),g.NdJ("ionInfinite",function(e){return t.loadData(e)}),g._UZ(18,"ion-infinite-scroll-content",10),g.qZA(),g.qZA()),2&e&&(g.xp6(6),g.Oqu(g.lcZ(7,5,"NOTIFICATIONS_MOD.NOTI")),g.xp6(4),g.Oqu(g.lcZ(11,7,"ACCOUNT_MOD.SEE_ALL")),g.xp6(3),g.Q6J("ngIf",t.listNotiSystem.length>0),g.xp6(2),g.Q6J("ngForOf",t.listNoti),g.xp6(1),g.Q6J("ngIf",0==t.listNotiSystem.length&&0==t.listNoti.length))},directives:[s.Gu,s.sr,s.Sm,s.YG,s.gu,s.wd,s.W2,n.O5,s.q_,n.sg,s.ju,s.MB,s.yh,s.Q$,s.Ie,s.yW,s.YI,r.rH],pipes:[m.X$],styles:[""]}),e})();var _=i(27887),v=i(15189);let O=(()=>{class e{constructor(e){this.reqAPIService=e,this.URL="/manager/home-api"}loadDashboard(){return this.reqAPIService.get(this.URL)}}return e.\u0275fac=function(t){return new(t||e)(g.LFG(v.$))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=i(26164);function C(e,t){if(1&e&&(g.TgZ(0,"ion-text",16),g.TgZ(1,"small"),g._uU(2),g.qZA(),g.qZA()),2&e){const e=g.oxw(2);g.xp6(2),g.Oqu(e.message)}}function q(e,t){1&e&&(g.TgZ(0,"span"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e&&(g.xp6(1),g.Oqu(g.lcZ(2,1,"COMPANY_MOD.CONFIRM")))}function T(e,t){1&e&&g._UZ(0,"ion-spinner",17)}function b(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"ion-card",5),g.TgZ(2,"ion-card-header"),g.TgZ(3,"p"),g._uU(4),g.ALo(5,"translate"),g.qZA(),g.qZA(),g.TgZ(6,"ion-card-content"),g.TgZ(7,"form",6),g._UZ(8,"ion-input",7),g.qZA(),g.YNc(9,C,3,1,"ion-text",8),g.qZA(),g.TgZ(10,"ion-grid"),g.TgZ(11,"ion-row",9),g.TgZ(12,"ion-col"),g.TgZ(13,"div",10),g.TgZ(14,"ion-button",11),g.NdJ("click",function(){return g.CHM(e),g.oxw().checkCode(!1)}),g._uU(15),g.ALo(16,"translate"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(17,"ion-col"),g.TgZ(18,"div",12),g.TgZ(19,"ion-button",13),g.NdJ("click",function(){return g.CHM(e),g.oxw().checkCode(!0)}),g.YNc(20,q,3,3,"span",4),g.YNc(21,T,1,0,"ion-spinner",14),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(22,"p",15),g._uU(23),g.ALo(24,"translate"),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(4),g.Oqu(g.lcZ(5,9,"COMPANY_MOD.SALE_CODE")),g.xp6(3),g.Q6J("formGroup",e.codeForm),g.xp6(1),g.Q6J("placeholder",e.translate.instant("COMPANY_MOD.ENTER_CODE")),g.xp6(1),g.Q6J("ngIf",e.message),g.xp6(6),g.hij(" ",g.lcZ(16,11,"COMPANY_MOD.IGNORE"),""),g.xp6(4),g.Q6J("disabled",e.codeForm.invalid||e.checkingFlag.pending),g.xp6(1),g.Q6J("ngIf",!e.checkingFlag.pending),g.xp6(1),g.Q6J("ngIf",e.checkingFlag.pending),g.xp6(2),g.Oqu(g.lcZ(24,13,"COMPANY_MOD.IF_NO_CODE"))}}function M(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"ion-item",23),g.TgZ(1,"ion-label"),g.TgZ(2,"p"),g._uU(3),g.ALo(4,"translate"),g.TgZ(5,"strong"),g._uU(6),g.qZA(),g._uU(7),g.ALo(8,"translate"),g.qZA(),g.qZA(),g.TgZ(9,"ion-button",24),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).orderCodeItem=null}),g._uU(10),g.ALo(11,"translate"),g.qZA(),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(3),g.hij("",g.lcZ(4,5,"COMPANY_MOD.PRO_CODE")," "),g.xp6(3),g.hij("#",e.orderCodeItem.code,""),g.xp6(1),g.AsE(" ",g.lcZ(8,7,"COMPANY_MOD.FROM")," ",e.orderCodeItem.agency," "),g.xp6(3),g.hij(" ",g.lcZ(11,9,"COMPANY_MOD.DELETE")," ")}}function S(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"ion-item",23),g.TgZ(1,"ion-label"),g.TgZ(2,"p"),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.qZA(),g.TgZ(5,"ion-button",24),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).isCheck=!1}),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.qZA()}2&e&&(g.xp6(3),g.Oqu(g.lcZ(4,2,"COMPANY_MOD.RE_PRO_CODE")),g.xp6(3),g.hij(" ",g.lcZ(7,4,"COMPANY_MOD.ENTER_CODE")," "))}function N(e,t){1&e&&(g.TgZ(0,"div",25),g._UZ(1,"ion-spinner",17),g.qZA())}function y(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"div",26),g.TgZ(2,"ion-text",27),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.qZA(),g.TgZ(5,"ion-list"),g.TgZ(6,"form",6),g.TgZ(7,"ion-item"),g.TgZ(8,"ion-label",28),g._uU(9),g.ALo(10,"translate"),g.qZA(),g._UZ(11,"ion-input",29),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"ion-item",23),g.TgZ(13,"ion-button",30),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).showTerm()}),g._UZ(14,"ion-icon",31),g.qZA(),g.TgZ(15,"ion-label"),g.TgZ(16,"p"),g.TgZ(17,"a",32),g._uU(18),g.ALo(19,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(20,"div",25),g.TgZ(21,"ion-button",33),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).register()}),g._uU(22),g.ALo(23,"translate"),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(3),g.hij(" ",g.lcZ(4,7,"COMPANY_MOD.FO_NOT_AUTH")," "),g.xp6(3),g.Q6J("formGroup",e.registerForm),g.xp6(3),g.Oqu(g.lcZ(10,9,"COMPANY_MOD.NAME_FO")),g.xp6(8),g.MGl("href","https://farmext.com/about/",e.translate.currentLang,"/terms/",g.LSH),g.xp6(1),g.Oqu(g.lcZ(19,11,"COMPANY_MOD.TERMS")),g.xp6(3),g.Q6J("disabled",e.registerForm.controls.name.hasError("required")||e.registerForm.controls.name.hasError("minlength")),g.xp6(1),g.hij(" ",g.lcZ(23,13,"COMPANY_MOD.CREATE"),"")}}function L(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"div",26),g.TgZ(2,"ion-text",27),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.qZA(),g.TgZ(5,"ion-list"),g.TgZ(6,"form",6),g.TgZ(7,"ion-item"),g.TgZ(8,"ion-label",28),g._uU(9),g.ALo(10,"translate"),g.qZA(),g._UZ(11,"ion-input",34),g.qZA(),g.TgZ(12,"ion-item"),g.TgZ(13,"ion-label",28),g._uU(14),g.ALo(15,"translate"),g.qZA(),g._UZ(16,"ion-input",35),g.qZA(),g.TgZ(17,"ion-item"),g.TgZ(18,"ion-label",28),g._uU(19),g.ALo(20,"translate"),g.qZA(),g._UZ(21,"ion-input",36),g.qZA(),g.TgZ(22,"ion-item"),g.TgZ(23,"ion-label",28),g._uU(24),g.ALo(25,"translate"),g.qZA(),g._UZ(26,"ion-input",37),g.qZA(),g.TgZ(27,"ion-item"),g.TgZ(28,"ion-label",28),g._uU(29,"Email"),g.qZA(),g._UZ(30,"ion-input",38),g.qZA(),g.TgZ(31,"ion-item"),g.TgZ(32,"ion-label",28),g._uU(33,"Website"),g.qZA(),g._UZ(34,"ion-input",39),g.qZA(),g.qZA(),g.qZA(),g.TgZ(35,"ion-item",23),g.TgZ(36,"ion-button",30),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).showTerm()}),g._UZ(37,"ion-icon",31),g.qZA(),g.TgZ(38,"ion-label"),g.TgZ(39,"p"),g.TgZ(40,"a",32),g._uU(41),g.ALo(42,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(43,"div",25),g.TgZ(44,"ion-button",33),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).register()}),g._uU(45),g.ALo(46,"translate"),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=g.oxw(2);g.xp6(3),g.hij(" ",g.lcZ(4,10,"COMPANY_MOD.CONTACT_AUTH")," "),g.xp6(3),g.Q6J("formGroup",e.registerForm),g.xp6(3),g.Oqu(g.lcZ(10,12,"COMPANY_MOD.DISPLAY_NAME")),g.xp6(5),g.Oqu(g.lcZ(15,14,"COMPANY_MOD.FULL_NAME")),g.xp6(5),g.Oqu(g.lcZ(20,16,"COMPANY_MOD.ADDRESS")),g.xp6(5),g.Oqu(g.lcZ(25,18,"COMPANY_MOD.PHONE")),g.xp6(16),g.MGl("href","https://farmext.com/about/",e.translate.currentLang,"/terms/",g.LSH),g.xp6(1),g.Oqu(g.lcZ(42,20,"COMPANY_MOD.TERMS")),g.xp6(3),g.Q6J("disabled",e.registerForm.invalid),g.xp6(1),g.hij(" ",g.lcZ(46,22,"COMPANY_MOD.CREATE"),"")}}function k(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"ion-segment",18),g.NdJ("ionChange",function(t){return g.CHM(e),g.oxw().segmentChanged(t)}),g.TgZ(2,"ion-segment-button",19),g.TgZ(3,"ion-label"),g._uU(4),g.ALo(5,"translate"),g.qZA(),g.qZA(),g.TgZ(6,"ion-segment-button",20),g.TgZ(7,"ion-label"),g._uU(8),g.ALo(9,"translate"),g.qZA(),g.qZA(),g.qZA(),g.YNc(10,M,12,11,"ion-item",21),g.YNc(11,S,8,6,"ion-item",21),g.YNc(12,N,2,0,"div",22),g.YNc(13,y,24,15,"div",4),g.YNc(14,L,47,24,"div",4),g.qZA()}if(2&e){const e=g.oxw();g.xp6(4),g.Oqu(g.lcZ(5,7,"COMPANY_MOD.PERSONAL")),g.xp6(4),g.Oqu(g.lcZ(9,9,"COMPANY_MOD.BUSINESS")),g.xp6(2),g.Q6J("ngIf",e.orderCodeItem),g.xp6(1),g.Q6J("ngIf",null==e.orderCodeItem),g.xp6(1),g.Q6J("ngIf",e.checkingFlag.pending),g.xp6(1),g.Q6J("ngIf",1==e.typeCompany),g.xp6(1),g.Q6J("ngIf",2==e.typeCompany)}}let P=(()=>{class e{constructor(e,t,i,n,s){this.modalController=e,this.companyService=t,this.toastService=i,this.alertController=n,this.translate=s,this.codeForm=new o.cw({code:new o.NI("",o.kI.required)}),this.registerForm=new o.cw({name:new o.NI("",[o.kI.required,o.kI.minLength(3)]),address:new o.NI("",o.kI.required),fullname:new o.NI("",o.kI.required),phone:new o.NI("",o.kI.required),email:new o.NI("",[o.kI.required,o.kI.email]),website:new o.NI("")}),this.savingFlag=new _.E,this.typeCompany=2,this.isCheck=!1,this.message="",this.checkingFlag=new _.E}ngOnInit(){}buildForm(){1==this.typeCompany?(this.registerForm.controls.fullname.clearValidators(),this.registerForm.controls.address.clearValidators(),this.registerForm.controls.telephone.clearValidators(),this.registerForm.controls.email.clearValidators()):(this.registerForm.controls.fullname.setValidators(o.kI.required),this.registerForm.controls.address.setValidators(o.kI.required),this.registerForm.controls.telephone.setValidators(o.kI.required),this.registerForm.controls.email.setValidators(o.kI.required))}segmentChanged(e){this.typeCompany=e.detail.value}register(){this.savingFlag.setStart(!0);let e={name:this.registerForm.value.name,fullname:this.registerForm.value.fullname,address:this.registerForm.value.address,phone:this.registerForm.value.phone,email:this.registerForm.value.email,website:this.registerForm.value.website,orderCode:this.codeForm.value.code,type:"personal"};this.registerForm.value.website&&this.registerForm.value.website.length>0&&(this.registerForm.value.website.includes("http")||(e.website="http://"+this.registerForm.value.website)),2==this.typeCompany&&(e.type="enterprise"),this.companyService.registerCompany(e).pipe().subscribe(t=>{1==t.status?(this.toastService.success(this.translate.instant("COMPANY_MOD.NOTI_CREATE_BUSSINESS")),"enterprise"==e.type?this.alertEnterprise():this.modalController.dismiss(!0)):this.toastService.warning(t.error),this.savingFlag.setResult(!0)},()=>{this.savingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}showTerm(){return(0,a.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.translate.instant("COMPANY_MOD.CONFIRM"),message:this.translate.instant("COMPANY_MOD.ACCEPT_TERMS"),buttons:["OK"]})).present()})}checkCode(e){0==e?this.isCheck=!0:(this.message="",this.checkingFlag.setStart(!0),this.companyService.registerCode(this.codeForm.value).pipe().subscribe(e=>{1==e.status?(this.isCheck=!0,this.orderCodeItem=e.data):this.message=e.message,this.checkingFlag.setResult(!0)},()=>{this.checkingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))}))}alertEnterprise(){return(0,a.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.translate.instant("COMPANY_MOD.ATTENTION"),message:this.translate.instant("COMPANY_MOD.DETAIL_ATTENTION"),buttons:[{text:"OK",handler:()=>{this.modalController.dismiss()}}]})).present()})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(s.IN),g.Y36(x.J),g.Y36(p.k),g.Y36(s.Br),g.Y36(m.sK))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-company-register"]],decls:11,vars:5,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding"],[4,"ngIf"],["mode","ios"],[3,"formGroup"],["formControlName","code",1,"code-input",3,"placeholder"],["color","danger",4,"ngIf"],[1,"ion-justify-content-between"],[1,"ion-text-start"],["size","default","fill","clear","slot","start","color","medium",3,"click"],[1,"ion-text-end"],["size","default","fill","clear","slot","end",3,"disabled","click"],["name","dots",4,"ngIf"],[1,"ion-text-center","sm-text"],["color","danger"],["name","dots"],["value","2",3,"ionChange"],["value","1"],["value","2"],["lines","none",4,"ngIf"],["class","ion-padding ion-text-center",4,"ngIf"],["lines","none"],["fill","outline",3,"click"],[1,"ion-padding","ion-text-center"],[1,"ion-padding","infomation"],["color","medium"],["position","floating"],["formControlName","name"],["fill","clear","slot","start",3,"click"],["name","checkmark-circle-outline"],[3,"href"],["shape","round",3,"disabled","click"],["type","text","formControlName","name"],["type","text","formControlName","fullname"],["type","text","formControlName","address"],["type","tel","inputmode","tel","formControlName","phone"],["type","email","inputmode","email","formControlName","email"],["type","url","inputmode","url","formControlName","website"]],template:function(e,t){1&e&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",0),g.TgZ(3,"ion-button",1),g.NdJ("click",function(){return t.modalController.dismiss(!1)}),g._UZ(4,"ion-icon",2),g.qZA(),g.qZA(),g.TgZ(5,"ion-title"),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(8,"ion-content",3),g.YNc(9,b,25,15,"div",4),g.YNc(10,k,15,11,"div",4),g.qZA()),2&e&&(g.xp6(6),g.Oqu(g.lcZ(7,3,"COMPANY_MOD.CREATE_FARM_OWNER")),g.xp6(3),g.Q6J("ngIf",!t.isCheck),g.xp6(1),g.Q6J("ngIf",t.isCheck))},directives:[s.Gu,s.sr,s.Sm,s.YG,s.gu,s.wd,s.W2,n.O5,s.PM,s.Zi,s.FN,o._Y,o.JL,o.sg,s.pK,s.j9,o.JJ,o.u,s.jY,s.Nd,s.wI,s.yW,s.PQ,s.cJ,s.QI,s.GO,s.Q$,s.Ie,s.q_],pipes:[m.X$],styles:[".code-input[_ngcontent-%COMP%]{padding:5px 20px!important;border:1px solid #f2f2f2;border-radius:10px;letter-spacing:5px;font-size:1.4em;text-align:center}.infomation[_ngcontent-%COMP%]{font-size:.8}a[_ngcontent-%COMP%]{text-decoration:none;color:silver}"]}),e})();var w=i(62166),E=i(3356),D=i(50384),U=i(19874),Y=i(2426),I=i(51937),F=i(92340),J=i(80272),R=i(38605),Q=i(23211),G=i(71239),H=i(79503);let B=(()=>{class e{transform(e,t,i){return e.filter(e=>e.infor[t]===i)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=g.Yjl({name:"pondFilter",type:e,pure:!0}),e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac}),e})();function $(e,t){if(1&e&&(g.TgZ(0,"ion-button",13),g._UZ(1,"ion-icon",14),g.qZA()),2&e){const e=g.oxw();g.Q6J("routerLink","/company/"+(null==e.dbLocalService.company?null:e.dbLocalService.company.code))}}function j(e,t){if(1&e&&(g.TgZ(0,"span",15),g._uU(1),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Oqu(e.numNotification)}}function z(e,t){1&e&&(g.TgZ(0,"div",16),g._UZ(1,"ion-spinner",17),g.qZA())}function V(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"ion-slide",24),g._UZ(2,"img",25),g.qZA(),g.BQk()),2&e){const e=t.$implicit,i=g.oxw(2);g.xp6(2),g.Q6J("src",i.PATH_IMAGE+"/upload/season/"+e.infor.current_season+"/ge_image/"+e.infor.image,g.LSH)}}function W(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",18),g.TgZ(1,"ion-slides",19,20),g.NdJ("ionSlideDidChange",function(){return g.CHM(e),g.oxw().slideChangedImage()}),g.YNc(3,V,3,1,"ng-container",21),g.qZA(),g.TgZ(4,"div",22),g._UZ(5,"ion-ripple-effect"),g.TgZ(6,"p",23),g._uU(7),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.MGl("routerLink","/pond/",e.listPondStart[e.indexShow].infor.code,""),g.xp6(1),g.Q6J("options",e.slideOpts),g.xp6(2),g.Q6J("ngForOf",e.listPondStart),g.xp6(3),g.Q6J("innerHTML",e.listPondStart[e.indexShow].infor.description?e.listPondStart[e.indexShow].infor.description:"Ao "+e.listPondStart[e.indexShow].infor.name,g.oJD),g.xp6(1),g.Oqu(e.listPondStart[e.indexShow].description)}}function K(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",27),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).quickActionFarmReport()}),g._UZ(1,"ion-ripple-effect"),g._UZ(2,"img",34),g.TgZ(3,"div",29),g.TgZ(4,"small"),g.TgZ(5,"b"),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}2&e&&(g.xp6(6),g.Oqu(g.lcZ(7,1,"LAB_MOD.REPORT")))}function X(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div",27),g.NdJ("click",function(){return g.CHM(e),g.oxw(2).quickActionCategory()}),g._UZ(1,"ion-ripple-effect"),g._UZ(2,"img",35),g.TgZ(3,"div",29),g.TgZ(4,"small"),g.TgZ(5,"b"),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}2&e&&(g.xp6(6),g.Oqu(g.lcZ(7,1,"COMPANY_MOD.MENU")))}function ee(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"div",26),g.TgZ(2,"div",27),g.NdJ("click",function(){return g.CHM(e),g.oxw().quickRedirectPond()}),g._UZ(3,"ion-ripple-effect"),g._UZ(4,"img",28),g.TgZ(5,"div",29),g.TgZ(6,"small"),g.TgZ(7,"b"),g._uU(8),g.ALo(9,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(10,"div",27),g.NdJ("click",function(){return g.CHM(e),g.oxw().quickRedirectSeason()}),g._UZ(11,"ion-ripple-effect"),g._UZ(12,"img",30),g.TgZ(13,"div",29),g.TgZ(14,"small"),g.TgZ(15,"b"),g._uU(16),g.ALo(17,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(18,"div",27),g.NdJ("click",function(){return g.CHM(e),g.oxw().quickRedirectStore()}),g._UZ(19,"ion-ripple-effect"),g._UZ(20,"img",31),g.TgZ(21,"div",29),g.TgZ(22,"small"),g.TgZ(23,"b"),g._uU(24),g.ALo(25,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(26,"div",27),g.NdJ("click",function(){return g.CHM(e),g.oxw().quickRedirectMoney()}),g._UZ(27,"ion-ripple-effect"),g._UZ(28,"img",32),g.TgZ(29,"div",29),g.TgZ(30,"small"),g.TgZ(31,"b"),g._uU(32),g.ALo(33,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(34,K,8,3,"div",33),g.YNc(35,X,8,3,"div",33),g.qZA(),g.qZA()}if(2&e){const e=g.oxw();g.xp6(8),g.Oqu(g.lcZ(9,6,"DEVICE_MOD.ALBUM")),g.xp6(8),g.Oqu(g.lcZ(17,8,"POND_MOD.SEASON")),g.xp6(8),g.Oqu(g.lcZ(25,10,"STORE")),g.xp6(8),g.Oqu(g.lcZ(33,12,"MONEY")),g.xp6(2),g.Q6J("ngIf",e.dbLocalService.farms.length>0),g.xp6(1),g.Q6J("ngIf",e.dbLocalService.company)}}function te(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.AsE("",e.infor.date_start," ",g.lcZ(2,2,"POND_MOD.DAY"),"")}}function ie(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.AsE("",e.infor.start_seed," ",g.lcZ(2,2,"POND_MOD.OLD"),"")}}function ne(e,t){1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e&&(g.xp6(1),g.Oqu(g.lcZ(2,1,"POND_MOD.EMPTY")))}function oe(e,t){if(1&e&&(g.TgZ(0,"div",41),g._UZ(1,"ion-ripple-effect"),g.TgZ(2,"div",42),g._UZ(3,"img",25),g.TgZ(4,"div",43),g.YNc(5,te,3,4,"small",10),g.YNc(6,ie,3,4,"small",10),g.YNc(7,ne,3,3,"small",10),g.qZA(),g.qZA(),g.TgZ(8,"div"),g.TgZ(9,"small"),g.TgZ(10,"b"),g._uU(11),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){const e=t.$implicit,i=g.oxw(2);g.MGl("routerLink","/pond/",e.infor.code,""),g.xp6(3),g.Q6J("src",i.PATH_IMAGE+"/upload/season/"+e.infor.current_season+"/thumb_image/"+e.infor.image,g.LSH),g.xp6(2),g.Q6J("ngIf",1===e.infor.existSeason&&0===e.infor.start_seed),g.xp6(1),g.Q6J("ngIf",1===e.infor.existSeason&&e.infor.start_seed>0),g.xp6(1),g.Q6J("ngIf",0===e.infor.existSeason),g.xp6(4),g.Oqu(e.infor.name)}}function se(e,t){if(1&e&&(g.TgZ(0,"div",36),g.TgZ(1,"div",37),g.TgZ(2,"p",38),g.TgZ(3,"b"),g._uU(4),g.ALo(5,"translate"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"div",39),g.YNc(7,oe,12,6,"div",40),g.qZA(),g.qZA()),2&e){const e=g.oxw();g.xp6(4),g.Oqu(g.lcZ(5,2,"POND_MOD.FAVORITE")),g.xp6(3),g.Q6J("ngForOf",e.dbLocalService.listFavoritePond())}}function re(e,t){if(1&e&&(g.TgZ(0,"div",47),g.TgZ(1,"span"),g._uU(2,"Tr\u1ea1i tr\u1ed1ng"),g.qZA(),g.qZA()),2&e){const e=g.oxw().$implicit;g.MGl("routerLink","/farm/",null==e?null:e.infor.code,"")}}function ae(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.AsE("",e.infor.date_start," ",g.lcZ(2,2,"POND_MOD.DAY"),"")}}function le(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.AsE("",e.infor.start_seed," ",g.lcZ(2,2,"POND_MOD.OLD"),"")}}function ce(e,t){1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e&&(g.xp6(1),g.Oqu(g.lcZ(2,1,"POND_MOD.EMPTY")))}function de(e,t){if(1&e&&(g.TgZ(0,"div",41),g._UZ(1,"ion-ripple-effect"),g.TgZ(2,"div",42),g._UZ(3,"img",25),g.TgZ(4,"div",43),g.YNc(5,ae,3,4,"small",10),g.YNc(6,le,3,4,"small",10),g.YNc(7,ce,3,3,"small",10),g.qZA(),g.qZA(),g.TgZ(8,"div"),g.TgZ(9,"small"),g.TgZ(10,"b"),g._uU(11),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){const e=t.$implicit,i=g.oxw(2);g.MGl("routerLink","/pond/",e.infor.code,""),g.xp6(3),g.Q6J("src",i.PATH_IMAGE+"/upload/season/"+e.infor.current_season+"/thumb_image/"+e.infor.image,g.LSH),g.xp6(2),g.Q6J("ngIf",1===e.infor.existSeason&&0===e.infor.start_seed),g.xp6(1),g.Q6J("ngIf",1===e.infor.existSeason&&e.infor.start_seed>0),g.xp6(1),g.Q6J("ngIf",0===e.infor.existSeason),g.xp6(4),g.Oqu(e.infor.name)}}function ge(e,t){if(1&e&&(g.TgZ(0,"div",36),g.TgZ(1,"div",44),g.TgZ(2,"p",38),g.TgZ(3,"b"),g._uU(4),g.qZA(),g._UZ(5,"ion-icon",45),g.qZA(),g.qZA(),g.YNc(6,re,3,1,"div",46),g.TgZ(7,"div",39),g.YNc(8,de,12,6,"div",40),g.ALo(9,"pondFilter"),g.qZA(),g.qZA()),2&e){const e=t.$implicit,i=g.oxw();g.xp6(1),g.MGl("routerLink","/farm/",null==e?null:e.infor.code,""),g.xp6(3),g.Oqu(e.infor.name),g.xp6(2),g.Q6J("ngIf",i.checkFarmEmpty(e.infor.id)),g.xp6(2),g.Q6J("ngForOf",g.Dn7(9,4,i.dbLocalService.ponds,"farm_id",e.infor.id))}}function pe(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.AsE("",e.infor.date_start," ",g.lcZ(2,2,"POND_MOD.DAY"),"")}}function me(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.AsE("",e.infor.start_seed," ",g.lcZ(2,2,"POND_MOD.OLD"),"")}}function ue(e,t){1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e&&(g.xp6(1),g.Oqu(g.lcZ(2,1,"POND_MOD.EMPTY")))}function he(e,t){if(1&e&&(g.TgZ(0,"div",41),g._UZ(1,"ion-ripple-effect"),g.TgZ(2,"div",42),g._UZ(3,"img",25),g.TgZ(4,"div",43),g.YNc(5,pe,3,4,"small",10),g.YNc(6,me,3,4,"small",10),g.YNc(7,ue,3,3,"small",10),g.qZA(),g.qZA(),g.TgZ(8,"div"),g.TgZ(9,"small"),g.TgZ(10,"b"),g._uU(11),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){const e=t.$implicit,i=g.oxw(2);g.MGl("routerLink","/pond/",e.infor.code,""),g.xp6(3),g.Q6J("src",i.PATH_IMAGE+"/upload/season/"+e.infor.current_season+"/thumb_image/"+e.infor.image,g.LSH),g.xp6(2),g.Q6J("ngIf",1===e.infor.existSeason&&0===e.infor.start_seed),g.xp6(1),g.Q6J("ngIf",1===e.infor.existSeason&&e.infor.start_seed>0),g.xp6(1),g.Q6J("ngIf",0===e.infor.existSeason),g.xp6(4),g.Oqu(e.infor.name)}}function fe(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.AsE("",e.infor.date_start," ",g.lcZ(2,2,"POND_MOD.DAY"),"")}}function Ze(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){const e=g.oxw().$implicit;g.xp6(1),g.AsE("",e.infor.start_seed," ",g.lcZ(2,2,"POND_MOD.OLD"),"")}}function Ae(e,t){1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e&&(g.xp6(1),g.Oqu(g.lcZ(2,1,"POND_MOD.EMPTY")))}function _e(e,t){if(1&e&&(g.TgZ(0,"div",41),g._UZ(1,"ion-ripple-effect"),g.TgZ(2,"div",42),g._UZ(3,"img",25),g.TgZ(4,"div",43),g.YNc(5,fe,3,4,"small",10),g.YNc(6,Ze,3,4,"small",10),g.YNc(7,Ae,3,3,"small",10),g.qZA(),g.qZA(),g.TgZ(8,"div"),g.TgZ(9,"small"),g.TgZ(10,"b"),g._uU(11),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){const e=t.$implicit,i=g.oxw(2);g.MGl("routerLink","/pond/",e.infor.code,""),g.xp6(3),g.Q6J("src",i.PATH_IMAGE+"/upload/season/"+e.infor.current_season+"/thumb_image/"+e.infor.image,g.LSH),g.xp6(2),g.Q6J("ngIf",1===e.infor.existSeason&&0===e.infor.start_seed),g.xp6(1),g.Q6J("ngIf",1===e.infor.existSeason&&e.infor.start_seed>0),g.xp6(1),g.Q6J("ngIf",0===e.infor.existSeason),g.xp6(4),g.Oqu(e.infor.name)}}function ve(e,t){if(1&e&&(g.TgZ(0,"div",36),g.TgZ(1,"div",37),g.TgZ(2,"p",48),g.TgZ(3,"b"),g._uU(4),g.ALo(5,"translate"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"div",39),g.YNc(7,he,12,6,"div",40),g.YNc(8,_e,12,6,"div",40),g.qZA(),g.qZA()),2&e){const e=g.oxw();g.xp6(4),g.Oqu(g.lcZ(5,3,"POND_MOD.POND_MANAGEMENT")),g.xp6(3),g.Q6J("ngForOf",e.dbLocalService.filterPond("permission","pond_operator")),g.xp6(1),g.Q6J("ngForOf",e.dbLocalService.filterPond("permission","pond_manager"))}}let Oe=(()=>{class e{constructor(e,t,i,n,o,s,r,a,l,c,d,g,p,m,u,h,f){this.modalController=e,this.homeService=t,this.toastService=i,this.storage=n,this.fcmService=o,this.translate=s,this.tutorialService=r,this.dbLocalService=a,this.route=l,this.badge=c,this.companyService=d,this.alertController=g,this.authService=p,this.loadingController=m,this.router=u,this.farmService=h,this.pondService=f,this.loadingFlag=new _.E,this.now=(new Date).valueOf()/1e3,this.numNotification=0,this.slideOpts={initialSlide:0,speed:400,pagination:!1,centeredSlides:!0,centeredSlidesBounds:!0},this.indexShow=0,this.listPondStart=[],this.PATH_IMAGE=F.bl.FILE_PATH,this.fcmService.reload.subscribe(e=>{this.loadNumNotification()})}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){this.loadingFlag.setPending(!0),this.dbLocalService.company&&0!=this.dbLocalService.farms.length?(this.getListPondStart(),this.loadingFlag.setResult(!0)):this.getData(),this.loadNumNotification(),this.tutorialService.setStepIndex("home",0)})}doRefresh(e){this.getData(),e.target.complete()}loadNumNotification(){this.fcmService.loadNumNoti().subscribe(e=>{1==e.status?(this.numNotification=e.data.num,0==this.numNotification&&this.badge.clear()):this.toastService.warning(e.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}presentNotifications(){return(0,a.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:A})).present()})}presentRegisterCompany(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:P});return e.onDidDismiss().then(e=>{e.data&&this.getData()}),yield e.present()})}getData(){this.loadingFlag.setPending(!0),this.homeService.loadDashboard().pipe().subscribe(e=>{if(e.data){let t=[],i=[],n=[];this.listPondStart=[],void 0!==e.data.companys&&(this.dbLocalService.setLocalData("company",e.data.companys[0]),this.companyService.setCompany(e.data.companys[0]),this.companyService.setCode(e.data.companys[0].code),this.tutorialService.setStepIndex("home",1)),void 0!==e.data.farms&&e.data.farms.forEach(e=>{null!=this.dbLocalService.company&&e.company_id===this.companyService.company.id&&(e.permission="company_manager"),t.push({infor:e,store:[]})}),void 0!==e.data.ponds&&e.data.ponds.forEach(e=>{let o=t.findIndex(t=>t.infor.id==e.farm_id);e.permission=o>=0?t[o].infor.permission:e.permission?e.permission:"pond_manager",console.log(e);let s=this.dbLocalService.ponds.findIndex(t=>t.infor.code==e.code);s>=0&&!0===this.dbLocalService.ponds[s].favorite&&n.push({infor:e,favorite:!0,devices:[]}),i.push({infor:e,devices:[]})}),this.dbLocalService.setLocalData("farms",t),this.dbLocalService.setLocalData("ponds",i.concat(n)),this.getListPondStart()}else this.dbLocalService.destroyData();this.tutorialService.show("home"),this.loadingFlag.setResult(!0)},e=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}presentScan(){return(0,a.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:w.M,componentProps:{pondsOb:this.storage.get("ponds")}})).present()})}presentFarmCreate(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:E.v});return e.onDidDismiss().then(e=>{e.data&&this.getData()}),yield e.present()})}ionViewWillEnter(){(null!=this.ponds||null!=this.farms)&&this.getData(),"register"===this.route.snapshot.paramMap.get("act")&&this.presentRegisterCompany()}presentAlertConfirmCode(){return(0,a.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.translate.instant("COMPANY_MOD.ENTER_PROMOTION_CODE"),message:this.translate.instant("COMPANY_MOD.PRESS_OK_IF_YOU_DONT_HAVE"),inputs:[{name:"code",type:"text",placeholder:this.translate.instant("PROMOTION_CODE")}],buttons:[{text:this.translate.instant("CANCEL"),role:"cancel",cssClass:"secondary"},{text:"Ok",handler:e=>{console.log(e),""!=e.code?this.checkCode(e.code)&&this.registerPersonalOwner(e.code):this.registerPersonalOwner("")}}]})).present()})}registerPersonalOwner(e){this.presentLoading(),this.companyService.registerCompany({name:this.authService.user.username,fullname:"",address:"",phone:"",email:"",website:"",orderCode:e,type:"personal"}).pipe().subscribe(e=>{1==e.status?(this.toastService.success(this.translate.instant("COMPANY_MOD.NOTI_CREATE_BUSSINESS")),console.log(),void 0!==e.data.company&&void 0!==e.data.company.code&&(this.companyService.setCode(e.data.company.code),this.router.navigateByUrl("/company/"+e.data.company.code+"/quickstart")),this.modalController.dismiss(!0)):this.toastService.warning(e.error),this.loadingController.dismiss()},()=>{this.loadingController.dismiss(),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}checkCode(e){return this.presentLoading(),""!=e&&this.companyService.registerCode(e).pipe().subscribe(e=>1==e.status||(this.loadingController.dismiss(),this.presentAlertConfirmCode(),this.toastService.warning(e.message),!1),()=>(this.loadingController.dismiss(),this.toastService.danger(this.translate.instant("ERROR_CONNECT")),!1)),this.loadingController.dismiss(),!1}presentLoading(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.loadingController.create({message:this.translate.instant("LOADING"),duration:2e3});yield e.present(),yield e.onDidDismiss(),console.log("Loading dismissed!")})}presentQuickCreate(e){return(0,a.mG)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:U.W});return t.onDidDismiss().then(t=>{if(t.data)switch(null==this.dbLocalService.company&&(this.dbLocalService.company=t.data.company),t.data.farm.permission="company_manager",t.data.pond.permission="company_manager",null==this.dbLocalService.farms||0==this.dbLocalService.farms.length?this.dbLocalService.farms=[{stores:[],infor:t.data.farm}]:this.dbLocalService.farms.push({stores:[],infor:t.data.farm}),null==this.dbLocalService.ponds||0==this.dbLocalService.ponds.length?this.dbLocalService.ponds=[{devices:[],infor:t.data.pond}]:this.dbLocalService.ponds.push({devices:[],infor:t.data.pond}),this.dbLocalService.setLocalData("company",this.dbLocalService.company),this.dbLocalService.setLocalData("farms",this.dbLocalService.farms),this.dbLocalService.setLocalData("ponds",this.dbLocalService.ponds),e){case"pond":this.router.navigateByUrl("/pond/"+t.data.pond.code);break;case"season":this.router.navigateByUrl("/pond/"+t.data.pond.code+"/history/"+t.data.pond.current_season);break;case"store":this.router.navigateByUrl("/store/"+t.data.farm.code+"/list");break;case"money":this.router.navigateByUrl("/money/"+t.data.farm.code);break;default:this.router.navigateByUrl("/pond/"+t.data.pond.code)}}),yield t.present()})}quickRedirectPond(){this.dbLocalService.ponds.length<=0?this.presentQuickCreate("pond"):1==this.dbLocalService.ponds.length?this.router.navigateByUrl("/pond/"+this.dbLocalService.ponds[0].infor.code):this.presentAlertChoosePond()}presentAlertChoosePond(){return(0,a.mG)(this,void 0,void 0,function*(){let e=[];this.dbLocalService.ponds.forEach(t=>{e.push({name:t.infor.name,type:"radio",label:t.infor.name,value:t.infor.code,checked:!1})}),e[0].checked=!0,yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("FARM_MOD.SELECT"),inputs:e,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Ok",handler:e=>{this.router.navigateByUrl("/pond/"+e)}}]})).present()})}quickRedirectSeason(){if(this.dbLocalService.ponds.length<=0)this.presentQuickCreate("season");else if(1==this.dbLocalService.ponds.length&&""!=this.dbLocalService.ponds[0].infor.current_season){let e=this.dbLocalService.ponds[0].infor;this.router.navigateByUrl("/pond/"+e.code+"/history/"+e.current_season)}else 1==this.dbLocalService.ponds.length&&""==this.dbLocalService.ponds[0].infor.current_season?this.presentQuickCreate("season"):this.presentAlertChooseSeason()}presentAlertChooseSeason(){return(0,a.mG)(this,void 0,void 0,function*(){let e=[];for(let t=0;t<this.dbLocalService.ponds.length;t++){let i=this.dbLocalService.ponds[t];""!==i.infor.current_season&&"0"!==i.infor.current_season&&e.push({name:i.infor.name,type:"radio",label:i.infor.name,value:t,checked:!1})}e[0].checked=!1,yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("FARM_MOD.SELECT"),inputs:e,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Ok",handler:e=>{let t=this.dbLocalService.ponds[e].infor;this.router.navigateByUrl("/pond/"+t.code+"/history/"+t.current_season)}}]})).present()})}quickRedirectStore(){if(this.dbLocalService.farms.length<=0)this.presentQuickCreate("store");else if(1==this.dbLocalService.farms.length){let e=this.dbLocalService.farms[0].infor;this.farmService.setFarm(this.dbLocalService.farms[0].infor),this.router.navigateByUrl("/store/"+e.code+"/list")}else this.presentAlertStore("store")}presentAlertStore(e){return(0,a.mG)(this,void 0,void 0,function*(){let t=[];for(let e=0;e<this.dbLocalService.farms.length;e++){let i=this.dbLocalService.farms[e];t.push({name:i.infor.name,type:"radio",label:i.infor.name,value:i.infor.code,checked:!1})}t[0].checked=!1,yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("FARM_MOD.SELECT"),inputs:t,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Ok",handler:t=>{const i=this.dbLocalService.farms.findIndex(e=>e.infor.code===t);this.farmService.setFarm(this.dbLocalService.farms[i].infor),this.router.navigateByUrl("/"+e+"/"+t+("store"==e?"/list":""))}}]})).present()})}quickRedirectMoney(){if(this.dbLocalService.farms.length<=0)this.presentQuickCreate("money");else if(1==this.dbLocalService.farms.length){let e=this.dbLocalService.farms[0].infor;this.farmService.setFarm(e),console.log(this.farmService.permission),this.router.navigateByUrl("/money/"+e.code)}else this.presentAlertStore("money")}quickActionFarmReport(){1==this.dbLocalService.farms.length?this.openFarmReport(this.dbLocalService.farms[0].infor):this.presentAlertFarm()}quickActionCategory(){this.dbLocalService.company&&this.openCategary()}openCategary(){this.router.navigateByUrl("/company/"+this.dbLocalService.company.code+"/category")}openFarmReport(e){return(0,a.mG)(this,void 0,void 0,function*(){return this.farmService.setCode(e.code),yield(yield this.modalController.create({component:Y.O})).present()})}presentAlertFarm(){return(0,a.mG)(this,void 0,void 0,function*(){let e=[];for(let t=0;t<this.dbLocalService.farms.length;t++){let i=this.dbLocalService.farms[t];e.push({name:i.infor.name,type:"radio",label:i.infor.name,value:t,checked:!1})}e[0].checked=!1,yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("FARM_MOD.SELECT"),inputs:e,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Ok",handler:e=>{this.openFarmReport(this.dbLocalService.farms[e].infor)}}]})).present()})}slideChangedImage(){this.slides.getActiveIndex().then(e=>{this.indexShow=e})}getListPondStart(){this.dbLocalService.ponds.forEach(e=>{console.log(e.infor.name),""!=e.infor.current_season&&"0"!=e.infor.current_season&&e.infor.image&&this.listPondStart.push(e)})}checkFarmEmpty(e){let t=!0;return this.dbLocalService.ponds.forEach(i=>{i.infor.farm_id==e&&(t=!1)}),t}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(s.IN),g.Y36(O),g.Y36(p.k),g.Y36(R.Ke),g.Y36(c.E),g.Y36(m.sK),g.Y36(Q.M),g.Y36(G.T),g.Y36(r.gz),g.Y36(d.C),g.Y36(x.J),g.Y36(s.Br),g.Y36(D.e),g.Y36(s.HT),g.Y36(r.F0),g.Y36(I.D),g.Y36(J.p))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-home"]],viewQuery:function(e,t){if(1&e&&g.Gf(s.Hr,5),2&e){let e;g.iGM(e=g.CRH())&&(t.slides=e.first)}},decls:24,vars:11,consts:[["slot","start"],["class","btn-company","id","home1",3,"routerLink",4,"ngIf"],["slot","end"],[3,"click"],["name","notifications-outline","slot","start"],["class","numberNotifys",4,"ngIf"],["name","scan-outline"],["slot","fixed",3,"ionRefresh"],["class","spiner-loading",4,"ngIf"],["class","media-box",3,"routerLink",4,"ngIf"],[4,"ngIf"],["class","blockListPond animationDiv",4,"ngIf"],["class","blockListPond animationDiv",4,"ngFor","ngForOf"],["id","home1",1,"btn-company",3,"routerLink"],["name","business-outline","color","primary"],[1,"numberNotifys"],[1,"spiner-loading"],["name","dots"],[1,"media-box",3,"routerLink"],["pager","true","mode","ios",1,"blockSlide",3,"options","ionSlideDidChange"],["slides",""],[4,"ngFor","ngForOf"],[1,"blockDetailImage","ion-activatable","ripple-parent"],[3,"innerHTML"],[2,"min-height","200px"],["onError","this.src='assets/img/ao_tom_default.jpg'",3,"src"],[1,"blockQuickAction"],[1,"elementAction","animationDiv","ion-activatable","ripple-parent",3,"click"],["src","assets/img/undraw_environmental_study_re_q4q8.svg"],[1,"title"],["src","assets/img/undraw_timeline_re_aw6g.svg"],["src","assets/img/undraw_home_settings_re_pkya.svg"],["src","assets/img/undraw_personal_finance_tqcd.svg"],["class","elementAction animationDiv ion-activatable ripple-parent",3,"click",4,"ngIf"],["src","assets/img/undraw_pie_chart_re_bgs8.svg"],["src","assets/img/checklist-svgrepo-com.svg"],[1,"blockListPond","animationDiv"],[1,"ion-padding"],[1,"titleFarm","ion-no-margin"],[1,"blockOwner"],["class","elementOwner ion-activatable ripple-parent",3,"routerLink",4,"ngFor","ngForOf"],[1,"elementOwner","ion-activatable","ripple-parent",3,"routerLink"],[1,"photodaily"],[1,"dailyOld"],[1,"ion-padding",3,"routerLink"],["name","chevron-forward-outline"],["class","ion-text-center",3,"routerLink",4,"ngIf"],[1,"ion-text-center",3,"routerLink"],[1,"ion-no-margin"]],template:function(e,t){if(1&e&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",0),g._UZ(3,"app-avatar"),g.YNc(4,$,2,1,"ion-button",1),g.qZA(),g.TgZ(5,"ion-title"),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.TgZ(8,"ion-buttons",2),g.TgZ(9,"ion-button",3),g.NdJ("click",function(){return t.presentNotifications()}),g._UZ(10,"ion-icon",4),g.YNc(11,j,2,1,"span",5),g.qZA(),g.TgZ(12,"ion-button",3),g.NdJ("click",function(){return t.presentScan()}),g._UZ(13,"ion-icon",6),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(14,"ion-content"),g.TgZ(15,"ion-refresher",7),g.NdJ("ionRefresh",function(e){return t.doRefresh(e)}),g._UZ(16,"ion-refresher-content"),g.qZA(),g.YNc(17,z,2,0,"div",8),g.YNc(18,W,8,5,"div",9),g.YNc(19,ee,36,14,"div",10),g.TgZ(20,"div"),g.YNc(21,se,8,4,"div",11),g.YNc(22,ge,10,8,"div",12),g.YNc(23,ve,9,5,"div",11),g.qZA(),g.qZA()),2&e){let e,i;g.xp6(4),g.Q6J("ngIf",null==t.dbLocalService.company?null:t.dbLocalService.company.code),g.xp6(2),g.hij(" ",g.lcZ(7,9,"MANAGEMENT")," "),g.xp6(5),g.Q6J("ngIf",t.numNotification>0),g.xp6(6),g.Q6J("ngIf",t.loadingFlag.pending),g.xp6(1),g.Q6J("ngIf",t.listPondStart.length>0),g.xp6(1),g.Q6J("ngIf",t.loadingFlag.result),g.xp6(2),g.Q6J("ngIf",(null==(e=t.dbLocalService.listFavoritePond())?null:e.length)>0),g.xp6(1),g.Q6J("ngForOf",t.dbLocalService.farms),g.xp6(1),g.Q6J("ngIf",(null==(i=t.dbLocalService.filterPond("permission","pond_manager"))?null:i.length)>0||(null==(i=t.dbLocalService.filterPond("permission","pond_operator"))?null:i.length)>0)}},directives:[s.Gu,s.sr,s.Sm,H.A,n.O5,s.wd,s.YG,s.gu,s.W2,s.nJ,s.Wo,n.sg,s.YI,r.rH,s.PQ,s.Hr,s.H$,s.A$],pipes:[m.X$,B],styles:['[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 2.5em}[_nghost-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-family:"Averta"}[_nghost-%COMP%]   ion-ripple-effect[_ngcontent-%COMP%]{border-radius:16px!important}[_nghost-%COMP%]   .welcome-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}[_nghost-%COMP%]   .logo-home[_ngcontent-%COMP%]{max-height:40px;max-width:120px}[_nghost-%COMP%]   .l-icon[_ngcontent-%COMP%]{font-size:5em}[_nghost-%COMP%]   .numberNotifys[_ngcontent-%COMP%]{position:absolute;color:#fff;background-color:red;border-radius:50%;border:1px solid #fff;padding:3px 2px 2px;display:block;width:17px;height:17px;top:0;right:0;font-size:9px;text-align:center}[_nghost-%COMP%]   .role-question[_ngcontent-%COMP%]{font-family:"Averta"}@-webkit-keyframes myAni{0%{padding:30px}to{padding:15px}}@keyframes myAni{0%{padding:30px}to{padding:15px}}[_nghost-%COMP%]   .blockQuickAction[_ngcontent-%COMP%]{padding-left:16px;margin-top:25px;overflow:auto;white-space:nowrap;padding-top:30px;padding-bottom:16px}[_nghost-%COMP%]   .blockQuickAction[_ngcontent-%COMP%]   .elementAction[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;position:relative;width:25%;box-shadow:#0000001f 0 4px 16px;border-radius:16px;display:inline-block;text-align:center}[_nghost-%COMP%]   .blockQuickAction[_ngcontent-%COMP%]   .elementAction[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translateY(-50%);width:auto;height:60px;margin:0 auto}[_nghost-%COMP%]   .blockQuickAction[_ngcontent-%COMP%]   .elementAction[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform:translateY(-16px)}[_nghost-%COMP%]   .blockQuickAction[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]   .blockOwner[_ngcontent-%COMP%]{padding-left:16px;overflow:auto;white-space:nowrap;padding-bottom:16px}[_nghost-%COMP%]   .blockOwner[_ngcontent-%COMP%]   .elementOwner[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;width:100%;border-radius:16px;display:inline-block;position:relative;max-height:120px;max-width:120px}[_nghost-%COMP%]   .blockOwner[_ngcontent-%COMP%]   .photodaily[_ngcontent-%COMP%]{border-radius:16px;max-width:200px;max-height:120px}[_nghost-%COMP%]   .blockOwner[_ngcontent-%COMP%]   .dailyOld[_ngcontent-%COMP%]{position:absolute;bottom:0%;padding:5px;border-radius:0 16px;background-color:#fff}[_nghost-%COMP%]   .blockOwner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:16px}[_nghost-%COMP%]   .blockOwner[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]   .blockListPond[_ngcontent-%COMP%]{box-shadow:#0000001f 0 4px 16px;border-radius:16px;margin-top:16px;margin-bottom:16px}[_nghost-%COMP%]   .blockListPond[_ngcontent-%COMP%]   .titleFarm[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .media-box[_ngcontent-%COMP%]{text-align:center;position:relative;max-height:230px}[_nghost-%COMP%]   .media-box[_ngcontent-%COMP%]   .media-thumbnail[_ngcontent-%COMP%]{padding:5px}[_nghost-%COMP%]   .media-box[_ngcontent-%COMP%]   .blockDetailImage[_ngcontent-%COMP%]{width:90%;margin:0 auto;background-color:#fff;box-shadow:#0000001f 0 4px 16px;border-radius:16px;transform:translateY(-50%);display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .blockSlide[_ngcontent-%COMP%]{max-height:200px;border-radius:0 0 25px 25px;position:relative;overflow:hidden;width:100%;z-index:0}[_nghost-%COMP%]   .blockSlide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transform:translateY(-30%)}']}),e})();var xe=i(76361),Ce=i(24023);let qe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[n.ez,o.u5,s.Pc,o.UX,o.UX,m.aw.forChild(),r.Bz.forChild([{path:"",component:Oe},{path:":act",component:Oe}]),Ce.E,xe.F]]}),e})()}}]);