!function(){"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var o=0;o<n.length;o++){var e=n[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[2062],{42062:function(o,e,i){i.r(e),i.d(e,{SearchResultPageModule:function(){return k}});var r=i(38583),c=i(90665),a=i(47063),s=i(13619),g=i(64762),l=i(27887),p=i(15085),d=i(59308),u=i(37716),h=i(81780),m=i(71239),x=i(4015);function P(t,n){1&t&&(u.TgZ(0,"div",8),u._UZ(1,"ion-spinner",9),u.qZA())}function f(t,n){if(1&t&&(u.TgZ(0,"ion-list-header",10),u.TgZ(1,"ion-label"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.TgZ(4,"ion-button",11),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA()),2&t){var o=u.oxw();u.xp6(2),u.Oqu(u.lcZ(3,3,"SHOP.SEARCH_PAGE.RESULTS")),u.xp6(3),u.AsE("",o.numRows," ",u.lcZ(6,5,"SHOP.SEARCH_PAGE.PRODUCTS"),"")}}function _(t,n){if(1&t&&u._UZ(0,"img",24),2&t){var o=u.oxw().$implicit,e=u.oxw(2);u.Q6J("src",e.shopService.SITE_PATH+"/upload/eventeshop/"+o.banner,u.LSH)}}function C(t,n){if(1&t&&(u.TgZ(0,"div",25),u._uU(1),u.ALo(2,"number"),u.qZA()),2&t){var o=u.oxw().$implicit;u.xp6(1),u.hij(" ",u.xi3(2,1,o.maxPrice,"1.0-0"),"\u20ab ")}}function O(t,n){if(1&t&&(u.TgZ(0,"div",25),u._uU(1),u.ALo(2,"number"),u.ALo(3,"number"),u.qZA()),2&t){var o=u.oxw().$implicit;u.xp6(1),u.AsE(" ",u.xi3(2,2,o.minPrice,"1.0-0")," ~ ",u.xi3(3,5,o.maxPrice,"1.0-0"),"\u20ab ")}}function b(t,n){if(1&t&&(u.TgZ(0,"ion-col",14),u.TgZ(1,"div",15),u._UZ(2,"img",16),u.YNc(3,_,1,1,"img",17),u.qZA(),u.TgZ(4,"div",18),u._uU(5),u.qZA(),u.TgZ(6,"div",19),u.TgZ(7,"small",20),u._uU(8),u.ALo(9,"number"),u.qZA(),u.TgZ(10,"ion-text",21),u.TgZ(11,"small",22),u._uU(12),u.ALo(13,"number"),u.qZA(),u.qZA(),u.qZA(),u.YNc(14,C,3,4,"div",23),u.YNc(15,O,4,8,"div",23),u.qZA()),2&t){var o=n.$implicit,e=u.oxw(2);u.MGl("routerLink","../../../product/",o.id,""),u.xp6(2),u.Q6J("src",e.shopService.SITE_PATH+o.img_default,u.LSH),u.xp6(1),u.Q6J("ngIf",o.banner),u.xp6(2),u.Oqu(o.alias),u.xp6(3),u.hij("",u.xi3(9,8,o.maxFullPrice,"1.0-0"),"\u20ab"),u.xp6(4),u.hij("",u.xi3(13,11,100*o.ratio,"1.0-0"),"%"),u.xp6(2),u.Q6J("ngIf",o.minPrice==o.maxPrice),u.xp6(1),u.Q6J("ngIf",o.minPrice!=o.maxPrice)}}function M(t,n){if(1&t&&(u.TgZ(0,"ion-grid",12),u.TgZ(1,"ion-row"),u.YNc(2,b,16,14,"ion-col",13),u.qZA(),u.qZA()),2&t){var o=u.oxw();u.xp6(2),u.Q6J("ngForOf",o.productList)}}function w(t,n){if(1&t&&(u.TgZ(0,"ion-item"),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&t){var o=u.oxw();u.xp6(1),u.AsE("",u.lcZ(2,2,"SHOP.SEARCH_PAGE.EMPTY")," '",o.keyword,"'")}}var v,Z=[{path:"",component:(v=function(){function o(n,e,i,r,c,a,s){t(this,o),this.route=n,this.shopService=e,this.translate=i,this.toastController=r,this.localDb=c,this.router=a,this.modalController=s,this.keyword="",this.productList=[],this.loadingFlag=new l.E}var e,i,r;return e=o,(i=[{key:"ngOnInit",value:function(){return(0,g.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.keyword=this.route.snapshot.paramMap.get("keyword"),t.next=3,this.localDb.getDataCart();case 3:this.getSearchResults();case 4:case"end":return t.stop()}},t,this)}))}},{key:"getSearchResults",value:function(){var t=this;this.loadingFlag.setPending(!0),this.shopService.searchByKeyword({keyword:this.keyword}).pipe().subscribe(function(n){"error"==n.status?t.presentToast(n.error.message):(t.numRows=n.data.numRows,t.productList=t.prepareProductPrice(n.data.list)),t.loadingFlag.setResult(!0)},function(n){t.loadingFlag.setResult(!1),t.presentToast(t.translate.instant("ERROR_CONNECT"))})}},{key:"prepareProductPrice",value:function(t){var n=[];return t.forEach(function(t){var o=t.label_price.split("~");t.minPrice=o[0],t.maxPrice=o[1],t.maxFullPrice=t.maxPrice/(1-t.ratio),n.push(t)}),n}},{key:"presentSearch",value:function(){return(0,g.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:d.w,componentProps:{input:this.keyword}});case 2:return t.next=4,t.sent.present();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}))}},{key:"presentToast",value:function(t){return(0,g.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastController.create({message:t,duration:2e3});case 2:n.sent.present();case 3:case"end":return n.stop()}},n,this)}))}}])&&n(e.prototype,i),r&&n(e,r),o}(),v.\u0275fac=function(t){return new(t||v)(u.Y36(s.gz),u.Y36(p.d),u.Y36(h.sK),u.Y36(a.yF),u.Y36(m.T),u.Y36(s.F0),u.Y36(a.IN))},v.\u0275cmp=u.Xpm({type:v,selectors:[["app-search-result"]],decls:16,vars:9,consts:[["slot","start"],["text","","defaultHref","tabs/shop"],["slot","end"],["mode","ios",3,"value","placeholder","ionFocus"],["class","spiner-loading",4,"ngIf"],["mode","ios",4,"ngIf"],["class","grid-product",4,"ngIf"],[4,"ngIf"],[1,"spiner-loading"],["name","dots"],["mode","ios"],["fill","outline"],[1,"grid-product"],["size","6","size-sm","4",3,"routerLink",4,"ngFor","ngForOf"],["size","6","size-sm","4",3,"routerLink"],[1,"img-box"],["onError","this.src='assets/img/1235.jpg'",1,"m-auto",3,"src"],["class","bannerProduct",3,"src",4,"ngIf"],[1,"product-alias"],[1,"promotion-box"],[1,"strike"],["color","danger"],[1,"mr"],["class","price-box",4,"ngIf"],[1,"bannerProduct",3,"src"],[1,"price-box"]],template:function(t,n){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u._UZ(3,"ion-back-button",1),u.qZA(),u.TgZ(4,"ion-title"),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.TgZ(7,"ion-buttons",2),u._UZ(8,"app-shop-toolbar"),u.qZA(),u.qZA(),u.TgZ(9,"ion-toolbar"),u.TgZ(10,"ion-searchbar",3),u.NdJ("ionFocus",function(){return n.presentSearch()}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(11,"ion-content"),u.YNc(12,P,2,0,"div",4),u.YNc(13,f,7,7,"ion-list-header",5),u.YNc(14,M,3,1,"ion-grid",6),u.YNc(15,w,3,4,"ion-item",7),u.qZA()),2&t&&(u.xp6(5),u.Oqu(u.lcZ(6,7,"SHOP.SEARCH")),u.xp6(5),u.Q6J("value",n.keyword)("placeholder",n.translate.instant("SHOP.KEYWORD")),u.xp6(2),u.Q6J("ngIf",n.loadingFlag.pending),u.xp6(1),u.Q6J("ngIf",n.productList),u.xp6(1),u.Q6J("ngIf",n.productList),u.xp6(1),u.Q6J("ngIf",0==n.numRows))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.wd,x.g,a.VI,a.j9,a.W2,r.O5,a.PQ,a.yh,a.Q$,a.YG,a.jY,a.Nd,r.sg,a.wI,a.YI,s.rH,a.yW,a.Ie],pipes:[h.X$,r.JJ],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}",'[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}[_nghost-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:"Averta";font-size:.8em}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;margin-top:29px;margin-bottom:6px;font-family:"Averta";font-size:.8em;display:flex;margin-right:16px}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]   .boxTime[_ngcontent-%COMP%]{color:#fff;background-color:#000;padding-left:2px;padding-right:2px;margin-right:2px;margin-left:2px;border-radius:2px;max-width:27px;width:27px;text-align:center}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]{min-height:150px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .bannerSpecial[_ngcontent-%COMP%]{max-height:50px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .imgProductSpecial[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .arrowButton[_ngcontent-%COMP%]{vertical-align:middle;margin-right:16px}[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:1em;font-size:.8em}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:240px;width:100%}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border-top:1px solid rgba(192,192,192,.2);border-left:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border-right:1px solid rgba(192,192,192,.2);border-bottom:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]{flex:auto;text-align:center;margin:0 auto;overflow:hidden;position:relative}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:80x!important;margin-bottom:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   .bannerProduct[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;max-height:60px;max-width:80%;width:auto}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .product-alias[_ngcontent-%COMP%]{line-height:1.2em;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;height:2.4em;-webkit-box-orient:vertical}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]{margin:3px 0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .mr[_ngcontent-%COMP%]{margin-left:3px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .strike[_ngcontent-%COMP%]{text-decoration:line-through}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]{margin:3px 0;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;height:1.3em;-webkit-box-orient:vertical;color:var(--ion-color-danger)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]{padding:5px;position:absolute;right:5px;top:10px;float:left;width:43px;background-color:#de2525;z-index:9999;transform:rotate(20deg);border-radius:4px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:after{right:42px;border:solid transparent;content:" ";height:0;width:0;position:absolute;border-color:#88b7d500;border-right-color:#de2525;border-width:13.5px;top:50%;margin-top:-13.6px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:before{content:"";z-index:2;position:absolute;top:44%;right:100%;width:5px;height:5px;opacity:.95;background:#fff;border-radius:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center;font-family:"Averta"}']}),v)}],A=function(){var n=function n(){t(this,n)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[s.Bz.forChild(Z)],s.Bz]}),n}(),T=i(26177),k=function(){var n=function n(){t(this,n)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[r.ez,c.u5,a.Pc,A,h.aw.forChild(),T.t]]}),n}()}}])}();