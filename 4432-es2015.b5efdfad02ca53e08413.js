"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[4432],{24432:function(t,n,o){o.r(n),o.d(n,{ShopStorePageModule:function(){return Z}});var i=o(38583),e=o(90665),r=o(47063),s=o(13619),c=o(27887),g=o(15085),a=o(37716),p=o(81780),l=o(84465);function d(t,n){1&t&&(a.TgZ(0,"div",10),a._UZ(1,"ion-spinner",11),a.qZA())}function h(t,n){if(1&t&&(a.TgZ(0,"ion-list-header",12),a.TgZ(1,"ion-label"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"ion-button",13),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,3,"SHOP.PRODUCTS")),a.xp6(3),a.AsE("",t.numRows," ",a.lcZ(6,5,"SHOP.SEARCH_PAGE.PRODUCTS"),"")}}function u(t,n){if(1&t&&(a.TgZ(0,"div",25),a.TgZ(1,"span"),a._uU(2),a.ALo(3,"number"),a.qZA(),a.qZA()),2&t){const t=a.oxw().$implicit;a.xp6(2),a.hij("-",a.xi3(3,1,100*t.ratio,"0.0-0"),"%")}}function P(t,n){if(1&t&&a._UZ(0,"img",26),2&t){const t=a.oxw().$implicit,n=a.oxw(2);a.Q6J("src",n.shopService.SITE_PATH+"/upload/eventeshop/"+t.banner,a.LSH)}}function m(t,n){if(1&t&&(a.TgZ(0,"div",27),a.TgZ(1,"small",28),a._uU(2),a.ALo(3,"number"),a.qZA(),a.qZA()),2&t){const t=a.oxw().$implicit;a.xp6(2),a.hij("",a.xi3(3,1,t.maxFullPrice,"1.0-0"),"\u20ab")}}function x(t,n){if(1&t&&(a.TgZ(0,"div",29),a._uU(1),a.ALo(2,"number"),a.qZA()),2&t){const t=a.oxw().$implicit;a.xp6(1),a.hij(" ",a.xi3(2,1,t.maxPrice,"1.0"),"\u20ab ")}}function _(t,n){if(1&t&&(a.TgZ(0,"div",29),a._uU(1),a.ALo(2,"number"),a.ALo(3,"number"),a.qZA()),2&t){const t=a.oxw().$implicit;a.xp6(1),a.AsE(" ",a.xi3(2,2,t.minPrice,"1.0"),"-",a.xi3(3,5,t.maxPrice,"1.0"),"\u20ab ")}}function f(t,n){if(1&t&&(a.TgZ(0,"ion-col",17),a.YNc(1,u,4,4,"div",18),a.TgZ(2,"div",19),a._UZ(3,"img",20),a.YNc(4,P,1,1,"img",21),a.qZA(),a.TgZ(5,"div",22),a._uU(6),a.qZA(),a.YNc(7,m,4,4,"div",23),a.YNc(8,x,3,4,"div",24),a.YNc(9,_,4,8,"div",24),a.qZA()),2&t){const t=n.$implicit,o=a.oxw(2);a.MGl("routerLink","../../product/",t.id,""),a.xp6(1),a.Q6J("ngIf",0!=t.ratio),a.xp6(2),a.Q6J("src",o.shopService.SITE_PATH+t.img_default,a.LSH),a.xp6(1),a.Q6J("ngIf",t.banner),a.xp6(2),a.Oqu(t.alias),a.xp6(1),a.Q6J("ngIf",0!=t.ratio),a.xp6(1),a.Q6J("ngIf",t.minPrice==t.maxPrice),a.xp6(1),a.Q6J("ngIf",t.minPrice!=t.maxPrice)}}function O(t,n){1&t&&(a.TgZ(0,"ion-item"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"SHOP.STORE.EMPTY")))}function C(t,n){if(1&t&&(a.TgZ(0,"ion-grid",14),a.TgZ(1,"ion-row"),a.YNc(2,f,10,8,"ion-col",15),a.qZA(),a.YNc(3,O,3,3,"ion-item",16),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.Q6J("ngForOf",t.shopProducts),a.xp6(1),a.Q6J("ngIf",0==t.numRows)}}const b=[{path:"",component:(()=>{class t{constructor(t,n,o,i){this.route=t,this.shopService=n,this.translate=o,this.toastService=i,this.loadingShop=new c.E,this.loadingProducts=new c.E}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.getShopDetail(),this.getShopProducts()}getShopDetail(){this.loadingShop.setPending(!0),this.shopService.getAShop(this.id).subscribe(t=>{"success"==t.status?(this.loadingShop.setResult(!0),this.shopInfo=t.data,this.shopInfo.address+=", "+this.shopInfo.units[0].name+", "+this.shopInfo.units[1].name+", "+this.shopInfo.units[2].name):(this.loadingShop.setResult(!0),this.toastService.warning(t.error.message))},t=>{this.loadingShop.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}getShopProducts(){this.loadingProducts.setPending(!0),this.shopService.getShopProducts(this.id).subscribe(t=>{"success"==t.status?(this.loadingProducts.setResult(!0),this.shopProducts=this.prepareProductPrice(t.data.list),this.numRows=t.data.numRows):(this.loadingProducts.setResult(!0),this.toastService.warning(t.error.message))},t=>{this.loadingProducts.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}prepareProductPrice(t){let n=[];return t.forEach(t=>{let o=t.label_price.split("~");t.minPrice=o[0],t.maxPrice=o[1],t.maxFullPrice=t.maxPrice/(1-t.ratio),n.push(t)}),n}}return t.\u0275fac=function(n){return new(n||t)(a.Y36(s.gz),a.Y36(g.d),a.Y36(p.sK),a.Y36(l.k))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-shop-store"]],decls:29,vars:13,consts:[["slot","start"],["text","","defaultHref","tabs/shop"],["class","spiner-loading",4,"ngIf"],[1,"cover-photo"],[1,"custom-row"],["onError","this.src='assets/img/default-profile.jpg'","width","100px",1,"profile-img",3,"src"],["size","12","size-sm","6"],["color","warning","name","star"],["mode","ios",4,"ngIf"],["class","grid-product",4,"ngIf"],[1,"spiner-loading"],["name","dots"],["mode","ios"],["fill","outline"],[1,"grid-product"],["size","6","size-sm","4",3,"routerLink",4,"ngFor","ngForOf"],[4,"ngIf"],["size","6","size-sm","4",3,"routerLink"],["class","discount-label",4,"ngIf"],[1,"img-box"],["onError","this.src='assets/img/1235.jpg'",1,"m-auto",3,"src"],["class","bannerProduct",3,"src",4,"ngIf"],[1,"product-alias"],["class","promotion-box",4,"ngIf"],["class","price-box",4,"ngIf"],[1,"discount-label"],[1,"bannerProduct",3,"src"],[1,"promotion-box"],[1,"strike"],[1,"price-box"]],template:function(t,n){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a._UZ(3,"ion-back-button",1),a.qZA(),a.TgZ(4,"ion-title"),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"ion-content"),a.YNc(8,d,2,0,"div",2),a._UZ(9,"div",3),a.TgZ(10,"ion-grid"),a.TgZ(11,"ion-row",4),a._UZ(12,"img",5),a.qZA(),a.TgZ(13,"ion-row"),a.TgZ(14,"ion-col",6),a.TgZ(15,"ion-card"),a.TgZ(16,"ion-card-header"),a.TgZ(17,"ion-card-title"),a._uU(18),a.qZA(),a.TgZ(19,"ion-card-subtitle"),a._uU(20),a._UZ(21,"ion-icon",7),a.qZA(),a.qZA(),a.TgZ(22,"ion-card-content"),a.TgZ(23,"small"),a._uU(24),a.qZA(),a.TgZ(25,"div"),a._uU(26),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(27,h,7,7,"ion-list-header",8),a.YNc(28,C,4,2,"ion-grid",9),a.qZA()),2&t&&(a.xp6(5),a.Oqu(a.lcZ(6,11,"SHOP.STORE.TITLE")),a.xp6(3),a.Q6J("ngIf",n.loadingProducts.pending),a.xp6(1),a.Udp("background-image","url("+(n.shopService.SITE_PATH+(null==n.shopInfo?null:n.shopInfo.image)).replace("thumb_image","ge_image")+")"),a.xp6(3),a.Q6J("src",n.shopService.SITE_PATH+(null==n.shopInfo?null:n.shopInfo.logo),a.LSH),a.xp6(6),a.Oqu(null==n.shopInfo?null:n.shopInfo.name),a.xp6(2),a.hij("",null==n.shopInfo?null:n.shopInfo.rate_score," "),a.xp6(4),a.hij(" ",null==n.shopInfo?null:n.shopInfo.address," "),a.xp6(2),a.hij(" ",null==n.shopInfo?null:n.shopInfo.description," "),a.xp6(1),a.Q6J("ngIf",n.shopProducts),a.xp6(1),a.Q6J("ngIf",n.shopProducts))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,i.O5,r.jY,r.Nd,r.wI,r.PM,r.Zi,r.gZ,r.tO,r.gu,r.FN,r.PQ,r.yh,r.Q$,r.YG,i.sg,r.YI,s.rH,r.Ie],pipes:[p.X$,i.JJ],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}[_nghost-%COMP%]   .cover-photo[_ngcontent-%COMP%]{background:center/cover no-repeat,#fff;height:20vh}[_nghost-%COMP%]   .custom-row[_ngcontent-%COMP%]{height:50px}[_nghost-%COMP%]   .profile-img[_ngcontent-%COMP%]{transform:translateY(-50%);border-radius:50%;margin:auto;max-width:250px;border:2px solid rgba(192,192,192,.5)}",'[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}[_nghost-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:"Averta";font-size:.8em}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;margin-top:29px;margin-bottom:6px;font-family:"Averta";font-size:.8em;display:flex;margin-right:16px}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]   .boxTime[_ngcontent-%COMP%]{color:#fff;background-color:#000;padding-left:2px;padding-right:2px;margin-right:2px;margin-left:2px;border-radius:2px;max-width:27px;width:27px;text-align:center}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]{min-height:150px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .bannerSpecial[_ngcontent-%COMP%]{max-height:50px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .imgProductSpecial[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .arrowButton[_ngcontent-%COMP%]{vertical-align:middle;margin-right:16px}[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:1em;font-size:.8em}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:240px;width:100%}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border-top:1px solid rgba(192,192,192,.2);border-left:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border-right:1px solid rgba(192,192,192,.2);border-bottom:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]{flex:auto;text-align:center;margin:0 auto;overflow:hidden;position:relative}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:80x!important;margin-bottom:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   .bannerProduct[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;max-height:60px;max-width:80%;width:auto}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .product-alias[_ngcontent-%COMP%]{line-height:1.2em;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;height:2.4em;-webkit-box-orient:vertical}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]{margin:3px 0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .mr[_ngcontent-%COMP%]{margin-left:3px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .strike[_ngcontent-%COMP%]{text-decoration:line-through}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]{margin:3px 0;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;height:1.3em;-webkit-box-orient:vertical;color:var(--ion-color-danger)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]{padding:5px;position:absolute;right:5px;top:10px;float:left;width:43px;background-color:#de2525;z-index:9999;transform:rotate(20deg);border-radius:4px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:after{right:42px;border:solid transparent;content:" ";height:0;width:0;position:absolute;border-color:#88b7d500;border-right-color:#de2525;border-width:13.5px;top:50%;margin-top:-13.6px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:before{content:"";z-index:2;position:absolute;top:44%;right:100%;width:5px;height:5px;opacity:.95;background:#fff;border-radius:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center;font-family:"Averta"}']}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[s.Bz.forChild(b)],s.Bz]}),t})(),Z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[i.ez,e.u5,r.Pc,M,p.aw.forChild()]]}),t})()}}]);