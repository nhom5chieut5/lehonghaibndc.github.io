"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[7046],{97046:function(t,n,i){i.r(n),i.d(n,{FollowPageModule:function(){return q}});var o=i(38583),e=i(90665),s=i(13619),l=i(47063),r=i(64762),a=i(40300),c=i(27887),g=i(87498),u=i(37716),d=i(84465),Z=i(81780),p=i(23211);function f(t,n){if(1&t&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"number"),u.TgZ(3,"small"),u._uU(4),u.ALo(5,"translate"),u.qZA(),u.qZA()),2&t){const t=u.oxw(3).$implicit,n=u.oxw();u.xp6(1),u.hij("",u.xi3(2,2,(n.now-t.start_time)/86400,"0.0-0")," "),u.xp6(3),u.Oqu(u.lcZ(5,5,"FOLLOW_MOD.DAY"))}}function h(t,n){if(1&t&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"number"),u.TgZ(3,"small"),u._uU(4),u.ALo(5,"translate"),u.qZA(),u.qZA()),2&t){const t=u.oxw(3).$implicit,n=u.oxw();u.xp6(1),u.hij("",u.xi3(2,2,(n.now-t.seed_date)/86400,"0.0-0")," "),u.xp6(3),u.hij("ng\xe0y ",u.lcZ(5,5,"FOLLOW_MOD.DAY_OLD"),"")}}function O(t,n){if(1&t&&(u.TgZ(0,"div"),u.TgZ(1,"span",16),u._uU(2),u.qZA(),u.YNc(3,f,6,7,"span",13),u.YNc(4,h,6,7,"span",13),u.qZA()),2&t){const t=u.oxw(2).$implicit;u.xp6(2),u.hij("",t.species," "),u.xp6(1),u.Q6J("ngIf",0==t.seed_date),u.xp6(1),u.Q6J("ngIf",t.seed_date>0)}}function m(t,n){if(1&t&&(u.TgZ(0,"div"),u.YNc(1,O,5,3,"div",13),u.qZA()),2&t){const t=u.oxw().$implicit;u.xp6(1),u.Q6J("ngIf","0"!=t.current_season)}}function w(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"ion-col",6),u.TgZ(1,"ion-card"),u.TgZ(2,"ion-grid",7),u.TgZ(3,"ion-row",8),u.TgZ(4,"ion-col",9),u.TgZ(5,"div",10),u._UZ(6,"ion-icon",11),u.qZA(),u.qZA(),u.TgZ(7,"ion-col",12),u.TgZ(8,"ion-card-header"),u.TgZ(9,"ion-card-subtitle"),u._uU(10),u.qZA(),u.TgZ(11,"ion-card-title"),u._uU(12),u.qZA(),u.YNc(13,m,2,1,"div",13),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(14,"ion-button",14),u.NdJ("click",function(){const n=u.CHM(t).$implicit;return u.oxw().presentUnfollow(n.code)}),u._UZ(15,"ion-icon",15),u._uU(16),u.ALo(17,"translate"),u.qZA(),u.qZA(),u.qZA()}if(2&t){const t=n.$implicit;u.xp6(2),u.MGl("routerLink","/pond/",t.code,""),u.xp6(4),u.Q6J("color",1==t.existSeason&&0==t.warning?"primary":1==t.existSeason&&1==t.warning?"danger":"medium"),u.xp6(4),u.hij("",t.farm_name," "),u.xp6(2),u.Oqu(t.name),u.xp6(1),u.Q6J("ngIf",0!=t.existSeason),u.xp6(3),u.hij(" ",u.lcZ(17,6,"UNFOLLOW")," ")}}function A(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"div",17),u.TgZ(1,"p"),u.TgZ(2,"ion-text",18),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.qZA(),u.TgZ(5,"ion-button",19),u.NdJ("click",function(){return u.CHM(t),u.oxw().presentSearch()}),u._uU(6),u.ALo(7,"translate"),u.qZA(),u.qZA()}2&t&&(u.xp6(3),u.hij(" ",u.lcZ(4,2,"FOLLOW_MOD.YOU_HAVE_NOT_POND")," "),u.xp6(3),u.Oqu(u.lcZ(7,4,"FOLLOW_MOD.FIND")))}function x(t,n){if(1&t&&(u.TgZ(0,"div",17),u.TgZ(1,"p"),u.TgZ(2,"ion-text",18),u._uU(3),u.qZA(),u.qZA(),u.qZA()),2&t){const t=u.oxw();u.xp6(3),u.hij(" ",t.message," ")}}function L(t,n){1&t&&(u.TgZ(0,"div",20),u._UZ(1,"ion-spinner",21),u.qZA())}const _=[{path:"",component:(()=>{class t{constructor(t,n,i,o,e,s){this.modalController=t,this.followService=n,this.toastService=i,this.translate=o,this.tour=e,this.alertController=s,this.loadingFlag=new c.E,this.followingList=[],this.message="",this.now=(new Date).valueOf()/1e3}ngOnInit(){this.getFollowingList()}ionViewWillEnter(){this.tour.show("follow")}presentSearch(){return(0,r.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:a._})).present()})}getFollowingList(){this.loadingFlag.setPending(!0),this.followService.getFollowingList().pipe().subscribe(t=>{t.error||1!=t.status?this.message=t.error:this.followingList=t.data,this.loadingFlag.setResult(!0)},t=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}presentUnfollow(t){return(0,r.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("FOLLOW_MOD.CONFIRM"),message:this.translate.instant("FOLLOW_MOD.CONFIRM_UNFOLLOW"),buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:t=>{console.log("Confirm Cancel: blah")}},{text:"Ok",handler:()=>{this.unfollow(t)}}]})).present()})}unfollow(t){this.followService.unFollow(t).subscribe(t=>{1==t.status?(this.toastService.success(this.translate.instant("FOLLOW_MOD.UNFOLLOW_SUCCESS")),this.getFollowingList()):this.toastService.warning(t.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(l.IN),u.Y36(g.R),u.Y36(d.k),u.Y36(Z.sK),u.Y36(p.M),u.Y36(l.Br))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-follow"]],decls:18,vars:10,consts:[["slot","start"],["slot","end"],["id","follow0",3,"click"],["size","12","size-sm","6",4,"ngFor","ngForOf"],["class","ion-padding ion-text-center",4,"ngIf"],["class","spiner-loading",4,"ngIf"],["size","12","size-sm","6"],[3,"routerLink"],["align-items-center",""],["size","4"],[1,"ion-padding"],["src","/assets/icon/pond.svg",1,"l-icon",3,"color"],["size","8"],[4,"ngIf"],["expand","block","size","small","fill","clear",3,"click"],["slot","start","name","close-circle-outline"],[1,"sm-text"],[1,"ion-padding","ion-text-center"],["color","medium"],["shape","round",3,"click"],[1,"spiner-loading"],["name","dots"]],template:function(t,n){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u._UZ(3,"ion-menu-button"),u.qZA(),u.TgZ(4,"ion-title"),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.TgZ(7,"ion-buttons",1),u.TgZ(8,"ion-button",2),u.NdJ("click",function(){return n.presentSearch()}),u._uU(9),u.ALo(10,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(11,"ion-content"),u.TgZ(12,"ion-grid"),u.TgZ(13,"ion-row"),u.YNc(14,w,18,8,"ion-col",3),u.qZA(),u.qZA(),u.YNc(15,A,8,6,"div",4),u.YNc(16,x,4,1,"div",4),u.YNc(17,L,2,0,"div",5),u.qZA()),2&t&&(u.xp6(5),u.Oqu(u.lcZ(6,6,"FOLLOW")),u.xp6(4),u.Oqu(u.lcZ(10,8,"FOLLOW_MOD.FIND")),u.xp6(5),u.Q6J("ngForOf",n.followingList),u.xp6(1),u.Q6J("ngIf",0==n.followingList.length&&n.loadingFlag.result),u.xp6(1),u.Q6J("ngIf",n.message),u.xp6(1),u.Q6J("ngIf",n.loadingFlag.pending))},directives:[l.Gu,l.sr,l.Sm,l.fG,l.wd,l.YG,l.W2,l.jY,l.Nd,o.sg,o.O5,l.wI,l.PM,l.YI,s.rH,l.gu,l.Zi,l.tO,l.gZ,l.yW,l.PQ],pipes:[Z.X$,o.JJ],styles:[".l-icon[_ngcontent-%COMP%]{font-size:5em}"]}),t})()}];let q=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[g.R],imports:[[o.ez,e.u5,l.Pc,s.Bz.forChild(_),Z.aw.forChild()]]}),t})()}}]);