!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[4075],{14075:function(t,i,o){o.r(i),o.d(i,{HomePageModule:function(){return ke}});var r=o(38583),a=o(90665),s=o(47063),c=o(13619),l=o(64762),u=o(16738),d=o(55019),p=o(71847),g=o(37716),m=o(84465),f=o(81780);function h(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"ion-item",1),g.NdJ("click",function(){var e=g.CHM(n).$implicit;return g.oxw(2).seenNoti(e)}),g.TgZ(1,"ion-label",12),g.TgZ(2,"h3"),g.TgZ(3,"ion-text",13),g._uU(4,"Admin"),g.qZA(),g._uU(5,"\xa0"),g.TgZ(6,"small"),g._uU(7),g.qZA(),g.qZA(),g.TgZ(8,"p"),g._uU(9),g.qZA(),g.qZA(),g.qZA()}if(2&e){var i=t.$implicit;g.xp6(7),g.Oqu(i.time),g.xp6(2),g.Oqu(i.content)}}function Z(e,t){if(1&e&&(g.TgZ(0,"ion-list",6),g.TgZ(1,"ion-list-header"),g.TgZ(2,"ion-label"),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.qZA(),g.YNc(5,h,10,2,"ion-item",11),g.qZA()),2&e){var n=g.oxw();g.xp6(3),g.Oqu(g.lcZ(4,2,"SYSTEM")),g.xp6(2),g.Q6J("ngForOf",n.listNotiSystem)}}function v(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"ion-item",14),g.NdJ("click",function(){var e=g.CHM(n).$implicit;return g.oxw().seenNoti(e)}),g.TgZ(1,"ion-label",12),g.TgZ(2,"h3"),g.TgZ(3,"ion-text",15),g._uU(4),g.qZA(),g._uU(5,"\xa0"),g.TgZ(6,"small"),g._uU(7),g.qZA(),g.qZA(),g.TgZ(8,"p"),g._uU(9),g.qZA(),g.qZA(),g.qZA()}if(2&e){var i=t.$implicit;g.Q6J("routerLink",i.link),g.xp6(3),g.Q6J("color",0==i.seen?"primary":"dark"),g.xp6(1),g.Oqu(i.username),g.xp6(3),g.Oqu(i.time),g.xp6(2),g.Oqu(i.content)}}function A(e,t){1&e&&(g.TgZ(0,"ion-item"),g.TgZ(1,"ion-label"),g.TgZ(2,"p"),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(3),g.Oqu(g.lcZ(4,1,"NOTIFICATIONS_MOD.EMPTY")))}var x,_=((x=function(){function t(n,i,o,r,a,s){e(this,t),this.modalController=n,this.fcmService=i,this.toastService=o,this.alertController=r,this.translate=a,this.badge=s,this.page=0,this.listNoti=[],this.listNotiSystem=[]}return n(t,[{key:"ngOnInit",value:function(){this.getListNoti()}},{key:"getListNoti",value:function(){var e=this;this.fcmService.loadListNoti(this.page).subscribe(function(t){1==t.status?(t.data.system.forEach(function(t){t.time=u(new Date(1e3*t.add_time),"YYYYMMDD").fromNow(),e.listNotiSystem.push(t)}),t.data.user.forEach(function(t){t.time=u(new Date(1e3*t.add_time),"YYYYMMDD").fromNow(),t.link=e.filterLink(t.mod_name,t.item_code),e.listNoti.push(t)})):e.toastService.warning(t.error)})}},{key:"filterLink",value:function(e,t){switch(e){case"farm":return"/farm/"+t+"/pond";case"pond":return"/pond/"+t;case"store_farm":return"/store/"+t;case"money":return"/money/"+t;default:return"/tabs/management"}}},{key:"seenNoti",value:function(e){var t=this;this.fcmService.seen(e.mod_name,e.id).subscribe(function(e){1==e.status?(console.log("seen"),t.fcmService.reload.next(!0)):console.log("no seen")}),this.modalController.dismiss()}},{key:"loadData",value:function(e){this.page+=1,this.getListNoti(),setTimeout(function(){console.log("Done"),e.target.complete()},500)}},{key:"seeAll",value:function(){var e=this;this.fcmService.seeAll().subscribe(function(t){1==t.status?(e.badge.clear(),e.toastService.success(e.translate.instant("ACCOUNT_MOD.SEEN_ALL")),e.listNoti=[],e.listNotiSystem=[],e.fcmService.reload.next(!0)):e.toastService.warning(t.error)})}},{key:"presentAlertConfirm",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Confirm!",message:this.translate.instant("ACCOUNT_MOD.CONFIRM_SEEN"),buttons:[{text:"NO",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"YES",handler:function(){t.seeAll()}}]});case 2:return e.next=4,e.sent.present();case 4:case"end":return e.stop()}},e,this)}))}}]),t}()).\u0275fac=function(e){return new(e||x)(g.Y36(s.IN),g.Y36(d.E),g.Y36(m.k),g.Y36(s.Br),g.Y36(f.sK),g.Y36(p.C))},x.\u0275cmp=g.Xpm({type:x,selectors:[["app-notifications"]],decls:19,vars:9,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],["color","primary",3,"click"],["lines","none",4,"ngIf"],["lines","none"],[3,"routerLink","click",4,"ngFor","ngForOf"],[4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","dots"],[3,"click",4,"ngFor","ngForOf"],[1,"ion-text-wrap"],["color","primary"],[3,"routerLink","click"],[3,"color"]],template:function(e,t){1&e&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",0),g.TgZ(3,"ion-button",1),g.NdJ("click",function(){return t.modalController.dismiss()}),g._UZ(4,"ion-icon",2),g.qZA(),g.qZA(),g.TgZ(5,"ion-title"),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.TgZ(8,"ion-buttons",3),g.TgZ(9,"ion-button",4),g.NdJ("click",function(){return t.presentAlertConfirm()}),g._uU(10),g.ALo(11,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"ion-content"),g.YNc(13,Z,6,4,"ion-list",5),g.TgZ(14,"ion-list",6),g.YNc(15,v,10,5,"ion-item",7),g.YNc(16,A,5,3,"ion-item",8),g.qZA(),g.TgZ(17,"ion-infinite-scroll",9),g.NdJ("ionInfinite",function(e){return t.loadData(e)}),g._UZ(18,"ion-infinite-scroll-content",10),g.qZA(),g.qZA()),2&e&&(g.xp6(6),g.Oqu(g.lcZ(7,5,"NOTIFICATIONS_MOD.NOTI")),g.xp6(4),g.Oqu(g.lcZ(11,7,"ACCOUNT_MOD.SEE_ALL")),g.xp6(3),g.Q6J("ngIf",t.listNotiSystem.length>0),g.xp6(2),g.Q6J("ngForOf",t.listNoti),g.xp6(1),g.Q6J("ngIf",0==t.listNotiSystem.length&&0==t.listNoti.length))},directives:[s.Gu,s.sr,s.Sm,s.YG,s.gu,s.wd,s.W2,r.O5,s.q_,r.sg,s.ju,s.MB,s.yh,s.Q$,s.Ie,s.yW,s.YI,c.rH],pipes:[f.X$],styles:[""]}),x),O=o(27887),C=o(15189),b=function(){var t=function(){function t(n){e(this,t),this.reqAPIService=n,this.URL="/manager/home-api"}return n(t,[{key:"loadDashboard",value:function(){return this.reqAPIService.get(this.URL)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.LFG(C.$))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),T=o(26164);function q(e,t){if(1&e&&(g.TgZ(0,"ion-text",16),g.TgZ(1,"small"),g._uU(2),g.qZA(),g.qZA()),2&e){var n=g.oxw(2);g.xp6(2),g.Oqu(n.message)}}function k(e,t){1&e&&(g.TgZ(0,"span"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e&&(g.xp6(1),g.Oqu(g.lcZ(2,1,"COMPANY_MOD.CONFIRM")))}function M(e,t){1&e&&g._UZ(0,"ion-spinner",17)}function S(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"ion-card",5),g.TgZ(2,"ion-card-header"),g.TgZ(3,"p"),g._uU(4),g.ALo(5,"translate"),g.qZA(),g.qZA(),g.TgZ(6,"ion-card-content"),g.TgZ(7,"form",6),g._UZ(8,"ion-input",7),g.qZA(),g.YNc(9,q,3,1,"ion-text",8),g.qZA(),g.TgZ(10,"ion-grid"),g.TgZ(11,"ion-row",9),g.TgZ(12,"ion-col"),g.TgZ(13,"div",10),g.TgZ(14,"ion-button",11),g.NdJ("click",function(){return g.CHM(n),g.oxw().checkCode(!1)}),g._uU(15),g.ALo(16,"translate"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(17,"ion-col"),g.TgZ(18,"div",12),g.TgZ(19,"ion-button",13),g.NdJ("click",function(){return g.CHM(n),g.oxw().checkCode(!0)}),g.YNc(20,k,3,3,"span",4),g.YNc(21,M,1,0,"ion-spinner",14),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(22,"p",15),g._uU(23),g.ALo(24,"translate"),g.qZA(),g.qZA()}if(2&e){var i=g.oxw();g.xp6(4),g.Oqu(g.lcZ(5,9,"COMPANY_MOD.SALE_CODE")),g.xp6(3),g.Q6J("formGroup",i.codeForm),g.xp6(1),g.Q6J("placeholder",i.translate.instant("COMPANY_MOD.ENTER_CODE")),g.xp6(1),g.Q6J("ngIf",i.message),g.xp6(6),g.hij(" ",g.lcZ(16,11,"COMPANY_MOD.IGNORE"),""),g.xp6(4),g.Q6J("disabled",i.codeForm.invalid||i.checkingFlag.pending),g.xp6(1),g.Q6J("ngIf",!i.checkingFlag.pending),g.xp6(1),g.Q6J("ngIf",i.checkingFlag.pending),g.xp6(2),g.Oqu(g.lcZ(24,13,"COMPANY_MOD.IF_NO_CODE"))}}function N(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"ion-item",23),g.TgZ(1,"ion-label"),g.TgZ(2,"p"),g._uU(3),g.ALo(4,"translate"),g.TgZ(5,"strong"),g._uU(6),g.qZA(),g._uU(7),g.ALo(8,"translate"),g.qZA(),g.qZA(),g.TgZ(9,"ion-button",24),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).orderCodeItem=null}),g._uU(10),g.ALo(11,"translate"),g.qZA(),g.qZA()}if(2&e){var i=g.oxw(2);g.xp6(3),g.hij("",g.lcZ(4,5,"COMPANY_MOD.PRO_CODE")," "),g.xp6(3),g.hij("#",i.orderCodeItem.code,""),g.xp6(1),g.AsE(" ",g.lcZ(8,7,"COMPANY_MOD.FROM")," ",i.orderCodeItem.agency," "),g.xp6(3),g.hij(" ",g.lcZ(11,9,"COMPANY_MOD.DELETE")," ")}}function y(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"ion-item",23),g.TgZ(1,"ion-label"),g.TgZ(2,"p"),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.qZA(),g.TgZ(5,"ion-button",24),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).isCheck=!1}),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.qZA()}2&e&&(g.xp6(3),g.Oqu(g.lcZ(4,2,"COMPANY_MOD.RE_PRO_CODE")),g.xp6(3),g.hij(" ",g.lcZ(7,4,"COMPANY_MOD.ENTER_CODE")," "))}function L(e,t){1&e&&(g.TgZ(0,"div",25),g._UZ(1,"ion-spinner",17),g.qZA())}function w(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"div",26),g.TgZ(2,"ion-text",27),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.qZA(),g.TgZ(5,"ion-list"),g.TgZ(6,"form",6),g.TgZ(7,"ion-item"),g.TgZ(8,"ion-label",28),g._uU(9),g.ALo(10,"translate"),g.qZA(),g._UZ(11,"ion-input",29),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"ion-item",23),g.TgZ(13,"ion-button",30),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).showTerm()}),g._UZ(14,"ion-icon",31),g.qZA(),g.TgZ(15,"ion-label"),g.TgZ(16,"p"),g.TgZ(17,"a",32),g._uU(18),g.ALo(19,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(20,"div",25),g.TgZ(21,"ion-button",33),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).register()}),g._uU(22),g.ALo(23,"translate"),g.qZA(),g.qZA(),g.qZA()}if(2&e){var i=g.oxw(2);g.xp6(3),g.hij(" ",g.lcZ(4,7,"COMPANY_MOD.FO_NOT_AUTH")," "),g.xp6(3),g.Q6J("formGroup",i.registerForm),g.xp6(3),g.Oqu(g.lcZ(10,9,"COMPANY_MOD.NAME_FO")),g.xp6(8),g.MGl("href","https://farmext.com/about/",i.translate.currentLang,"/terms/",g.LSH),g.xp6(1),g.Oqu(g.lcZ(19,11,"COMPANY_MOD.TERMS")),g.xp6(3),g.Q6J("disabled",i.registerForm.controls.name.hasError("required")||i.registerForm.controls.name.hasError("minlength")),g.xp6(1),g.hij(" ",g.lcZ(23,13,"COMPANY_MOD.CREATE"),"")}}function P(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"div",26),g.TgZ(2,"ion-text",27),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.qZA(),g.TgZ(5,"ion-list"),g.TgZ(6,"form",6),g.TgZ(7,"ion-item"),g.TgZ(8,"ion-label",28),g._uU(9),g.ALo(10,"translate"),g.qZA(),g._UZ(11,"ion-input",34),g.qZA(),g.TgZ(12,"ion-item"),g.TgZ(13,"ion-label",28),g._uU(14),g.ALo(15,"translate"),g.qZA(),g._UZ(16,"ion-input",35),g.qZA(),g.TgZ(17,"ion-item"),g.TgZ(18,"ion-label",28),g._uU(19),g.ALo(20,"translate"),g.qZA(),g._UZ(21,"ion-input",36),g.qZA(),g.TgZ(22,"ion-item"),g.TgZ(23,"ion-label",28),g._uU(24),g.ALo(25,"translate"),g.qZA(),g._UZ(26,"ion-input",37),g.qZA(),g.TgZ(27,"ion-item"),g.TgZ(28,"ion-label",28),g._uU(29,"Email"),g.qZA(),g._UZ(30,"ion-input",38),g.qZA(),g.TgZ(31,"ion-item"),g.TgZ(32,"ion-label",28),g._uU(33,"Website"),g.qZA(),g._UZ(34,"ion-input",39),g.qZA(),g.qZA(),g.qZA(),g.TgZ(35,"ion-item",23),g.TgZ(36,"ion-button",30),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).showTerm()}),g._UZ(37,"ion-icon",31),g.qZA(),g.TgZ(38,"ion-label"),g.TgZ(39,"p"),g.TgZ(40,"a",32),g._uU(41),g.ALo(42,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(43,"div",25),g.TgZ(44,"ion-button",33),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).register()}),g._uU(45),g.ALo(46,"translate"),g.qZA(),g.qZA(),g.qZA()}if(2&e){var i=g.oxw(2);g.xp6(3),g.hij(" ",g.lcZ(4,10,"COMPANY_MOD.CONTACT_AUTH")," "),g.xp6(3),g.Q6J("formGroup",i.registerForm),g.xp6(3),g.Oqu(g.lcZ(10,12,"COMPANY_MOD.DISPLAY_NAME")),g.xp6(5),g.Oqu(g.lcZ(15,14,"COMPANY_MOD.FULL_NAME")),g.xp6(5),g.Oqu(g.lcZ(20,16,"COMPANY_MOD.ADDRESS")),g.xp6(5),g.Oqu(g.lcZ(25,18,"COMPANY_MOD.PHONE")),g.xp6(16),g.MGl("href","https://farmext.com/about/",i.translate.currentLang,"/terms/",g.LSH),g.xp6(1),g.Oqu(g.lcZ(42,20,"COMPANY_MOD.TERMS")),g.xp6(3),g.Q6J("disabled",i.registerForm.invalid),g.xp6(1),g.hij(" ",g.lcZ(46,22,"COMPANY_MOD.CREATE"),"")}}function E(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"ion-segment",18),g.NdJ("ionChange",function(e){return g.CHM(n),g.oxw().segmentChanged(e)}),g.TgZ(2,"ion-segment-button",19),g.TgZ(3,"ion-label"),g._uU(4),g.ALo(5,"translate"),g.qZA(),g.qZA(),g.TgZ(6,"ion-segment-button",20),g.TgZ(7,"ion-label"),g._uU(8),g.ALo(9,"translate"),g.qZA(),g.qZA(),g.qZA(),g.YNc(10,N,12,11,"ion-item",21),g.YNc(11,y,8,6,"ion-item",21),g.YNc(12,L,2,0,"div",22),g.YNc(13,w,24,15,"div",4),g.YNc(14,P,47,24,"div",4),g.qZA()}if(2&e){var i=g.oxw();g.xp6(4),g.Oqu(g.lcZ(5,7,"COMPANY_MOD.PERSONAL")),g.xp6(4),g.Oqu(g.lcZ(9,9,"COMPANY_MOD.BUSINESS")),g.xp6(2),g.Q6J("ngIf",i.orderCodeItem),g.xp6(1),g.Q6J("ngIf",null==i.orderCodeItem),g.xp6(1),g.Q6J("ngIf",i.checkingFlag.pending),g.xp6(1),g.Q6J("ngIf",1==i.typeCompany),g.xp6(1),g.Q6J("ngIf",2==i.typeCompany)}}var D=function(){var t=function(){function t(n,i,o,r,s){e(this,t),this.modalController=n,this.companyService=i,this.toastService=o,this.alertController=r,this.translate=s,this.codeForm=new a.cw({code:new a.NI("",a.kI.required)}),this.registerForm=new a.cw({name:new a.NI("",[a.kI.required,a.kI.minLength(3)]),address:new a.NI("",a.kI.required),fullname:new a.NI("",a.kI.required),phone:new a.NI("",a.kI.required),email:new a.NI("",[a.kI.required,a.kI.email]),website:new a.NI("")}),this.savingFlag=new O.E,this.typeCompany=2,this.isCheck=!1,this.message="",this.checkingFlag=new O.E}return n(t,[{key:"ngOnInit",value:function(){}},{key:"buildForm",value:function(){1==this.typeCompany?(this.registerForm.controls.fullname.clearValidators(),this.registerForm.controls.address.clearValidators(),this.registerForm.controls.telephone.clearValidators(),this.registerForm.controls.email.clearValidators()):(this.registerForm.controls.fullname.setValidators(a.kI.required),this.registerForm.controls.address.setValidators(a.kI.required),this.registerForm.controls.telephone.setValidators(a.kI.required),this.registerForm.controls.email.setValidators(a.kI.required))}},{key:"segmentChanged",value:function(e){this.typeCompany=e.detail.value}},{key:"register",value:function(){var e=this;this.savingFlag.setStart(!0);var t={name:this.registerForm.value.name,fullname:this.registerForm.value.fullname,address:this.registerForm.value.address,phone:this.registerForm.value.phone,email:this.registerForm.value.email,website:this.registerForm.value.website,orderCode:this.codeForm.value.code,type:"personal"};this.registerForm.value.website&&this.registerForm.value.website.length>0&&(this.registerForm.value.website.includes("http")||(t.website="http://"+this.registerForm.value.website)),2==this.typeCompany&&(t.type="enterprise"),this.companyService.registerCompany(t).pipe().subscribe(function(n){1==n.status?(e.toastService.success(e.translate.instant("COMPANY_MOD.NOTI_CREATE_BUSSINESS")),"enterprise"==t.type?e.alertEnterprise():e.modalController.dismiss(!0)):e.toastService.warning(n.error),e.savingFlag.setResult(!0)},function(){e.savingFlag.setResult(!1),e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"showTerm",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:this.translate.instant("COMPANY_MOD.CONFIRM"),message:this.translate.instant("COMPANY_MOD.ACCEPT_TERMS"),buttons:["OK"]});case 2:return e.next=4,e.sent.present();case 4:case"end":return e.stop()}},e,this)}))}},{key:"checkCode",value:function(e){var t=this;0==e?this.isCheck=!0:(this.message="",this.checkingFlag.setStart(!0),this.companyService.registerCode(this.codeForm.value).pipe().subscribe(function(e){1==e.status?(t.isCheck=!0,t.orderCodeItem=e.data):t.message=e.message,t.checkingFlag.setResult(!0)},function(){t.checkingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))}))}},{key:"alertEnterprise",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:this.translate.instant("COMPANY_MOD.ATTENTION"),message:this.translate.instant("COMPANY_MOD.DETAIL_ATTENTION"),buttons:[{text:"OK",handler:function(){t.modalController.dismiss()}}]});case 2:return e.next=4,e.sent.present();case 4:case"end":return e.stop()}},e,this)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(s.IN),g.Y36(T.J),g.Y36(m.k),g.Y36(s.Br),g.Y36(f.sK))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-company-register"]],decls:11,vars:5,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding"],[4,"ngIf"],["mode","ios"],[3,"formGroup"],["formControlName","code",1,"code-input",3,"placeholder"],["color","danger",4,"ngIf"],[1,"ion-justify-content-between"],[1,"ion-text-start"],["size","default","fill","clear","slot","start","color","medium",3,"click"],[1,"ion-text-end"],["size","default","fill","clear","slot","end",3,"disabled","click"],["name","dots",4,"ngIf"],[1,"ion-text-center","sm-text"],["color","danger"],["name","dots"],["value","2",3,"ionChange"],["value","1"],["value","2"],["lines","none",4,"ngIf"],["class","ion-padding ion-text-center",4,"ngIf"],["lines","none"],["fill","outline",3,"click"],[1,"ion-padding","ion-text-center"],[1,"ion-padding","infomation"],["color","medium"],["position","floating"],["formControlName","name"],["fill","clear","slot","start",3,"click"],["name","checkmark-circle-outline"],[3,"href"],["shape","round",3,"disabled","click"],["type","text","formControlName","name"],["type","text","formControlName","fullname"],["type","text","formControlName","address"],["type","tel","inputmode","tel","formControlName","phone"],["type","email","inputmode","email","formControlName","email"],["type","url","inputmode","url","formControlName","website"]],template:function(e,t){1&e&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",0),g.TgZ(3,"ion-button",1),g.NdJ("click",function(){return t.modalController.dismiss(!1)}),g._UZ(4,"ion-icon",2),g.qZA(),g.qZA(),g.TgZ(5,"ion-title"),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(8,"ion-content",3),g.YNc(9,S,25,15,"div",4),g.YNc(10,E,15,11,"div",4),g.qZA()),2&e&&(g.xp6(6),g.Oqu(g.lcZ(7,3,"COMPANY_MOD.CREATE_FARM_OWNER")),g.xp6(3),g.Q6J("ngIf",!t.isCheck),g.xp6(1),g.Q6J("ngIf",t.isCheck))},directives:[s.Gu,s.sr,s.Sm,s.YG,s.gu,s.wd,s.W2,r.O5,s.PM,s.Zi,s.FN,a._Y,a.JL,a.sg,s.pK,s.j9,a.JJ,a.u,s.jY,s.Nd,s.wI,s.yW,s.PQ,s.cJ,s.QI,s.GO,s.Q$,s.Ie,s.q_],pipes:[f.X$],styles:[".code-input[_ngcontent-%COMP%]{padding:5px 20px!important;border:1px solid #f2f2f2;border-radius:10px;letter-spacing:5px;font-size:1.4em;text-align:center}.infomation[_ngcontent-%COMP%]{font-size:.8}a[_ngcontent-%COMP%]{text-decoration:none;color:silver}"]}),t}(),U=o(62166),Y=o(3356),I=o(50384),F=o(19874),R=o(2426),J=o(51937),Q=o(92340),G=o(80272),H=o(38605),B=o(23211),$=o(71239),j=o(79503),z=function(){var t=function(){function t(){e(this,t)}return n(t,[{key:"transform",value:function(e,t,n){return e.filter(function(e){return e.infor[t]===n})}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=g.Yjl({name:"pondFilter",type:t,pure:!0}),t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac}),t}();function V(e,t){if(1&e&&(g.TgZ(0,"ion-button",13),g._UZ(1,"ion-icon",14),g.qZA()),2&e){var n=g.oxw();g.Q6J("routerLink","/company/"+(null==n.dbLocalService.company?null:n.dbLocalService.company.code))}}function W(e,t){if(1&e&&(g.TgZ(0,"span",15),g._uU(1),g.qZA()),2&e){var n=g.oxw();g.xp6(1),g.Oqu(n.numNotification)}}function K(e,t){1&e&&(g.TgZ(0,"div",16),g._UZ(1,"ion-spinner",17),g.qZA())}function X(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"ion-slide",24),g._UZ(2,"img",25),g.qZA(),g.BQk()),2&e){var n=t.$implicit,i=g.oxw(2);g.xp6(2),g.Q6J("src",i.PATH_IMAGE+"/upload/season/"+n.infor.current_season+"/ge_image/"+n.infor.image,g.LSH)}}function ee(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",18),g.TgZ(1,"ion-slides",19,20),g.NdJ("ionSlideDidChange",function(){return g.CHM(n),g.oxw().slideChangedImage()}),g.YNc(3,X,3,1,"ng-container",21),g.qZA(),g.TgZ(4,"div",22),g._UZ(5,"ion-ripple-effect"),g.TgZ(6,"p",23),g._uU(7),g.qZA(),g.qZA(),g.qZA()}if(2&e){var i=g.oxw();g.MGl("routerLink","/pond/",i.listPondStart[i.indexShow].infor.code,""),g.xp6(1),g.Q6J("options",i.slideOpts),g.xp6(2),g.Q6J("ngForOf",i.listPondStart),g.xp6(3),g.Q6J("innerHTML",i.listPondStart[i.indexShow].infor.description?i.listPondStart[i.indexShow].infor.description:"Ao "+i.listPondStart[i.indexShow].infor.name,g.oJD),g.xp6(1),g.Oqu(i.listPondStart[i.indexShow].description)}}function te(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",27),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).quickActionFarmReport()}),g._UZ(1,"ion-ripple-effect"),g._UZ(2,"img",34),g.TgZ(3,"div",29),g.TgZ(4,"small"),g.TgZ(5,"b"),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}2&e&&(g.xp6(6),g.Oqu(g.lcZ(7,1,"LAB_MOD.REPORT")))}function ne(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",27),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).quickActionCategory()}),g._UZ(1,"ion-ripple-effect"),g._UZ(2,"img",35),g.TgZ(3,"div",29),g.TgZ(4,"small"),g.TgZ(5,"b"),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA()}2&e&&(g.xp6(6),g.Oqu(g.lcZ(7,1,"COMPANY_MOD.MENU")))}function ie(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div"),g.TgZ(1,"div",26),g.TgZ(2,"div",27),g.NdJ("click",function(){return g.CHM(n),g.oxw().quickRedirectPond()}),g._UZ(3,"ion-ripple-effect"),g._UZ(4,"img",28),g.TgZ(5,"div",29),g.TgZ(6,"small"),g.TgZ(7,"b"),g._uU(8),g.ALo(9,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(10,"div",27),g.NdJ("click",function(){return g.CHM(n),g.oxw().quickRedirectSeason()}),g._UZ(11,"ion-ripple-effect"),g._UZ(12,"img",30),g.TgZ(13,"div",29),g.TgZ(14,"small"),g.TgZ(15,"b"),g._uU(16),g.ALo(17,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(18,"div",27),g.NdJ("click",function(){return g.CHM(n),g.oxw().quickRedirectStore()}),g._UZ(19,"ion-ripple-effect"),g._UZ(20,"img",31),g.TgZ(21,"div",29),g.TgZ(22,"small"),g.TgZ(23,"b"),g._uU(24),g.ALo(25,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(26,"div",27),g.NdJ("click",function(){return g.CHM(n),g.oxw().quickRedirectMoney()}),g._UZ(27,"ion-ripple-effect"),g._UZ(28,"img",32),g.TgZ(29,"div",29),g.TgZ(30,"small"),g.TgZ(31,"b"),g._uU(32),g.ALo(33,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(34,te,8,3,"div",33),g.YNc(35,ne,8,3,"div",33),g.qZA(),g.qZA()}if(2&e){var i=g.oxw();g.xp6(8),g.Oqu(g.lcZ(9,6,"DEVICE_MOD.ALBUM")),g.xp6(8),g.Oqu(g.lcZ(17,8,"POND_MOD.SEASON")),g.xp6(8),g.Oqu(g.lcZ(25,10,"STORE")),g.xp6(8),g.Oqu(g.lcZ(33,12,"MONEY")),g.xp6(2),g.Q6J("ngIf",i.dbLocalService.farms.length>0),g.xp6(1),g.Q6J("ngIf",i.dbLocalService.company)}}function oe(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){var n=g.oxw().$implicit;g.xp6(1),g.AsE("",n.infor.date_start," ",g.lcZ(2,2,"POND_MOD.DAY"),"")}}function re(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){var n=g.oxw().$implicit;g.xp6(1),g.AsE("",n.infor.start_seed," ",g.lcZ(2,2,"POND_MOD.OLD"),"")}}function ae(e,t){1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e&&(g.xp6(1),g.Oqu(g.lcZ(2,1,"POND_MOD.EMPTY")))}function se(e,t){if(1&e&&(g.TgZ(0,"div",41),g._UZ(1,"ion-ripple-effect"),g.TgZ(2,"div",42),g._UZ(3,"img",25),g.TgZ(4,"div",43),g.YNc(5,oe,3,4,"small",10),g.YNc(6,re,3,4,"small",10),g.YNc(7,ae,3,3,"small",10),g.qZA(),g.qZA(),g.TgZ(8,"div"),g.TgZ(9,"small"),g.TgZ(10,"b"),g._uU(11),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){var n=t.$implicit,i=g.oxw(2);g.MGl("routerLink","/pond/",n.infor.code,""),g.xp6(3),g.Q6J("src",i.PATH_IMAGE+"/upload/season/"+n.infor.current_season+"/thumb_image/"+n.infor.image,g.LSH),g.xp6(2),g.Q6J("ngIf",1===n.infor.existSeason&&0===n.infor.start_seed),g.xp6(1),g.Q6J("ngIf",1===n.infor.existSeason&&n.infor.start_seed>0),g.xp6(1),g.Q6J("ngIf",0===n.infor.existSeason),g.xp6(4),g.Oqu(n.infor.name)}}function ce(e,t){if(1&e&&(g.TgZ(0,"div",36),g.TgZ(1,"div",37),g.TgZ(2,"p",38),g.TgZ(3,"b"),g._uU(4),g.ALo(5,"translate"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"div",39),g.YNc(7,se,12,6,"div",40),g.qZA(),g.qZA()),2&e){var n=g.oxw();g.xp6(4),g.Oqu(g.lcZ(5,2,"POND_MOD.FAVORITE")),g.xp6(3),g.Q6J("ngForOf",n.dbLocalService.listFavoritePond())}}function le(e,t){if(1&e&&(g.TgZ(0,"div",47),g.TgZ(1,"span"),g._uU(2,"Tr\u1ea1i tr\u1ed1ng"),g.qZA(),g.qZA()),2&e){var n=g.oxw().$implicit;g.MGl("routerLink","/farm/",null==n?null:n.infor.code,"")}}function ue(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){var n=g.oxw().$implicit;g.xp6(1),g.AsE("",n.infor.date_start," ",g.lcZ(2,2,"POND_MOD.DAY"),"")}}function de(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){var n=g.oxw().$implicit;g.xp6(1),g.AsE("",n.infor.start_seed," ",g.lcZ(2,2,"POND_MOD.OLD"),"")}}function pe(e,t){1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e&&(g.xp6(1),g.Oqu(g.lcZ(2,1,"POND_MOD.EMPTY")))}function ge(e,t){if(1&e&&(g.TgZ(0,"div",41),g._UZ(1,"ion-ripple-effect"),g.TgZ(2,"div",42),g._UZ(3,"img",25),g.TgZ(4,"div",43),g.YNc(5,ue,3,4,"small",10),g.YNc(6,de,3,4,"small",10),g.YNc(7,pe,3,3,"small",10),g.qZA(),g.qZA(),g.TgZ(8,"div"),g.TgZ(9,"small"),g.TgZ(10,"b"),g._uU(11),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){var n=t.$implicit,i=g.oxw(2);g.MGl("routerLink","/pond/",n.infor.code,""),g.xp6(3),g.Q6J("src",i.PATH_IMAGE+"/upload/season/"+n.infor.current_season+"/thumb_image/"+n.infor.image,g.LSH),g.xp6(2),g.Q6J("ngIf",1===n.infor.existSeason&&0===n.infor.start_seed),g.xp6(1),g.Q6J("ngIf",1===n.infor.existSeason&&n.infor.start_seed>0),g.xp6(1),g.Q6J("ngIf",0===n.infor.existSeason),g.xp6(4),g.Oqu(n.infor.name)}}function me(e,t){if(1&e&&(g.TgZ(0,"div",36),g.TgZ(1,"div",44),g.TgZ(2,"p",38),g.TgZ(3,"b"),g._uU(4),g.qZA(),g._UZ(5,"ion-icon",45),g.qZA(),g.qZA(),g.YNc(6,le,3,1,"div",46),g.TgZ(7,"div",39),g.YNc(8,ge,12,6,"div",40),g.ALo(9,"pondFilter"),g.qZA(),g.qZA()),2&e){var n=t.$implicit,i=g.oxw();g.xp6(1),g.MGl("routerLink","/farm/",null==n?null:n.infor.code,""),g.xp6(3),g.Oqu(n.infor.name),g.xp6(2),g.Q6J("ngIf",i.checkFarmEmpty(n.infor.id)),g.xp6(2),g.Q6J("ngForOf",g.Dn7(9,4,i.dbLocalService.ponds,"farm_id",n.infor.id))}}function fe(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){var n=g.oxw().$implicit;g.xp6(1),g.AsE("",n.infor.date_start," ",g.lcZ(2,2,"POND_MOD.DAY"),"")}}function he(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){var n=g.oxw().$implicit;g.xp6(1),g.AsE("",n.infor.start_seed," ",g.lcZ(2,2,"POND_MOD.OLD"),"")}}function Ze(e,t){1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e&&(g.xp6(1),g.Oqu(g.lcZ(2,1,"POND_MOD.EMPTY")))}function ve(e,t){if(1&e&&(g.TgZ(0,"div",41),g._UZ(1,"ion-ripple-effect"),g.TgZ(2,"div",42),g._UZ(3,"img",25),g.TgZ(4,"div",43),g.YNc(5,fe,3,4,"small",10),g.YNc(6,he,3,4,"small",10),g.YNc(7,Ze,3,3,"small",10),g.qZA(),g.qZA(),g.TgZ(8,"div"),g.TgZ(9,"small"),g.TgZ(10,"b"),g._uU(11),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){var n=t.$implicit,i=g.oxw(2);g.MGl("routerLink","/pond/",n.infor.code,""),g.xp6(3),g.Q6J("src",i.PATH_IMAGE+"/upload/season/"+n.infor.current_season+"/thumb_image/"+n.infor.image,g.LSH),g.xp6(2),g.Q6J("ngIf",1===n.infor.existSeason&&0===n.infor.start_seed),g.xp6(1),g.Q6J("ngIf",1===n.infor.existSeason&&n.infor.start_seed>0),g.xp6(1),g.Q6J("ngIf",0===n.infor.existSeason),g.xp6(4),g.Oqu(n.infor.name)}}function Ae(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){var n=g.oxw().$implicit;g.xp6(1),g.AsE("",n.infor.date_start," ",g.lcZ(2,2,"POND_MOD.DAY"),"")}}function xe(e,t){if(1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){var n=g.oxw().$implicit;g.xp6(1),g.AsE("",n.infor.start_seed," ",g.lcZ(2,2,"POND_MOD.OLD"),"")}}function _e(e,t){1&e&&(g.TgZ(0,"small"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e&&(g.xp6(1),g.Oqu(g.lcZ(2,1,"POND_MOD.EMPTY")))}function Oe(e,t){if(1&e&&(g.TgZ(0,"div",41),g._UZ(1,"ion-ripple-effect"),g.TgZ(2,"div",42),g._UZ(3,"img",25),g.TgZ(4,"div",43),g.YNc(5,Ae,3,4,"small",10),g.YNc(6,xe,3,4,"small",10),g.YNc(7,_e,3,3,"small",10),g.qZA(),g.qZA(),g.TgZ(8,"div"),g.TgZ(9,"small"),g.TgZ(10,"b"),g._uU(11),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){var n=t.$implicit,i=g.oxw(2);g.MGl("routerLink","/pond/",n.infor.code,""),g.xp6(3),g.Q6J("src",i.PATH_IMAGE+"/upload/season/"+n.infor.current_season+"/thumb_image/"+n.infor.image,g.LSH),g.xp6(2),g.Q6J("ngIf",1===n.infor.existSeason&&0===n.infor.start_seed),g.xp6(1),g.Q6J("ngIf",1===n.infor.existSeason&&n.infor.start_seed>0),g.xp6(1),g.Q6J("ngIf",0===n.infor.existSeason),g.xp6(4),g.Oqu(n.infor.name)}}function Ce(e,t){if(1&e&&(g.TgZ(0,"div",36),g.TgZ(1,"div",37),g.TgZ(2,"p",48),g.TgZ(3,"b"),g._uU(4),g.ALo(5,"translate"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(6,"div",39),g.YNc(7,ve,12,6,"div",40),g.YNc(8,Oe,12,6,"div",40),g.qZA(),g.qZA()),2&e){var n=g.oxw();g.xp6(4),g.Oqu(g.lcZ(5,3,"POND_MOD.POND_MANAGEMENT")),g.xp6(3),g.Q6J("ngForOf",n.dbLocalService.filterPond("permission","pond_operator")),g.xp6(1),g.Q6J("ngForOf",n.dbLocalService.filterPond("permission","pond_manager"))}}var be=function(){var t=function(){function t(n,i,o,r,a,s,c,l,u,d,p,g,m,f,h,Z,v){var A=this;e(this,t),this.modalController=n,this.homeService=i,this.toastService=o,this.storage=r,this.fcmService=a,this.translate=s,this.tutorialService=c,this.dbLocalService=l,this.route=u,this.badge=d,this.companyService=p,this.alertController=g,this.authService=m,this.loadingController=f,this.router=h,this.farmService=Z,this.pondService=v,this.loadingFlag=new O.E,this.now=(new Date).valueOf()/1e3,this.numNotification=0,this.slideOpts={initialSlide:0,speed:400,pagination:!1,centeredSlides:!0,centeredSlidesBounds:!0},this.indexShow=0,this.listPondStart=[],this.PATH_IMAGE=Q.bl.FILE_PATH,this.fcmService.reload.subscribe(function(e){A.loadNumNotification()})}return n(t,[{key:"ngOnInit",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.loadingFlag.setPending(!0),this.dbLocalService.company&&0!=this.dbLocalService.farms.length?(this.getListPondStart(),this.loadingFlag.setResult(!0)):this.getData(),this.loadNumNotification(),this.tutorialService.setStepIndex("home",0);case 1:case"end":return e.stop()}},e,this)}))}},{key:"doRefresh",value:function(e){this.getData(),e.target.complete()}},{key:"loadNumNotification",value:function(){var e=this;this.fcmService.loadNumNoti().subscribe(function(t){1==t.status?(e.numNotification=t.data.num,0==e.numNotification&&e.badge.clear()):e.toastService.warning(t.error)},function(){e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"presentNotifications",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:_});case 2:return e.next=4,e.sent.present();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))}},{key:"presentRegisterCompany",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:D});case 2:return(t=e.sent).onDidDismiss().then(function(e){e.data&&n.getData()}),e.next=6,t.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"getData",value:function(){var e=this;this.loadingFlag.setPending(!0),this.homeService.loadDashboard().pipe().subscribe(function(t){if(t.data){var n=[],i=[],o=[];e.listPondStart=[],void 0!==t.data.companys&&(e.dbLocalService.setLocalData("company",t.data.companys[0]),e.companyService.setCompany(t.data.companys[0]),e.companyService.setCode(t.data.companys[0].code),e.tutorialService.setStepIndex("home",1)),void 0!==t.data.farms&&t.data.farms.forEach(function(t){null!=e.dbLocalService.company&&t.company_id===e.companyService.company.id&&(t.permission="company_manager"),n.push({infor:t,store:[]})}),void 0!==t.data.ponds&&t.data.ponds.forEach(function(t){var r=n.findIndex(function(e){return e.infor.id==t.farm_id});t.permission=r>=0?n[r].infor.permission:t.permission?t.permission:"pond_manager",console.log(t);var a=e.dbLocalService.ponds.findIndex(function(e){return e.infor.code==t.code});a>=0&&!0===e.dbLocalService.ponds[a].favorite&&o.push({infor:t,favorite:!0,devices:[]}),i.push({infor:t,devices:[]})}),e.dbLocalService.setLocalData("farms",n),e.dbLocalService.setLocalData("ponds",i.concat(o)),e.getListPondStart()}else e.dbLocalService.destroyData();e.tutorialService.show("home"),e.loadingFlag.setResult(!0)},function(t){e.loadingFlag.setResult(!1),e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"presentScan",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:U.M,componentProps:{pondsOb:this.storage.get("ponds")}});case 2:return e.next=4,e.sent.present();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))}},{key:"presentFarmCreate",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:Y.v});case 2:return(t=e.sent).onDidDismiss().then(function(e){e.data&&n.getData()}),e.next=6,t.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"ionViewWillEnter",value:function(){(null!=this.ponds||null!=this.farms)&&this.getData(),"register"===this.route.snapshot.paramMap.get("act")&&this.presentRegisterCompany()}},{key:"presentAlertConfirmCode",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:this.translate.instant("COMPANY_MOD.ENTER_PROMOTION_CODE"),message:this.translate.instant("COMPANY_MOD.PRESS_OK_IF_YOU_DONT_HAVE"),inputs:[{name:"code",type:"text",placeholder:this.translate.instant("PROMOTION_CODE")}],buttons:[{text:this.translate.instant("CANCEL"),role:"cancel",cssClass:"secondary"},{text:"Ok",handler:function(e){console.log(e),""!=e.code?t.checkCode(e.code)&&t.registerPersonalOwner(e.code):t.registerPersonalOwner("")}}]});case 2:return e.next=4,e.sent.present();case 4:case"end":return e.stop()}},e,this)}))}},{key:"registerPersonalOwner",value:function(e){var t=this;this.presentLoading(),this.companyService.registerCompany({name:this.authService.user.username,fullname:"",address:"",phone:"",email:"",website:"",orderCode:e,type:"personal"}).pipe().subscribe(function(e){1==e.status?(t.toastService.success(t.translate.instant("COMPANY_MOD.NOTI_CREATE_BUSSINESS")),console.log(),void 0!==e.data.company&&void 0!==e.data.company.code&&(t.companyService.setCode(e.data.company.code),t.router.navigateByUrl("/company/"+e.data.company.code+"/quickstart")),t.modalController.dismiss(!0)):t.toastService.warning(e.error),t.loadingController.dismiss()},function(){t.loadingController.dismiss(),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"checkCode",value:function(e){var t=this;return this.presentLoading(),""!=e&&this.companyService.registerCode(e).pipe().subscribe(function(e){return 1==e.status||(t.loadingController.dismiss(),t.presentAlertConfirmCode(),t.toastService.warning(e.message),!1)},function(){return t.loadingController.dismiss(),t.toastService.danger(t.translate.instant("ERROR_CONNECT")),!1}),this.loadingController.dismiss(),!1}},{key:"presentLoading",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({message:this.translate.instant("LOADING"),duration:2e3});case 2:return t=e.sent,e.next=5,t.present();case 5:return e.next=7,t.onDidDismiss();case 7:console.log("Loading dismissed!");case 8:case"end":return e.stop()}},e,this)}))}},{key:"presentQuickCreate",value:function(e){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:F.W});case 2:return(n=t.sent).onDidDismiss().then(function(t){if(t.data)switch(null==i.dbLocalService.company&&(i.dbLocalService.company=t.data.company),t.data.farm.permission="company_manager",t.data.pond.permission="company_manager",null==i.dbLocalService.farms||0==i.dbLocalService.farms.length?i.dbLocalService.farms=[{stores:[],infor:t.data.farm}]:i.dbLocalService.farms.push({stores:[],infor:t.data.farm}),null==i.dbLocalService.ponds||0==i.dbLocalService.ponds.length?i.dbLocalService.ponds=[{devices:[],infor:t.data.pond}]:i.dbLocalService.ponds.push({devices:[],infor:t.data.pond}),i.dbLocalService.setLocalData("company",i.dbLocalService.company),i.dbLocalService.setLocalData("farms",i.dbLocalService.farms),i.dbLocalService.setLocalData("ponds",i.dbLocalService.ponds),e){case"pond":i.router.navigateByUrl("/pond/"+t.data.pond.code);break;case"season":i.router.navigateByUrl("/pond/"+t.data.pond.code+"/history/"+t.data.pond.current_season);break;case"store":i.router.navigateByUrl("/store/"+t.data.farm.code+"/list");break;case"money":i.router.navigateByUrl("/money/"+t.data.farm.code);break;default:i.router.navigateByUrl("/pond/"+t.data.pond.code)}}),t.next=6,n.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"quickRedirectPond",value:function(){this.dbLocalService.ponds.length<=0?this.presentQuickCreate("pond"):1==this.dbLocalService.ponds.length?this.router.navigateByUrl("/pond/"+this.dbLocalService.ponds[0].infor.code):this.presentAlertChoosePond()}},{key:"presentAlertChoosePond",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.dbLocalService.ponds.forEach(function(e){t.push({name:e.infor.name,type:"radio",label:e.infor.name,value:e.infor.code,checked:!1})}),t[0].checked=!0,e.next=5,this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("FARM_MOD.SELECT"),inputs:t,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel")}},{text:"Ok",handler:function(e){n.router.navigateByUrl("/pond/"+e)}}]});case 5:return e.next=7,e.sent.present();case 7:case"end":return e.stop()}},e,this)}))}},{key:"quickRedirectSeason",value:function(){if(this.dbLocalService.ponds.length<=0)this.presentQuickCreate("season");else if(1==this.dbLocalService.ponds.length&&""!=this.dbLocalService.ponds[0].infor.current_season){var e=this.dbLocalService.ponds[0].infor;this.router.navigateByUrl("/pond/"+e.code+"/history/"+e.current_season)}else 1==this.dbLocalService.ponds.length&&""==this.dbLocalService.ponds[0].infor.current_season?this.presentQuickCreate("season"):this.presentAlertChooseSeason()}},{key:"presentAlertChooseSeason",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<this.dbLocalService.ponds.length;n++)""!==(i=this.dbLocalService.ponds[n]).infor.current_season&&"0"!==i.infor.current_season&&t.push({name:i.infor.name,type:"radio",label:i.infor.name,value:n,checked:!1});return t[0].checked=!1,e.next=5,this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("FARM_MOD.SELECT"),inputs:t,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel")}},{text:"Ok",handler:function(e){var t=o.dbLocalService.ponds[e].infor;o.router.navigateByUrl("/pond/"+t.code+"/history/"+t.current_season)}}]});case 5:return e.next=7,e.sent.present();case 7:case"end":return e.stop()}},e,this)}))}},{key:"quickRedirectStore",value:function(){if(this.dbLocalService.farms.length<=0)this.presentQuickCreate("store");else if(1==this.dbLocalService.farms.length){var e=this.dbLocalService.farms[0].infor;this.farmService.setFarm(this.dbLocalService.farms[0].infor),this.router.navigateByUrl("/store/"+e.code+"/list")}else this.presentAlertStore("store")}},{key:"presentAlertStore",value:function(e){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,o,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],i=0;i<this.dbLocalService.farms.length;i++)o=this.dbLocalService.farms[i],n.push({name:o.infor.name,type:"radio",label:o.infor.name,value:o.infor.code,checked:!1});return n[0].checked=!1,t.next=5,this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("FARM_MOD.SELECT"),inputs:n,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel")}},{text:"Ok",handler:function(t){var n=r.dbLocalService.farms.findIndex(function(e){return e.infor.code===t});r.farmService.setFarm(r.dbLocalService.farms[n].infor),r.router.navigateByUrl("/"+e+"/"+t+("store"==e?"/list":""))}}]});case 5:return t.next=7,t.sent.present();case 7:case"end":return t.stop()}},t,this)}))}},{key:"quickRedirectMoney",value:function(){if(this.dbLocalService.farms.length<=0)this.presentQuickCreate("money");else if(1==this.dbLocalService.farms.length){var e=this.dbLocalService.farms[0].infor;this.farmService.setFarm(e),console.log(this.farmService.permission),this.router.navigateByUrl("/money/"+e.code)}else this.presentAlertStore("money")}},{key:"quickActionFarmReport",value:function(){1==this.dbLocalService.farms.length?this.openFarmReport(this.dbLocalService.farms[0].infor):this.presentAlertFarm()}},{key:"quickActionCategory",value:function(){this.dbLocalService.company&&this.openCategary()}},{key:"openCategary",value:function(){this.router.navigateByUrl("/company/"+this.dbLocalService.company.code+"/category")}},{key:"openFarmReport",value:function(e){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.farmService.setCode(e.code),t.next=3,this.modalController.create({component:R.O});case 3:return t.next=5,t.sent.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}))}},{key:"presentAlertFarm",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<this.dbLocalService.farms.length;n++)i=this.dbLocalService.farms[n],t.push({name:i.infor.name,type:"radio",label:i.infor.name,value:n,checked:!1});return t[0].checked=!1,e.next=5,this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("FARM_MOD.SELECT"),inputs:t,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel")}},{text:"Ok",handler:function(e){o.openFarmReport(o.dbLocalService.farms[e].infor)}}]});case 5:return e.next=7,e.sent.present();case 7:case"end":return e.stop()}},e,this)}))}},{key:"slideChangedImage",value:function(){var e=this;this.slides.getActiveIndex().then(function(t){e.indexShow=t})}},{key:"getListPondStart",value:function(){var e=this;this.dbLocalService.ponds.forEach(function(t){console.log(t.infor.name),""!=t.infor.current_season&&"0"!=t.infor.current_season&&t.infor.image&&e.listPondStart.push(t)})}},{key:"checkFarmEmpty",value:function(e){var t=!0;return this.dbLocalService.ponds.forEach(function(n){n.infor.farm_id==e&&(t=!1)}),t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(s.IN),g.Y36(b),g.Y36(m.k),g.Y36(H.Ke),g.Y36(d.E),g.Y36(f.sK),g.Y36(B.M),g.Y36($.T),g.Y36(c.gz),g.Y36(p.C),g.Y36(T.J),g.Y36(s.Br),g.Y36(I.e),g.Y36(s.HT),g.Y36(c.F0),g.Y36(J.D),g.Y36(G.p))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-home"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(s.Hr,5),2&e)&&(g.iGM(n=g.CRH())&&(t.slides=n.first))},decls:24,vars:11,consts:[["slot","start"],["class","btn-company","id","home1",3,"routerLink",4,"ngIf"],["slot","end"],[3,"click"],["name","notifications-outline","slot","start"],["class","numberNotifys",4,"ngIf"],["name","scan-outline"],["slot","fixed",3,"ionRefresh"],["class","spiner-loading",4,"ngIf"],["class","media-box",3,"routerLink",4,"ngIf"],[4,"ngIf"],["class","blockListPond animationDiv",4,"ngIf"],["class","blockListPond animationDiv",4,"ngFor","ngForOf"],["id","home1",1,"btn-company",3,"routerLink"],["name","business-outline","color","primary"],[1,"numberNotifys"],[1,"spiner-loading"],["name","dots"],[1,"media-box",3,"routerLink"],["pager","true","mode","ios",1,"blockSlide",3,"options","ionSlideDidChange"],["slides",""],[4,"ngFor","ngForOf"],[1,"blockDetailImage","ion-activatable","ripple-parent"],[3,"innerHTML"],[2,"min-height","200px"],["onError","this.src='assets/img/ao_tom_default.jpg'",3,"src"],[1,"blockQuickAction"],[1,"elementAction","animationDiv","ion-activatable","ripple-parent",3,"click"],["src","assets/img/undraw_environmental_study_re_q4q8.svg"],[1,"title"],["src","assets/img/undraw_timeline_re_aw6g.svg"],["src","assets/img/undraw_home_settings_re_pkya.svg"],["src","assets/img/undraw_personal_finance_tqcd.svg"],["class","elementAction animationDiv ion-activatable ripple-parent",3,"click",4,"ngIf"],["src","assets/img/undraw_pie_chart_re_bgs8.svg"],["src","assets/img/checklist-svgrepo-com.svg"],[1,"blockListPond","animationDiv"],[1,"ion-padding"],[1,"titleFarm","ion-no-margin"],[1,"blockOwner"],["class","elementOwner ion-activatable ripple-parent",3,"routerLink",4,"ngFor","ngForOf"],[1,"elementOwner","ion-activatable","ripple-parent",3,"routerLink"],[1,"photodaily"],[1,"dailyOld"],[1,"ion-padding",3,"routerLink"],["name","chevron-forward-outline"],["class","ion-text-center",3,"routerLink",4,"ngIf"],[1,"ion-text-center",3,"routerLink"],[1,"ion-no-margin"]],template:function(e,t){var n,i;(1&e&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",0),g._UZ(3,"app-avatar"),g.YNc(4,V,2,1,"ion-button",1),g.qZA(),g.TgZ(5,"ion-title"),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.TgZ(8,"ion-buttons",2),g.TgZ(9,"ion-button",3),g.NdJ("click",function(){return t.presentNotifications()}),g._UZ(10,"ion-icon",4),g.YNc(11,W,2,1,"span",5),g.qZA(),g.TgZ(12,"ion-button",3),g.NdJ("click",function(){return t.presentScan()}),g._UZ(13,"ion-icon",6),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(14,"ion-content"),g.TgZ(15,"ion-refresher",7),g.NdJ("ionRefresh",function(e){return t.doRefresh(e)}),g._UZ(16,"ion-refresher-content"),g.qZA(),g.YNc(17,K,2,0,"div",8),g.YNc(18,ee,8,5,"div",9),g.YNc(19,ie,36,14,"div",10),g.TgZ(20,"div"),g.YNc(21,ce,8,4,"div",11),g.YNc(22,me,10,8,"div",12),g.YNc(23,Ce,9,5,"div",11),g.qZA(),g.qZA()),2&e)&&(g.xp6(4),g.Q6J("ngIf",null==t.dbLocalService.company?null:t.dbLocalService.company.code),g.xp6(2),g.hij(" ",g.lcZ(7,9,"MANAGEMENT")," "),g.xp6(5),g.Q6J("ngIf",t.numNotification>0),g.xp6(6),g.Q6J("ngIf",t.loadingFlag.pending),g.xp6(1),g.Q6J("ngIf",t.listPondStart.length>0),g.xp6(1),g.Q6J("ngIf",t.loadingFlag.result),g.xp6(2),g.Q6J("ngIf",(null==(n=t.dbLocalService.listFavoritePond())?null:n.length)>0),g.xp6(1),g.Q6J("ngForOf",t.dbLocalService.farms),g.xp6(1),g.Q6J("ngIf",(null==(i=t.dbLocalService.filterPond("permission","pond_manager"))?null:i.length)>0||(null==(i=t.dbLocalService.filterPond("permission","pond_operator"))?null:i.length)>0))},directives:[s.Gu,s.sr,s.Sm,j.A,r.O5,s.wd,s.YG,s.gu,s.W2,s.nJ,s.Wo,r.sg,s.YI,c.rH,s.PQ,s.Hr,s.H$,s.A$],pipes:[f.X$,z],styles:['[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 2.5em}[_nghost-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-family:"Averta"}[_nghost-%COMP%]   ion-ripple-effect[_ngcontent-%COMP%]{border-radius:16px!important}[_nghost-%COMP%]   .welcome-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}[_nghost-%COMP%]   .logo-home[_ngcontent-%COMP%]{max-height:40px;max-width:120px}[_nghost-%COMP%]   .l-icon[_ngcontent-%COMP%]{font-size:5em}[_nghost-%COMP%]   .numberNotifys[_ngcontent-%COMP%]{position:absolute;color:#fff;background-color:red;border-radius:50%;border:1px solid #fff;padding:3px 2px 2px;display:block;width:17px;height:17px;top:0;right:0;font-size:9px;text-align:center}[_nghost-%COMP%]   .role-question[_ngcontent-%COMP%]{font-family:"Averta"}@-webkit-keyframes myAni{0%{padding:30px}to{padding:15px}}@keyframes myAni{0%{padding:30px}to{padding:15px}}[_nghost-%COMP%]   .blockQuickAction[_ngcontent-%COMP%]{padding-left:16px;margin-top:25px;overflow:auto;white-space:nowrap;padding-top:30px;padding-bottom:16px}[_nghost-%COMP%]   .blockQuickAction[_ngcontent-%COMP%]   .elementAction[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;position:relative;width:25%;box-shadow:#0000001f 0 4px 16px;border-radius:16px;display:inline-block;text-align:center}[_nghost-%COMP%]   .blockQuickAction[_ngcontent-%COMP%]   .elementAction[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translateY(-50%);width:auto;height:60px;margin:0 auto}[_nghost-%COMP%]   .blockQuickAction[_ngcontent-%COMP%]   .elementAction[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform:translateY(-16px)}[_nghost-%COMP%]   .blockQuickAction[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]   .blockOwner[_ngcontent-%COMP%]{padding-left:16px;overflow:auto;white-space:nowrap;padding-bottom:16px}[_nghost-%COMP%]   .blockOwner[_ngcontent-%COMP%]   .elementOwner[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;width:100%;border-radius:16px;display:inline-block;position:relative;max-height:120px;max-width:120px}[_nghost-%COMP%]   .blockOwner[_ngcontent-%COMP%]   .photodaily[_ngcontent-%COMP%]{border-radius:16px;max-width:200px;max-height:120px}[_nghost-%COMP%]   .blockOwner[_ngcontent-%COMP%]   .dailyOld[_ngcontent-%COMP%]{position:absolute;bottom:0%;padding:5px;border-radius:0 16px;background-color:#fff}[_nghost-%COMP%]   .blockOwner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:16px}[_nghost-%COMP%]   .blockOwner[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]   .blockListPond[_ngcontent-%COMP%]{box-shadow:#0000001f 0 4px 16px;border-radius:16px;margin-top:16px;margin-bottom:16px}[_nghost-%COMP%]   .blockListPond[_ngcontent-%COMP%]   .titleFarm[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .media-box[_ngcontent-%COMP%]{text-align:center;position:relative;max-height:230px}[_nghost-%COMP%]   .media-box[_ngcontent-%COMP%]   .media-thumbnail[_ngcontent-%COMP%]{padding:5px}[_nghost-%COMP%]   .media-box[_ngcontent-%COMP%]   .blockDetailImage[_ngcontent-%COMP%]{width:90%;margin:0 auto;background-color:#fff;box-shadow:#0000001f 0 4px 16px;border-radius:16px;transform:translateY(-50%);display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .blockSlide[_ngcontent-%COMP%]{max-height:200px;border-radius:0 0 25px 25px;position:relative;overflow:hidden;width:100%;z-index:0}[_nghost-%COMP%]   .blockSlide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;transform:translateY(-30%)}']}),t}(),Te=o(76361),qe=o(24023),ke=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[r.ez,a.u5,s.Pc,a.UX,a.UX,f.aw.forChild(),c.Bz.forChild([{path:"",component:be},{path:":act",component:be}]),qe.E,Te.F]]}),t}()}}])}();