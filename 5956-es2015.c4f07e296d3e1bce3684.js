"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[5956],{76329:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(13409),r=n(25639),a=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new r.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(s.Subject);e.BehaviorSubject=a},13409:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(93576),r=n(67241),a=n(43984),c=n(25639),l=n(45298),d=n(81476),u=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return o(e,t),e}(r.Subscriber);e.SubjectSubscriber=u;var h=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return o(e,t),e.prototype[d.rxSubscriber]=function(){return new u(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].next(t)},e.prototype.error=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,i=e.slice(),o=0;o<n;o++)i[o].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new c.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),i=0;i<e;i++)n[i].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(t.complete(),a.Subscription.EMPTY):(this.observers.push(t),new l.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new s.Observable;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(s.Observable);e.Subject=h;var p=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return o(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.Subscription.EMPTY},e}(h);e.AnonymousSubject=p},45298:function(t,e,n){var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,n){var i=t.call(this)||this;return i.subject=e,i.subscriber=n,i.closed=!1,i}return o(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n(43984).Subscription);e.SubjectSubscription=s},25639:function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}();e.ObjectUnsubscribedError=n},10672:function(t,e,n){n.d(e,{q:function(){return A}});var i=n(64762),o=n(90665),s=n(16738),r=n(51937),a=n(27887),c=n(62374),l=n(37716),d=n(47063),u=n(84465),h=n(81780),p=n(71239),f=n(38583);function m(t,e){if(1&t&&(l.TgZ(0,"ion-select-option",19),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.Q6J("value",t.user_id),l.xp6(1),l.Oqu(t.user_name)}}function g(t,e){if(1&t&&(l.TgZ(0,"ion-select-option",19),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.s9C("value",t.code),l.xp6(1),l.Oqu(t.name)}}function v(t,e){if(1&t&&(l.TgZ(0,"ion-select-option",19),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.s9C("value",t.key),l.xp6(1),l.Oqu(t.label)}}function _(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ion-item",6),l.TgZ(1,"ion-label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"ion-select",20),l.NdJ("ionChange",function(e){return l.CHM(t),l.oxw().checkTypeAdd(e)}),l.YNc(5,v,2,2,"ion-select-option",11),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,2,"FARM_MOD.TYPE_CALENDAR")),l.xp6(3),l.Q6J("ngForOf",t.keys)}}function Z(t,e){1&t&&(l.TgZ(0,"div"),l._UZ(1,"ion-spinner",21),l.qZA())}let A=(()=>{class t{constructor(t,e,n,i,r,c,l,d){this.modalController=t,this.farmService=e,this.toastService=n,this.translate=i,this.pickerController=r,this.alertController=c,this.calendarService=l,this.dbLocalService=d,this.maxDate=s(),this.minDate=s().subtract(180,"days"),this.savingFlag=new a.E,this.form=new o.cw({content:new o.NI("",o.kI.required),date:new o.NI(s().format("YYYY-MM-DD"),o.kI.required),hour:new o.NI(s().format("HH:mm"),o.kI.required),type:new o.NI("all",o.kI.required),typeAdd:new o.NI("common",o.kI.required),time:new o.NI(""),farm_id:new o.NI(""),pond_id:new o.NI(""),key_check:new o.NI(""),value_check:new o.NI(""),reference_id:new o.NI(0,o.kI.required),user_perform:new o.NI("")}),this.listPond=[],this.members=[]}ngOnInit(){this.keys=[{key:"common",label:this.translate.instant("FARM_MOD.COMMON")},{key:"feed",label:this.translate.instant("POND_MOD.BE_FEED")},{key:"enviro",label:this.translate.instant("POND_MOD.BE_CHEMICAL_TREATMENT")}],this.getListPond(),this.data&&this.setForProcedure(),this.getListManager()}getListPond(){const t=this.dbLocalService.farms.find(t=>t.infor.code===this.calendarService.fcode)?this.dbLocalService.farms.find(t=>t.infor.code===this.calendarService.fcode).infor:null;this.listPond=this.dbLocalService.filterPond("farm_id",t.id).map(t=>t.infor)}getListManager(){this.calendarService.getMember().subscribe(t=>{1==t.status?this.members=t.data:this.toastService.warning(t.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}openPickerHour(){return(0,i.mG)(this,void 0,void 0,function*(){let t=this.form.value.hour.split(":");yield(yield this.pickerController.create({columns:[this.getColumnOptions(24,t[0],1),this.getColumnOptions(60,t[1],2)],buttons:[{text:"Cancel",role:"cancel"},{text:"Confirm",handler:t=>{this.form.patchValue({hour:t["col-1"].text+":"+t["col-2"].text})}}]})).present()})}getColumnOptions(t,e,n){let i=[],o=0;for(let s=0;s<t;s++)i.push(s<10?{text:"0"+s,value:s}:{text:s,value:s}),s==e&&(o=s);return{name:`col-${n}`,selectedIndex:o,options:i}}checkTypeAdd(t){return(0,i.mG)(this,void 0,void 0,function*(){if(t.detail.value===this.form.value.typeAdd){if("common"!=this.form.value.typeAdd)return yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("DEVICE_MOD.VALUE"),inputs:[{name:"value_check",type:"number",placeholder:this.translate.instant("POND_MOD.VALUE_CHECK")}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{this.form.patchValue({typeAdd:"common",value_check:"",key_check:""}),console.log("vao day")}},{text:"Ok",handler:t=>{let e=this.keys.filter(t=>t.key===this.form.value.typeAdd).length>0?this.keys.filter(t=>t.key===this.form.value.typeAdd)[0]:this.keys[0];this.form.patchValue({content:e.label+" "+t.value_check+" Kg",value_check:t.value_check,key_check:this.form.value.typeAdd})}}]})).present();this.form.patchValue({content:"",value_check:"",key_check:""})}})}setForProcedure(){this.form.patchValue({pond_id:this.data.pond_code,content:this.data.todo,type:this.data.pond_code,reference_id:this.data.id})}save(){const t={content:this.form.value.content,date:this.form.value.date,time:this.form.value.hour,farm_id:this.calendarService.fcode,pond_id:"all"==this.form.value.type?"":this.form.value.type,key_check:this.form.value.key_check,value_check:this.form.value.value_check,reference_id:this.form.value.reference_id,user_perform:this.form.value.user_perform};this.savingFlag.setPending(!0),this.calendarService.insertCalendar(t).subscribe(e=>{0==e.status?this.toastService.warning(e.error):(this.toastService.success(e.message),this.modalController.dismiss({pond:this.listPond.find(e=>e.code===t.pond_id),type:this.form.value.type})),this.savingFlag.setResult(!0)},t=>{this.savingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(d.IN),l.Y36(r.D),l.Y36(u.k),l.Y36(h.sK),l.Y36(d.up),l.Y36(d.Br),l.Y36(c.o),l.Y36(p.T))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-calendar-add"]],inputs:{data:"data"},decls:53,vars:39,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],[3,"disabled","click"],[3,"formGroup"],["lines","inset"],["formControlName","date",3,"displayFormat","min","max"],["slot","end",3,"click"],["formControlName","user_perform","value","brown","okText","Okay","cancelText","Dismiss"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","type","interface","action-sheet"],["value","all"],["lines","inset",4,"ngIf"],["position","floating"],["type","text","formControlName","content"],[1,"ion-text-center"],[4,"ngIf"],[3,"value"],["type","text","formControlName","typeAdd","interface","action-sheet",3,"ionChange"],["name","dots"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",0),l.TgZ(3,"ion-button",1),l.NdJ("click",function(){return e.modalController.dismiss(!1)}),l._UZ(4,"ion-icon",2),l.qZA(),l.qZA(),l.TgZ(5,"ion-title"),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.TgZ(8,"ion-buttons",3),l.TgZ(9,"ion-button",4),l.NdJ("click",function(){return e.save()}),l._uU(10),l.ALo(11,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"ion-content"),l.TgZ(13,"ion-list"),l.TgZ(14,"form",5),l.TgZ(15,"ion-item",6),l.TgZ(16,"ion-label"),l._uU(17),l.ALo(18,"translate"),l.qZA(),l._UZ(19,"ion-datetime",7),l.ALo(20,"translate"),l.qZA(),l.TgZ(21,"ion-item",6),l.TgZ(22,"ion-label"),l._uU(23),l.ALo(24,"translate"),l.qZA(),l.TgZ(25,"ion-button",8),l.NdJ("click",function(){return e.openPickerHour()}),l._uU(26),l.qZA(),l.qZA(),l.TgZ(27,"ion-item"),l.TgZ(28,"ion-label"),l._uU(29),l.ALo(30,"translate"),l.qZA(),l.TgZ(31,"ion-select",9),l.TgZ(32,"ion-select-option",10),l._uU(33,"None"),l.qZA(),l.YNc(34,m,2,2,"ion-select-option",11),l.qZA(),l.qZA(),l.TgZ(35,"ion-item",6),l.TgZ(36,"ion-label"),l._uU(37),l.ALo(38,"translate"),l.ALo(39,"translate"),l.qZA(),l.TgZ(40,"ion-select",12),l.TgZ(41,"ion-select-option",13),l._uU(42),l.ALo(43,"translate"),l.qZA(),l.YNc(44,g,2,2,"ion-select-option",11),l.qZA(),l.qZA(),l.YNc(45,_,6,4,"ion-item",14),l.TgZ(46,"ion-item",6),l.TgZ(47,"ion-label",15),l._uU(48),l.ALo(49,"translate"),l.qZA(),l._UZ(50,"ion-textarea",16),l.qZA(),l.qZA(),l.qZA(),l.TgZ(51,"div",17),l.YNc(52,Z,2,0,"div",18),l.qZA(),l.qZA()),2&t&&(l.xp6(6),l.Oqu(l.lcZ(7,19,"FARM_MOD.ADD_CALENDAR")),l.xp6(3),l.Q6J("disabled",e.form.invalid),l.xp6(1),l.hij(" ",l.lcZ(11,21,"FARM_MOD.SAVE")," "),l.xp6(4),l.Q6J("formGroup",e.form),l.xp6(3),l.Oqu(l.lcZ(18,23,"FARM_MOD.DATE")),l.xp6(2),l.Q6J("displayFormat",l.lcZ(20,25,"FORMAT_DATE_MOMENT"))("min",e.minDate.format("YYYY-MM-DD"))("max",e.maxDate.format("YYYY-MM-DD")),l.xp6(4),l.Oqu(l.lcZ(24,27,"POND_MOD.HOUR")),l.xp6(3),l.Oqu(e.form.value.hour),l.xp6(3),l.Oqu(l.lcZ(30,29,"AUTH.USER_NAME")),l.xp6(5),l.Q6J("ngForOf",e.members),l.xp6(3),l.AsE("",l.lcZ(38,31,"FARM"),"/",l.lcZ(39,33,"POND"),""),l.xp6(5),l.Oqu(l.lcZ(43,35,"FARM_MOD.COMMON")),l.xp6(2),l.Q6J("ngForOf",e.listPond),l.xp6(1),l.Q6J("ngIf","all"!=e.form.value.type),l.xp6(3),l.Oqu(l.lcZ(49,37,"POND_MOD.CONTENT")),l.xp6(4),l.Q6J("ngIf",e.savingFlag.pending))},directives:[d.Gu,d.sr,d.Sm,d.YG,d.gu,d.wd,d.W2,d.q_,o._Y,o.JL,o.sg,d.Ie,d.Q$,d.x4,d.QI,o.JJ,o.u,d.t9,d.n0,f.sg,f.O5,d.g2,d.j9,d.PQ],pipes:[h.X$],styles:[""]}),t})()},82267:function(t,e,n){n.d(e,{U:function(){return A}});var i=n(64762),o=n(90665),s=n(16738),r=n(51937),a=n(27887),c=n(62374),l=n(37716),d=n(47063),u=n(84465),h=n(81780),p=n(71239),f=n(38583);function m(t,e){if(1&t&&(l.TgZ(0,"ion-select-option",18),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.Q6J("value",t.user_id),l.xp6(1),l.Oqu(t.user_name)}}function g(t,e){if(1&t&&(l.TgZ(0,"ion-select-option",18),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.s9C("value",t.code),l.xp6(1),l.Oqu(t.name)}}function v(t,e){if(1&t&&(l.TgZ(0,"ion-select-option",18),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.s9C("value",t.key),l.xp6(1),l.Oqu(t.label)}}function _(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ion-item",9),l.TgZ(1,"ion-label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l.TgZ(4,"ion-select",19),l.NdJ("ionChange",function(e){return l.CHM(t),l.oxw().checkTypeAdd(e)}),l.YNc(5,v,2,2,"ion-select-option",8),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,2,"FARM_MOD.TYPE_CALENDAR")),l.xp6(3),l.Q6J("ngForOf",t.keys)}}function Z(t,e){1&t&&(l.TgZ(0,"div"),l._UZ(1,"ion-spinner",20),l.qZA())}let A=(()=>{class t{constructor(t,e,n,i,r,c,l,d){this.modalController=t,this.farmService=e,this.toastService=n,this.translate=i,this.pickerController=r,this.alertController=c,this.calendarService=l,this.dbLocalService=d,this.maxDate=s(),this.minDate=s().subtract(180,"days"),this.members=[],this.savingFlag=new a.E,this.form=new o.cw({content:new o.NI("",o.kI.required),date:new o.NI(s().format("YYYY-MM-DD"),o.kI.required),hour:new o.NI(s().format("HH:mm"),o.kI.required),type:new o.NI("all",o.kI.required),typeAdd:new o.NI("common",o.kI.required),time:new o.NI(""),farm_id:new o.NI(""),pond_id:new o.NI(""),key_check:new o.NI(""),value_check:new o.NI(""),reference_id:new o.NI(0,o.kI.required),user_perform:new o.NI("")}),this.listPond=[]}ngOnInit(){this.keys=[{key:"common",label:this.translate.instant("FARM_MOD.COMMON")},{key:"feed",label:this.translate.instant("POND_MOD.BE_FEED")},{key:"enviro",label:this.translate.instant("POND_MOD.BE_CHEMICAL_TREATMENT")}],this.getListPond(),this.getListManager()}getListManager(){this.calendarService.getMember().subscribe(t=>{1==t.status?(this.members=t.data,this.buildForm()):this.toastService.warning(t.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}buildForm(){this.form.patchValue({content:this.data.content,date:s(1e3*this.data.time).format("YYYY-MM-DD"),hour:s(1e3*this.data.time).format("HH:mm"),type:0==this.data.pond_id?"all":this.data.pond_id,typeAdd:this.data.key_check?this.data.key_check:"common",key_check:this.data.key_check,value_check:this.data.value_check,reference_id:this.data.reference_id,user_perform:this.data.user_perform}),console.log(this.form.value)}getListPond(){const t=this.dbLocalService.farms.find(t=>t.infor.code===this.calendarService.fcode)?this.dbLocalService.farms.find(t=>t.infor.code===this.calendarService.fcode).infor:null;this.listPond=this.dbLocalService.filterPond("farm_id",t.id).map(t=>t.infor)}openPickerHour(){return(0,i.mG)(this,void 0,void 0,function*(){let t=this.form.value.hour.split(":");yield(yield this.pickerController.create({columns:[this.getColumnOptions(24,t[0],1),this.getColumnOptions(60,t[1],2)],buttons:[{text:"Cancel",role:"cancel"},{text:"Confirm",handler:t=>{this.form.patchValue({hour:t["col-1"].value+":"+t["col-2"].value})}}]})).present()})}getColumnOptions(t,e,n){let i=[],o=0;for(let s=0;s<t;s++)i.push(s<10?{text:"0"+s,value:s}:{text:s,value:s}),s==e&&(o=s);return{name:`col-${n}`,selectedIndex:o,options:i}}checkTypeAdd(t){return(0,i.mG)(this,void 0,void 0,function*(){if(t.detail.value===this.form.value.typeAdd){if("common"!=this.form.value.typeAdd)return yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("DEVICE_MOD.VALUE"),inputs:[{name:"value_check",type:"number",placeholder:this.translate.instant("POND_MOD.VALUE_CHECK")}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{this.form.patchValue({typeAdd:"common",value_check:"",key_check:""})}},{text:"Ok",handler:t=>{let e=this.keys.filter(t=>t.key===this.form.value.typeAdd).length>0?this.keys.filter(t=>t.key===this.form.value.typeAdd)[0]:this.keys[0];this.form.patchValue({content:e.label+" "+t.value_check+" Kg",value_check:t.value_check,key_check:this.form.value.typeAdd})}}]})).present();this.form.patchValue({content:"",value_check:"",key_check:""})}})}setForProcedure(){this.form.patchValue({pond_id:this.data.pond_code,content:this.data.todo,type:this.data.pond_code})}save(){const t={content:this.form.value.content,date:this.form.value.date,time:this.form.value.hour,farm_id:this.calendarService.fcode,pond_id:"all"==this.form.value.type?"":this.form.value.type,key_check:this.form.value.key_check,value_check:this.form.value.value_check,reference_id:this.form.value.reference_id,user_perform:this.form.value.user_perform};let e=this.form.value.content.split(" ").find(t=>0==isNaN(t));"common"!=this.form.value.typeAdd&&(t.value_check=e),this.savingFlag.setPending(!0),this.calendarService.updateCalendar(this.data.id,t).subscribe(e=>{0==e.status?this.toastService.warning(e.error):(this.toastService.success(e.message),this.modalController.dismiss({pond:this.listPond.find(e=>e.code===t.pond_id),type:this.form.value.type})),this.savingFlag.setResult(!0)},t=>{this.savingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(d.IN),l.Y36(r.D),l.Y36(u.k),l.Y36(h.sK),l.Y36(d.up),l.Y36(d.Br),l.Y36(c.o),l.Y36(p.T))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-calendar-edit"]],inputs:{data:"data"},decls:53,vars:38,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],[3,"formGroup"],["formControlName","date",3,"displayFormat","min","max"],["formControlName","user_perform","value","brown","okText","Okay","cancelText","Dismiss"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["lines","inset"],["slot","end",3,"click"],["type","text","formControlName","type","interface","action-sheet"],["value","all"],["lines","inset",4,"ngIf"],["position","floating"],["type","text","formControlName","content"],[1,"ion-text-center"],[4,"ngIf"],[3,"value"],["type","text","formControlName","typeAdd","interface","action-sheet",3,"ionChange"],["name","dots"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",0),l.TgZ(3,"ion-button",1),l.NdJ("click",function(){return e.modalController.dismiss(!1)}),l._UZ(4,"ion-icon",2),l.qZA(),l.qZA(),l.TgZ(5,"ion-title"),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.TgZ(8,"ion-buttons",3),l.TgZ(9,"ion-button",1),l.NdJ("click",function(){return e.save()}),l._uU(10),l.ALo(11,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"ion-content"),l.TgZ(13,"ion-list"),l.TgZ(14,"form",4),l.TgZ(15,"ion-item"),l.TgZ(16,"ion-label"),l._uU(17),l.ALo(18,"translate"),l.qZA(),l._UZ(19,"ion-datetime",5),l.ALo(20,"translate"),l.qZA(),l.TgZ(21,"ion-item"),l.TgZ(22,"ion-label"),l._uU(23),l.ALo(24,"translate"),l.qZA(),l.TgZ(25,"ion-select",6),l.TgZ(26,"ion-select-option",7),l._uU(27,"None"),l.qZA(),l.YNc(28,m,2,2,"ion-select-option",8),l.qZA(),l.qZA(),l.TgZ(29,"ion-item",9),l.TgZ(30,"ion-label"),l._uU(31),l.ALo(32,"translate"),l.qZA(),l.TgZ(33,"ion-button",10),l.NdJ("click",function(){return e.openPickerHour()}),l._uU(34),l.qZA(),l.qZA(),l.TgZ(35,"ion-item",9),l.TgZ(36,"ion-label"),l._uU(37),l.ALo(38,"translate"),l.ALo(39,"translate"),l.qZA(),l.TgZ(40,"ion-select",11),l.TgZ(41,"ion-select-option",12),l._uU(42),l.ALo(43,"translate"),l.qZA(),l.YNc(44,g,2,2,"ion-select-option",8),l.qZA(),l.qZA(),l.YNc(45,_,6,4,"ion-item",13),l.TgZ(46,"ion-item",9),l.TgZ(47,"ion-label",14),l._uU(48),l.ALo(49,"translate"),l.qZA(),l._UZ(50,"ion-textarea",15),l.qZA(),l.qZA(),l.qZA(),l.TgZ(51,"div",16),l.YNc(52,Z,2,0,"div",17),l.qZA(),l.qZA()),2&t&&(l.xp6(6),l.Oqu(l.lcZ(7,18,"FARM_MOD.EDIT_CALENDAR")),l.xp6(4),l.hij(" ",l.lcZ(11,20,"FARM_MOD.SAVE")," "),l.xp6(4),l.Q6J("formGroup",e.form),l.xp6(3),l.Oqu(l.lcZ(18,22,"FARM_MOD.DATE")),l.xp6(2),l.Q6J("displayFormat",l.lcZ(20,24,"FORMAT_DATE_MOMENT"))("min",e.minDate.format("YYYY-MM-DD"))("max",e.maxDate.format("YYYY-MM-DD")),l.xp6(4),l.Oqu(l.lcZ(24,26,"AUTH.USER_NAME")),l.xp6(5),l.Q6J("ngForOf",e.members),l.xp6(3),l.Oqu(l.lcZ(32,28,"POND_MOD.HOUR")),l.xp6(3),l.Oqu(e.form.value.hour),l.xp6(3),l.AsE("",l.lcZ(38,30,"FARM"),"/",l.lcZ(39,32,"POND"),""),l.xp6(5),l.Oqu(l.lcZ(43,34,"FARM_MOD.COMMON")),l.xp6(2),l.Q6J("ngForOf",e.listPond),l.xp6(1),l.Q6J("ngIf","all"!=e.form.value.type),l.xp6(3),l.Oqu(l.lcZ(49,36,"POND_MOD.CONTENT")),l.xp6(4),l.Q6J("ngIf",e.savingFlag.pending))},directives:[d.Gu,d.sr,d.Sm,d.YG,d.gu,d.wd,d.W2,d.q_,o._Y,o.JL,o.sg,d.Ie,d.Q$,d.x4,d.QI,o.JJ,o.u,d.t9,d.n0,f.sg,f.O5,d.g2,d.j9,d.PQ],pipes:[h.X$],styles:[""]}),t})()},85956:function(t,e,n){n.r(e),n.d(e,{CalendarPageModule:function(){return E}});var i=n(38583),o=n(90665),s=n(47063),r=n(13619),a=n(64762),c=n(16738),l=n(50384),d=n(27887),u=n(10672),h=n(82267),p=n(62374),f=n(37716),m=n(84465),g=n(81780),v=n(71239);function _(t,e){1&t&&f._UZ(0,"ion-progress-bar",17)}function Z(t,e){if(1&t&&(f.TgZ(0,"div",18),f.TgZ(1,"small"),f._uU(2),f.qZA(),f._UZ(3,"ion-progress-bar",19),f.qZA()),2&t){const t=f.oxw();f.xp6(2),f.AsE("",t.totalTask.done," / ",t.totalTask.total,""),f.xp6(1),f.Q6J("value",t.totalTask.done/t.totalTask.total)}}function A(t,e){if(1&t&&(f.TgZ(0,"span"),f._uU(1),f.qZA()),2&t){const t=f.oxw().$implicit;f.xp6(1),f.Oqu(t.user_name)}}function b(t,e){if(1&t){const t=f.EpF();f.TgZ(0,"ion-item",21),f.NdJ("click",function(){const e=f.CHM(t),n=e.$implicit,i=e.index;return f.oxw(2).presentActionSheet(n,"listCommon",i)}),f._UZ(1,"ion-icon",22),f.TgZ(2,"ion-label"),f.TgZ(3,"p"),f.TgZ(4,"ion-text",23),f.YNc(5,A,2,1,"span",13),f._uU(6),f.ALo(7,"date"),f.qZA(),f.qZA(),f.TgZ(8,"ion-text"),f._uU(9),f.qZA(),f.qZA(),f.qZA()}if(2&t){const t=e.$implicit;f.xp6(1),f.Q6J("name",1==+t.done?"checkbox":"alarm")("color",1==+t.done?"success":"danger"),f.xp6(4),f.Q6J("ngIf",t.user_name),f.xp6(1),f.hij(" ",f.xi3(7,5,1e3*t.time,"HH:mm")," "),f.xp6(3),f.Oqu(t.content)}}function y(t,e){if(1&t&&(f.TgZ(0,"div"),f.TgZ(1,"ion-list"),f.TgZ(2,"ion-list-header"),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.YNc(5,b,10,8,"ion-item",20),f.qZA(),f.qZA()),2&t){const t=f.oxw();f.xp6(3),f.hij(" ",f.lcZ(4,2,"FARM_MOD.COMMON")," "),f.xp6(2),f.Q6J("ngForOf",t.listCommon)}}function O(t,e){if(1&t&&(f.TgZ(0,"span"),f._uU(1),f.qZA()),2&t){const t=f.oxw().$implicit;f.xp6(1),f.Oqu(t.user_name)}}function T(t,e){if(1&t){const t=f.EpF();f.TgZ(0,"ion-item",21),f.NdJ("click",function(){const e=f.CHM(t),n=e.$implicit,i=e.index;return f.oxw(2).presentActionSheet(n,"listPondJoin",i)}),f._UZ(1,"ion-icon",22),f.TgZ(2,"ion-label"),f.TgZ(3,"p"),f.TgZ(4,"ion-text",23),f.YNc(5,O,2,1,"span",13),f._uU(6),f.ALo(7,"date"),f.qZA(),f.qZA(),f.TgZ(8,"ion-text"),f._uU(9),f.qZA(),f.qZA(),f.qZA()}if(2&t){const t=e.$implicit;f.xp6(1),f.Q6J("name",1==+t.done?"checkbox":"alarm")("color",1==+t.done?"success":"danger"),f.xp6(4),f.Q6J("ngIf",t.user_name),f.xp6(1),f.hij(" ",f.xi3(7,5,1e3*t.time,"HH:mm")," "),f.xp6(3),f.Oqu(t.content)}}function x(t,e){if(1&t&&(f.TgZ(0,"div"),f.TgZ(1,"ion-list"),f.TgZ(2,"ion-list-header"),f._uU(3),f.qZA(),f.YNc(4,T,10,8,"ion-item",20),f.qZA(),f.qZA()),2&t){const t=f.oxw();f.xp6(3),f.hij(" ",t.pondSeleted.name," "),f.xp6(1),f.Q6J("ngForOf",t.listPondJoin)}}function q(t,e){1&t&&(f.TgZ(0,"div"),f.TgZ(1,"ion-item",24),f.TgZ(2,"ion-label"),f.TgZ(3,"p"),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(4),f.Oqu(f.lcZ(5,1,"EXPERT_MOD.EMPTY")))}function k(t,e){1&t&&(f.TgZ(0,"div",18),f.TgZ(1,"small"),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.qZA()),2&t&&(f.xp6(2),f.Oqu(f.lcZ(3,1,"FARM_MOD.SUGGEST_CALENDAR")))}function S(t,e){if(1&t){const t=f.EpF();f.TgZ(0,"ion-card",26),f.NdJ("click",function(){const e=f.CHM(t).$implicit;return f.oxw(2).addSuggest(e)}),f._UZ(1,"ion-ripple-effect"),f.TgZ(2,"ion-card-content"),f._UZ(3,"ion-icon",27),f.TgZ(4,"ion-label"),f.TgZ(5,"b"),f._uU(6),f.qZA(),f._uU(7),f.qZA(),f.qZA(),f.qZA()}if(2&t){const t=e.$implicit;f.xp6(6),f.Oqu(t.pond_name),f.xp6(1),f.hij(" ",t.todo,"")}}function C(t,e){if(1&t&&(f.TgZ(0,"div"),f.YNc(1,k,4,3,"div",12),f.YNc(2,S,8,2,"ion-card",25),f.qZA()),2&t){const t=f.oxw();f.xp6(1),f.Q6J("ngIf",t.totalTask.total>0),f.xp6(1),f.Q6J("ngForOf",t.listSuggest)}}const M=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o,s,r,a,l){this.route=t,this.calendarService=e,this.toastService=n,this.translate=i,this.modalController=o,this.alertController=s,this.actionSheetController=r,this.dbLocalService=a,this.authService=l,this.day=c().startOf("day"),this.listCommon=[],this.listPondJoin=[],this.listSuggest=[],this.loadingFlag=new d.E,this.dateRangeSelected=c().format("YYYY-MM-DD"),this.maxDate=c().add(14,"days").startOf("day"),this.minDate=c().subtract(14,"days").startOf("day"),this.totalTask={done:1,total:1}}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){this.fcode=this.route.snapshot.paramMap.get("id"),this.calendarService.setFarmCode(this.fcode),yield this.dbLocalService.getLocalData(),this.farmItem=this.dbLocalService.farms.find(t=>t.infor.code===this.fcode)?this.dbLocalService.farms.find(t=>t.infor.code===this.fcode).infor:null,this.loadUser(),this.getList(),this.getListSuggest()})}getList(){this.loadingFlag.setPending(!0),this.listCommon=[];const t=this.pondSeleted?this.pondSeleted.code:"";console.log(this.pondSeleted),this.calendarService.getList(this.fcode,t,this.day.valueOf()/1e3).subscribe(t=>{1==t.status?(this.listCommon=t.data.farm,this.listPondJoin=t.data.pond,this.listPondJoin.length>0&&!this.pondSeleted&&(console.log(this.listPondJoin[0].pond_id),this.pondSeleted=this.dbLocalService.ponds.find(t=>t.infor.code===this.listPondJoin[0].pond_id)?this.dbLocalService.ponds.find(t=>t.infor.code===this.listPondJoin[0].pond_id).infor:null),this.checkTotalDone(),this.loadingFlag.setResult(!0)):(this.toastService.warning(t.error),this.loadingFlag.setResult(!0))},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT")),this.loadingFlag.setResult(!1)})}checkTotalDone(){this.totalTask={done:0,total:0},this.listCommon.forEach(t=>{1==t.done&&(this.totalTask.done+=1)}),this.listPondJoin.forEach(t=>{1==t.done&&(this.totalTask.done+=1)}),this.totalTask.total=this.listCommon.length+this.listPondJoin.length}onChangeDate(t){this.dateRangeSelected=t.detail.value;let e=c(this.dateRangeSelected).startOf("day");this.day=e,this.getList()}changeDate(t){let e=c(this.dateRangeSelected).add(t,"days");if(e<this.minDate||e>this.maxDate)return!1;this.dateRangeSelected=e.format("YYYY-MM-DD")}presentActionSheet(t,e,n){return(0,a.mG)(this,void 0,void 0,function*(){const i=yield this.actionSheetController.create({header:"Albums",cssClass:"my-custom-class",buttons:[{text:this.translate.instant(1==+t.done?"UNCONFIRM":"CONFIRM"),icon:1==+t.confirm?"checkbox":"checkbox-outline",handler:()=>{this.checkItem(t,e,n)}},{text:this.translate.instant("DELETE"),role:"destructive",icon:"trash",handler:()=>{this.presentAlertRemove(t,e,n)}},{text:this.translate.instant("EDIT"),icon:"pencil",handler:()=>{this.presentEdit(t,e,n)}},{text:this.translate.instant("CANCEL"),icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield i.present();const{role:o}=yield i.onDidDismiss();console.log("onDidDismiss resolved with role",o)})}presentAdd(){return(0,a.mG)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:u.q});return t.onDidDismiss().then(t=>{const e=t.data;e&&(this.pondSeleted="all"==e.type?this.pondSeleted:e.pond,this.getList(),this.getListSuggest())}),yield t.present()})}presentEdit(t,e,n){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:h.U,componentProps:{data:t}});return e.onDidDismiss().then(t=>{const e=t.data;e&&(this.pondSeleted="all"==e.type?this.pondSeleted:e.pond,this.getList(),this.getListSuggest())}),yield e.present()})}loadUser(){this.authService.getUserStorage().then(t=>{t&&this.authService.setUser(t)})}presentAlertRemove(t,e,n){return(0,a.mG)(this,void 0,void 0,function*(){this.authService.user.id==t.user_id?yield(yield this.alertController.create({header:this.translate.instant("MONEY_MOD.DELETE"),message:this.translate.instant("COMPANY_MOD.CONFIRM_DELETE"),buttons:[{text:this.translate.instant("OPTION.OK"),handler:()=>{this.delete(t,e,n)}},{text:this.translate.instant("OPTION.CANCEL"),role:"cancel",cssClass:"secondary"}]})).present():this.toastService.warning(this.translate.instant("TRACEABILITY_MOD.YOU_NOT_HAVE_PERMISSION"))})}checkItem(t,e,n){this.calendarService.changeState(t.id).subscribe(t=>{1==t.status?(this[e][n].done=1==this[e][n].done?0:1,this.checkTotalDone(),this.toastService.success(t.message)):this.toastService.danger(t.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}choosePond(){return(0,a.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Radio",inputs:this.dbLocalService.filterPond("farm_id",this.farmItem.id).map(t=>({name:t.infor.name,type:"radio",label:t.infor.name,value:t.infor.code,checked:!(!this.pondSeleted||t.infor.code!==this.pondSeleted.code)})),buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Ok",handler:t=>{this.pondSeleted=this.dbLocalService.ponds.find(e=>e.infor.code===t)?this.dbLocalService.ponds.find(e=>e.infor.code===t).infor:null,this.getList(),this.getListSuggest()}}]})).present()})}getListSuggest(){this.calendarService.getListSuggest().subscribe(t=>{1==t.status?this.listSuggest=t.data:this.toastService.warning(t.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}addSuggest(t){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:u.q,componentProps:{data:t}});return e.onDidDismiss().then(t=>{const e=t.data;e&&(this.pondSeleted="all"==e.type?this.pondSeleted:e.pond,this.getList(),this.getListSuggest())}),yield e.present()})}delete(t,e,n){this.calendarService.deleteItem(t.id).subscribe(t=>{1==t.status?(this[e].splice(n,1),this.checkTotalDone()):this.toastService.warning(t.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}return t.\u0275fac=function(e){return new(e||t)(f.Y36(r.gz),f.Y36(p.o),f.Y36(m.k),f.Y36(g.sK),f.Y36(s.IN),f.Y36(s.Br),f.Y36(s.BX),f.Y36(v.T),f.Y36(l.e))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-calendar"]],decls:34,vars:20,consts:[["slot","start"],["text","","defaultHref","tabs/management"],["slot","end",3,"click"],[3,"innerHTML"],["type","indeterminate",4,"ngIf"],[1,"ion-text-center"],["size","2"],["fill","clear",3,"disabled","click"],["slot","icon-only","name","arrow-back-outline"],["size","8"],[1,"ion-text-center","w-100",3,"displayFormat","min","max","value","ionChange"],["slot","icon-only","name","arrow-forward-outline"],["style","padding: 0 16px 0 16px;",4,"ngIf"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],["type","indeterminate"],[2,"padding","0 16px 0 16px"],["mode","ios",3,"value"],["detail","",3,"click",4,"ngFor","ngForOf"],["detail","",3,"click"],["slot","start",3,"name","color"],["color","primary"],["lines","none"],["class","boxSuggest ion-activatable ripple-parent",3,"click",4,"ngFor","ngForOf"],[1,"boxSuggest","ion-activatable","ripple-parent",3,"click"],["name","bulb-outline"]],template:function(t,e){1&t&&(f.TgZ(0,"ion-header"),f.TgZ(1,"ion-toolbar"),f.TgZ(2,"ion-buttons",0),f._UZ(3,"ion-back-button",1),f.qZA(),f.TgZ(4,"ion-title"),f._uU(5),f.ALo(6,"translate"),f.qZA(),f.TgZ(7,"ion-buttons",2),f.NdJ("click",function(){return e.choosePond()}),f.TgZ(8,"ion-button"),f._UZ(9,"span",3),f.ALo(10,"translate"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(11,_,1,0,"ion-progress-bar",4),f.TgZ(12,"ion-content"),f.TgZ(13,"div",5),f.TgZ(14,"ion-grid"),f.TgZ(15,"ion-row"),f.TgZ(16,"ion-col",6),f.TgZ(17,"ion-button",7),f.NdJ("click",function(){return e.changeDate(-1)}),f._UZ(18,"ion-icon",8),f.qZA(),f.qZA(),f.TgZ(19,"ion-col",9),f.TgZ(20,"ion-item"),f.TgZ(21,"ion-datetime",10),f.NdJ("ionChange",function(t){return e.onChangeDate(t)}),f.ALo(22,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(23,"ion-col",6),f.TgZ(24,"ion-button",7),f.NdJ("click",function(){return e.changeDate(1)}),f._UZ(25,"ion-icon",11),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(26,Z,4,3,"div",12),f.YNc(27,y,6,4,"div",13),f.YNc(28,x,5,2,"div",13),f.YNc(29,q,6,3,"div",13),f.YNc(30,C,3,2,"div",13),f.TgZ(31,"ion-fab",14),f.TgZ(32,"ion-fab-button",15),f.NdJ("click",function(){return e.presentAdd()}),f._UZ(33,"ion-icon",16),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(5),f.Oqu(f.lcZ(6,14,"FARM_MOD.CALENDAR")),f.xp6(4),f.Q6J("innerHTML",e.pondSeleted?e.pondSeleted.name:f.lcZ(10,16,"FARM_MOD.COMMON"),f.oJD),f.xp6(2),f.Q6J("ngIf",e.loadingFlag.pending),f.xp6(6),f.Q6J("disabled",e.dateRangeSelected<=e.minDate.format("YYYY-MM-DD")),f.xp6(4),f.Q6J("displayFormat",f.lcZ(22,18,"FORMAT_DATE_MOMENT"))("min",e.minDate.format("YYYY-MM-DD"))("max",e.maxDate.format("YYYY-MM-DD"))("value",e.dateRangeSelected),f.xp6(3),f.Q6J("disabled",e.dateRangeSelected>=e.maxDate.format("YYYY-MM-DD")),f.xp6(2),f.Q6J("ngIf",e.totalTask.total>0),f.xp6(1),f.Q6J("ngIf",e.listCommon.length>0),f.xp6(1),f.Q6J("ngIf",e.listPondJoin.length>0),f.xp6(1),f.Q6J("ngIf",0==e.listCommon.length&&0==e.listPondJoin.length),f.xp6(1),f.Q6J("ngIf",e.listSuggest.length>0))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.YG,i.O5,s.W2,s.jY,s.Nd,s.wI,s.gu,s.Ie,s.x4,s.QI,s.IJ,s.W4,s.X7,s.q_,s.yh,i.sg,s.Q$,s.yW,s.PM,s.H$,s.FN],pipes:[g.X$,i.uU],styles:["ion-checkbox[_ngcontent-%COMP%]   .item-cover[_ngcontent-%COMP%]{display:none}.fontColor[_ngcontent-%COMP%]{color:#0d47a1}.boxTask[_ngcontent-%COMP%]   .headerDivider[_ngcontent-%COMP%]{border-radius:5px;height:80%;position:absolute;left:10px;top:10%}.boxTask[_ngcontent-%COMP%]   .undone[_ngcontent-%COMP%]{border:2px solid #0D47A1;background-color:#0d47a1}.boxTask[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%]{border:3px solid #2dd36f;background-color:#2dd36f}.boxTask[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{position:absolute;top:10%;right:10px}.boxTask[_ngcontent-%COMP%]   .actionBtn[_ngcontent-%COMP%]{position:absolute;bottom:10%;right:10px}.boxSuggest[_ngcontent-%COMP%]{background-color:#e6ff6e}.boxSuggest[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:2px}"]}),t})()},{path:"calendar-add",loadChildren:()=>n.e(3188).then(n.bind(n,93188)).then(t=>t.CalendarAddPageModule)},{path:"calendar-edit",loadChildren:()=>n.e(882).then(n.bind(n,50882)).then(t=>t.CalendarEditPageModule)}];let N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[r.Bz.forChild(M)],r.Bz]}),t})();var D=n(54373);let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({providers:[p.o],imports:[[i.ez,o.u5,o.UX,s.Pc,N,i.ez,o.u5,g.aw.forChild(),D.i]]}),t})()},51937:function(t,e,n){n.d(e,{D:function(){return a}});var i=n(76329),o=n(15189),s=n(88002),r=n(37716);let a=(()=>{class t{constructor(t){this.reqAPIService=t,this.urlApi="/manager/farm-api",this.urlApiAdress="/manager/address-api",this.reload$=new i.BehaviorSubject(0),this.numberOfPonds=0}setCode(t){this.fcode=t}setFarm(t){this.farm=t,this.permission=t.permission}loadPonds(){return this.reqAPIService.get("/manager/farm-api-mobie?fcode="+this.fcode+"&action=get-item-pond").pipe((0,s.U)(t=>t))}listAddress(t){return this.reqAPIService.get(this.urlApiAdress+"?action=listUnit&id="+t)}loadFarm(){return this.reqAPIService.get("/manager/farm-api-info?fcode="+this.fcode).pipe((0,s.U)(t=>(this.setFarm(t.data),t)))}getSeting(){return this.reqAPIService.get("/manager/farm-api-mobie?action=get-farm-setting&fcode="+this.fcode).pipe((0,s.U)(t=>t))}updatePrivate(t){return this.reqAPIService.post("/manager/farm-api-mobie?action=add-farm-setting&fcode="+this.fcode,t).pipe((0,s.U)(t=>t))}removePermission(t,e){return this.reqAPIService.get("/manager/farm-api-mobie?action=remove-manager&fcode="+this.fcode+"&user_id="+t+"&position="+e).pipe((0,s.U)(t=>t))}updateFarm(t){return this.reqAPIService.post("/manager/farm-edit-api-mobie?action=edit&fcode="+this.fcode,t).pipe((0,s.U)(t=>t))}destroyValue(){this.farm=null,this.fcode=null,this.permission=null,this.numberOfPonds=null}getSpecies(){return this.reqAPIService.get("/manager/farm-create-api?action=get-species").pipe((0,s.U)(t=>t))}insertPond(t){return this.reqAPIService.post("/manager/farm-api-mobie?action=add-pond&fcode="+this.fcode,t).pipe((0,s.U)(t=>t))}insertOnePond(t){return this.reqAPIService.post("/manager/farm-api-mobie?action=add-a-pond&fcode="+this.fcode,t).pipe((0,s.U)(t=>t))}loadReport(){return this.reqAPIService.get("/manager/farm-api-report?fcode="+this.fcode)}listStore(){return this.reqAPIService.get("/manager/farm-api-mobie?fcode="+this.fcode+"&action=list-store")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o.$))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);