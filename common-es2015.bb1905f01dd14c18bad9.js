"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[8592],{6633:function(t,e,i){i.d(e,{c:function(){return a}});var n=i(23150),o=i(52954),s=i(97279);const a=(t,e)=>{let i,a;const r=(t,n,o)=>{if("undefined"==typeof document)return;const s=document.elementFromPoint(t,n);s&&e(s)?s!==i&&(l(),c(s,o)):l()},c=(t,e)=>{i=t,a||(a=i);const o=i;(0,n.c)(()=>o.classList.add("ion-activated")),e()},l=(t=!1)=>{if(!i)return;const e=i;(0,n.c)(()=>e.classList.remove("ion-activated")),t&&a!==i&&i.click(),i=void 0};return(0,s.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:t=>r(t.currentX,t.currentY,o.a),onMove:t=>r(t.currentX,t.currentY,o.b),onEnd:()=>{l(!0),(0,o.h)(),a=void 0}})}},77330:function(t,e,i){i.d(e,{a:function(){return s},d:function(){return a}});var n=i(8239),o=i(52377);const s=function(){var t=(0,n.Z)(function*(t,e,i,n,s){if(t)return t.attachViewToDom(e,i,s,n);if("string"!=typeof i&&!(i instanceof HTMLElement))throw new Error("framework delegate is missing");const a="string"==typeof i?e.ownerDocument&&e.ownerDocument.createElement(i):i;return n&&n.forEach(t=>a.classList.add(t)),s&&Object.assign(a,s),e.appendChild(a),yield new Promise(t=>(0,o.c)(a,t)),a});return function(e,i,n,o,s){return t.apply(this,arguments)}}(),a=(t,e)=>{if(e){if(t)return t.removeViewFromDom(e.parentElement,e);e.remove()}return Promise.resolve()}},52954:function(t,e,i){i.d(e,{a:function(){return s},b:function(){return a},c:function(){return o},d:function(){return c},h:function(){return r}});const n={getEngine(){const t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(t){const e=this.getEngine();if(!e)return;const i=this.isCapacitor()?t.style.toUpperCase():t.style;e.impact({style:i})},notification(t){const e=this.getEngine();if(!e)return;const i=this.isCapacitor()?t.style.toUpperCase():t.style;e.notification({style:i})},selection(){this.impact({style:"light"})},selectionStart(){const t=this.getEngine();!t||(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged(){const t=this.getEngine();!t||(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd(){const t=this.getEngine();!t||(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},o=()=>{n.selection()},s=()=>{n.selectionStart()},a=()=>{n.selectionChanged()},r=()=>{n.selectionEnd()},c=t=>{n.impact(t)}},66575:function(t,e,i){i.d(e,{s:function(){return n}});const n=t=>{try{if(t instanceof class{constructor(t){this.value=t}})return t.value;if(!a()||"string"!=typeof t||""===t)return t;const e=document.createDocumentFragment(),i=document.createElement("div");e.appendChild(i),i.innerHTML=t,c.forEach(t=>{const i=e.querySelectorAll(t);for(let n=i.length-1;n>=0;n--){const t=i[n];t.parentNode?t.parentNode.removeChild(t):e.removeChild(t);const a=s(t);for(let e=0;e<a.length;e++)o(a[e])}});const n=s(e);for(let t=0;t<n.length;t++)o(n[t]);const r=document.createElement("div");r.appendChild(e);const l=r.querySelector("div");return null!==l?l.innerHTML:r.innerHTML}catch(e){return console.error(e),""}},o=t=>{if(t.nodeType&&1!==t.nodeType)return;for(let i=t.attributes.length-1;i>=0;i--){const e=t.attributes.item(i),n=e.name;if(!r.includes(n.toLowerCase())){t.removeAttribute(n);continue}const o=e.value;null!=o&&o.toLowerCase().includes("javascript:")&&t.removeAttribute(n)}const e=s(t);for(let i=0;i<e.length;i++)o(e[i])},s=t=>null!=t.children?t.children:t.childNodes,a=()=>{const t=window,e=t&&t.Ionic&&t.Ionic.config;return!e||(e.get?e.get("sanitizerEnabled",!0):!0===e.sanitizerEnabled||void 0===e.sanitizerEnabled)},r=["class","id","href","src","name","slot"],c=["script","style","iframe","meta","link","object","embed"]},60408:function(t,e,i){i.d(e,{S:function(){return n}});const n={bubbles:{dur:1e3,circles:9,fn:(t,e,i)=>{const n=t*e/i-t+"ms",o=2*Math.PI*e/i;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":n}}}},circles:{dur:1e3,circles:8,fn:(t,e,i)=>{const n=e/i,o=t*n-t+"ms",s=2*Math.PI*n;return{r:5,style:{top:9*Math.sin(s)+"px",left:9*Math.cos(s)+"px","animation-delay":o}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,e)=>({r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}})},lines:{dur:1e3,lines:12,fn:(t,e,i)=>({y1:17,y2:29,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/i-t+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(t,e,i)=>({y1:12,y2:20,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/i-t+"ms"}})}}},61269:function(t,e,i){i.d(e,{c:function(){return s},g:function(){return a},h:function(){return o},o:function(){return c}});var n=i(8239);const o=(t,e)=>null!==e.closest(t),s=(t,e)=>"string"==typeof t&&t.length>0?Object.assign({"ion-color":!0,[`ion-color-${t}`]:!0},e):e,a=t=>{const e={};return(t=>void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(t=>null!=t).map(t=>t.trim()).filter(t=>""!==t):[])(t).forEach(t=>e[t]=!0),e},r=/^[a-z][a-z0-9+\-.]*:/,c=function(){var t=(0,n.Z)(function*(t,e,i,n){if(null!=t&&"#"!==t[0]&&!r.test(t)){const o=document.querySelector("ion-router");if(o)return null!=e&&e.preventDefault(),o.push(t,i,n)}return!1});return function(e,i,n,o){return t.apply(this,arguments)}}()},90650:function(t,e,i){i.d(e,{Q:function(){return n.Q}});var n=i(88991),o=i(65199),s=(i(18844),i(13242)),a=i(74664),r=i(39163);(0,o.D)([s.N,a.N]),(0,o.D)(r.T)},79503:function(t,e,i){i.d(e,{A:function(){return a}});var n=i(50384),o=i(37716),s=i(47063);let a=(()=>{class t{constructor(t,e){this.menu=t,this.authService=e}ngOnInit(){}openMenu(){console.log("hi"),this.menu.enable(!0,"userMenu"),this.menu.close("list"),this.menu.open("userMenu")}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(s._q),o.Y36(n.e))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-avatar"]],decls:2,vars:1,consts:[["onError","this.src='assets/img/default-profile.jpg'",1,"avatar",3,"src","click"]],template:function(t,e){1&t&&(o.TgZ(0,"ion-button"),o.TgZ(1,"img",0),o.NdJ("click",function(){return e.openMenu()}),o.qZA(),o.qZA()),2&t&&(o.xp6(1),o.Q6J("src",e.authService.FILE_PATH+"/upload/users/avatars/medium/"+(null==e.authService.userInfo?null:e.authService.userInfo.avatar),o.LSH))},directives:[s.YG],styles:[".avatar[_ngcontent-%COMP%]{width:25px;height:25px;border-radius:50%;border:1px solid #3880ff}"]}),t})()},76361:function(t,e,i){i.d(e,{F:function(){return a}});var n=i(38583),o=i(47063),s=i(37716);let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.Pc,n.ez]]}),t})()},65744:function(t,e,i){i.d(e,{e:function(){return l}});var n=i(90665),o=i(17324),s=i(16738),a=i(37716),r=i(47063),c=i(81780);let l=(()=>{class t{constructor(t,e,i){this.modalCrt=t,this.localNotifications=e,this.translateService=i,this.form=new n.cw({title:new n.NI("",n.kI.required),time:new n.NI(s().format("YYYY-MM-DD HH:mm"),n.kI.required),repeat:new n.NI(!1,n.kI.required)}),this.maxDate=s().add(180,"days").format(),this.minDate=s().format()}ngOnInit(){}dismiss(){this.modalCrt.dismiss()}save(){this.localNotifications.schedule({text:this.form.value.title,trigger:{at:new Date(s(this.form.value.time).subtract(5,"minutes").toDate())},foreground:!0,autoClear:!1}),console.log(new Date(s(this.form.value.time).subtract(5,"minutes").toDate())),this.modalCrt.dismiss(!0)}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(r.IN),a.Y36(o.sn),a.Y36(c.sK))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-reminder"]],decls:27,vars:20,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],["color","tb",3,"disabled","click"],[3,"formGroup"],["lines","inset"],["position","floating"],["formControlName","title"],["formControlName","time",3,"displayFormat","min","max"],["formControlName","repeat"]],template:function(t,e){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a._uU(2),a.ALo(3,"translate"),a.TgZ(4,"ion-buttons",0),a.TgZ(5,"ion-button",1),a.NdJ("click",function(){return e.dismiss()}),a._UZ(6,"ion-icon",2),a.qZA(),a.qZA(),a.TgZ(7,"ion-buttons",3),a.TgZ(8,"ion-button",4),a.NdJ("click",function(){return e.save()}),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"ion-content",5),a.TgZ(12,"ion-item",6),a.TgZ(13,"ion-label",7),a._uU(14),a.ALo(15,"translate"),a.qZA(),a._UZ(16,"ion-textarea",8),a.qZA(),a.TgZ(17,"ion-item"),a.TgZ(18,"ion-label",7),a._uU(19),a.ALo(20,"translate"),a.qZA(),a._UZ(21,"ion-datetime",9),a.qZA(),a.TgZ(22,"ion-item"),a.TgZ(23,"ion-label"),a._uU(24),a.ALo(25,"translate"),a.qZA(),a._UZ(26,"ion-toggle",10),a.qZA(),a.qZA()),2&t&&(a.xp6(2),a.hij(" ",a.lcZ(3,10,"ASSISTANT.REMINDER")," "),a.xp6(6),a.Q6J("disabled",e.form.invalid),a.xp6(1),a.Oqu(a.lcZ(10,12,"SAVE")),a.xp6(2),a.Q6J("formGroup",e.form),a.xp6(3),a.Oqu(a.lcZ(15,14,"ASSISTANT.CONTENT")),a.xp6(5),a.Oqu(a.lcZ(20,16,"ASSISTANT.TIME")),a.xp6(2),a.Q6J("displayFormat","HH:mm DD-MM-YYYY")("min",e.minDate)("max",e.maxDate),a.xp6(3),a.Oqu(a.lcZ(25,18,"ASSISTANT.REPEAT")))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.W2,n.JL,n.sg,r.Ie,r.Q$,r.g2,r.j9,n.JJ,n.u,r.x4,r.QI,r.ho,r.w],pipes:[c.X$],styles:[""]}),t})()},62374:function(t,e,i){i.d(e,{o:function(){return s}});var n=i(15189),o=i(37716);let s=(()=>{class t{constructor(t){this.reqAPIService=t,this.API_URL="/manager/calendar-api",this.API_URL_USER="/user/list-api-mobie",this.API_PROCEDURE_DAILY="/manager/daily-procedure-api-for-mobie"}setFarmCode(t){this.fcode=t}getList(t,e,i){return this.reqAPIService.get(this.API_URL+"?action=list&fcode="+t+"&pcode="+e+"&begin_day="+i)}getFarmCalendar(t){return this.reqAPIService.get(this.API_URL+"?action=child&fid="+t)}getManageableCalendar(){return this.reqAPIService.get(this.API_URL+"?action=manager")}getMember(){return this.reqAPIService.get(this.API_URL+"?action=member")}getCreatableCalendar(){return this.reqAPIService.get(this.API_URL+"?action=myCreate")}changeState(t){return this.reqAPIService.post(this.API_URL+"?action=done&item="+t,t)}deleteItem(t){return this.reqAPIService.post(this.API_URL+"?action=delete&item="+t,t)}getPonds(){return this.reqAPIService.get(this.API_URL+"?action=pond&term=")}getUsers(t){return this.reqAPIService.get(this.API_URL_USER+"?action=get-user&key="+t)}getUserByID(t){return this.reqAPIService.get(this.API_URL_USER+"?action=get-user&action=user&userId="+t)}getListObject(){return this.reqAPIService.get(this.API_URL+"?action=add")}insertCalendar(t){return this.reqAPIService.post(this.API_URL+"?action=add",t)}updateCalendar(t,e){return this.reqAPIService.post(this.API_URL+"?action=edit&item="+t,e)}getListByPond(t,e,i){return this.reqAPIService.get(this.API_URL+"?action=listPond&pcode="+t+"&time="+e+"&cond="+i)}getListSuggest(){return this.reqAPIService.get(this.API_URL+"?action=suggest&fcode="+this.fcode)}getExpectedDaily(t,e,i){return this.reqAPIService.get(this.API_PROCEDURE_DAILY+"?action=getSuggestDaily&scode="+t+"&key_check="+e+"&date="+i)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(n.$))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})()},3356:function(t,e,i){i.d(e,{v:function(){return x}});var n=i(90665),o=i(27887),s=i(26164),a=i(87152),r=i(51937),c=i(37716),l=i(47063),d=i(84465),u=i(81780),g=i(71239),h=i(38583);function p(t,e){1&t&&(c.TgZ(0,"div"),c._UZ(1,"ion-spinner",17),c.qZA())}function Z(t,e){if(1&t&&(c.TgZ(0,"ion-select-option",21),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.Q6J("value",t.id),c.xp6(1),c.Oqu(t.name)}}function m(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-item",18),c.TgZ(1,"ion-label",8),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"ion-select",19),c.NdJ("ionChange",function(e){return c.CHM(t),c.oxw().changeProvince(e)}),c.YNc(5,Z,2,2,"ion-select-option",20),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"PROVINCE")),c.xp6(3),c.Q6J("ngForOf",t.listProvince)}}function A(t,e){if(1&t&&(c.TgZ(0,"ion-select-option",21),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.Q6J("value",t.id),c.xp6(1),c.Oqu(t.name)}}function f(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-item",18),c.TgZ(1,"ion-label",8),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"ion-select",22),c.NdJ("ionChange",function(e){return c.CHM(t),c.oxw().changeDistrict(e)}),c.YNc(5,A,2,2,"ion-select-option",20),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"DISTRICT")),c.xp6(3),c.Q6J("ngForOf",t.listDistrict)}}function T(t,e){if(1&t&&(c.TgZ(0,"ion-select-option",21),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.Q6J("value",t.id),c.xp6(1),c.Oqu(t.name)}}function q(t,e){if(1&t&&(c.TgZ(0,"ion-item",18),c.TgZ(1,"ion-label",8),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"ion-select",23),c.YNc(5,T,2,2,"ion-select-option",20),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"WARDS")),c.xp6(3),c.Q6J("ngForOf",t.listWards)}}function _(t,e){if(1&t&&(c.TgZ(0,"ion-select-option",21),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.Q6J("value",t.species_id),c.xp6(1),c.Oqu(t.name)}}function v(t,e){if(1&t&&(c.TgZ(0,"ion-item"),c.TgZ(1,"ion-label",24),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"ion-select",25),c.YNc(5,_,2,2,"ion-select-option",20),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,2,"COMPANY_MOD.MAIN_SPECIES")),c.xp6(3),c.Q6J("ngForOf",t.species)}}let x=(()=>{class t{constructor(t,e,i,n,s,a,r,c){this.modalController=t,this._formBuilder=e,this.companyService=i,this.toastService=n,this.geolocation=s,this.translate=a,this.farmService=r,this.dbLocalService=c,this.savingFlag=new o.E,this.species=[]}ngOnInit(){this.createForm(),this.getSpecies(),this.getLocation(),this.getListProvince(0)}createForm(){this.form=this._formBuilder.group({name:["",n.kI.required],address:["",n.kI.required],area:["",n.kI.required],species_id:["",n.kI.required],longitude:"",latitude:"",province:"",district:"",wards:""})}save(){let t={name:this.form.value.name,address:this.form.value.address,species:this.form.value.species_id,area:this.form.value.area,latitude:this.form.value.latitude,longitude:this.form.value.longitude,province:this.form.value.province,district:this.form.value.district,wards:this.form.value.wards,pond:{all:0,empty:0,good:0,stocking:0,warning:0}};this.savingFlag.setPending(!0),this.companyService.createFarm(t).subscribe(e=>{if(e.error||1!=e.status)this.toastService.warning(e.error);else{this.toastService.success(this.translate.instant("COMPANY_MOD.NOTI_CREATE"));let i={id:e.data.id,code:e.data.code,name:this.form.value.name,public:e.data.public,address:this.form.value.address,species:this.form.value.species_id,area:this.form.value.area,latitude:this.form.value.latitude,longitude:this.form.value.longitude,province_id:e.data.province_id,district_id:e.data.district_id,wards_id:e.data.wards_id,permission:"company_manager"};t.id=e.data.id,t.code=e.data.code,this.companyService.listFarm.push(t),this.dbLocalService.farms&&(this.dbLocalService.farms.push({infor:i,stores:[]}),this.dbLocalService.setLocalData("farms",this.dbLocalService.farms)),this.modalController.dismiss()}this.savingFlag.setResult(!0)},t=>{this.savingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}changeProvince(t){let e=t.detail.value;this.listDistrict=[],this.form.value.district_id=0,this.getListDistrict(e)}changeDistrict(t){let e=t.detail.value;this.listWards=[],this.form.value.wards_id=0,this.getListWards(e)}getSpecies(){this.companyService.loadSpecies().subscribe(t=>{t.error||1!=t.status?this.toastService.warning(t.error):this.species=t.data},t=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}getListProvince(t){this.farmService.listAddress(t).subscribe(t=>{1==t.status?this.listProvince=t.data:this.toastService.warning(t.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}getListDistrict(t){this.farmService.listAddress(t).subscribe(t=>{1==t.status?this.listDistrict=t.data:this.toastService.warning(t.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}getListWards(t){this.farmService.listAddress(t).subscribe(t=>{1==t.status?this.listWards=t.data:this.toastService.warning(t.error)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}getLocation(){this.geolocation.getCurrentPosition().then(t=>{console.log(t),t.coords.latitude&&t.coords.longitude&&(this.form.controls.latitude.setValue(t.coords.latitude),this.form.controls.longitude.setValue(t.coords.longitude))}).catch(()=>{this.toastService.warning(this.translate.instant("COMPANY_MOD.ERROR_LOCATE"))})}clearLocate(){this.form.controls.latitude.setValue(""),this.form.controls.longitude.setValue("")}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(l.IN),c.Y36(n.qu),c.Y36(s.J),c.Y36(d.k),c.Y36(a.b),c.Y36(u.sK),c.Y36(r.D),c.Y36(g.T))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-company-farm-create"]],decls:55,vars:37,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],[3,"disabled","click"],[1,"ion-padding",3,"formGroup"],[1,"ion-padding","ion-text-center"],[4,"ngIf"],["position","floating"],["formControlName","name"],["formControlName","address","type","text","inputmode","text"],["lines","inset",4,"ngIf"],["formControlName","area","type","tel","inputmode","decimal"],["formControlName","longitude","type","tel","inputmode","decimal"],["formControlName","latitude","type","tel","inputmode","decimal"],["lines","none"],["slot","end","fill","outline",3,"click"],["name","dots"],["lines","inset"],["formControlName","province",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","district",3,"ionChange"],["formControlName","wards"],["position","stacked"],["formControlName","species_id"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c.TgZ(3,"ion-button",1),c.NdJ("click",function(){return e.modalController.dismiss()}),c._UZ(4,"ion-icon",2),c.qZA(),c.qZA(),c.TgZ(5,"ion-title"),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.TgZ(8,"ion-buttons",3),c.TgZ(9,"ion-button",4),c.NdJ("click",function(){return e.save()}),c._uU(10),c.ALo(11,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"ion-content",5),c.TgZ(13,"div",6),c.TgZ(14,"p"),c._uU(15),c.ALo(16,"translate"),c.qZA(),c.YNc(17,p,2,0,"div",7),c.qZA(),c.TgZ(18,"ion-list"),c.TgZ(19,"ion-item"),c.TgZ(20,"ion-label",8),c._uU(21),c.ALo(22,"translate"),c.qZA(),c._UZ(23,"ion-input",9),c.qZA(),c.TgZ(24,"ion-item"),c.TgZ(25,"ion-label",8),c._uU(26),c.ALo(27,"translate"),c.qZA(),c._UZ(28,"ion-input",10),c.qZA(),c.YNc(29,m,6,4,"ion-item",11),c.YNc(30,f,6,4,"ion-item",11),c.YNc(31,q,6,4,"ion-item",11),c.TgZ(32,"ion-item"),c.TgZ(33,"ion-label",8),c._uU(34),c.ALo(35,"translate"),c.qZA(),c._UZ(36,"ion-input",12),c.qZA(),c.YNc(37,v,6,4,"ion-item",7),c.TgZ(38,"ion-item"),c.TgZ(39,"ion-label",8),c._uU(40),c.ALo(41,"translate"),c.qZA(),c._UZ(42,"ion-input",13),c.qZA(),c.TgZ(43,"ion-item"),c.TgZ(44,"ion-label",8),c._uU(45),c.ALo(46,"translate"),c.qZA(),c._UZ(47,"ion-input",14),c.qZA(),c.TgZ(48,"ion-item",15),c.TgZ(49,"ion-button",16),c.NdJ("click",function(){return e.clearLocate()}),c._uU(50),c.ALo(51,"translate"),c.qZA(),c.TgZ(52,"ion-button",16),c.NdJ("click",function(){return e.getLocation()}),c._uU(53),c.ALo(54,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(6),c.Oqu(c.lcZ(7,17,"COMPANY_MOD.CREATE_FARM")),c.xp6(3),c.Q6J("disabled",e.form.invalid),c.xp6(1),c.hij(" ",c.lcZ(11,19,"COMPANY_MOD.SAVE")," "),c.xp6(2),c.Q6J("formGroup",e.form),c.xp6(3),c.Oqu(c.lcZ(16,21,"COMPANY_MOD.A_FARM_INCLUDE")),c.xp6(2),c.Q6J("ngIf",e.savingFlag.pending),c.xp6(4),c.Oqu(c.lcZ(22,23,"COMPANY_MOD.NAME_FARM")),c.xp6(5),c.Oqu(c.lcZ(27,25,"COMPANY_MOD.ADDRESS")),c.xp6(3),c.Q6J("ngIf",e.listProvince),c.xp6(1),c.Q6J("ngIf",e.listDistrict),c.xp6(1),c.Q6J("ngIf",e.listWards),c.xp6(3),c.hij("",c.lcZ(35,27,"AREA")," (ha)"),c.xp6(3),c.Q6J("ngIf",e.species.length>0),c.xp6(3),c.Oqu(c.lcZ(41,29,"COMPANY_MOD.LONG")),c.xp6(5),c.Oqu(c.lcZ(46,31,"COMPANY_MOD.LAT")),c.xp6(5),c.Oqu(c.lcZ(51,33,"COMPANY_MOD.DEL_LOCATE")),c.xp6(3),c.Oqu(c.lcZ(54,35,"COMPANY_MOD.CURRENT_LOCATE")))},directives:[l.Gu,l.sr,l.Sm,l.YG,l.gu,l.wd,l.W2,n.JL,n.sg,h.O5,l.q_,l.Ie,l.Q$,l.pK,l.j9,n.JJ,n.u,l.PQ,l.t9,l.QI,h.sg,l.n0],pipes:[u.X$],styles:[""]}),t})()},83729:function(t,e,i){i.d(e,{W:function(){return O}});var n=i(64762),o=i(27887),s=i(26262),a=i(37716),r=i(47063),c=i(84465),l=i(13619),d=i(81780),u=i(71239),g=i(38583);function h(t,e){1&t&&a._UZ(0,"ion-icon",10)}function p(t,e){1&t&&a._UZ(0,"ion-icon",11)}function Z(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"EXPERT_MOD.EMPTY")))}function m(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"ion-item"),a.TgZ(1,"ion-label",13),a.TgZ(2,"ion-text",3),a.TgZ(3,"h3"),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"p"),a._uU(6),a.qZA(),a.YNc(7,Z,3,3,"p",7),a.TgZ(8,"ion-text",14),a.TgZ(9,"small"),a._uU(10),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"ion-button",15),a.NdJ("click",function(){const e=a.CHM(t),i=e.$implicit,n=e.index;return a.oxw(2).rejectInvitation(i,n)}),a._uU(12,"x\xf3a"),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(4),a.Oqu(t.infor.name),a.xp6(2),a.Oqu(t.infor.species),a.xp6(1),a.Q6J("ngIf","0"==t.infor.current_season),a.xp6(3),a.Oqu(t.infor.farm_name)}}function A(t,e){if(1&t&&(a.TgZ(0,"div"),a.YNc(1,m,13,4,"ion-item",12),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.dbLocalService.filterPond("permission","pond_expert"))}}function f(t,e){1&t&&a._UZ(0,"ion-icon",10)}function T(t,e){1&t&&a._UZ(0,"ion-icon",11)}function q(t,e){1&t&&(a.TgZ(0,"p"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&t&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"EXPERT_MOD.EMPTY")))}function _(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"ion-item",17),a.NdJ("click",function(){const e=a.CHM(t),i=e.$implicit,n=e.index;return a.oxw(2).actionSheet(i,n)}),a.TgZ(1,"ion-label",13),a.TgZ(2,"ion-text",3),a.TgZ(3,"h3"),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"p"),a._uU(6),a.qZA(),a.YNc(7,q,3,3,"p",7),a.TgZ(8,"ion-text",14),a.TgZ(9,"small"),a._uU(10),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(4),a.Oqu(t.name),a.xp6(2),a.Oqu(t.species),a.xp6(1),a.Q6J("ngIf","0"==t.current_season),a.xp6(3),a.Oqu(t.farm_name)}}function v(t,e){if(1&t&&(a.TgZ(0,"div"),a.YNc(1,_,11,4,"ion-item",16),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.invitationList)}}function x(t,e){1&t&&(a.TgZ(0,"div",18),a._UZ(1,"ion-spinner",19),a.qZA())}let O=(()=>{class t{constructor(t,e,i,n,s,a,r){this.modalController=t,this.actionSheetController=e,this.expertService=i,this.toastService=n,this.router=s,this.translate=a,this.dbLocalService=r,this.loadingFlag=new o.E,this.invitationList=[],this.showAceptedList=!1,this.showInvitationList=!0}ngOnInit(){this.getInvitationList()}actionSheet(t,e){return(0,n.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheetController.create({buttons:[{text:this.translate.instant("EXPERT_MOD.RECEIVE"),handler:()=>{this.acceptInvitation(t,e)}},{text:this.translate.instant("EXPERT_MOD.SEE"),handler:()=>{this.router.navigateByUrl("/pond/"+t.code),this.modalController.dismiss()}},{text:this.translate.instant("OPTION.CANCEL"),role:"cancel"}]})).present()})}getInvitationList(){this.loadingFlag.setPending(!0),this.expertService.getInvitationList().pipe().subscribe(t=>{t.error||1!=t.status?this.toastService.warning(t.error):this.invitationList=this.filerList(t.data),this.loadingFlag.setResult(!0)},t=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT")),this.loadingFlag.setResult(!1)})}filerList(t){return t.filter(t=>this.dbLocalService.ponds.findIndex(e=>e.infor.code==t.code)<0)}acceptInvitation(t,e){this.expertService.acceptInvitation({item:t.code}).pipe().subscribe(i=>{i.error||0==i.status?this.toastService.warning(i.error):(this.invitationList.splice(e,1),t.permission="pond_expert",this.dbLocalService.addItem("ponds",{infor:t}),this.toastService.success(i.success))},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}rejectInvitation(t,e){this.expertService.rejectInvitation(t.infor.code).pipe().subscribe(e=>{e.error||0==e.status?this.toastService.warning(e.error):(this.dbLocalService.removeItem("ponds",t),this.invitationList.push(t),this.toastService.success(e.success))},t=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(r.IN),a.Y36(r.BX),a.Y36(s.$),a.Y36(c.k),a.Y36(l.F0),a.Y36(d.sK),a.Y36(u.T))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-expert-invitation"]],decls:32,vars:18,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["color","primary"],["shape","round",3,"click"],["name","chevron-down-outline",4,"ngIf"],["name","chevron-up-outline",4,"ngIf"],[4,"ngIf"],["color","danger"],["class","spiner-loading",4,"ngIf"],["name","chevron-down-outline"],["name","chevron-up-outline"],[4,"ngFor","ngForOf"],[1,"ion-text-wrap"],["color","medium"],["color","danger","fill","outline","shape","round",3,"click"],["detail","",3,"click",4,"ngFor","ngForOf"],["detail","",3,"click"],[1,"spiner-loading"],["name","dots"]],template:function(t,e){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a.TgZ(3,"ion-button",1),a.NdJ("click",function(){return e.modalController.dismiss()}),a._UZ(4,"ion-icon",2),a.qZA(),a.qZA(),a.TgZ(5,"ion-title"),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"ion-content"),a.TgZ(9,"ion-list"),a.TgZ(10,"ion-list-header"),a.TgZ(11,"ion-label"),a._uU(12),a.ALo(13,"translate"),a.TgZ(14,"ion-badge",3),a._uU(15),a.qZA(),a.qZA(),a.TgZ(16,"ion-button",4),a.NdJ("click",function(){return e.showAceptedList=!e.showAceptedList}),a.YNc(17,h,1,0,"ion-icon",5),a.YNc(18,p,1,0,"ion-icon",6),a.qZA(),a.qZA(),a.YNc(19,A,2,1,"div",7),a.qZA(),a.TgZ(20,"ion-list"),a.TgZ(21,"ion-list-header"),a.TgZ(22,"ion-label"),a._uU(23),a.ALo(24,"translate"),a.TgZ(25,"ion-badge",8),a._uU(26),a.qZA(),a.qZA(),a.TgZ(27,"ion-button",4),a.NdJ("click",function(){return e.showInvitationList=!e.showInvitationList}),a.YNc(28,f,1,0,"ion-icon",5),a.YNc(29,T,1,0,"ion-icon",6),a.qZA(),a.qZA(),a.YNc(30,v,2,1,"div",7),a.qZA(),a.YNc(31,x,2,0,"div",9),a.qZA()),2&t&&(a.xp6(6),a.Oqu(a.lcZ(7,12,"EXPERT_MOD.INVITATION")),a.xp6(6),a.hij(" ",a.lcZ(13,14,"EXPERT_MOD.ACCEPTED_INVA")," "),a.xp6(3),a.hij(" ",e.dbLocalService.filterPond("permission","pond_expert").length," "),a.xp6(2),a.Q6J("ngIf",!e.showAceptedList),a.xp6(1),a.Q6J("ngIf",e.showAceptedList),a.xp6(1),a.Q6J("ngIf",e.showAceptedList),a.xp6(4),a.hij("",a.lcZ(24,16,"EXPERT_MOD.WAITING")," "),a.xp6(3),a.Oqu(e.invitationList.length),a.xp6(2),a.Q6J("ngIf",!e.showInvitationList),a.xp6(1),a.Q6J("ngIf",e.showInvitationList),a.xp6(1),a.Q6J("ngIf",e.showInvitationList),a.xp6(1),a.Q6J("ngIf",e.loadingFlag.pending))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.wd,r.W2,r.q_,r.yh,r.Q$,r.yp,g.O5,g.sg,r.Ie,r.yW,r.PQ],pipes:[d.X$],styles:["h3[_ngcontent-%COMP%]{font-size:1.2em}"]}),t})()},26262:function(t,e,i){i.d(e,{$:function(){return s}});var n=i(15189),o=i(37716);let s=(()=>{class t{constructor(t){this.reqAPIService=t,this.EXPERT_URL="/expert/"}getAcceptanceList(){return this.reqAPIService.get("/expert/pond-api")}getInvitationList(){return this.reqAPIService.get("/expert/pond-api?op=invitation")}acceptInvitation(t){return this.reqAPIService.post("/expert/action-api?a=accept",t)}rejectInvitation(t){return this.reqAPIService.get("/expert/action-api?a=remove&item="+t)}addSuggest(t){return this.reqAPIService.post(this.EXPERT_URL+"api-suggest?action=add",t)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(n.$))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})()},60271:function(t,e,i){i.d(e,{u:function(){return A}});var n=i(16738),o=i(51937),s=i(27887),a=i(19228),r=i(37716),c=i(84465),l=i(47063),d=i(81780),u=i(38583),g=i(56209);function h(t,e){1&t&&r._UZ(0,"ion-progress-bar",5)}function p(t,e){if(1&t&&(r.TgZ(0,"ion-card",8),r.TgZ(1,"ion-card-header"),r.TgZ(2,"ion-card-subtitle"),r._UZ(3,"ion-icon",14),r._uU(4),r.ALo(5,"translate"),r.qZA(),r.qZA(),r.TgZ(6,"ion-card-content"),r._UZ(7,"div",15),r.qZA(),r.qZA()),2&t){const t=r.oxw(2);r.xp6(4),r.hij(" ",r.lcZ(5,2,"FARM_MOD.TOTAL_IN")," "),r.xp6(3),r.Q6J("options",t.optionIn)}}function Z(t,e){if(1&t&&(r.TgZ(0,"ion-card",8),r.TgZ(1,"ion-card-header"),r.TgZ(2,"ion-card-subtitle"),r._UZ(3,"ion-icon",16),r._uU(4),r.ALo(5,"translate"),r.qZA(),r.qZA(),r.TgZ(6,"ion-card-content"),r._UZ(7,"div",15),r.qZA(),r.qZA()),2&t){const t=r.oxw(2);r.xp6(4),r.hij(" ",r.lcZ(5,2,"FARM_MOD.TOTAL_OUT")," "),r.xp6(3),r.Q6J("options",t.optionOut)}}function m(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"ion-card"),r.TgZ(2,"ion-list"),r.TgZ(3,"ion-item",6),r.TgZ(4,"ion-label"),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.TgZ(7,"ion-datetime",7),r.NdJ("ionChange",function(e){return r.CHM(t),r.oxw().onChangeDateStart(e)}),r.ALo(8,"translate"),r.qZA(),r.qZA(),r.TgZ(9,"ion-item",6),r.TgZ(10,"ion-label"),r._uU(11),r.ALo(12,"translate"),r.qZA(),r.TgZ(13,"ion-datetime",7),r.NdJ("ionChange",function(e){return r.CHM(t),r.oxw().onChangeDateEnd(e)}),r.ALo(14,"translate"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"ion-card",8),r.TgZ(16,"ion-card-header"),r.TgZ(17,"ion-card-subtitle"),r._uU(18," \u0110\u1ea7u k\xec "),r.qZA(),r.qZA(),r.TgZ(19,"ion-card-content"),r.TgZ(20,"ion-card-content"),r.TgZ(21,"ion-item",9),r.TgZ(22,"ion-text"),r._uU(23," T\u1ed3n qu\u1ef9 "),r.qZA(),r.TgZ(24,"ion-text",10),r._uU(25),r.ALo(26,"number"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(27,"ion-card",8),r.TgZ(28,"ion-card-header"),r.TgZ(29,"ion-card-subtitle"),r._uU(30," Ng\xe0y cu\u1ed1i "),r.qZA(),r.qZA(),r.TgZ(31,"ion-card-content"),r.TgZ(32,"ion-card-content"),r.TgZ(33,"ion-item",9),r.TgZ(34,"ion-text"),r._uU(35," T\u1ed5ng thu "),r.qZA(),r.TgZ(36,"ion-text",11),r._uU(37),r.ALo(38,"number"),r.qZA(),r.qZA(),r.TgZ(39,"ion-item",9),r.TgZ(40,"ion-text"),r._uU(41," T\u1ed5ng chi "),r.qZA(),r.TgZ(42,"ion-text",12),r._uU(43),r.ALo(44,"number"),r.qZA(),r.qZA(),r.TgZ(45,"ion-item",9),r.TgZ(46,"ion-text"),r._uU(47," T\u1ed5ng n\u1ee3 "),r.qZA(),r.TgZ(48,"ion-text",12),r._uU(49),r.ALo(50,"number"),r.qZA(),r.qZA(),r.TgZ(51,"ion-item",9),r.TgZ(52,"ion-text"),r._uU(53," N\u1ee3 \u0111\xe3 tr\u1ea3 "),r.qZA(),r.TgZ(54,"ion-text",12),r._uU(55),r.ALo(56,"number"),r.qZA(),r.qZA(),r.TgZ(57,"ion-item",9),r.TgZ(58,"ion-text"),r._uU(59," Cho vay "),r.qZA(),r.TgZ(60,"ion-text",10),r._uU(61),r.ALo(62,"number"),r.qZA(),r.qZA(),r.TgZ(63,"ion-item",9),r.TgZ(64,"ion-text"),r._uU(65," \u0110\xe3 thu "),r.qZA(),r.TgZ(66,"ion-text",10),r._uU(67),r.ALo(68,"number"),r.qZA(),r.qZA(),r.TgZ(69,"ion-item",9),r.TgZ(70,"ion-text"),r._uU(71," T\u1ed3n qu\u1ef9 "),r.qZA(),r.TgZ(72,"ion-text",11),r._uU(73),r.ALo(74,"number"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(75,p,8,4,"ion-card",13),r.YNc(76,Z,8,4,"ion-card",13),r.qZA()}if(2&t){const t=r.oxw();r.xp6(5),r.Oqu(r.lcZ(6,20,"FARM_MOD.FROM")),r.xp6(2),r.Q6J("displayFormat",r.lcZ(8,22,"FORMAT_DATE_MOMENT"))("min",t.minDate.format("YYYY-MM-DD"))("max",t.maxDate.format("YYYY-MM-DD"))("value",t.dateRangeStart),r.xp6(4),r.Oqu(r.lcZ(12,24,"FARM_MOD.TO")),r.xp6(2),r.Q6J("displayFormat",r.lcZ(14,26,"FORMAT_DATE_MOMENT"))("min",t.dateRangeStart)("max",t.maxDate.format("YYYY-MM-DD"))("value",t.dateRangeEnd),r.xp6(12),r.hij(" ",r.lcZ(26,28,t.data.fund.total_in-t.data.fund.total_out)," \u0111 "),r.xp6(12),r.hij(" ",r.lcZ(38,30,t.data.total_in)," \u0111 "),r.xp6(6),r.hij(" ",r.lcZ(44,32,t.data.total_out)," \u0111 "),r.xp6(6),r.hij(" ",r.lcZ(50,34,t.data.debt)," \u0111 "),r.xp6(6),r.hij(" ",r.xi3(56,36,t.data.debt_payed,"0.0")," \u0111 "),r.xp6(6),r.hij(" ",r.lcZ(62,39,t.data.need_collect)," \u0111 "),r.xp6(6),r.hij(" ",r.lcZ(68,41,t.data.collected)," \u0111 "),r.xp6(6),r.hij(" ",r.lcZ(74,43,t.data.fund.total_in-t.data.fund.total_out+(t.data.total_in-t.data.total_out)+(t.data.collected-t.data.debt_payed))," \u0111 "),r.xp6(2),r.Q6J("ngIf",t.view),r.xp6(1),r.Q6J("ngIf",t.view)}}let A=(()=>{class t{constructor(t,e,i,o,a,r){this.toastService=t,this.modalCtrl=e,this.translate=i,this.farmService=o,this.moneyService=a,this.cd=r,this.dateRangeStart=n().subtract(90,"days").format("YYYY-MM-DD"),this.dateRangeEnd=n().format("YYYY-MM-DD"),this.maxDate=n(),this.minDate=n().subtract(365,"days"),this.loadingFlag=new s.E,this.view=!1,this.optionIn={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",position:["50%","50%"]},legend:{left:"center",top:"bottom"},toolbox:{show:!0},series:[{name:this.translate.instant("FARM_MOD.TOTAL_IN"),type:"pie",radius:[15,80],center:["50%","40%"],roseType:"area",itemStyle:{borderRadius:5},labelLine:{show:!0,length:1},data:[]}]},this.optionOut={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)",position:["50%","50%"]},legend:{left:"center",top:"bottom"},toolbox:{show:!0},series:[{name:this.translate.instant("FARM_MOD.TOTAL_OUT"),type:"pie",radius:[15,80],center:["50%","40%"],roseType:"area",itemStyle:{borderRadius:5},labelLine:{show:!0,length:1},data:[]}]}}ngOnInit(){this.getData()}onChangeDateStart(t){this.dateRangeStart=t.detail.value,this.getData()}onChangeDateEnd(t){this.dateRangeEnd=t.detail.value,this.getData()}getData(){let t={timeFrom:new Date(this.dateRangeStart).getTime()/1e3,timeEnd:new Date(this.dateRangeEnd).getTime()/1e3};this.loadingFlag.setPending(!0),this.moneyService.getAnalyst(t).subscribe(t=>{1==t.status?(this.data=t.data,console.log(this.data),this.initChart()):this.toastService.warning(t.error),this.loadingFlag.setResult(!0)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT")),this.loadingFlag.setResult(!1)})}initChart(){let t=[{name:this.translate.instant("FARM_MOD.COMMON"),value:0}];this.data.in.forEach(e=>{e.name?t.push({name:e.name,value:parseInt(e.total)}):t[0].value+=parseInt(e.total)});let e=[{name:this.translate.instant("FARM_MOD.COMMON"),value:0}];this.data.out.forEach(t=>{t.name?e.push({name:t.name,value:parseInt(t.total)}):e[0].value+=parseInt(t.total)}),this.optionIn.series[0].data=t,this.optionOut.series[0].data=e,this.cd.detectChanges()}ionViewDidEnter(){setTimeout(()=>{this.view=!0},500)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(c.k),r.Y36(l.IN),r.Y36(d.sK),r.Y36(o.D),r.Y36(a.r),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-money-estimate"]],decls:12,vars:8,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["type","indeterminate",4,"ngIf"],[4,"ngIf"],["type","indeterminate"],["lines","inset"],[3,"displayFormat","min","max","value","ionChange"],["mode","ios"],["lines","none"],["slot","end","color","success"],["slot","end","color","primary"],["slot","end"],["mode","ios",4,"ngIf"],["name","arrow-undo-outline"],["echarts","",3,"options"],["name","arrow-redo-outline"]],template:function(t,e){1&t&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-title"),r._uU(3),r.ALo(4,"translate"),r.ALo(5,"translate"),r.qZA(),r.TgZ(6,"ion-buttons",0),r.TgZ(7,"ion-button",1),r.NdJ("click",function(){return e.modalCtrl.dismiss()}),r._UZ(8,"ion-icon",2),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(9,"ion-content"),r.YNc(10,h,1,0,"ion-progress-bar",3),r.YNc(11,m,77,45,"div",4),r.qZA()),2&t&&(r.xp6(3),r.AsE("",r.lcZ(4,4,"ANALYTICS")," ",r.lcZ(5,6,"MONEY"),""),r.xp6(7),r.Q6J("ngIf",e.loadingFlag.pending),r.xp6(1),r.Q6J("ngIf",!e.loadingFlag.pending))},directives:[l.Gu,l.sr,l.wd,l.Sm,l.YG,l.gu,l.W2,u.O5,l.X7,l.PM,l.q_,l.Ie,l.Q$,l.x4,l.QI,l.Zi,l.tO,l.FN,l.yW,g._w],pipes:[d.X$,u.JJ],styles:[""]}),t})()},49038:function(t,e,i){i.d(e,{u:function(){return T}});var n=i(79765),o=i(25917),s=i(54395),a=i(87519),r=i(43190),c=i(88002),l=i(27887),d=i(19228),u=i(37716),g=i(47063),h=i(38583),p=i(81780);function Z(t,e){1&t&&(u.TgZ(0,"ion-list-header"),u.TgZ(1,"ion-label"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.qZA()),2&t&&(u.xp6(2),u.Oqu(u.lcZ(3,1,"WAREHOUSE_MOD.RESULT")))}function m(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"ion-item"),u.TgZ(1,"ion-label"),u.TgZ(2,"h3"),u._uU(3),u.qZA(),u.TgZ(4,"p"),u.TgZ(5,"span"),u._uU(6),u.ALo(7,"number"),u.qZA(),u._uU(8),u.qZA(),u.qZA(),u.TgZ(9,"ion-button",7),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw().onSelect(e)}),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.qZA()}if(2&t){const t=u.oxw().$implicit;u.xp6(3),u.Oqu(""!=t.customer_name?t.customer_name:"None"),u.xp6(3),u.Oqu(u.lcZ(7,4,t.amounts-t.amounts_payed)),u.xp6(2),u.hij(" | ",t.title,""),u.xp6(2),u.hij(" ",u.lcZ(11,6,"WAREHOUSE_MOD.SELECT")," ")}}function A(t,e){if(1&t&&(u.TgZ(0,"div"),u.YNc(1,m,12,8,"ion-item",4),u.qZA()),2&t){const t=e.$implicit,i=u.oxw();u.xp6(1),u.Q6J("ngIf",t.id!==i.bill_id)}}function f(t,e){1&t&&(u.TgZ(0,"div"),u._UZ(1,"ion-spinner",8),u.qZA())}let T=(()=>{class t{constructor(t,e){this.modalController=t,this.moneyService=e,this.loadingFlag=new l.E,this.searchBill=new n.xQ,this.bill_id=0}ngOnInit(){console.log(this.type);let t=this.searchBill.pipe((0,s.b)(300),(0,a.x)(),(0,r.w)(t=>this.getListMoney(t)));this.bills$=t,this.bills$.subscribe(t=>{this.loadingFlag.setResult(!!t)})}getListMoney(t){return t.trim()?this.moneyService.quickSearch({keyword:t,type:this.type}).pipe((0,c.U)(t=>t.data)):(this.loadingFlag.setResult(!0),(0,o.of)([]))}onSelect(t){this.modalController.dismiss(t)}search(t){this.searchBill.next(t.detail.value)}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(g.IN),u.Y36(d.r))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-money-list-bill"]],inputs:{type:"type",bill_id:"bill_id"},decls:17,vars:10,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[3,"ionChange"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"ion-text-center"],["slot","end",3,"click"],["name","dots"]],template:function(t,e){if(1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u.TgZ(3,"ion-button",1),u.NdJ("click",function(){return e.modalController.dismiss(!1)}),u._UZ(4,"ion-icon",2),u.qZA(),u.qZA(),u.TgZ(5,"ion-title"),u._uU(6),u.ALo(7,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(8,"ion-content"),u.TgZ(9,"ion-searchbar",3),u.NdJ("ionChange",function(t){return e.search(t)}),u.qZA(),u.TgZ(10,"ion-list"),u.YNc(11,Z,4,3,"ion-list-header",4),u.ALo(12,"async"),u.YNc(13,A,2,1,"div",5),u.ALo(14,"async"),u.qZA(),u.TgZ(15,"div",6),u.YNc(16,f,2,0,"div",4),u.qZA(),u.qZA()),2&t){let t;u.xp6(6),u.Oqu(u.lcZ(7,4,"SHOP.CART.CHOOSE")),u.xp6(5),u.Q6J("ngIf",(null==(t=u.lcZ(12,6,e.bills$))?null:t.length)>0),u.xp6(2),u.Q6J("ngForOf",u.lcZ(14,8,e.bills$)),u.xp6(3),u.Q6J("ngIf",e.loadingFlag.pending)}},directives:[g.Gu,g.sr,g.Sm,g.YG,g.gu,g.wd,g.W2,g.VI,g.j9,g.q_,h.O5,h.sg,g.yh,g.Q$,g.Ie,g.PQ],pipes:[p.X$,h.Ov,h.JJ],styles:[""]}),t})()},18409:function(t,e,i){i.d(e,{u:function(){return o}});var n=i(37716);let o=(()=>{class t{transform(t,e,i=""){const n=e.split(",");let o="",s=n[0],a=1;if(t<1e3)return new Intl.NumberFormat("en-US",{maximumFractionDigits:1}).format(t)+" "+i;for(let r=1;r+2<t.toString().length&&r-3<n.length;r+=3)a*=1e3,o=new Intl.NumberFormat("en-US",{maximumFractionDigits:1}).format(t/a),s=n[(r-1)/3];return o+" "+s}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=n.Yjl({name:"countNumerPipe",type:t,pure:!0}),t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})()},63771:function(t,e,i){i.d(e,{g:function(){return o}});var n=i(37716);let o=(()=>{class t{transform(t,e){return t.filter(t=>t.group_id==e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=n.Yjl({name:"productTypeFilter",type:t,pure:!0}),t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})()},1533:function(t,e,i){i.d(e,{F:function(){return h}});var n=i(27887),o=i(80272),s=i(92340),a=i(16738),r=i(37716),c=i(47063),l=i(81780),d=i(38583);function u(t,e){if(1&t&&(r.TgZ(0,"div",3),r._UZ(1,"img",11),r.TgZ(2,"p"),r._uU(3),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("src",t.pathPhoto,r.LSH),r.xp6(2),r.Oqu(t.itemSelected.description)}}function g(t,e){1&t&&(r.TgZ(0,"div",3),r.TgZ(1,"p"),r._uU(2),r.ALo(3,"translate"),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Oqu(r.lcZ(3,1,"PHOTO_MOD.NOT_UPDATE_PHOTO")))}let h=(()=>{class t{constructor(t,e,i,o){this.modalCtrl=t,this.pondService=e,this.toastController=i,this.translate=o,this.loadingFlag=new n.E,this.dataRaw=[],this.dateRangeSelected=a().format("YYYY-MM-DD"),this.maxDate=a(),this.minDate=a().subtract(180,"days")}ngOnInit(){this.minDate<this.pondService.seasonStartTime&&(this.minDate=this.pondService.seasonStartTime),this.getData()}setData(t){void 0!==t&&(this.pathPhoto=t.image?s.bl.FILE_PATH+"/upload/season/"+this.scode+"/ge_image/"+t.image:"")}getData(){this.loadingFlag.setStart(!0),this.pondService.loadDailyPaging({pageIndex:0,pageSize:30},a(this.dateRangeSelected).format("YYYY-MM-DD")).subscribe(t=>{t.data?(this.dataRaw=t.data,console.log(this.dateRangeSelected),this.dataRaw[0].date==a(this.dateRangeSelected).format("YYYY-MM-DD")&&(this.itemSelected=this.dataRaw[0]),this.setData(this.itemSelected),this.loadingFlag.setResult(!0)):this.loadingFlag.setResult(!1)},t=>{this.loadingFlag.setResult(!1),console.log(t)})}onChangeDate(t){this.dateRangeSelected=t.detail.value;let e=a(this.dateRangeSelected);this.itemSelected=this.dataRaw[this.dataRaw.findIndex(t=>t.date==e.format("YYYY-MM-DD"))],!this.itemSelected||e<a(this.dataRaw[this.dataRaw.length-1].date)||e>a(this.dataRaw[0].date)?this.getData():this.setData(this.itemSelected)}changeDate(t){let e=a(this.dateRangeSelected).add(t,"days");if(e<this.minDate||e>this.maxDate)return!1;this.dateRangeSelected=e.format("YYYY-MM-DD")}processData(){this.itemSelected=this.dataRaw.filter(t=>t.date==a(this.dateRangeSelected).format("YYYY-MM-DD"))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(c.IN),r.Y36(o.p),r.Y36(c.yF),r.Y36(l.sK))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-daily-photo"]],inputs:{inforDaily:"inforDaily",scode:"scode"},decls:24,vars:13,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-text-center"],["size","2"],["fill","clear",3,"disabled","click"],["slot","icon-only","name","arrow-back-outline"],["size","8"],[1,"ion-text-center","w-100",3,"displayFormat","min","max","value","ionChange"],["slot","icon-only","name","arrow-forward-outline"],["class","ion-text-center",4,"ngIf"],[3,"src"]],template:function(t,e){1&t&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-buttons",0),r.TgZ(3,"ion-button",1),r.NdJ("click",function(){return e.modalCtrl.dismiss()}),r._UZ(4,"ion-icon",2),r.qZA(),r.qZA(),r.TgZ(5,"ion-title"),r._uU(6),r.ALo(7,"translate"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(8,"ion-content"),r.TgZ(9,"div",3),r.TgZ(10,"ion-grid"),r.TgZ(11,"ion-row"),r.TgZ(12,"ion-col",4),r.TgZ(13,"ion-button",5),r.NdJ("click",function(){return e.changeDate(-1)}),r._UZ(14,"ion-icon",6),r.qZA(),r.qZA(),r.TgZ(15,"ion-col",7),r.TgZ(16,"ion-item"),r.TgZ(17,"ion-datetime",8),r.NdJ("ionChange",function(t){return e.onChangeDate(t)}),r.ALo(18,"translate"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(19,"ion-col",4),r.TgZ(20,"ion-button",5),r.NdJ("click",function(){return e.changeDate(1)}),r._UZ(21,"ion-icon",9),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(22,u,4,2,"div",10),r.YNc(23,g,4,3,"div",10),r.qZA()),2&t&&(r.xp6(6),r.Oqu(r.lcZ(7,9,"PHOTO_MOD.DAILY_PHOTO")),r.xp6(7),r.Q6J("disabled",e.dateRangeSelected<=e.minDate.format("YYYY-MM-DD")),r.xp6(4),r.Q6J("displayFormat",r.lcZ(18,11,"FORMAT_DATE_MOMENT"))("min",e.minDate.format("YYYY-MM-DD"))("max",e.maxDate.format("YYYY-MM-DD"))("value",e.dateRangeSelected),r.xp6(3),r.Q6J("disabled",e.dateRangeSelected>=e.maxDate.format("YYYY-MM-DD")),r.xp6(2),r.Q6J("ngIf",e.itemSelected),r.xp6(1),r.Q6J("ngIf",!e.itemSelected))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.wd,c.W2,c.jY,c.Nd,c.wI,c.Ie,c.x4,c.QI,d.O5],pipes:[l.X$],styles:[""]}),t})()},1965:function(t,e,i){i.d(e,{z:function(){return A}});var n=i(64762),o=i(27887),s=i(22923),a=i(80272),r=i(37716),c=i(47063),l=i(81780),d=i(71239),u=i(84465),g=i(90665),h=i(38583);function p(t,e){if(1&t&&(r.TgZ(0,"ion-segment-button",9),r.TgZ(1,"p"),r._uU(2),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.Q6J("value",e.index),r.xp6(2),r.Oqu(null==t||null==t.infor?null:t.infor.name)}}function Z(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"ion-item",1),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw().selectedItem(e)}),r.TgZ(1,"ion-label",10),r.TgZ(2,"ion-text",11),r._uU(3),r.qZA(),r._uU(4),r.TgZ(5,"p"),r._uU(6),r.qZA(),r.qZA(),r.TgZ(7,"ion-text",12),r._uU(8),r.qZA(),r.TgZ(9,"ion-button",13),r._UZ(10,"ion-icon",14),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(3),r.hij("",t.manufacturer_name,"-"),r.xp6(1),r.hij("",t.product_name," "),r.xp6(2),r.Oqu(t.manufacturer_name),r.xp6(1),r.Q6J("color",t.quantity_current<=5?"danger":"success"),r.xp6(1),r.AsE("",t.quantity_current," ",t.unit,"")}}function m(t,e){1&t&&(r.TgZ(0,"div",3),r._UZ(1,"ion-spinner",15),r.qZA())}let A=(()=>{class t{constructor(t,e,i,n,s,a){this.modalControler=t,this.translate=e,this.storeService=i,this.dbLocalService=n,this.toastService=s,this.pondService=a,this.loadingFlag=new o.E,this.savingFlag=new o.E,this.listProduct=[],this.index=-1}ngOnInit(){return(0,n.mG)(this,void 0,void 0,function*(){yield this.loadStore()})}changeStore(t){return(0,n.mG)(this,void 0,void 0,function*(){!t||(this.index=t,yield this.loadStore())})}save(){}loadStore(){return(0,n.mG)(this,void 0,void 0,function*(){this.loadingFlag.setPending(!0),this.listProduct=[];let t=this.dbLocalService.farms.find(t=>t.infor.id==this.pondService.pond.farm_id);if(!t||0==this.dbLocalService.stores.filter(e=>e.infor.farm_code==t.infor.code).length){let t=yield this.storeService.getApiStore("get-list-avaiable","&pcode="+this.pondService.pcode,"manager/pond-store-api").toPromise().catch(()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))});1==t.status?(this.dbLocalService.stores=t.data.map(t=>({infor:t,store:[]})),this.dbLocalService.setLocalData("stores",this.dbLocalService.stores)):this.toastService.warning(t.error)}this.index<0&&(this.index=this.item?-1==this.dbLocalService.stores.findIndex(t=>t.infor.code==this.item.wcode)?0:this.dbLocalService.stores.findIndex(t=>t.infor.code==this.item.wcode):0);let e=yield this.storeService.getApiStore("get-list-product","&pcode="+this.pondService.pcode+"&wcode="+this.dbLocalService.stores[this.index].infor.code,"manager/pond-store-api").toPromise().catch(()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))});1==e.status?(this.dbLocalService.stores[this.index].store=e.data,this.listProduct=e.data.filter(t=>t.group_id==this.groupId),this.dbLocalService.setLocalData("stores",this.dbLocalService.stores)):this.toastService.warning(e.error),this.loadingFlag.setResult(!0)})}selectedItem(t){this.modalControler.dismiss({product_id:t.product_id,product_name:t.product_name,wcode:t.wcode,store_name:this.dbLocalService.stores[this.index].infor.name,quantity_current:t.quantity_current?t.quantity_current:0,quantity:this.item?this.item.quantity:"",unit:t.unit,packing:t.packing})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(c.IN),r.Y36(l.sK),r.Y36(s.d),r.Y36(d.T),r.Y36(u.k),r.Y36(a.p))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-options-product"]],inputs:{groupId:"groupId",item:"item"},decls:17,vars:7,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-text-center"],[1,"title","ion-padding"],["scrollable","","layout","icon-bottom",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"click",4,"ngFor","ngForOf"],["class","ion-text-center",4,"ngIf"],[3,"value"],[1,"ion-text-wrap"],["color","medium"],[3,"color"],["size","small","fill","clear"],["name","add-outline","slot","end"],["name","dots"]],template:function(t,e){1&t&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-title"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.TgZ(5,"ion-buttons",0),r.TgZ(6,"ion-button",1),r.NdJ("click",function(){return e.modalControler.dismiss()}),r._UZ(7,"ion-icon",2),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(8,"ion-content"),r.TgZ(9,"div",3),r.TgZ(10,"div",4),r.TgZ(11,"ion-segment",5),r.NdJ("ngModelChange",function(t){return e.index=t})("ionChange",function(t){return e.changeStore(t.detail.value)}),r.YNc(12,p,3,2,"ion-segment-button",6),r.qZA(),r.qZA(),r.qZA(),r.TgZ(13,"div",3),r.TgZ(14,"ion-list"),r.YNc(15,Z,11,6,"ion-item",7),r.qZA(),r.qZA(),r.YNc(16,m,2,0,"div",8),r.qZA()),2&t&&(r.xp6(3),r.Oqu(r.lcZ(4,5,"POND_MOD.ADD_FEED")),r.xp6(8),r.Q6J("ngModel",e.index),r.xp6(1),r.Q6J("ngForOf",null==e.dbLocalService?null:e.dbLocalService.stores),r.xp6(3),r.Q6J("ngForOf",e.listProduct),r.xp6(1),r.Q6J("ngIf",e.loadingFlag.pending))},directives:[c.Gu,c.sr,c.wd,c.Sm,c.YG,c.gu,c.W2,c.cJ,c.QI,g.JJ,g.On,h.sg,c.q_,h.O5,c.GO,c.Ie,c.Q$,c.yW,c.PQ],pipes:[l.X$],styles:[""]}),t})()},98626:function(t,e,i){i.d(e,{A:function(){return a}});var n=i(37716),o=i(47063),s=i(81780);let a=(()=>{class t{constructor(t,e){this.popoverCtrl=t,this.translate=e}ngOnInit(){}chooseMod(t){this.popoverCtrl.dismiss(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(o.Dh),n.Y36(s.sK))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-pond-menu"]],decls:19,vars:9,consts:[["lines","none"],["button","",3,"click"],["slot","end"],["name","cog-outline"],["name","reorder-three-outline"],["name","add-circle-outline"]],template:function(t,e){1&t&&(n.TgZ(0,"ion-list",0),n.TgZ(1,"ion-item",1),n.NdJ("click",function(){return e.chooseMod("setting")}),n.TgZ(2,"ion-text"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"ion-text",2),n._UZ(6,"ion-icon",3),n.qZA(),n.qZA(),n.TgZ(7,"ion-item",1),n.NdJ("click",function(){return e.chooseMod("sort")}),n.TgZ(8,"ion-text"),n._uU(9),n.ALo(10,"translate"),n.qZA(),n.TgZ(11,"ion-text",2),n._UZ(12,"ion-icon",4),n.qZA(),n.qZA(),n.TgZ(13,"ion-item",1),n.NdJ("click",function(){return e.chooseMod("add-item")}),n.TgZ(14,"ion-text"),n._uU(15),n.ALo(16,"translate"),n.qZA(),n.TgZ(17,"ion-text",2),n._UZ(18,"ion-icon",5),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(3),n.hij(" ",n.lcZ(4,3,"POND_MOD.SETTING_AND_CONFIG")," "),n.xp6(6),n.hij(" ",n.lcZ(10,5,"POND_MOD.SORT")," "),n.xp6(6),n.hij(" ",n.lcZ(16,7,"POND_MOD.ADD_ITEM")," "))},directives:[o.q_,o.Ie,o.yW,o.gu],pipes:[s.X$],styles:[""]}),t})()},89858:function(t,e,i){i.d(e,{F:function(){return g}});var n=i(90665),o=i(27887),s=i(82629),a=i(37716),r=i(47063),c=i(84465),l=i(81780),d=i(38583);function u(t,e){1&t&&a._UZ(0,"ion-progress-bar",13)}let g=(()=>{class t{constructor(t,e,i,s){this.modalController=t,this.toastService=e,this.iotService=i,this.translate=s,this.list=[],this.loading=new o.E,this.form=new n.cw({condition:new n.NI("",n.kI.required),value:new n.NI("",n.kI.required)})}ngOnInit(){}close(){this.modalController.dismiss()}save(){this.iotService.addConditonPub(this.deviceId,this.config[this.index].id,this.form.value).subscribe(t=>{1==t.status?(this.toastService.success(this.translate.instant("DEVICE_MOD.UPDATE_SUCCESS")),this.modalController.dismiss(this.form.value)):this.toastService.warning(t.error)},t=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(r.IN),a.Y36(c.k),a.Y36(s.d),a.Y36(l.sK))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-add-condition"]],inputs:{config:"config",deviceId:"deviceId",index:"index"},decls:43,vars:38,consts:[["slot","start"],[3,"click"],["name","close"],["slot","end","fill","clear",3,"click"],["type","indeterminate",4,"ngIf"],[3,"formGroup"],["formControlName","condition","okText","Okay","cancelText","Dismiss"],["value",">"],["value",">="],["value","<"],["value","<="],["value","="],["formControlName","value","type","number"],["type","indeterminate"]],template:function(t,e){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-title"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"ion-buttons",0),a.TgZ(6,"ion-button",1),a.NdJ("click",function(){return e.close()}),a._UZ(7,"ion-icon",2),a.qZA(),a.qZA(),a.TgZ(8,"ion-button",3),a.NdJ("click",function(){return e.save()}),a._uU(9," L\u01b0u "),a.qZA(),a.qZA(),a.qZA(),a.YNc(10,u,1,0,"ion-progress-bar",4),a.TgZ(11,"ion-content"),a.TgZ(12,"ion-card",5),a.TgZ(13,"ion-list"),a.TgZ(14,"ion-item"),a.TgZ(15,"ion-label"),a._uU(16),a.ALo(17,"translate"),a.qZA(),a.TgZ(18,"ion-select",6),a.TgZ(19,"ion-select-option",7),a._uU(20),a.ALo(21,"translate"),a.qZA(),a.TgZ(22,"ion-select-option",8),a._uU(23),a.ALo(24,"translate"),a.ALo(25,"translate"),a.ALo(26,"translate"),a.qZA(),a.TgZ(27,"ion-select-option",9),a._uU(28),a.ALo(29,"translate"),a.qZA(),a.TgZ(30,"ion-select-option",10),a._uU(31),a.ALo(32,"translate"),a.ALo(33,"translate"),a.ALo(34,"translate"),a.qZA(),a.TgZ(35,"ion-select-option",11),a._uU(36),a.ALo(37,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(38,"ion-item"),a.TgZ(39,"ion-label"),a._uU(40),a.ALo(41,"translate"),a.qZA(),a._UZ(42,"ion-input",12),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.Oqu(a.lcZ(4,14,"DEVICE_MOD.CONFIG_CONDITION")),a.xp6(7),a.Q6J("ngIf",e.loading.pending),a.xp6(2),a.Q6J("formGroup",e.form),a.xp6(4),a.Oqu(a.lcZ(17,16,"DEVICE_MOD.CHOOSE_CONDITION")),a.xp6(4),a.Oqu(a.lcZ(21,18,"DEVICE_MOD.GREATER_THAN")),a.xp6(3),a.lnq("",a.lcZ(24,20,"DEVICE_MOD.GREATER_THAN")," ",a.lcZ(25,22,"DEVICE_MOD.OR")," ",a.lcZ(26,24,"DEVICE_MOD.SAME"),""),a.xp6(5),a.Oqu(a.lcZ(29,26,"DEVICE_MOD.LESS_THAN")),a.xp6(3),a.lnq("",a.lcZ(32,28,"DEVICE_MOD.LESS_THAN")," ",a.lcZ(33,30,"DEVICE_MOD.OR")," ",a.lcZ(34,32,"DEVICE_MOD.SAME"),""),a.xp6(5),a.Oqu(a.lcZ(37,34,"DEVICE_MOD.SAME")),a.xp6(4),a.Oqu(a.lcZ(41,36,"DEVICE_MOD.VALUE_WARNING")))},directives:[r.Gu,r.sr,r.wd,r.Sm,r.YG,r.gu,d.O5,r.W2,r.PM,n.JL,n.sg,r.q_,r.Ie,r.Q$,r.t9,r.QI,n.JJ,n.u,r.n0,r.pK,r.as,r.X7],pipes:[l.X$],styles:[""]}),t})()},42812:function(t,e,i){i.d(e,{u:function(){return Z}});var n=i(64762),o=i(27887),s=i(82629),a=i(37716),r=i(47063),c=i(84465),l=i(81780),d=i(38583),u=i(90665);function g(t,e){1&t&&a._UZ(0,"ion-progress-bar",10)}function h(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"ion-item"),a.TgZ(1,"ion-label"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"ion-buttons",12),a.TgZ(5,"ion-button",1),a.NdJ("click",function(){const e=a.CHM(t).index;return a.oxw(2).remove(e)}),a._UZ(6,"ion-icon",14),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(2),a.AsE("",a.lcZ(3,2,"DEVICE_MOD.AT")," ",t,"")}}function p(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div"),a.YNc(1,h,7,4,"ion-item",11),a.TgZ(2,"ion-item"),a.TgZ(3,"ion-buttons",12),a.TgZ(4,"ion-button",1),a.NdJ("click",function(){return a.CHM(t),a.oxw().openPicker(24,1)}),a._UZ(5,"ion-icon",13),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.custom_setting)}}let Z=(()=>{class t{constructor(t,e,i,n,s){this.modalController=t,this.toastService=e,this.iotService=i,this.translate=n,this.pickerController=s,this.loading=new o.E,this.mode_data="",this.custom_setting=[]}ngOnInit(){Object.keys(this.config).length>0?(this.mode_data=this.config.mode_data,this.custom_setting=JSON.parse(this.config.custom_setting)?JSON.parse(this.config.custom_setting):[]):(this.mode_data="basic",this.custom_setting=[])}close(){this.modalController.dismiss()}getColumns(t,e){return[{name:"col",selectedIndex:e,options:this.getColumnOptions(t)}]}getColumnOptions(t){let e=[];for(let i=0;i<t;i++)e.push(i<10?{text:"0"+i,value:i}:{text:i,value:i});return e}openPicker(t,e){return(0,n.mG)(this,void 0,void 0,function*(){yield(yield this.pickerController.create({columns:this.getColumns(t,e),buttons:[{text:"Cancel",role:"cancel"},{text:"Confirm",handler:t=>{console.log(this.custom_setting),this.custom_setting.includes(t.col.value)||this.custom_setting.push(t.col.value)}}]})).present()})}remove(t){this.custom_setting.splice(t,1)}save(){let t={mode_data:this.mode_data,custom_setting:JSON.stringify(this.custom_setting)};this.loading.setPending(!0),this.iotService.saveAutoRecord(this.deviceId,t).subscribe(e=>{1==e.status?(this.modalController.dismiss(t),this.toastService.success(this.translate.instant("FARM_MOD.SAVED"))):this.toastService.warning(this.translate.instant("DEVICE_MOD.SAVE_ERROR")),this.loading.setResult(!0)},()=>{this.loading.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(r.IN),a.Y36(c.k),a.Y36(s.d),a.Y36(l.sK),a.Y36(r.up))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-config-record"]],inputs:{config:"config",deviceId:"deviceId"},decls:29,vars:18,consts:[["slot","start"],[3,"click"],["name","close"],["slot","end","fill","clear",3,"click"],["type","indeterminate",4,"ngIf"],["okText","Okay","cancelText","Dismiss",3,"ngModel","ngModelChange"],["value","no"],["value","basic"],["value","custom"],[4,"ngIf"],["type","indeterminate"],[4,"ngFor","ngForOf"],["slot","end"],["slot","icon-only","name","add-circle-outline"],["slot","icon-only","name","remove-circle-outline"]],template:function(t,e){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-title"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"ion-buttons",0),a.TgZ(6,"ion-button",1),a.NdJ("click",function(){return e.close()}),a._UZ(7,"ion-icon",2),a.qZA(),a.qZA(),a.TgZ(8,"ion-button",3),a.NdJ("click",function(){return e.save()}),a._uU(9," L\u01b0u "),a.qZA(),a.qZA(),a.qZA(),a.YNc(10,g,1,0,"ion-progress-bar",4),a.TgZ(11,"ion-content"),a.TgZ(12,"ion-card"),a.TgZ(13,"ion-list"),a.TgZ(14,"ion-item"),a.TgZ(15,"ion-label"),a._uU(16),a.ALo(17,"translate"),a.qZA(),a.TgZ(18,"ion-select",5),a.NdJ("ngModelChange",function(t){return e.mode_data=t}),a.TgZ(19,"ion-select-option",6),a._uU(20),a.ALo(21,"translate"),a.qZA(),a.TgZ(22,"ion-select-option",7),a._uU(23),a.ALo(24,"translate"),a.qZA(),a.TgZ(25,"ion-select-option",8),a._uU(26),a.ALo(27,"translate"),a.qZA(),a.qZA(),a.qZA(),a.YNc(28,p,6,1,"div",9),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.Oqu(a.lcZ(4,8,"DEVICE_MOD.CONFIG_CONDITION")),a.xp6(7),a.Q6J("ngIf",e.loading.pending),a.xp6(6),a.Oqu(a.lcZ(17,10,"DEVICE_MOD.CHOOSE_TIME")),a.xp6(2),a.Q6J("ngModel",e.mode_data),a.xp6(2),a.Oqu(a.lcZ(21,12,"DEVICE_MOD.NO_RECORD")),a.xp6(3),a.Oqu(a.lcZ(24,14,"DEVICE_MOD.BASIC_RECORD")),a.xp6(3),a.Oqu(a.lcZ(27,16,"DEVICE_MOD.CUSTOM_RECORD")),a.xp6(2),a.Q6J("ngIf","custom"==e.mode_data))},directives:[r.Gu,r.sr,r.wd,r.Sm,r.YG,r.gu,d.O5,r.W2,r.PM,r.q_,r.Ie,r.Q$,r.t9,r.QI,u.JJ,u.On,r.n0,r.X7,d.sg],pipes:[l.X$],styles:[""]}),t})()},53306:function(t,e,i){i.d(e,{V:function(){return h}});var n=i(27887),o=i(80272),s=i(37716),a=i(47063),r=i(81780),c=i(84465),l=i(38583);function d(t,e){if(1&t&&(s.TgZ(0,"ion-row"),s.TgZ(1,"ion-col",3),s._uU(2),s.qZA(),s.TgZ(3,"ion-col",4),s._uU(4),s.ALo(5,"date"),s.qZA(),s.TgZ(6,"ion-col",5),s._uU(7),s.ALo(8,"number"),s.qZA(),s.TgZ(9,"ion-col",5),s.TgZ(10,"ion-text",9),s._uU(11),s.ALo(12,"number"),s.qZA(),s.qZA(),s.qZA()),2&t){const t=e.$implicit,i=e.index;s.xp6(2),s.hij(" ",i+1," "),s.xp6(2),s.hij(" ",s.xi3(5,4,1e3*t.time,"dd-MM")," "),s.xp6(3),s.hij(" ",s.xi3(8,7,t.volume_exchange,"0.0-1")," "),s.xp6(4),s.hij(" ",s.xi3(12,10,t.price_cubic,"0.0-0")," ")}}function u(t,e){1&t&&(s.TgZ(0,"div",10),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&t&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"POND_MOD.NO_ITEM")," "))}function g(t,e){1&t&&(s.TgZ(0,"div",11),s._UZ(1,"ion-spinner",12),s.qZA())}let h=(()=>{class t{constructor(t,e,i,o){this.modalController=t,this.translate=e,this.toastService=i,this.pondService=o,this.list=[],this.loadingFlag=new n.E}ngOnInit(){this.getList()}getList(){this.loadingFlag.setStart(!0),this.list=[],this.pondService.getListExchange().subscribe(t=>{1==t.status?this.list=t.data:this.toastService.warning(t.error),this.loadingFlag.setResult(!0)},()=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.IN),s.Y36(r.sK),s.Y36(c.k),s.Y36(o.p))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-season-exchange-list"]],decls:29,vars:15,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["size","1"],["size","3"],["size","4",1,"ion-text-right"],[4,"ngFor","ngForOf"],["class","ion-padding ion-text-center",4,"ngIf"],["class","spiner-loading",4,"ngIf"],["color","danger"],[1,"ion-padding","ion-text-center"],[1,"spiner-loading"],["name","dots"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return e.modalController.dismiss()}),s._UZ(4,"ion-icon",2),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"ion-content"),s.TgZ(9,"ion-grid"),s.TgZ(10,"ion-row"),s.TgZ(11,"ion-col",3),s._uU(12,"#"),s.qZA(),s.TgZ(13,"ion-col",4),s._uU(14),s.ALo(15,"translate"),s.qZA(),s.TgZ(16,"ion-col",5),s._uU(17),s.ALo(18,"translate"),s.TgZ(19,"sup"),s._uU(20,"3"),s.qZA(),s.qZA(),s.TgZ(21,"ion-col",5),s._uU(22),s.ALo(23,"translate"),s.TgZ(24,"sup"),s._uU(25,"3"),s.qZA(),s.qZA(),s.qZA(),s.YNc(26,d,13,13,"ion-row",6),s.qZA(),s.YNc(27,u,3,3,"div",7),s.YNc(28,g,2,0,"div",8),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,7,"POND_MOD.WATER_TREAMENT")),s.xp6(8),s.Oqu(s.lcZ(15,9,"ASSISTANT.TIME")),s.xp6(3),s.hij("",s.lcZ(18,11,"CROP_MOD.VOLUME"),"m"),s.xp6(5),s.hij("",s.lcZ(23,13,"CURRENCY_L"),"/m"),s.xp6(4),s.Q6J("ngForOf",e.list),s.xp6(1),s.Q6J("ngIf",(null==e.list?null:e.list.length)<=0),s.xp6(1),s.Q6J("ngIf",e.loadingFlag.pending))},directives:[a.Gu,a.sr,a.Sm,a.YG,a.gu,a.wd,a.W2,a.jY,a.Nd,a.wI,l.sg,l.O5,a.yW,a.PQ],pipes:[r.X$,l.uU,l.JJ],styles:[""]}),t})()},54438:function(t,e,i){i.d(e,{Z:function(){return d}});var n=i(27887),o=i(80272),s=i(37716),a=i(47063),r=i(84465),c=i(81780),l=i(56209);let d=(()=>{class t{constructor(t,e,i,o){this.modalController=t,this.pondService=e,this.toastService=i,this.translate=o,this.list=[],this.loadingFlag=new n.E}ngOnInit(){this.getListProduct()}getListProduct(){this.loadingFlag.setStart(!0),this.list=[],this.pondService.getListOtherCost(this.code).subscribe(t=>{1==t.status?(this.list=t.data,this.initChart(this.list)):this.toastService.warning(t.error),this.loadingFlag.setResult(!0)},()=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}initChart(t){let e=this;this.optionChart={tooltip:{trigger:"axis",formatter:function(t){return console.log(t),console.log(e.list[t[0].dataIndex].note_general),e.translate.instant("POND_MOD.INCOME_OTHER")+": "+t[0].data+"\u0111 <br/>"+e.translate.instant("POND_MOD.COST_OTHER")+": "+t[1].data+"\u0111 <br/>"+e.list[t[0].dataIndex].note_general}},position:["30%","50%"],legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",boundaryGap:[0,.01]},xAxis:{type:"category",data:t.map(t=>t.date)},series:[{name:this.translate.instant("POND_MOD.INCOME_OTHER"),type:"bar",data:t.map(t=>t.income)},{name:this.translate.instant("POND_MOD.COST_OTHER"),type:"bar",data:t.map(t=>t.cost_other)}]}}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.IN),s.Y36(o.p),s.Y36(r.k),s.Y36(c.sK))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-season-other-cost-list"]],inputs:{code:"code"},decls:10,vars:4,consts:[["mode","ios"],["slot","start"],[3,"click"],["slot","icon-only","name","close"],["echarts","",3,"options"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header",0),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",1),s.TgZ(3,"ion-button",2),s.NdJ("click",function(){return e.modalController.dismiss()}),s._UZ(4,"ion-icon",3),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"ion-content"),s._UZ(9,"div",4),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,2,"POND_MOD.COST_OTHER")),s.xp6(3),s.Q6J("options",e.optionChart))},directives:[a.Gu,a.sr,a.Sm,a.YG,a.gu,a.wd,a.W2,l._w],pipes:[c.X$],styles:[""]}),t})()},38800:function(t,e,i){i.d(e,{K:function(){return m}});var n=i(64762),o=i(27887),s=i(82629),a=i(37716),r=i(47063),c=i(84465),l=i(81780),d=i(38583);function u(t,e){1&t&&a._UZ(0,"ion-progress-bar",9)}function g(t,e){1&t&&(a.TgZ(0,"span"),a._uU(1,"0"),a.qZA())}function h(t,e){1&t&&(a.TgZ(0,"span"),a._uU(1,"0"),a.qZA())}function p(t,e){1&t&&(a.TgZ(0,"span"),a._uU(1,"0"),a.qZA())}function Z(t,e){1&t&&(a.TgZ(0,"span"),a._uU(1,"0"),a.qZA())}let m=(()=>{class t{constructor(t,e,i,n,s){this.modalController=t,this.toastService=e,this.iotService=i,this.pickerController=n,this.translate=s,this.minStart=40,this.minEnd=50,this.hourStart=23,this.hourEnd=23,this.loading=new o.E}ngOnInit(){this.hourStart=(this.listTimer[this.index].start_int/100).toFixed(0),this.minStart=this.listTimer[this.index].start_int-100*this.hourStart,this.hourEnd=(this.listTimer[this.index].end_int/100).toFixed(0),this.minEnd=this.listTimer[this.index].end_int-100*this.hourEnd}close(){this.modalController.dismiss()}getColumns(t,e){return[{name:"col",selectedIndex:e,options:this.getColumnOptions(t)}]}getColumnOptions(t){let e=[];for(let i=0;i<t;i++)e.push(i<10?{text:"0"+i,value:i}:{text:i,value:i});return e}openPicker(t,e,i){return(0,n.mG)(this,void 0,void 0,function*(){yield(yield this.pickerController.create({columns:this.getColumns(t,i),buttons:[{text:"Cancel",role:"cancel"},{text:"Confirm",handler:t=>{console.log(t),1==e?this.hourStart=t.col.value:2==e?this.minStart=t.col.value:3==e?this.hourEnd=t.col.value:this.minEnd=t.col.value}}]})).present()})}checkTimer(){let t=100*this.hourStart+this.minStart,e=100*this.hourEnd+this.minEnd,i=!0;return this.listTimer.forEach(n=>{t>=n.start&&e<=n.end&&(i=!1)}),console.log(i),i}save(){if(this.hourEnd==this.hourStart&&this.minEnd==this.minStart)this.toastService.warning(this.translate.instant("DEVICE_MOD.DUPLICATE_TIMER"));else if(1==this.checkTimer()){let t={start:(this.hourStart<9?"0":"")+this.hourStart.toString()+(this.minStart<9?"0":"")+this.minStart.toString(),end:(this.hourEnd<9?"0":"")+this.hourEnd.toString()+(this.minEnd<9?"0":"")+this.minEnd.toString(),index:parseInt(this.index)+1,enable:this.listTimer[this.index].enable};this.loading.setPending(!0),this.iotService.updateTimer(this.contactorId,this.deviceId,t).subscribe(e=>{e.status?(this.modalController.dismiss(t),this.loading.setResult(!0),this.toastService.success(this.translate.instant("DEVICE_MOD.UPDATE_SUCCESS"))):(this.loading.setResult(!0),console.log(e),this.toastService.warning(this.translate.instant("DEVICE_MOD.UPDATE_UNSUCCESS")))},()=>{this.loading.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}else this.toastService.danger(this.translate.instant("DEVICE_MOD.EXIST_TIMER"))}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(r.IN),a.Y36(c.k),a.Y36(s.d),a.Y36(r.up),a.Y36(l.sK))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-update-timer"]],inputs:{listTimer:"listTimer",index:"index",deviceId:"deviceId",contactorId:"contactorId"},decls:33,vars:15,consts:[["slot","start"],[3,"click"],["name","close"],["slot","end","fill","clear",3,"click"],["type","indeterminate",4,"ngIf"],["lines","none"],["fill","clear","expand","outline","size","small","color","tb",3,"click"],[4,"ngIf"],[2,"text-align","center"],["type","indeterminate"]],template:function(t,e){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-title"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"ion-buttons",0),a.TgZ(6,"ion-button",1),a.NdJ("click",function(){return e.close()}),a._UZ(7,"ion-icon",2),a.qZA(),a.qZA(),a.TgZ(8,"ion-button",3),a.NdJ("click",function(){return e.save()}),a._uU(9," L\u01b0u "),a.qZA(),a.qZA(),a.qZA(),a.YNc(10,u,1,0,"ion-progress-bar",4),a.TgZ(11,"ion-content"),a.TgZ(12,"ion-card"),a.TgZ(13,"ion-card-header"),a.TgZ(14,"ion-card-subtitle"),a._uU(15),a.ALo(16,"translate"),a.qZA(),a.qZA(),a.TgZ(17,"ion-card-content"),a.TgZ(18,"ion-item",5),a.TgZ(19,"ion-button",6),a.NdJ("click",function(){return e.openPicker(24,1,e.hourStart)}),a.YNc(20,g,2,0,"span",7),a._uU(21),a.qZA(),a.TgZ(22,"ion-button",6),a.NdJ("click",function(){return e.openPicker(60,2,e.minStart)}),a.YNc(23,h,2,0,"span",7),a._uU(24),a.qZA(),a.TgZ(25,"ion-label",8),a._uU(26,"~"),a.qZA(),a.TgZ(27,"ion-button",6),a.NdJ("click",function(){return e.openPicker(24,3,e.hourEnd)}),a.YNc(28,p,2,0,"span",7),a._uU(29),a.qZA(),a.TgZ(30,"ion-button",6),a.NdJ("click",function(){return e.openPicker(60,4,e.minEnd)}),a.YNc(31,Z,2,0,"span",7),a._uU(32),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(3),a.Oqu(a.lcZ(4,11,"DEVICE_MOD.UPDATE_TIMER")),a.xp6(7),a.Q6J("ngIf",e.loading.pending),a.xp6(5),a.Oqu(a.lcZ(16,13,"DEVICE_MOD.PERIOD")),a.xp6(5),a.Q6J("ngIf",e.hourStart<10),a.xp6(1),a.Oqu(e.hourStart),a.xp6(2),a.Q6J("ngIf",e.minStart<10),a.xp6(1),a.Oqu(e.minStart),a.xp6(4),a.Q6J("ngIf",e.hourEnd<10),a.xp6(1),a.Oqu(e.hourEnd),a.xp6(2),a.Q6J("ngIf",e.minEnd<10),a.xp6(1),a.Oqu(e.minEnd))},directives:[r.Gu,r.sr,r.wd,r.Sm,r.YG,r.gu,d.O5,r.W2,r.PM,r.Zi,r.tO,r.FN,r.Ie,r.Q$,r.X7],pipes:[l.X$],styles:[""]}),t})()},10086:function(t,e,i){i.d(e,{d:function(){return a}});var n=i(88002),o=i(15189),s=i(37716);let a=(()=>{class t{constructor(t){this.reqAPIService=t,this.API_PATH={EDIT:"/procedure/procedure-api",USED_LIST:"/procedure/procedure-api-mobie"}}setCompanyCode(t){this.companyCode=t}setSelectedId(t){this.selectedId=t}getProcedures(){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=get-list&sub=list&ccode="+this.companyCode).pipe((0,n.U)(t=>t))}getProceduresPrivate(){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=private-list&ccode="+this.companyCode)}getProceduresV2(){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=get-list&sub=procedure&ccode="+this.companyCode).pipe((0,n.U)(t=>t))}getProcedureDetail(t){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=detail&id="+t).pipe((0,n.U)(t=>t))}getProcedureRawDetail(t){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=raw-detail&id="+t).pipe((0,n.U)(t=>t))}insertProcedure(t){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=add&ccode="+this.companyCode+"&procedure_id="+t).pipe((0,n.U)(t=>t))}searchProcedure(t){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=get-list&sub=search&ccode="+this.companyCode+"&key="+t).pipe((0,n.U)(t=>t))}checkPackage(){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=check&ccode="+this.companyCode).pipe((0,n.U)(t=>t))}lock(t,e){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=lock&ccode="+this.companyCode+"&id="+t+"&lock="+e).pipe((0,n.U)(t=>t))}delete(t){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=detele&ccode="+this.companyCode+"&procedure_id="+t).pipe((0,n.U)(t=>t))}updateProcedureInfo(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=updateInfo&&ccode="+this.companyCode,t)}addToCustom(t){return this.reqAPIService.get(this.API_PATH.USED_LIST+"?action=addToCustom&&ccode="+this.companyCode+"&procedure_id="+t)}removeProceduresPrivate(t){return this.reqAPIService.get(this.API_PATH.EDIT+"?action=removeCustom&&ccode="+this.companyCode+"&procedure_id="+t)}commonAdd(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=common&sub=add&&ccode="+this.companyCode,{id:this.selectedId,begin:t.begin,end:t.end,repeat:t.repeat,todo:t.todo})}commonEdit(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=common&sub=update&&ccode="+this.companyCode,t)}commonDelete(t){return this.reqAPIService.get(this.API_PATH.EDIT+"?action=common&sub=delete&&ccode="+this.companyCode+"&item="+t)}curveAdd(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=curve&sub=add&&ccode="+this.companyCode,{id:this.selectedId,day:t.day,feed:t.feed,weight:t.weight})}curveEdit(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=curve&sub=update&&ccode="+this.companyCode,t)}curveDelete(t){return this.reqAPIService.get(this.API_PATH.EDIT+"?action=curve&sub=delete&&ccode="+this.companyCode+"&item="+t)}problemAdd(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=problem&sub=add&&ccode="+this.companyCode,{id:this.selectedId,inday:t.inday,keyword:t.keyword,val_match:t.val_match,val_int:t.val_int,todo:t.todo})}problemEdit(t){return this.reqAPIService.post(this.API_PATH.EDIT+"?action=problem&sub=update&&ccode="+this.companyCode,t)}problemDelete(t){return this.reqAPIService.get(this.API_PATH.EDIT+"?action=problem&sub=delete&&ccode="+this.companyCode+"&item="+t)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(o.$))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})()},54373:function(t,e,i){i.d(e,{i:function(){return o}});var n=i(37716);let o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({}),t})()},24023:function(t,e,i){i.d(e,{E:function(){return c}});var n=i(38583),o=i(90665),s=i(47063),a=i(81780),r=i(37716);let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[s.Pc,n.ez,o.u5,a.aw]]}),t})()},25375:function(t,e,i){i.d(e,{k:function(){return h}});var n=i(64762),o=i(37716),s=i(59865),a=i(84267),r=i(47063),c=i(81780),l=i(84465),d=i(38583);function u(t,e){if(1&t&&o._UZ(0,"img",3),2&t){const t=o.oxw();o.Q6J("src",t.data.base+t.data.path,o.LSH)}}function g(t,e){1&t&&o._UZ(0,"img",4)}let h=(()=>{class t{constructor(t,e,i,n,s,a){this.actionSheetController=t,this.translate=e,this.camera=i,this.platform=n,this.filePath=s,this.toastService=a,this.toUpload=new o.vpe,this.base=""}ngOnInit(){console.log(this.data)}upload(){return(0,n.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheetController.create({header:this.translate.instant("PHOTO_MOD.CHOOSE_IMAGE"),buttons:[{text:this.translate.instant("ACCOUNT_MOD.NEW_PHOTO"),icon:"camera-outline",handler:()=>{this.takePicture(this.camera.PictureSourceType.CAMERA)}},{text:this.translate.instant("ACCOUNT_MOD.LIBRARY"),icon:"albums-outline",handler:()=>{this.pickerImage(this.camera.PictureSourceType.PHOTOLIBRARY)}},{text:this.translate.instant("OPTION.CANCEL"),icon:"close-outline",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]})).present()})}takePicture(t){this.camera.getPicture({quality:100,sourceType:t,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,saveToPhotoAlbum:!1,correctOrientation:!0,targetHeight:500,targetWidth:500}).then(t=>{this.data.name=t.substr(t.lastIndexOf("/")+1),this.data.base="data:image/jpeg;base64,",this.data.path=t,this.convertImage()},t=>{this.toastService.warning(this.translate.instant("ACCOUNT_MOD.ERROR_LIBRARY"))})}pickerImage(t){this.camera.getPicture({quality:100,sourceType:t,saveToPhotoAlbum:!1,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,targetHeight:500,targetWidth:500}).then(e=>{this.platform.is("android")&&t===this.camera.PictureSourceType.PHOTOLIBRARY?this.filePath.resolveNativePath(e="file://"+e).then(t=>{this.data.name=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("?")),this.data.base="data:image/jpeg;base64,",this.data.path=t.replace("file://",""),this.convertImage()}).catch(t=>{console.log(t),this.toastService.warning(this.translate.instant("ACCOUNT_MOD.ERROR"))}):(this.data.base="data:image/jpeg;base64,",this.data.path=e,this.data.name=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("?")),this.convertImage())},t=>{this.toastService.warning(this.translate.instant("ACCOUNT_MOD.ERROR_LIBRARY"))})}dataURItoBlob(t){const e=window.atob(t),i=new ArrayBuffer(e.length),n=new Uint8Array(i);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return new Blob([n],{type:"image/jpeg"})}convertImage(){const t=this.dataURItoBlob(this.data.path);this.data.file=t,this.toUpload.emit(this.data)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(r.BX),o.Y36(c.sK),o.Y36(a.V1),o.Y36(r.t4),o.Y36(s.y),o.Y36(l.k))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-image-picker"]],inputs:{data:"data"},outputs:{toUpload:"toUpload"},decls:7,vars:5,consts:[[1,"ion-text-center",3,"click"],["class","imgRecord",3,"src",4,"ngIf"],["class","imgRecord","src","assets/img/camera.png",4,"ngIf"],[1,"imgRecord",3,"src"],["src","assets/img/camera.png",1,"imgRecord"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return e.upload()}),o.TgZ(1,"div"),o.YNc(2,u,1,1,"img",1),o.YNc(3,g,1,0,"img",2),o.qZA(),o.TgZ(4,"ion-text"),o._uU(5),o.ALo(6,"translate"),o.qZA(),o.qZA()),2&t&&(o.xp6(2),o.Q6J("ngIf",e.data.path),o.xp6(1),o.Q6J("ngIf",!e.data.path),o.xp6(2),o.Oqu(o.lcZ(6,3,"PHOTO_MOD.CHOOSE_IMAGE")))},directives:[d.O5,r.yW],pipes:[c.X$],styles:[".imgRecord[_ngcontent-%COMP%]{max-width:128px;padding:16px}"]}),t})()},95631:function(t,e,i){i.d(e,{y:function(){return Z}});var n=i(37716),o=i(47063),s=i(81780),a=i(38583),r=i(90665);function c(t,e){if(1&t&&(n.TgZ(0,"ion-item"),n.TgZ(1,"ion-label"),n._uU(2),n.qZA(),n.TgZ(3,"ion-checkbox",12),n.NdJ("ngModelChange",function(t){return e.$implicit.value=t}),n.qZA(),n.qZA()),2&t){const t=e.$implicit;n.xp6(2),n.Oqu(t.label),n.xp6(1),n.Q6J("ngModel",t.value)}}function l(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"ion-col",13),n.TgZ(1,"ion-button",14),n.NdJ("click",function(){const e=n.CHM(t).index,i=n.oxw();return i.terms.USEFOR[e].filter=!i.terms.USEFOR[e].filter}),n._uU(2),n.qZA(),n.qZA()}if(2&t){const t=e.$implicit;n.xp6(1),n.Q6J("color",t.filter?"primary":"light"),n.xp6(1),n.hij(" ",t.name," ")}}function d(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"ion-button",15),n.NdJ("click",function(){return n.CHM(t),n.oxw().full=!0}),n._UZ(1,"ion-icon",16),n.qZA()}}function u(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"ion-col",13),n.TgZ(1,"ion-button",14),n.NdJ("click",function(){const e=n.CHM(t).index,i=n.oxw(2);return i.terms.USES[e].filter=!i.terms.USES[e].filter}),n._uU(2),n.qZA(),n.qZA()}if(2&t){const t=e.$implicit;n.xp6(1),n.Q6J("color",t.filter?"primary":"light"),n.xp6(1),n.hij(" ",t.name," ")}}function g(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"ion-col",13),n.TgZ(1,"ion-button",14),n.NdJ("click",function(){const e=n.CHM(t).index,i=n.oxw(2);return i.terms.MATERIAL[e].filter=!i.terms.MATERIAL[e].filter}),n._uU(2),n.qZA(),n.qZA()}if(2&t){const t=e.$implicit;n.xp6(1),n.Q6J("color",t.filter?"primary":"light"),n.xp6(1),n.hij(" ",t.name," ")}}function h(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"ion-button",15),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).full=!1}),n._UZ(1,"ion-icon",17),n.qZA()}}function p(t,e){if(1&t&&(n.TgZ(0,"div"),n.TgZ(1,"ion-list-header",7),n.TgZ(2,"ion-label"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.qZA(),n.TgZ(5,"ion-grid"),n.TgZ(6,"ion-row"),n.YNc(7,u,3,2,"ion-col",8),n.qZA(),n.qZA(),n.TgZ(8,"ion-list-header",7),n.TgZ(9,"ion-label"),n._uU(10),n.ALo(11,"translate"),n.qZA(),n.qZA(),n.TgZ(12,"ion-grid"),n.TgZ(13,"ion-row"),n.YNc(14,g,3,2,"ion-col",8),n.qZA(),n.TgZ(15,"ion-row"),n.TgZ(16,"ion-col",9),n.YNc(17,h,2,0,"ion-button",10),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t){const t=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,5,"SHOP.USES")),n.xp6(4),n.Q6J("ngForOf",t.terms.USES),n.xp6(3),n.Oqu(n.lcZ(11,7,"SHOP.MATERIAL")),n.xp6(4),n.Q6J("ngForOf",t.terms.MATERIAL),n.xp6(3),n.Q6J("ngIf",t.full)}}let Z=(()=>{class t{constructor(t,e){this.modalControl=t,this.translate=e,this.full=!1,this.checkBoxs=[{label:this.translate.instant("SHOP.CART.SHOP_PICKUP"),ship:0,value:!1},{label:this.translate.instant("SHOP.CART.SHIP_HOME"),ship:1,value:!1}]}ngOnInit(){2==this.data.ship?(this.checkBoxs[0].value=!0,this.checkBoxs[1].value=!0):1==this.data.ship?this.checkBoxs[1].value=!0:0==this.data.ship&&(this.checkBoxs[0].value=!0)}save(){this.data.ship=1==this.checkBoxs[0].value&&1==this.checkBoxs[1].value?2:1==this.checkBoxs[1].value?1:1==this.checkBoxs[0].value?0:2,this.data.terms=[],["USES","USEFOR","MATERIAL"].forEach(t=>{for(let e=0;e<this.terms[t].length;e++)this.terms[t][e].filter&&this.data.terms.push(this.terms[t][e].id)}),this.modalControl.dismiss({data:this.data,terms:this.terms})}reset(){this.checkBoxs[0].value=!0,this.checkBoxs[1].value=!0,this.data.ship=2,this.full=!1,this.data.terms=[],["USES","USEFOR","MATERIAL"].forEach(t=>{for(let e=0;e<this.terms[t].length;e++)this.terms[t][e].filter=!1})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(o.IN),n.Y36(s.sK))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-filter"]],inputs:{data:"data",terms:"terms"},decls:32,vars:16,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close-outline"],["slot","end"],["color","primary",3,"click"],["size","small","fill","outline","expand","round",3,"click"],[4,"ngFor","ngForOf"],["lines","none"],["size","6",4,"ngFor","ngForOf"],[1,"ion-text-center"],["fill","outline","shape","round","size","small","mode","ios",3,"click",4,"ngIf"],[4,"ngIf"],["slot","start",3,"ngModel","ngModelChange"],["size","6"],["expand","block","mode","ios",3,"color","click"],["fill","outline","shape","round","size","small","mode","ios",3,"click"],["slot","icon-only","name","chevron-down-outline"],["slot","icon-only","name","chevron-up-outline"]],template:function(t,e){1&t&&(n.TgZ(0,"ion-header"),n.TgZ(1,"ion-toolbar"),n.TgZ(2,"ion-buttons",0),n.TgZ(3,"ion-button",1),n.NdJ("click",function(){return e.modalControl.dismiss()}),n._UZ(4,"ion-icon",2),n.qZA(),n.qZA(),n.TgZ(5,"ion-title"),n._uU(6),n.ALo(7,"translate"),n.qZA(),n.TgZ(8,"ion-buttons",3),n.TgZ(9,"ion-button",4),n.NdJ("click",function(){return e.save()}),n._uU(10,"OK"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(11,"ion-content"),n.TgZ(12,"ion-list"),n.TgZ(13,"ion-list-header"),n.TgZ(14,"ion-label"),n._uU(15),n.ALo(16,"translate"),n.qZA(),n.TgZ(17,"ion-button",5),n.NdJ("click",function(){return e.reset()}),n._uU(18),n.ALo(19,"translate"),n.qZA(),n.qZA(),n.YNc(20,c,4,2,"ion-item",6),n.qZA(),n.TgZ(21,"ion-list-header",7),n.TgZ(22,"ion-label"),n._uU(23),n.ALo(24,"translate"),n.qZA(),n.qZA(),n.TgZ(25,"ion-grid"),n.TgZ(26,"ion-row"),n.YNc(27,l,3,2,"ion-col",8),n.qZA(),n.TgZ(28,"ion-row"),n.TgZ(29,"ion-col",9),n.YNc(30,d,2,0,"ion-button",10),n.qZA(),n.qZA(),n.qZA(),n.YNc(31,p,18,9,"div",11),n.qZA()),2&t&&(n.xp6(6),n.Oqu(n.lcZ(7,8,"SHOP.FILTER.TITLE")),n.xp6(9),n.Oqu(n.lcZ(16,10,"SHOP.CART.SHIP_METHOD")),n.xp6(3),n.hij("",n.lcZ(19,12,"SHOP.FILTER.RESET")," "),n.xp6(2),n.Q6J("ngForOf",e.checkBoxs),n.xp6(3),n.Oqu(n.lcZ(24,14,"SHOP.USEFOR")),n.xp6(4),n.Q6J("ngForOf",e.terms.USEFOR),n.xp6(3),n.Q6J("ngIf",!e.full),n.xp6(1),n.Q6J("ngIf",e.full))},directives:[o.Gu,o.sr,o.Sm,o.YG,o.gu,o.wd,o.W2,o.q_,o.yh,o.Q$,a.sg,o.jY,o.Nd,o.wI,a.O5,o.Ie,o.nz,o.w,r.JJ,r.On],pipes:[s.X$],styles:[""]}),t})()},92803:function(t,e,i){i.d(e,{R:function(){return O}});var n=i(27887),o=i(15085),s=i(37716),a=i(47063),r=i(81780),c=i(84465),l=i(38583),d=i(90665);function u(t,e){1&t&&(s.TgZ(0,"div"),s._UZ(1,"ion-spinner",8),s.qZA())}function g(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-col",10),s.TgZ(1,"ion-button",11),s.NdJ("click",function(){const e=s.CHM(t).index;return s.oxw(2).selectCompany(e)}),s._uU(2),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit,i=s.oxw(2);s.xp6(1),s.Q6J("color",t.id==i.selectedCompany?"primary":"light"),s.xp6(1),s.hij(" ",t.name," ")}}function h(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"ion-list"),s.TgZ(2,"ion-list-header"),s.TgZ(3,"ion-label"),s._uU(4),s.ALo(5,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(6,"ion-grid"),s.TgZ(7,"ion-row"),s.YNc(8,g,3,2,"ion-col",9),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(4),s.Oqu(s.lcZ(5,2,"SHOP.FILTER.COMPANY")),s.xp6(4),s.Q6J("ngForOf",t.companyList)}}function p(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-col",10),s.TgZ(1,"ion-button",11),s.NdJ("click",function(){const e=s.CHM(t).index,i=s.oxw(2);return i.usefor[e].selected=!i.usefor[e].selected}),s._uU(2),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(1),s.Q6J("color",t.selected?"primary":"light"),s.xp6(1),s.hij(" ",t.name," ")}}function Z(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"ion-list-header",12),s.TgZ(2,"ion-label"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.TgZ(5,"ion-grid"),s.TgZ(6,"ion-row"),s.YNc(7,p,3,2,"ion-col",9),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(3),s.Oqu(s.lcZ(4,2,"SHOP.USEFOR")),s.xp6(4),s.Q6J("ngForOf",t.usefor)}}function m(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-col",10),s.TgZ(1,"ion-button",11),s.NdJ("click",function(){const e=s.CHM(t).index,i=s.oxw(3);return i.uses[e].selected=!i.uses[e].selected}),s._uU(2),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(1),s.Q6J("color",t.selected?"primary":"light"),s.xp6(1),s.hij(" ",t.name," ")}}function A(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"ion-list-header",12),s.TgZ(2,"ion-label"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.TgZ(5,"ion-grid"),s.TgZ(6,"ion-row"),s.YNc(7,m,3,2,"ion-col",9),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw(2);s.xp6(3),s.Oqu(s.lcZ(4,2,"SHOP.USES")),s.xp6(4),s.Q6J("ngForOf",t.uses)}}function f(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-col",10),s.TgZ(1,"ion-button",11),s.NdJ("click",function(){const e=s.CHM(t).index,i=s.oxw(3);return i.material[e].selected=!i.material[e].selected}),s._uU(2),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(1),s.Q6J("color",t.selected?"primary":"light"),s.xp6(1),s.hij(" ",t.name," ")}}function T(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"ion-list-header",12),s.TgZ(2,"ion-label"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA(),s.TgZ(5,"ion-grid"),s.TgZ(6,"ion-row"),s.YNc(7,f,3,2,"ion-col",9),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.oxw(2);s.xp6(3),s.Oqu(s.lcZ(4,2,"SHOP.MATERIAL")),s.xp6(4),s.Q6J("ngForOf",t.material)}}function q(t,e){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,A,8,4,"div",6),s.YNc(2,T,8,4,"div",6),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngIf",t.uses.length>0),s.xp6(1),s.Q6J("ngIf",t.material.length>0)}}function _(t,e){1&t&&s._UZ(0,"ion-icon",16)}function v(t,e){1&t&&s._UZ(0,"ion-icon",17)}function x(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"ion-row"),s.TgZ(1,"ion-col",5),s.TgZ(2,"ion-button",13),s.NdJ("click",function(){s.CHM(t);const e=s.oxw();return e.showAll=!e.showAll}),s.YNc(3,_,1,0,"ion-icon",14),s.YNc(4,v,1,0,"ion-icon",15),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.xp6(3),s.Q6J("ngIf",!t.showAll),s.xp6(1),s.Q6J("ngIf",t.showAll)}}let O=(()=>{class t{constructor(t,e,i,o){this.modalController=t,this.shopService=e,this.translate=i,this.toastService=o,this.homeDelivery=!1,this.shopPickup=!1,this.companyList=[],this.showAll=!1,this.loadingFlag=new n.E,this.usefor=[],this.uses=[],this.material=[]}ngOnInit(){this.prepareShipping(),this.getFilterOptions(),this.prepareTerms()}prepareShipping(){("0"==this.selectedShipping||"2"==this.selectedShipping)&&(this.shopPickup=!0),("1"==this.selectedShipping||"2"==this.selectedShipping)&&(this.homeDelivery=!0)}getFilterOptions(){this.shopService.getFilterOptions({}).pipe().subscribe(t=>{"error"==t.status?this.toastService.warning(t.error.message):(this.companyList=[],this.companyList=this.prepareCompanyList(t.data.arr_company)),this.loadingFlag.setResult(!0)},t=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}prepareCompanyList(t){let e=[];return t.split(".lhh_lv1.").forEach(t=>{let i=t.split(".lhh_lv2."),n=["id","name"];i=i.reduce(function(t,e,i){return t[n[i]]=e,t},{}),e.push(i)}),e}prepareTerms(){this.terms.USEFOR&&this.terms.USEFOR.forEach(t=>{this.usefor.push({id:t.id,name:t.name,selected:t.selected})}),this.terms.USES&&this.terms.USES.forEach(t=>{this.uses.push({id:t.id,name:t.name,selected:t.selected})}),this.terms.MATERIAL&&this.terms.MATERIAL.forEach(t=>{this.material.push({id:t.id,name:t.name,selected:t.selected})})}selectCompany(t){this.selectedCompany=this.selectedCompany==this.companyList[t].id?"":this.companyList[t].id}reset(){this.homeDelivery=!0,this.shopPickup=!0,this.selectedCompany="",this.usefor.forEach(t=>{t.selected=!1}),this.uses.forEach(t=>{t.selected=!1}),this.material.forEach(t=>{t.selected=!1})}save(){let t="";t=this.homeDelivery&&this.shopPickup?"2":this.homeDelivery&&!this.shopPickup?"1":!this.homeDelivery&&this.shopPickup?"0":"",this.modalController.dismiss({shipping:t,terms:{USEFOR:this.usefor,USES:this.uses,MATERIAL:this.material},company_id:this.selectedCompany})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.IN),s.Y36(o.d),s.Y36(r.sK),s.Y36(c.k))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-shop-filter"]],inputs:{terms:"terms",selectedShipping:"selectedShipping",selectedCompany:"selectedCompany"},decls:36,vars:22,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close-outline"],["slot","end"],["color","primary",3,"click"],[1,"ion-text-center"],[4,"ngIf"],["slot","start",3,"ngModel","ngModelChange"],["name","dots"],["size","6",4,"ngFor","ngForOf"],["size","6"],["expand","block","mode","ios",3,"color","click"],["lines","none"],["fill","outline","shape","round","size","small","mode","ios",3,"click"],["slot","icon-only","name","chevron-down-outline",4,"ngIf"],["slot","icon-only","name","chevron-up-outline",4,"ngIf"],["slot","icon-only","name","chevron-down-outline"],["slot","icon-only","name","chevron-up-outline"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return e.modalController.dismiss()}),s._UZ(4,"ion-icon",2),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.TgZ(8,"ion-buttons",3),s.TgZ(9,"ion-button",1),s.NdJ("click",function(){return e.reset()}),s._uU(10),s.ALo(11,"translate"),s.qZA(),s.TgZ(12,"ion-button",4),s.NdJ("click",function(){return e.save()}),s._uU(13,"OK"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(14,"ion-content"),s.TgZ(15,"div",5),s.YNc(16,u,2,0,"div",6),s.qZA(),s.TgZ(17,"ion-list"),s.TgZ(18,"ion-list-header"),s.TgZ(19,"ion-label"),s._uU(20),s.ALo(21,"translate"),s.qZA(),s.qZA(),s.TgZ(22,"ion-item"),s.TgZ(23,"ion-label"),s._uU(24),s.ALo(25,"translate"),s.qZA(),s.TgZ(26,"ion-checkbox",7),s.NdJ("ngModelChange",function(t){return e.homeDelivery=t}),s.qZA(),s.qZA(),s.TgZ(27,"ion-item"),s.TgZ(28,"ion-label"),s._uU(29),s.ALo(30,"translate"),s.qZA(),s.TgZ(31,"ion-checkbox",7),s.NdJ("ngModelChange",function(t){return e.shopPickup=t}),s.qZA(),s.qZA(),s.qZA(),s.YNc(32,h,9,4,"div",6),s.YNc(33,Z,8,4,"div",6),s.YNc(34,q,3,2,"div",6),s.YNc(35,x,5,2,"ion-row",6),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,12,"SHOP.FILTER.TITLE")),s.xp6(4),s.hij("",s.lcZ(11,14,"SHOP.FILTER.RESET")," "),s.xp6(6),s.Q6J("ngIf",e.loadingFlag.pending),s.xp6(4),s.Oqu(s.lcZ(21,16,"SHOP.CART.SHIP_METHOD")),s.xp6(4),s.Oqu(s.lcZ(25,18,"SHOP.CART.SHIP_HOME")),s.xp6(2),s.Q6J("ngModel",e.homeDelivery),s.xp6(3),s.Oqu(s.lcZ(30,20,"SHOP.CART.SHOP_PICKUP")),s.xp6(2),s.Q6J("ngModel",e.shopPickup),s.xp6(1),s.Q6J("ngIf",e.companyList),s.xp6(1),s.Q6J("ngIf",e.usefor.length>0),s.xp6(1),s.Q6J("ngIf",e.showAll),s.xp6(1),s.Q6J("ngIf",e.uses.length>0||e.material.length>0))},directives:[a.Gu,a.sr,a.Sm,a.YG,a.gu,a.wd,a.W2,l.O5,a.q_,a.yh,a.Q$,a.Ie,a.nz,a.w,d.JJ,d.On,a.PQ,a.jY,a.Nd,l.sg,a.wI],pipes:[r.X$],styles:[""]}),t})()},5264:function(t,e,i){i.d(e,{E:function(){return _}});var n=i(64762),o=i(27887),s=i(80559),a=i(13819),r=i(22923),c=i(37716),l=i(81780),d=i(84465),u=i(47063),g=i(71239),h=i(38583),p=i(63771);function Z(t,e){1&t&&(c.TgZ(0,"div",6),c._UZ(1,"ion-spinner",7),c.qZA())}function m(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-item",11),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).presentDetail(e)}),c.TgZ(1,"ion-label",12),c.TgZ(2,"ion-text",13),c._uU(3),c.qZA(),c._uU(4),c.TgZ(5,"p"),c._uU(6),c.qZA(),c.qZA(),c.TgZ(7,"span",14),c._uU(8),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(3),c.hij("",t.manufacturer_name,"-"),c.xp6(1),c.hij("",t.name," "),c.xp6(2),c.Oqu(t.unit),c.xp6(2),c.Oqu(t.packing)}}function A(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-item",11),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).presentDetail(e)}),c.TgZ(1,"ion-label",12),c.TgZ(2,"ion-text",13),c._uU(3),c.qZA(),c._uU(4),c.TgZ(5,"p"),c._uU(6),c.qZA(),c.qZA(),c.TgZ(7,"span",14),c._uU(8),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(3),c.hij("",t.manufacturer_name,"-"),c.xp6(1),c.hij("",t.name," "),c.xp6(2),c.Oqu(t.unit),c.xp6(2),c.Oqu(t.packing)}}function f(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-item",11),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).presentDetail(e)}),c.TgZ(1,"ion-label",12),c.TgZ(2,"ion-text",13),c._uU(3),c.qZA(),c._uU(4),c.TgZ(5,"p"),c._uU(6),c.qZA(),c.qZA(),c.TgZ(7,"span",14),c._uU(8),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(3),c.hij("",t.manufacturer_name,"-"),c.xp6(1),c.hij("",t.name," "),c.xp6(2),c.Oqu(t.packing),c.xp6(2),c.Oqu(t.packing)}}function T(t,e){if(1&t&&(c.TgZ(0,"ion-list",8),c.TgZ(1,"ion-item-group"),c.TgZ(2,"ion-list-header",9),c.TgZ(3,"ion-label"),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.qZA(),c.YNc(6,m,9,4,"ion-item",10),c.ALo(7,"productTypeFilter"),c.qZA(),c.TgZ(8,"ion-item-group"),c.TgZ(9,"ion-list-header",9),c.TgZ(10,"ion-label"),c._uU(11),c.ALo(12,"translate"),c.qZA(),c.qZA(),c.YNc(13,A,9,4,"ion-item",10),c.ALo(14,"productTypeFilter"),c.qZA(),c.TgZ(15,"ion-item-group"),c.TgZ(16,"ion-list-header",9),c.TgZ(17,"ion-label"),c._uU(18),c.ALo(19,"translate"),c.qZA(),c.qZA(),c.YNc(20,f,9,4,"ion-item",10),c.ALo(21,"productTypeFilter"),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(4),c.Oqu(c.lcZ(5,6,"WAREHOUSE_MOD.FEED")),c.xp6(2),c.Q6J("ngForOf",c.xi3(7,8,t.products,1)),c.xp6(5),c.Oqu(c.lcZ(12,11,"WAREHOUSE_MOD.FEED_SUPPLEMENT")),c.xp6(2),c.Q6J("ngForOf",c.xi3(14,13,t.products,2)),c.xp6(5),c.Oqu(c.lcZ(19,16,"WAREHOUSE_MOD.TREATMENT")),c.xp6(2),c.Q6J("ngForOf",c.xi3(21,18,t.products,3))}}function q(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",15),c.TgZ(1,"ion-card",8),c.TgZ(2,"ion-card-content",16),c.TgZ(3,"p",15),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.TgZ(6,"ion-button",17),c.NdJ("click",function(){return c.CHM(t),c.oxw().presentAddlist()}),c._uU(7),c.ALo(8,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}2&t&&(c.xp6(4),c.Oqu(c.lcZ(5,2,"WAREHOUSE_MOD.NO_PRODUCT")),c.xp6(3),c.hij(" ",c.lcZ(8,4,"WAREHOUSE_MOD.ADD_PRODUCT")," "))}let _=(()=>{class t{constructor(t,e,i,n,s){this.translate=t,this.storeService=e,this.toastService=i,this.modalController=n,this.dbLocalService=s,this.products=[],this.loadingFlag=new o.E}ngOnInit(){this.getList()}getList(){this.loadingFlag.setPending(!0),this.storeService.getApiStore("getItems","&fcode="+this.storeService.getFarmCode(),"manager/store-api-mobie").subscribe(t=>{1==t.status?this.products=t.data:this.toastService.warning(t.error),this.loadingFlag.setResult(!0)},()=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}presentAddlist(){return(0,n.mG)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:s.n,componentProps:{}});return t.onDidDismiss().then(t=>{console.log(t),1==t.data&&this.getList()}),yield t.present()})}presentDetail(t){return(0,n.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:a.m,componentProps:{item:t,from:"farm"}});return e.onDidDismiss().then(t=>{this.getList()}),yield e.present()})}findProductIndexById(t){return this.products.findIndex(e=>e.id==t.id)}doRefresh(t){this.getList(),t.target.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(l.sK),c.Y36(r.d),c.Y36(d.k),c.Y36(u.IN),c.Y36(g.T))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-store-item-list"]],decls:13,vars:6,consts:[["slot","start"],["text","","defaultHref","tabs/management"],["slot","fixed",3,"ionRefresh"],["class","spiner-loading",4,"ngIf"],["mode","ios",4,"ngIf"],["class","ion-padding",4,"ngIf"],[1,"spiner-loading"],["name","dots"],["mode","ios"],["lines","inset"],["detail","",3,"click",4,"ngFor","ngForOf"],["detail","",3,"click"],[1,"ion-text-wrap"],["color","medium"],["slot","end"],[1,"ion-padding"],[1,"ion-text-center"],["shape","round","color","primary",3,"click"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c._UZ(3,"ion-back-button",1),c.qZA(),c.TgZ(4,"ion-title"),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"ion-content"),c.TgZ(8,"ion-refresher",2),c.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),c._UZ(9,"ion-refresher-content"),c.qZA(),c.YNc(10,Z,2,0,"div",3),c.YNc(11,T,22,21,"ion-list",4),c.YNc(12,q,9,6,"div",5),c.qZA()),2&t&&(c.xp6(5),c.Oqu(c.lcZ(6,4,"COMPANY_MOD.MENU")),c.xp6(5),c.Q6J("ngIf",e.loadingFlag.pending),c.xp6(1),c.Q6J("ngIf",e.products.length>0),c.xp6(1),c.Q6J("ngIf",0===e.products.length&&e.loadingFlag.result))},directives:[u.Gu,u.sr,u.Sm,u.oU,u.cs,u.wd,u.W2,u.nJ,u.Wo,h.O5,u.PQ,u.q_,u.Ub,u.yh,u.Q$,h.sg,u.Ie,u.yW,u.PM,u.FN,u.YG],pipes:[l.X$,p.g],styles:[""]}),t})()},20714:function(t,e,i){i.d(e,{h:function(){return A}});var n=i(27887),o=i(69814),s=i(37716),a=i(47063),r=i(81780),c=i(84465),l=i(38583),d=i(56209);function u(t,e){1&t&&(s.TgZ(0,"div",6),s._UZ(1,"ion-spinner",7),s.qZA())}function g(t,e){1&t&&(s.TgZ(0,"p",8),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&t&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"DEVICE_MOD.DATA_NULL")))}function h(t,e){if(1&t&&(s.TgZ(0,"div"),s._UZ(1,"div",11),s.qZA()),2&t){const t=e.index,i=s.oxw(3);s.xp6(1),s.Q6J("options",i.getOptionBac(t))}}function p(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"p",8),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.YNc(4,h,2,1,"div",10),s.qZA()),2&t){const t=s.oxw(2);s.xp6(2),s.hij(" ",s.lcZ(3,2,"LAB_MOD.BACTERIA")," "),s.xp6(2),s.Q6J("ngForOf",t.dataBacte.arr)}}function Z(t,e){if(1&t&&s._UZ(0,"div",11),2&t){const t=s.oxw(2);s.Q6J("options",t.getOptionBar(t.result.antibiotic.data,t.result.antibiotic.group))}}function m(t,e){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,p,5,4,"div",5),s.YNc(2,Z,1,1,"div",9),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngIf",t.dataBacte.arr.length>0),s.xp6(1),s.Q6J("ngIf",t.result.antibiotic)}}let A=(()=>{class t{constructor(t,e,i,o){this.modalController=t,this.translate=e,this.toastService=i,this.wallService=o,this.dataBacte={label:[],data:[]},this.loadingFlag=new n.E}ngOnInit(){console.log(this.farms),this.loadData()}loadData(){const t={farms:this.farms.map(t=>t.code)};this.loadingFlag.setPending(!0),this.wallService.loadAnalyze(t).subscribe(t=>{1==+t.status?(this.result=t.data,this.processData(t.data)):this.toastService.warning(t.message),this.loadingFlag.setResult(!0)},()=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}getJson(t){var e;try{e=JSON.parse(t)}catch(i){e={min:1e3,max:3e3}}return e}getPondByString(t){let e=[];return t.split(",,,").forEach(t=>{let i=t.split(":::");0==e.filter(t=>t.pcode===i[2]).length&&e.push({key:i[0],name:i[1],pcode:i[2],pname:i[3],fcode:i[4],fname:i[5],value:i[6],calculator:i[7]?this.getJson(i[7]):""})}),e}getDailyByString(t){let e=[];return t.split(",,,").forEach(t=>{let i=t.split(":::");e.push({key:i[0],name:i[1],pcode:i[2],pname:i[3],fcode:i[4],fname:i[5],value:i[6],calculator:i[7]?this.getJson(i[7]):""})}),e}getStatusBacte(t){return console.log(t),+t.value<+t.calculator.min?0:+t.value>+t.calculator.max?2:1}getOptionBac(t){return{legend:{top:"bottom"},toolbox:{show:!0},tooltip:{trigger:"item",position:["30%","30%"]},series:[{name:this.dataBacte.arr[t].name,type:"pie",radius:[50,80],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:8},data:[{value:this.dataBacte.data[t][0],name:this.translate.instant("LAB_MOD.GOOD")},{value:this.dataBacte.data[t][1],name:this.translate.instant("WARNING")},{value:this.dataBacte.data[t][2],name:this.translate.instant("LAB_MOD.DANGER")}]}]}}getOptionBar(t,e){let i=this.getDailyByString(t),n=[];i.forEach(t=>{n.findIndex(e=>e.code===t.fcode)<0&&n.push({code:t.fcode,name:t.fname})});let o=[];i.forEach(t=>{o.findIndex(e=>e.id===t.key)<0&&o.push({id:t.key,name:t.name})});var s=[];i.forEach(t=>{s.findIndex(e=>e.key==t.key&&e.pcode==t.pcode)<0&&s.push(t)});var a=[];return o.forEach(t=>{let e={name:t.name,type:"bar",data:[]};n.forEach(i=>{let n=s.filter(e=>e.key==t.id&&e.fcode==i.code).length;e.data.push(0==n?"":n)}),a.push(e)}),{tooltip:{trigger:"axis",position:["30%","30%"],axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",boundaryGap:[0,.01]},xAxis:{type:"category",data:n.map(t=>t.name)},series:a}}processData(t){let e=[],i=[];if(t.bacteria){let n=this.getPondByString(t.bacteria.data);console.log(n),n.forEach(t=>{let n=e.findIndex(e=>e.key===t.key);n>=0?i[n][this.getStatusBacte(t)]=+i[n][this.getStatusBacte(t)]+1:(e.push(t),i.push([0,0,0]),i[i.length-1][this.getStatusBacte(t)]=+i[i.length-1][this.getStatusBacte(t)]+1)})}this.dataBacte.arr=e,this.dataBacte.data=i}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.IN),s.Y36(r.sK),s.Y36(c.k),s.Y36(o.F))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-farm-analyst"]],inputs:{farms:"farms"},decls:12,vars:6,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["class","spiner-loading",4,"ngIf"],["class","ion-text-center",4,"ngIf"],[4,"ngIf"],[1,"spiner-loading"],["name","dots"],[1,"ion-text-center"],["echarts","","class","ion-margin-top",3,"options",4,"ngIf"],[4,"ngFor","ngForOf"],["echarts","",1,"ion-margin-top",3,"options"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return e.modalController.dismiss()}),s._UZ(4,"ion-icon",2),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"ion-content"),s.YNc(9,u,2,0,"div",3),s.YNc(10,g,3,3,"p",4),s.YNc(11,m,3,2,"div",5),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,4,"LAB_MOD.ANALYZE")),s.xp6(3),s.Q6J("ngIf",e.loadingFlag.pending),s.xp6(1),s.Q6J("ngIf",0==e.dataBacte.data.length&&!e.result.antibiotic),s.xp6(1),s.Q6J("ngIf",!e.loadingFlag.pending))},directives:[a.Gu,a.sr,a.Sm,a.YG,a.gu,a.wd,a.W2,l.O5,a.PQ,l.sg,d._w],pipes:[r.X$],styles:[""]}),t})()},99045:function(t,e,i){i.d(e,{C:function(){return Z}});var n=i(27887),o=i(69814),s=i(37716),a=i(47063),r=i(81780),c=i(84465),l=i(38583),d=i(56209);function u(t,e){1&t&&(s.TgZ(0,"div",5),s._UZ(1,"ion-spinner",6),s.qZA())}function g(t,e){if(1&t&&(s.TgZ(0,"ion-item"),s.TgZ(1,"ion-label"),s.TgZ(2,"p"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"ion-text"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.TgZ(8,"ion-text",10),s._uU(9),s.ALo(10,"translate"),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(3),s.AsE("",s.lcZ(4,6,"FARM")," ",t.name,""),s.xp6(3),s.AsE(" ",t.pond," ",s.lcZ(7,8,"POND")," "),s.xp6(3),s.AsE(" ",s.lcZ(10,10,"LAB_MOD.VACCINATED")," ",t.total," ")}}function h(t,e){if(1&t&&(s.TgZ(0,"ion-item"),s.TgZ(1,"ion-label"),s.TgZ(2,"p"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"ion-text"),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"ion-text",10),s._uU(8),s.ALo(9,"translate"),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(3),s.lnq("",t.farm_name," | ",s.lcZ(4,6,"POND")," ",t.name,""),s.xp6(3),s.hij(" ",t.seed," "),s.xp6(2),s.AsE(" ",s.lcZ(9,8,"POND_MOD.LOSS")," ",t.loss," ")}}function p(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"p",7),s._uU(2),s.ALo(3,"translate"),s.qZA(),s._UZ(4,"div",8),s.TgZ(5,"ion-list"),s.YNc(6,g,11,12,"ion-item",9),s.qZA(),s.TgZ(7,"p",7),s._uU(8),s.ALo(9,"translate"),s.qZA(),s._UZ(10,"div",8),s.TgZ(11,"ion-list"),s.TgZ(12,"ion-list-header"),s._uU(13),s.ALo(14,"translate"),s.qZA(),s.YNc(15,h,10,10,"ion-item",9),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(2),s.Oqu(s.lcZ(3,7,"LAB_MOD.TIME_OLD")),s.xp6(2),s.Q6J("options",t.optionSeedOld),s.xp6(2),s.Q6J("ngForOf",t.result.pondVaccinated),s.xp6(2),s.Oqu(s.lcZ(9,9,"LAB_MOD.LOSS_RANGE")),s.xp6(2),s.Q6J("options",t.optionLoss),s.xp6(3),s.hij(" ",s.lcZ(14,11,"LAB_MOD.ACTUAL_LOSS")," "),s.xp6(2),s.Q6J("ngForOf",t.result.pondVaccinatedInLab)}}let Z=(()=>{class t{constructor(t,e,i,o){this.modalController=t,this.translate=e,this.toastService=i,this.wallService=o,this.loadingFlag=new n.E}ngOnInit(){this.loadData()}loadData(){const t={farms:this.farms.map(t=>({code:t.code,id:t.id,name:t.name}))};this.loadingFlag.setPending(!0),this.wallService.loadReport(t).subscribe(t=>{1==+t.status?(this.result=t.data,this.processData(t.data)):this.toastService.warning(t.message),this.loadingFlag.setResult(!0)},()=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}processData(t){let e=[],i=[{name:"< 30 "+this.translate.instant("FARM_MOD.OLD_DAY"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[]},{name:"30-60 "+this.translate.instant("FARM_MOD.OLD_DAY"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[]},{name:">60 "+this.translate.instant("FARM_MOD.OLD_DAY"),type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[]}];t.listSeedOldInFarm&&(t.listSeedOldInFarm.forEach(t=>{var n=["","",""];t.data.split(",").forEach(t=>{var e=t.split(":::"),i=+e[1]>60?2:this.float2int(+e[1]/30);n[i.toString()]=+n[i]+1}),i[0].data.push(n[0]),i[1].data.push(n[1]),i[2].data.push(n[2]),e.push(t.farm_name)}),console.log(i)),this.optionSeedOld={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value"},xAxis:{type:"category",data:e},series:i};let n=[],o=[{name:"< 30 "+this.translate.instant("FARM_MOD.OLD_DAY"),type:"bar",data:[]},{name:"30-60 "+this.translate.instant("FARM_MOD.OLD_DAY"),type:"bar",data:[]},{name:">60 "+this.translate.instant("FARM_MOD.OLD_DAY"),type:"bar",data:[]}];t.lossInFarm&&t.lossInFarm.forEach(t=>{var e=[0,0,0],i=[0,0,0];t.data.split(",").forEach(t=>{var n=t.split(":::"),o=+n[1]>60?2:this.float2int(+n[1]/30);e[o]+=+n[2],i[o]+=+n[3]}),[0,1,2].forEach(t=>{o[t].data.push(0==e[t]||0==i[t]?"":(100*e[t]/i[t]).toFixed(2))}),n.push(t.farm_name)}),this.optionLoss={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},yAxis:{type:"value",boundaryGap:[0,.01]},xAxis:{type:"category",data:n},series:o},console.log(o)}float2int(t){return 0|t}getListLoss(t){let e=[];t.split(",").forEach(t=>{e.push({})})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.IN),s.Y36(r.sK),s.Y36(c.k),s.Y36(o.F))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-farm-report"]],inputs:{farms:"farms"},decls:11,vars:5,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["class","spiner-loading",4,"ngIf"],[4,"ngIf"],[1,"spiner-loading"],["name","dots"],[1,"ion-text-center"],["echarts","",1,"ion-margin-top",3,"options"],[4,"ngFor","ngForOf"],["color","danger","slot","end"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return e.modalController.dismiss()}),s._UZ(4,"ion-icon",2),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"ion-content"),s.YNc(9,u,2,0,"div",3),s.YNc(10,p,16,13,"div",4),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,3,"LAB_MOD.REPORT")),s.xp6(3),s.Q6J("ngIf",e.loadingFlag.pending),s.xp6(1),s.Q6J("ngIf",!e.loadingFlag.pending))},directives:[a.Gu,a.sr,a.Sm,a.YG,a.gu,a.wd,a.W2,l.O5,a.PQ,d._w,a.q_,l.sg,a.yh,a.Ie,a.Q$,a.yW],pipes:[r.X$],styles:[""]}),t})()},66542:function(t,e,i){i.d(e,{J:function(){return p}});var n=i(16738),o=i(27887),s=i(90650),a=i(37716),r=i(84465),c=i(47063),l=i(81780),d=i(38583),u=i(56209);function g(t,e){1&t&&(a.TgZ(0,"div",4),a._UZ(1,"ion-spinner",7),a.qZA())}function h(t,e){if(1&t&&a._UZ(0,"div",8),2&t){const t=a.oxw();a.Q6J("options",t.optionLine)("merge",t.chartData)}}let p=(()=>{class t{constructor(t,e,i){this.toastService=t,this.modalController=e,this.translate=i,this.rawData=[],this.processedData=[],this.chartData=[],this.loadingFlag=new o.E,this.show=!1}ngOnInit(){this.prepareData(),this.optionLine={tooltip:{trigger:"axis",formatter:function(t){var e=(t=t[0]).value[1];let i=n(t.value[0]).format("DD-MM-YYYY")+"<br/>";return i+=e+" \u0111\u1ed9 C",i},axisPointer:{animation:!0}},xAxis:{type:"time",splitLine:{show:!1},axisLabel:{formatter:function(t){let e=n(t),i=e.format("DD-MM")+"\n";return e.format("YYYY")!==n().year().toString()&&(i+=e.format("YYYY")),i}}},yAxis:{type:"value",name:"Nhi\u1ec7t \u0111\u1ed9",splitLine:{show:!1}},series:[{data:this.processedData,type:"line",smooth:!1,name:"Nhi\u1ec7t \u0111\u1ed9",showSymbol:!0,symbolSize:5,hoverAnimation:!0,areaStyle:{color:new s.Q.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 51, 51, 0.5)"},{offset:1,color:"rgb(0, 204, 204, 0.5)"}])}}]}}prepareData(){this.loadingFlag.setPending(!0),this.processedData=[],this.data.forEach(t=>{let e=n(new Date(1e3*t.dt),"YYYYMMDD");this.processedData.push({name:e.toString(),value:[e.format("YYYY-MM-DD"),+(t.temp.day-273.15).toFixed(2)]})}),this.processedData.reverse(),this.chartData={series:[{data:this.processedData}]},this.loadingFlag.setResult(!0)}dismiss(){this.modalController.dismiss()}ionViewDidEnter(){this.show=!0}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(r.k),a.Y36(c.IN),a.Y36(l.sK))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-predict-weather"]],inputs:{data:"data"},decls:20,vars:11,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"],[1,"ion-padding"],["echarts","","class","demo-chart",3,"options","merge",4,"ngIf"],["name","dots"],["echarts","",1,"demo-chart",3,"options","merge"]],template:function(t,e){1&t&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a.TgZ(3,"ion-button",1),a.NdJ("click",function(){return e.dismiss()}),a._UZ(4,"ion-icon",2),a.qZA(),a.qZA(),a.TgZ(5,"ion-title"),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"ion-content"),a.YNc(9,g,2,0,"div",3),a.TgZ(10,"div",4),a.TgZ(11,"div",5),a.TgZ(12,"h2"),a._uU(13),a.ALo(14,"translate"),a.qZA(),a.TgZ(15,"h2"),a._uU(16),a.ALo(17,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"div",5),a.YNc(19,h,1,2,"div",6),a.qZA(),a.qZA()),2&t&&(a.xp6(6),a.Oqu(a.lcZ(7,5,"WALL.WEATHER_CHART_TITLE")),a.xp6(3),a.Q6J("ngIf",e.loadingFlag.pending),a.xp6(4),a.Oqu(a.lcZ(14,7,"WALL.WEATHER_CHART_SUBTITLE1")),a.xp6(3),a.Oqu(a.lcZ(17,9,"WALL.WEATHER_CHART_SUBTITLE2")),a.xp6(3),a.Q6J("ngIf",e.show))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.wd,c.W2,d.O5,c.PQ,u._w],pipes:[l.X$],styles:[""]}),t})()}}]);