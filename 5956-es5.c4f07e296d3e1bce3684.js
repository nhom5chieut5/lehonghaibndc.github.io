!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[5956],{76329:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(13409),a=n(25639),s=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new a.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(r.Subject);t.BehaviorSubject=s},13409:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(93576),a=n(67241),s=n(43984),c=n(25639),u=n(45298),l=n(81476),d=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return i(t,e),t}(a.Subscriber);t.SubjectSubscriber=d;var f=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype[l.rxSubscriber]=function(){return new d(this)},t.prototype.lift=function(e){var t=new p(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,o=t.slice(),i=0;i<n;i++)o[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,o=t.slice(),i=0;i<n;i++)o[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new c.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),o=0;o<t;o++)n[o].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(e.complete(),s.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new r.Observable;return e.source=this,e},t.create=function(e,t){return new p(e,t)},t}(r.Observable);t.Subject=f;var p=function(e){function t(t,n){var o=e.call(this)||this;return o.destination=t,o.source=n,o}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.Subscription.EMPTY},t}(f);t.AnonymousSubject=p},45298:function(e,t,n){var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,n){var o=e.call(this)||this;return o.subject=t,o.subscriber=n,o.closed=!1,o}return i(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n(43984).Subscription);t.SubjectSubscription=r},25639:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}();t.ObjectUnsubscribedError=n},10672:function(t,o,i){i.d(o,{q:function(){return y}});var r=i(64762),a=i(90665),s=i(16738),c=i(51937),u=i(27887),l=i(62374),d=i(37716),f=i(47063),p=i(84465),h=i(81780),m=i(71239),g=i(38583);function v(e,t){if(1&e&&(d.TgZ(0,"ion-select-option",19),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.Q6J("value",n.user_id),d.xp6(1),d.Oqu(n.user_name)}}function _(e,t){if(1&e&&(d.TgZ(0,"ion-select-option",19),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.s9C("value",n.code),d.xp6(1),d.Oqu(n.name)}}function b(e,t){if(1&e&&(d.TgZ(0,"ion-select-option",19),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.s9C("value",n.key),d.xp6(1),d.Oqu(n.label)}}function Z(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"ion-item",6),d.TgZ(1,"ion-label"),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"ion-select",20),d.NdJ("ionChange",function(e){return d.CHM(n),d.oxw().checkTypeAdd(e)}),d.YNc(5,b,2,2,"ion-select-option",11),d.qZA(),d.qZA()}if(2&e){var o=d.oxw();d.xp6(2),d.Oqu(d.lcZ(3,2,"FARM_MOD.TYPE_CALENDAR")),d.xp6(3),d.Q6J("ngForOf",o.keys)}}function A(e,t){1&e&&(d.TgZ(0,"div"),d._UZ(1,"ion-spinner",21),d.qZA())}var k,y=((k=function(){function t(n,o,i,r,c,l,d,f){e(this,t),this.modalController=n,this.farmService=o,this.toastService=i,this.translate=r,this.pickerController=c,this.alertController=l,this.calendarService=d,this.dbLocalService=f,this.maxDate=s(),this.minDate=s().subtract(180,"days"),this.savingFlag=new u.E,this.form=new a.cw({content:new a.NI("",a.kI.required),date:new a.NI(s().format("YYYY-MM-DD"),a.kI.required),hour:new a.NI(s().format("HH:mm"),a.kI.required),type:new a.NI("all",a.kI.required),typeAdd:new a.NI("common",a.kI.required),time:new a.NI(""),farm_id:new a.NI(""),pond_id:new a.NI(""),key_check:new a.NI(""),value_check:new a.NI(""),reference_id:new a.NI(0,a.kI.required),user_perform:new a.NI("")}),this.listPond=[],this.members=[]}return n(t,[{key:"ngOnInit",value:function(){this.keys=[{key:"common",label:this.translate.instant("FARM_MOD.COMMON")},{key:"feed",label:this.translate.instant("POND_MOD.BE_FEED")},{key:"enviro",label:this.translate.instant("POND_MOD.BE_CHEMICAL_TREATMENT")}],this.getListPond(),this.data&&this.setForProcedure(),this.getListManager()}},{key:"getListPond",value:function(){var e=this,t=this.dbLocalService.farms.find(function(t){return t.infor.code===e.calendarService.fcode})?this.dbLocalService.farms.find(function(t){return t.infor.code===e.calendarService.fcode}).infor:null;this.listPond=this.dbLocalService.filterPond("farm_id",t.id).map(function(e){return e.infor})}},{key:"getListManager",value:function(){var e=this;this.calendarService.getMember().subscribe(function(t){1==t.status?e.members=t.data:e.toastService.warning(t.error)},function(){e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"openPickerHour",value:function(){return(0,r.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.form.value.hour.split(":"),e.next=3,this.pickerController.create({columns:[this.getColumnOptions(24,t[0],1),this.getColumnOptions(60,t[1],2)],buttons:[{text:"Cancel",role:"cancel"},{text:"Confirm",handler:function(e){n.form.patchValue({hour:e["col-1"].text+":"+e["col-2"].text})}}]});case 3:return e.next=5,e.sent.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"getColumnOptions",value:function(e,t,n){for(var o=[],i=0,r=0;r<e;r++)o.push(r<10?{text:"0"+r,value:r}:{text:r,value:r}),r==t&&(i=r);return{name:"col-".concat(n),selectedIndex:i,options:o}}},{key:"checkTypeAdd",value:function(e){return(0,r.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.detail.value!==this.form.value.typeAdd){t.next=8;break}if("common"==this.form.value.typeAdd){t.next=7;break}return t.next=4,this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("DEVICE_MOD.VALUE"),inputs:[{name:"value_check",type:"number",placeholder:this.translate.instant("POND_MOD.VALUE_CHECK")}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){n.form.patchValue({typeAdd:"common",value_check:"",key_check:""}),console.log("vao day")}},{text:"Ok",handler:function(e){var t=n.keys.filter(function(e){return e.key===n.form.value.typeAdd}).length>0?n.keys.filter(function(e){return e.key===n.form.value.typeAdd})[0]:n.keys[0];n.form.patchValue({content:t.label+" "+e.value_check+" Kg",value_check:e.value_check,key_check:n.form.value.typeAdd})}}]});case 4:return t.next=6,t.sent.present();case 6:return t.abrupt("return",t.sent);case 7:this.form.patchValue({content:"",value_check:"",key_check:""});case 8:case"end":return t.stop()}},t,this)}))}},{key:"setForProcedure",value:function(){this.form.patchValue({pond_id:this.data.pond_code,content:this.data.todo,type:this.data.pond_code,reference_id:this.data.id})}},{key:"save",value:function(){var e=this,t={content:this.form.value.content,date:this.form.value.date,time:this.form.value.hour,farm_id:this.calendarService.fcode,pond_id:"all"==this.form.value.type?"":this.form.value.type,key_check:this.form.value.key_check,value_check:this.form.value.value_check,reference_id:this.form.value.reference_id,user_perform:this.form.value.user_perform};this.savingFlag.setPending(!0),this.calendarService.insertCalendar(t).subscribe(function(n){0==n.status?e.toastService.warning(n.error):(e.toastService.success(n.message),e.modalController.dismiss({pond:e.listPond.find(function(e){return e.code===t.pond_id}),type:e.form.value.type})),e.savingFlag.setResult(!0)},function(t){e.savingFlag.setResult(!1),e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}}]),t}()).\u0275fac=function(e){return new(e||k)(d.Y36(f.IN),d.Y36(c.D),d.Y36(p.k),d.Y36(h.sK),d.Y36(f.up),d.Y36(f.Br),d.Y36(l.o),d.Y36(m.T))},k.\u0275cmp=d.Xpm({type:k,selectors:[["app-calendar-add"]],inputs:{data:"data"},decls:53,vars:39,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],[3,"disabled","click"],[3,"formGroup"],["lines","inset"],["formControlName","date",3,"displayFormat","min","max"],["slot","end",3,"click"],["formControlName","user_perform","value","brown","okText","Okay","cancelText","Dismiss"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","type","interface","action-sheet"],["value","all"],["lines","inset",4,"ngIf"],["position","floating"],["type","text","formControlName","content"],[1,"ion-text-center"],[4,"ngIf"],[3,"value"],["type","text","formControlName","typeAdd","interface","action-sheet",3,"ionChange"],["name","dots"]],template:function(e,t){1&e&&(d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar"),d.TgZ(2,"ion-buttons",0),d.TgZ(3,"ion-button",1),d.NdJ("click",function(){return t.modalController.dismiss(!1)}),d._UZ(4,"ion-icon",2),d.qZA(),d.qZA(),d.TgZ(5,"ion-title"),d._uU(6),d.ALo(7,"translate"),d.qZA(),d.TgZ(8,"ion-buttons",3),d.TgZ(9,"ion-button",4),d.NdJ("click",function(){return t.save()}),d._uU(10),d.ALo(11,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"ion-content"),d.TgZ(13,"ion-list"),d.TgZ(14,"form",5),d.TgZ(15,"ion-item",6),d.TgZ(16,"ion-label"),d._uU(17),d.ALo(18,"translate"),d.qZA(),d._UZ(19,"ion-datetime",7),d.ALo(20,"translate"),d.qZA(),d.TgZ(21,"ion-item",6),d.TgZ(22,"ion-label"),d._uU(23),d.ALo(24,"translate"),d.qZA(),d.TgZ(25,"ion-button",8),d.NdJ("click",function(){return t.openPickerHour()}),d._uU(26),d.qZA(),d.qZA(),d.TgZ(27,"ion-item"),d.TgZ(28,"ion-label"),d._uU(29),d.ALo(30,"translate"),d.qZA(),d.TgZ(31,"ion-select",9),d.TgZ(32,"ion-select-option",10),d._uU(33,"None"),d.qZA(),d.YNc(34,v,2,2,"ion-select-option",11),d.qZA(),d.qZA(),d.TgZ(35,"ion-item",6),d.TgZ(36,"ion-label"),d._uU(37),d.ALo(38,"translate"),d.ALo(39,"translate"),d.qZA(),d.TgZ(40,"ion-select",12),d.TgZ(41,"ion-select-option",13),d._uU(42),d.ALo(43,"translate"),d.qZA(),d.YNc(44,_,2,2,"ion-select-option",11),d.qZA(),d.qZA(),d.YNc(45,Z,6,4,"ion-item",14),d.TgZ(46,"ion-item",6),d.TgZ(47,"ion-label",15),d._uU(48),d.ALo(49,"translate"),d.qZA(),d._UZ(50,"ion-textarea",16),d.qZA(),d.qZA(),d.qZA(),d.TgZ(51,"div",17),d.YNc(52,A,2,0,"div",18),d.qZA(),d.qZA()),2&e&&(d.xp6(6),d.Oqu(d.lcZ(7,19,"FARM_MOD.ADD_CALENDAR")),d.xp6(3),d.Q6J("disabled",t.form.invalid),d.xp6(1),d.hij(" ",d.lcZ(11,21,"FARM_MOD.SAVE")," "),d.xp6(4),d.Q6J("formGroup",t.form),d.xp6(3),d.Oqu(d.lcZ(18,23,"FARM_MOD.DATE")),d.xp6(2),d.Q6J("displayFormat",d.lcZ(20,25,"FORMAT_DATE_MOMENT"))("min",t.minDate.format("YYYY-MM-DD"))("max",t.maxDate.format("YYYY-MM-DD")),d.xp6(4),d.Oqu(d.lcZ(24,27,"POND_MOD.HOUR")),d.xp6(3),d.Oqu(t.form.value.hour),d.xp6(3),d.Oqu(d.lcZ(30,29,"AUTH.USER_NAME")),d.xp6(5),d.Q6J("ngForOf",t.members),d.xp6(3),d.AsE("",d.lcZ(38,31,"FARM"),"/",d.lcZ(39,33,"POND"),""),d.xp6(5),d.Oqu(d.lcZ(43,35,"FARM_MOD.COMMON")),d.xp6(2),d.Q6J("ngForOf",t.listPond),d.xp6(1),d.Q6J("ngIf","all"!=t.form.value.type),d.xp6(3),d.Oqu(d.lcZ(49,37,"POND_MOD.CONTENT")),d.xp6(4),d.Q6J("ngIf",t.savingFlag.pending))},directives:[f.Gu,f.sr,f.Sm,f.YG,f.gu,f.wd,f.W2,f.q_,a._Y,a.JL,a.sg,f.Ie,f.Q$,f.x4,f.QI,a.JJ,a.u,f.t9,f.n0,g.sg,g.O5,f.g2,f.j9,f.PQ],pipes:[h.X$],styles:[""]}),k)},82267:function(t,o,i){i.d(o,{U:function(){return y}});var r=i(64762),a=i(90665),s=i(16738),c=i(51937),u=i(27887),l=i(62374),d=i(37716),f=i(47063),p=i(84465),h=i(81780),m=i(71239),g=i(38583);function v(e,t){if(1&e&&(d.TgZ(0,"ion-select-option",18),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.Q6J("value",n.user_id),d.xp6(1),d.Oqu(n.user_name)}}function _(e,t){if(1&e&&(d.TgZ(0,"ion-select-option",18),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.s9C("value",n.code),d.xp6(1),d.Oqu(n.name)}}function b(e,t){if(1&e&&(d.TgZ(0,"ion-select-option",18),d._uU(1),d.qZA()),2&e){var n=t.$implicit;d.s9C("value",n.key),d.xp6(1),d.Oqu(n.label)}}function Z(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"ion-item",9),d.TgZ(1,"ion-label"),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"ion-select",19),d.NdJ("ionChange",function(e){return d.CHM(n),d.oxw().checkTypeAdd(e)}),d.YNc(5,b,2,2,"ion-select-option",8),d.qZA(),d.qZA()}if(2&e){var o=d.oxw();d.xp6(2),d.Oqu(d.lcZ(3,2,"FARM_MOD.TYPE_CALENDAR")),d.xp6(3),d.Q6J("ngForOf",o.keys)}}function A(e,t){1&e&&(d.TgZ(0,"div"),d._UZ(1,"ion-spinner",20),d.qZA())}var k,y=((k=function(){function t(n,o,i,r,c,l,d,f){e(this,t),this.modalController=n,this.farmService=o,this.toastService=i,this.translate=r,this.pickerController=c,this.alertController=l,this.calendarService=d,this.dbLocalService=f,this.maxDate=s(),this.minDate=s().subtract(180,"days"),this.members=[],this.savingFlag=new u.E,this.form=new a.cw({content:new a.NI("",a.kI.required),date:new a.NI(s().format("YYYY-MM-DD"),a.kI.required),hour:new a.NI(s().format("HH:mm"),a.kI.required),type:new a.NI("all",a.kI.required),typeAdd:new a.NI("common",a.kI.required),time:new a.NI(""),farm_id:new a.NI(""),pond_id:new a.NI(""),key_check:new a.NI(""),value_check:new a.NI(""),reference_id:new a.NI(0,a.kI.required),user_perform:new a.NI("")}),this.listPond=[]}return n(t,[{key:"ngOnInit",value:function(){this.keys=[{key:"common",label:this.translate.instant("FARM_MOD.COMMON")},{key:"feed",label:this.translate.instant("POND_MOD.BE_FEED")},{key:"enviro",label:this.translate.instant("POND_MOD.BE_CHEMICAL_TREATMENT")}],this.getListPond(),this.getListManager()}},{key:"getListManager",value:function(){var e=this;this.calendarService.getMember().subscribe(function(t){1==t.status?(e.members=t.data,e.buildForm()):e.toastService.warning(t.error)},function(){e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"buildForm",value:function(){this.form.patchValue({content:this.data.content,date:s(1e3*this.data.time).format("YYYY-MM-DD"),hour:s(1e3*this.data.time).format("HH:mm"),type:0==this.data.pond_id?"all":this.data.pond_id,typeAdd:this.data.key_check?this.data.key_check:"common",key_check:this.data.key_check,value_check:this.data.value_check,reference_id:this.data.reference_id,user_perform:this.data.user_perform}),console.log(this.form.value)}},{key:"getListPond",value:function(){var e=this,t=this.dbLocalService.farms.find(function(t){return t.infor.code===e.calendarService.fcode})?this.dbLocalService.farms.find(function(t){return t.infor.code===e.calendarService.fcode}).infor:null;this.listPond=this.dbLocalService.filterPond("farm_id",t.id).map(function(e){return e.infor})}},{key:"openPickerHour",value:function(){return(0,r.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.form.value.hour.split(":"),e.next=3,this.pickerController.create({columns:[this.getColumnOptions(24,t[0],1),this.getColumnOptions(60,t[1],2)],buttons:[{text:"Cancel",role:"cancel"},{text:"Confirm",handler:function(e){n.form.patchValue({hour:e["col-1"].value+":"+e["col-2"].value})}}]});case 3:return e.next=5,e.sent.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"getColumnOptions",value:function(e,t,n){for(var o=[],i=0,r=0;r<e;r++)o.push(r<10?{text:"0"+r,value:r}:{text:r,value:r}),r==t&&(i=r);return{name:"col-".concat(n),selectedIndex:i,options:o}}},{key:"checkTypeAdd",value:function(e){return(0,r.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.detail.value!==this.form.value.typeAdd){t.next=8;break}if("common"==this.form.value.typeAdd){t.next=7;break}return t.next=4,this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("DEVICE_MOD.VALUE"),inputs:[{name:"value_check",type:"number",placeholder:this.translate.instant("POND_MOD.VALUE_CHECK")}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){n.form.patchValue({typeAdd:"common",value_check:"",key_check:""})}},{text:"Ok",handler:function(e){var t=n.keys.filter(function(e){return e.key===n.form.value.typeAdd}).length>0?n.keys.filter(function(e){return e.key===n.form.value.typeAdd})[0]:n.keys[0];n.form.patchValue({content:t.label+" "+e.value_check+" Kg",value_check:e.value_check,key_check:n.form.value.typeAdd})}}]});case 4:return t.next=6,t.sent.present();case 6:return t.abrupt("return",t.sent);case 7:this.form.patchValue({content:"",value_check:"",key_check:""});case 8:case"end":return t.stop()}},t,this)}))}},{key:"setForProcedure",value:function(){this.form.patchValue({pond_id:this.data.pond_code,content:this.data.todo,type:this.data.pond_code})}},{key:"save",value:function(){var e=this,t={content:this.form.value.content,date:this.form.value.date,time:this.form.value.hour,farm_id:this.calendarService.fcode,pond_id:"all"==this.form.value.type?"":this.form.value.type,key_check:this.form.value.key_check,value_check:this.form.value.value_check,reference_id:this.form.value.reference_id,user_perform:this.form.value.user_perform},n=this.form.value.content.split(" ").find(function(e){return 0==isNaN(e)});"common"!=this.form.value.typeAdd&&(t.value_check=n),this.savingFlag.setPending(!0),this.calendarService.updateCalendar(this.data.id,t).subscribe(function(n){0==n.status?e.toastService.warning(n.error):(e.toastService.success(n.message),e.modalController.dismiss({pond:e.listPond.find(function(e){return e.code===t.pond_id}),type:e.form.value.type})),e.savingFlag.setResult(!0)},function(t){e.savingFlag.setResult(!1),e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}}]),t}()).\u0275fac=function(e){return new(e||k)(d.Y36(f.IN),d.Y36(c.D),d.Y36(p.k),d.Y36(h.sK),d.Y36(f.up),d.Y36(f.Br),d.Y36(l.o),d.Y36(m.T))},k.\u0275cmp=d.Xpm({type:k,selectors:[["app-calendar-edit"]],inputs:{data:"data"},decls:53,vars:38,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],[3,"formGroup"],["formControlName","date",3,"displayFormat","min","max"],["formControlName","user_perform","value","brown","okText","Okay","cancelText","Dismiss"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["lines","inset"],["slot","end",3,"click"],["type","text","formControlName","type","interface","action-sheet"],["value","all"],["lines","inset",4,"ngIf"],["position","floating"],["type","text","formControlName","content"],[1,"ion-text-center"],[4,"ngIf"],[3,"value"],["type","text","formControlName","typeAdd","interface","action-sheet",3,"ionChange"],["name","dots"]],template:function(e,t){1&e&&(d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar"),d.TgZ(2,"ion-buttons",0),d.TgZ(3,"ion-button",1),d.NdJ("click",function(){return t.modalController.dismiss(!1)}),d._UZ(4,"ion-icon",2),d.qZA(),d.qZA(),d.TgZ(5,"ion-title"),d._uU(6),d.ALo(7,"translate"),d.qZA(),d.TgZ(8,"ion-buttons",3),d.TgZ(9,"ion-button",1),d.NdJ("click",function(){return t.save()}),d._uU(10),d.ALo(11,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"ion-content"),d.TgZ(13,"ion-list"),d.TgZ(14,"form",4),d.TgZ(15,"ion-item"),d.TgZ(16,"ion-label"),d._uU(17),d.ALo(18,"translate"),d.qZA(),d._UZ(19,"ion-datetime",5),d.ALo(20,"translate"),d.qZA(),d.TgZ(21,"ion-item"),d.TgZ(22,"ion-label"),d._uU(23),d.ALo(24,"translate"),d.qZA(),d.TgZ(25,"ion-select",6),d.TgZ(26,"ion-select-option",7),d._uU(27,"None"),d.qZA(),d.YNc(28,v,2,2,"ion-select-option",8),d.qZA(),d.qZA(),d.TgZ(29,"ion-item",9),d.TgZ(30,"ion-label"),d._uU(31),d.ALo(32,"translate"),d.qZA(),d.TgZ(33,"ion-button",10),d.NdJ("click",function(){return t.openPickerHour()}),d._uU(34),d.qZA(),d.qZA(),d.TgZ(35,"ion-item",9),d.TgZ(36,"ion-label"),d._uU(37),d.ALo(38,"translate"),d.ALo(39,"translate"),d.qZA(),d.TgZ(40,"ion-select",11),d.TgZ(41,"ion-select-option",12),d._uU(42),d.ALo(43,"translate"),d.qZA(),d.YNc(44,_,2,2,"ion-select-option",8),d.qZA(),d.qZA(),d.YNc(45,Z,6,4,"ion-item",13),d.TgZ(46,"ion-item",9),d.TgZ(47,"ion-label",14),d._uU(48),d.ALo(49,"translate"),d.qZA(),d._UZ(50,"ion-textarea",15),d.qZA(),d.qZA(),d.qZA(),d.TgZ(51,"div",16),d.YNc(52,A,2,0,"div",17),d.qZA(),d.qZA()),2&e&&(d.xp6(6),d.Oqu(d.lcZ(7,18,"FARM_MOD.EDIT_CALENDAR")),d.xp6(4),d.hij(" ",d.lcZ(11,20,"FARM_MOD.SAVE")," "),d.xp6(4),d.Q6J("formGroup",t.form),d.xp6(3),d.Oqu(d.lcZ(18,22,"FARM_MOD.DATE")),d.xp6(2),d.Q6J("displayFormat",d.lcZ(20,24,"FORMAT_DATE_MOMENT"))("min",t.minDate.format("YYYY-MM-DD"))("max",t.maxDate.format("YYYY-MM-DD")),d.xp6(4),d.Oqu(d.lcZ(24,26,"AUTH.USER_NAME")),d.xp6(5),d.Q6J("ngForOf",t.members),d.xp6(3),d.Oqu(d.lcZ(32,28,"POND_MOD.HOUR")),d.xp6(3),d.Oqu(t.form.value.hour),d.xp6(3),d.AsE("",d.lcZ(38,30,"FARM"),"/",d.lcZ(39,32,"POND"),""),d.xp6(5),d.Oqu(d.lcZ(43,34,"FARM_MOD.COMMON")),d.xp6(2),d.Q6J("ngForOf",t.listPond),d.xp6(1),d.Q6J("ngIf","all"!=t.form.value.type),d.xp6(3),d.Oqu(d.lcZ(49,36,"POND_MOD.CONTENT")),d.xp6(4),d.Q6J("ngIf",t.savingFlag.pending))},directives:[f.Gu,f.sr,f.Sm,f.YG,f.gu,f.wd,f.W2,f.q_,a._Y,a.JL,a.sg,f.Ie,f.Q$,f.x4,f.QI,a.JJ,a.u,f.t9,f.n0,g.sg,g.O5,f.g2,f.j9,f.PQ],pipes:[h.X$],styles:[""]}),k)},85956:function(t,o,i){i.r(o),i.d(o,{CalendarPageModule:function(){return Y}});var r=i(38583),a=i(90665),s=i(47063),c=i(13619),u=i(64762),l=i(16738),d=i(50384),f=i(27887),p=i(10672),h=i(82267),m=i(62374),g=i(37716),v=i(84465),_=i(81780),b=i(71239);function Z(e,t){1&e&&g._UZ(0,"ion-progress-bar",17)}function A(e,t){if(1&e&&(g.TgZ(0,"div",18),g.TgZ(1,"small"),g._uU(2),g.qZA(),g._UZ(3,"ion-progress-bar",19),g.qZA()),2&e){var n=g.oxw();g.xp6(2),g.AsE("",n.totalTask.done," / ",n.totalTask.total,""),g.xp6(1),g.Q6J("value",n.totalTask.done/n.totalTask.total)}}function k(e,t){if(1&e&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&e){var n=g.oxw().$implicit;g.xp6(1),g.Oqu(n.user_name)}}function y(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"ion-item",21),g.NdJ("click",function(){var e=g.CHM(n),t=e.$implicit,o=e.index;return g.oxw(2).presentActionSheet(t,"listCommon",o)}),g._UZ(1,"ion-icon",22),g.TgZ(2,"ion-label"),g.TgZ(3,"p"),g.TgZ(4,"ion-text",23),g.YNc(5,k,2,1,"span",13),g._uU(6),g.ALo(7,"date"),g.qZA(),g.qZA(),g.TgZ(8,"ion-text"),g._uU(9),g.qZA(),g.qZA(),g.qZA()}if(2&e){var o=t.$implicit;g.xp6(1),g.Q6J("name",1==+o.done?"checkbox":"alarm")("color",1==+o.done?"success":"danger"),g.xp6(4),g.Q6J("ngIf",o.user_name),g.xp6(1),g.hij(" ",g.xi3(7,5,1e3*o.time,"HH:mm")," "),g.xp6(3),g.Oqu(o.content)}}function x(e,t){if(1&e&&(g.TgZ(0,"div"),g.TgZ(1,"ion-list"),g.TgZ(2,"ion-list-header"),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.YNc(5,y,10,8,"ion-item",20),g.qZA(),g.qZA()),2&e){var n=g.oxw();g.xp6(3),g.hij(" ",g.lcZ(4,2,"FARM_MOD.COMMON")," "),g.xp6(2),g.Q6J("ngForOf",n.listCommon)}}function O(e,t){if(1&e&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&e){var n=g.oxw().$implicit;g.xp6(1),g.Oqu(n.user_name)}}function T(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"ion-item",21),g.NdJ("click",function(){var e=g.CHM(n),t=e.$implicit,o=e.index;return g.oxw(2).presentActionSheet(t,"listPondJoin",o)}),g._UZ(1,"ion-icon",22),g.TgZ(2,"ion-label"),g.TgZ(3,"p"),g.TgZ(4,"ion-text",23),g.YNc(5,O,2,1,"span",13),g._uU(6),g.ALo(7,"date"),g.qZA(),g.qZA(),g.TgZ(8,"ion-text"),g._uU(9),g.qZA(),g.qZA(),g.qZA()}if(2&e){var o=t.$implicit;g.xp6(1),g.Q6J("name",1==+o.done?"checkbox":"alarm")("color",1==+o.done?"success":"danger"),g.xp6(4),g.Q6J("ngIf",o.user_name),g.xp6(1),g.hij(" ",g.xi3(7,5,1e3*o.time,"HH:mm")," "),g.xp6(3),g.Oqu(o.content)}}function q(e,t){if(1&e&&(g.TgZ(0,"div"),g.TgZ(1,"ion-list"),g.TgZ(2,"ion-list-header"),g._uU(3),g.qZA(),g.YNc(4,T,10,8,"ion-item",20),g.qZA(),g.qZA()),2&e){var n=g.oxw();g.xp6(3),g.hij(" ",n.pondSeleted.name," "),g.xp6(1),g.Q6J("ngForOf",n.listPondJoin)}}function S(e,t){1&e&&(g.TgZ(0,"div"),g.TgZ(1,"ion-item",24),g.TgZ(2,"ion-label"),g.TgZ(3,"p"),g._uU(4),g.ALo(5,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(4),g.Oqu(g.lcZ(5,1,"EXPERT_MOD.EMPTY")))}function C(e,t){1&e&&(g.TgZ(0,"div",18),g.TgZ(1,"small"),g._uU(2),g.ALo(3,"translate"),g.qZA(),g.qZA()),2&e&&(g.xp6(2),g.Oqu(g.lcZ(3,1,"FARM_MOD.SUGGEST_CALENDAR")))}function M(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"ion-card",26),g.NdJ("click",function(){var e=g.CHM(n).$implicit;return g.oxw(2).addSuggest(e)}),g._UZ(1,"ion-ripple-effect"),g.TgZ(2,"ion-card-content"),g._UZ(3,"ion-icon",27),g.TgZ(4,"ion-label"),g.TgZ(5,"b"),g._uU(6),g.qZA(),g._uU(7),g.qZA(),g.qZA(),g.qZA()}if(2&e){var o=t.$implicit;g.xp6(6),g.Oqu(o.pond_name),g.xp6(1),g.hij(" ",o.todo,"")}}function N(e,t){if(1&e&&(g.TgZ(0,"div"),g.YNc(1,C,4,3,"div",12),g.YNc(2,M,8,2,"ion-card",25),g.qZA()),2&e){var n=g.oxw();g.xp6(1),g.Q6J("ngIf",n.totalTask.total>0),g.xp6(1),g.Q6J("ngForOf",n.listSuggest)}}var D,w=[{path:"",component:(D=function(){function t(n,o,i,r,a,s,c,u,d){e(this,t),this.route=n,this.calendarService=o,this.toastService=i,this.translate=r,this.modalController=a,this.alertController=s,this.actionSheetController=c,this.dbLocalService=u,this.authService=d,this.day=l().startOf("day"),this.listCommon=[],this.listPondJoin=[],this.listSuggest=[],this.loadingFlag=new f.E,this.dateRangeSelected=l().format("YYYY-MM-DD"),this.maxDate=l().add(14,"days").startOf("day"),this.minDate=l().subtract(14,"days").startOf("day"),this.totalTask={done:1,total:1}}return n(t,[{key:"ngOnInit",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.fcode=this.route.snapshot.paramMap.get("id"),this.calendarService.setFarmCode(this.fcode),e.next=4,this.dbLocalService.getLocalData();case 4:this.farmItem=this.dbLocalService.farms.find(function(e){return e.infor.code===t.fcode})?this.dbLocalService.farms.find(function(e){return e.infor.code===t.fcode}).infor:null,this.loadUser(),this.getList(),this.getListSuggest();case 8:case"end":return e.stop()}},e,this)}))}},{key:"getList",value:function(){var e=this;this.loadingFlag.setPending(!0),this.listCommon=[];var t=this.pondSeleted?this.pondSeleted.code:"";console.log(this.pondSeleted),this.calendarService.getList(this.fcode,t,this.day.valueOf()/1e3).subscribe(function(t){1==t.status?(e.listCommon=t.data.farm,e.listPondJoin=t.data.pond,e.listPondJoin.length>0&&!e.pondSeleted&&(console.log(e.listPondJoin[0].pond_id),e.pondSeleted=e.dbLocalService.ponds.find(function(t){return t.infor.code===e.listPondJoin[0].pond_id})?e.dbLocalService.ponds.find(function(t){return t.infor.code===e.listPondJoin[0].pond_id}).infor:null),e.checkTotalDone(),e.loadingFlag.setResult(!0)):(e.toastService.warning(t.error),e.loadingFlag.setResult(!0))},function(){e.toastService.danger(e.translate.instant("ERROR_CONNECT")),e.loadingFlag.setResult(!1)})}},{key:"checkTotalDone",value:function(){var e=this;this.totalTask={done:0,total:0},this.listCommon.forEach(function(t){1==t.done&&(e.totalTask.done+=1)}),this.listPondJoin.forEach(function(t){1==t.done&&(e.totalTask.done+=1)}),this.totalTask.total=this.listCommon.length+this.listPondJoin.length}},{key:"onChangeDate",value:function(e){this.dateRangeSelected=e.detail.value;var t=l(this.dateRangeSelected).startOf("day");this.day=t,this.getList()}},{key:"changeDate",value:function(e){var t=l(this.dateRangeSelected).add(e,"days");if(t<this.minDate||t>this.maxDate)return!1;this.dateRangeSelected=t.format("YYYY-MM-DD")}},{key:"presentActionSheet",value:function(e,t,n){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i,r,a,s=this;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.actionSheetController.create({header:"Albums",cssClass:"my-custom-class",buttons:[{text:this.translate.instant(1==+e.done?"UNCONFIRM":"CONFIRM"),icon:1==+e.confirm?"checkbox":"checkbox-outline",handler:function(){s.checkItem(e,t,n)}},{text:this.translate.instant("DELETE"),role:"destructive",icon:"trash",handler:function(){s.presentAlertRemove(e,t,n)}},{text:this.translate.instant("EDIT"),icon:"pencil",handler:function(){s.presentEdit(e,t,n)}},{text:this.translate.instant("CANCEL"),icon:"close",role:"cancel",handler:function(){console.log("Cancel clicked")}}]});case 2:return i=o.sent,o.next=5,i.present();case 5:return o.next=7,i.onDidDismiss();case 7:r=o.sent,a=r.role,console.log("onDidDismiss resolved with role",a);case 10:case"end":return o.stop()}},o,this)}))}},{key:"presentAdd",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:p.q});case 2:return(t=e.sent).onDidDismiss().then(function(e){var t=e.data;t&&(n.pondSeleted="all"==t.type?n.pondSeleted:t.pond,n.getList(),n.getListSuggest())}),e.next=6,t.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"presentEdit",value:function(e,t,n){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:h.U,componentProps:{data:e}});case 2:return(n=t.sent).onDidDismiss().then(function(e){var t=e.data;t&&(o.pondSeleted="all"==t.type?o.pondSeleted:t.pond,o.getList(),o.getListSuggest())}),t.next=6,n.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"loadUser",value:function(){var e=this;this.authService.getUserStorage().then(function(t){t&&e.authService.setUser(t)})}},{key:"presentAlertRemove",value:function(e,t,n){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var i=this;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this.authService.user.id!=e.user_id){o.next=7;break}return o.next=3,this.alertController.create({header:this.translate.instant("MONEY_MOD.DELETE"),message:this.translate.instant("COMPANY_MOD.CONFIRM_DELETE"),buttons:[{text:this.translate.instant("OPTION.OK"),handler:function(){i.delete(e,t,n)}},{text:this.translate.instant("OPTION.CANCEL"),role:"cancel",cssClass:"secondary"}]});case 3:return o.next=5,o.sent.present();case 5:o.next=8;break;case 7:this.toastService.warning(this.translate.instant("TRACEABILITY_MOD.YOU_NOT_HAVE_PERMISSION"));case 8:case"end":return o.stop()}},o,this)}))}},{key:"checkItem",value:function(e,t,n){var o=this;this.calendarService.changeState(e.id).subscribe(function(e){1==e.status?(o[t][n].done=1==o[t][n].done?0:1,o.checkTotalDone(),o.toastService.success(e.message)):o.toastService.danger(e.error)},function(){o.toastService.danger(o.translate.instant("ERROR_CONNECT"))})}},{key:"choosePond",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Radio",inputs:this.dbLocalService.filterPond("farm_id",this.farmItem.id).map(function(e){return{name:e.infor.name,type:"radio",label:e.infor.name,value:e.infor.code,checked:!(!t.pondSeleted||e.infor.code!==t.pondSeleted.code)}}),buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel")}},{text:"Ok",handler:function(e){t.pondSeleted=t.dbLocalService.ponds.find(function(t){return t.infor.code===e})?t.dbLocalService.ponds.find(function(t){return t.infor.code===e}).infor:null,t.getList(),t.getListSuggest()}}]});case 2:return e.next=4,e.sent.present();case 4:case"end":return e.stop()}},e,this)}))}},{key:"getListSuggest",value:function(){var e=this;this.calendarService.getListSuggest().subscribe(function(t){1==t.status?e.listSuggest=t.data:e.toastService.warning(t.error)},function(){e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}},{key:"addSuggest",value:function(e){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:p.q,componentProps:{data:e}});case 2:return(n=t.sent).onDidDismiss().then(function(e){var t=e.data;t&&(o.pondSeleted="all"==t.type?o.pondSeleted:t.pond,o.getList(),o.getListSuggest())}),t.next=6,n.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"delete",value:function(e,t,n){var o=this;this.calendarService.deleteItem(e.id).subscribe(function(e){1==e.status?(o[t].splice(n,1),o.checkTotalDone()):o.toastService.warning(e.error)},function(){o.toastService.danger(o.translate.instant("ERROR_CONNECT"))})}}]),t}(),D.\u0275fac=function(e){return new(e||D)(g.Y36(c.gz),g.Y36(m.o),g.Y36(v.k),g.Y36(_.sK),g.Y36(s.IN),g.Y36(s.Br),g.Y36(s.BX),g.Y36(b.T),g.Y36(d.e))},D.\u0275cmp=g.Xpm({type:D,selectors:[["app-calendar"]],decls:34,vars:20,consts:[["slot","start"],["text","","defaultHref","tabs/management"],["slot","end",3,"click"],[3,"innerHTML"],["type","indeterminate",4,"ngIf"],[1,"ion-text-center"],["size","2"],["fill","clear",3,"disabled","click"],["slot","icon-only","name","arrow-back-outline"],["size","8"],[1,"ion-text-center","w-100",3,"displayFormat","min","max","value","ionChange"],["slot","icon-only","name","arrow-forward-outline"],["style","padding: 0 16px 0 16px;",4,"ngIf"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],["type","indeterminate"],[2,"padding","0 16px 0 16px"],["mode","ios",3,"value"],["detail","",3,"click",4,"ngFor","ngForOf"],["detail","",3,"click"],["slot","start",3,"name","color"],["color","primary"],["lines","none"],["class","boxSuggest ion-activatable ripple-parent",3,"click",4,"ngFor","ngForOf"],[1,"boxSuggest","ion-activatable","ripple-parent",3,"click"],["name","bulb-outline"]],template:function(e,t){1&e&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",0),g._UZ(3,"ion-back-button",1),g.qZA(),g.TgZ(4,"ion-title"),g._uU(5),g.ALo(6,"translate"),g.qZA(),g.TgZ(7,"ion-buttons",2),g.NdJ("click",function(){return t.choosePond()}),g.TgZ(8,"ion-button"),g._UZ(9,"span",3),g.ALo(10,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(11,Z,1,0,"ion-progress-bar",4),g.TgZ(12,"ion-content"),g.TgZ(13,"div",5),g.TgZ(14,"ion-grid"),g.TgZ(15,"ion-row"),g.TgZ(16,"ion-col",6),g.TgZ(17,"ion-button",7),g.NdJ("click",function(){return t.changeDate(-1)}),g._UZ(18,"ion-icon",8),g.qZA(),g.qZA(),g.TgZ(19,"ion-col",9),g.TgZ(20,"ion-item"),g.TgZ(21,"ion-datetime",10),g.NdJ("ionChange",function(e){return t.onChangeDate(e)}),g.ALo(22,"translate"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(23,"ion-col",6),g.TgZ(24,"ion-button",7),g.NdJ("click",function(){return t.changeDate(1)}),g._UZ(25,"ion-icon",11),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(26,A,4,3,"div",12),g.YNc(27,x,6,4,"div",13),g.YNc(28,q,5,2,"div",13),g.YNc(29,S,6,3,"div",13),g.YNc(30,N,3,2,"div",13),g.TgZ(31,"ion-fab",14),g.TgZ(32,"ion-fab-button",15),g.NdJ("click",function(){return t.presentAdd()}),g._UZ(33,"ion-icon",16),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(5),g.Oqu(g.lcZ(6,14,"FARM_MOD.CALENDAR")),g.xp6(4),g.Q6J("innerHTML",t.pondSeleted?t.pondSeleted.name:g.lcZ(10,16,"FARM_MOD.COMMON"),g.oJD),g.xp6(2),g.Q6J("ngIf",t.loadingFlag.pending),g.xp6(6),g.Q6J("disabled",t.dateRangeSelected<=t.minDate.format("YYYY-MM-DD")),g.xp6(4),g.Q6J("displayFormat",g.lcZ(22,18,"FORMAT_DATE_MOMENT"))("min",t.minDate.format("YYYY-MM-DD"))("max",t.maxDate.format("YYYY-MM-DD"))("value",t.dateRangeSelected),g.xp6(3),g.Q6J("disabled",t.dateRangeSelected>=t.maxDate.format("YYYY-MM-DD")),g.xp6(2),g.Q6J("ngIf",t.totalTask.total>0),g.xp6(1),g.Q6J("ngIf",t.listCommon.length>0),g.xp6(1),g.Q6J("ngIf",t.listPondJoin.length>0),g.xp6(1),g.Q6J("ngIf",0==t.listCommon.length&&0==t.listPondJoin.length),g.xp6(1),g.Q6J("ngIf",t.listSuggest.length>0))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.YG,r.O5,s.W2,s.jY,s.Nd,s.wI,s.gu,s.Ie,s.x4,s.QI,s.IJ,s.W4,s.X7,s.q_,s.yh,r.sg,s.Q$,s.yW,s.PM,s.H$,s.FN],pipes:[_.X$,r.uU],styles:["ion-checkbox[_ngcontent-%COMP%]   .item-cover[_ngcontent-%COMP%]{display:none}.fontColor[_ngcontent-%COMP%]{color:#0d47a1}.boxTask[_ngcontent-%COMP%]   .headerDivider[_ngcontent-%COMP%]{border-radius:5px;height:80%;position:absolute;left:10px;top:10%}.boxTask[_ngcontent-%COMP%]   .undone[_ngcontent-%COMP%]{border:2px solid #0D47A1;background-color:#0d47a1}.boxTask[_ngcontent-%COMP%]   .done[_ngcontent-%COMP%]{border:3px solid #2dd36f;background-color:#2dd36f}.boxTask[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{position:absolute;top:10%;right:10px}.boxTask[_ngcontent-%COMP%]   .actionBtn[_ngcontent-%COMP%]{position:absolute;bottom:10%;right:10px}.boxSuggest[_ngcontent-%COMP%]{background-color:#e6ff6e}.boxSuggest[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:2px}"]}),D)},{path:"calendar-add",loadChildren:function(){return i.e(3188).then(i.bind(i,93188)).then(function(e){return e.CalendarAddPageModule})}},{path:"calendar-edit",loadChildren:function(){return i.e(882).then(i.bind(i,50882)).then(function(e){return e.CalendarEditPageModule})}}],E=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[c.Bz.forChild(w)],c.Bz]}),t}(),P=i(54373),Y=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({providers:[m.o],imports:[[r.ez,a.u5,a.UX,s.Pc,E,r.ez,a.u5,_.aw.forChild(),P.i]]}),t}()},51937:function(t,o,i){i.d(o,{D:function(){return l}});var r,a=i(76329),s=i(15189),c=i(88002),u=i(37716),l=((r=function(){function t(n){e(this,t),this.reqAPIService=n,this.urlApi="/manager/farm-api",this.urlApiAdress="/manager/address-api",this.reload$=new a.BehaviorSubject(0),this.numberOfPonds=0}return n(t,[{key:"setCode",value:function(e){this.fcode=e}},{key:"setFarm",value:function(e){this.farm=e,this.permission=e.permission}},{key:"loadPonds",value:function(){return this.reqAPIService.get("/manager/farm-api-mobie?fcode="+this.fcode+"&action=get-item-pond").pipe((0,c.U)(function(e){return e}))}},{key:"listAddress",value:function(e){return this.reqAPIService.get(this.urlApiAdress+"?action=listUnit&id="+e)}},{key:"loadFarm",value:function(){var e=this;return this.reqAPIService.get("/manager/farm-api-info?fcode="+this.fcode).pipe((0,c.U)(function(t){return e.setFarm(t.data),t}))}},{key:"getSeting",value:function(){return this.reqAPIService.get("/manager/farm-api-mobie?action=get-farm-setting&fcode="+this.fcode).pipe((0,c.U)(function(e){return e}))}},{key:"updatePrivate",value:function(e){return this.reqAPIService.post("/manager/farm-api-mobie?action=add-farm-setting&fcode="+this.fcode,e).pipe((0,c.U)(function(e){return e}))}},{key:"removePermission",value:function(e,t){return this.reqAPIService.get("/manager/farm-api-mobie?action=remove-manager&fcode="+this.fcode+"&user_id="+e+"&position="+t).pipe((0,c.U)(function(e){return e}))}},{key:"updateFarm",value:function(e){return this.reqAPIService.post("/manager/farm-edit-api-mobie?action=edit&fcode="+this.fcode,e).pipe((0,c.U)(function(e){return e}))}},{key:"destroyValue",value:function(){this.farm=null,this.fcode=null,this.permission=null,this.numberOfPonds=null}},{key:"getSpecies",value:function(){return this.reqAPIService.get("/manager/farm-create-api?action=get-species").pipe((0,c.U)(function(e){return e}))}},{key:"insertPond",value:function(e){return this.reqAPIService.post("/manager/farm-api-mobie?action=add-pond&fcode="+this.fcode,e).pipe((0,c.U)(function(e){return e}))}},{key:"insertOnePond",value:function(e){return this.reqAPIService.post("/manager/farm-api-mobie?action=add-a-pond&fcode="+this.fcode,e).pipe((0,c.U)(function(e){return e}))}},{key:"loadReport",value:function(){return this.reqAPIService.get("/manager/farm-api-report?fcode="+this.fcode)}},{key:"listStore",value:function(){return this.reqAPIService.get("/manager/farm-api-mobie?fcode="+this.fcode+"&action=list-store")}}]),t}()).\u0275fac=function(e){return new(e||r)(u.LFG(s.$))},r.\u0275prov=u.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r)}}])}();