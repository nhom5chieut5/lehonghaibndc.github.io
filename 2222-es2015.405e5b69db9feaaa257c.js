"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[2222],{73972:function(t,n,i){i.d(n,{y:function(){return h}});var e=i(27887),o=i(15085),s=i(37716),r=i(47063),c=i(84465),a=i(81780),l=i(38583);function p(t,n){1&t&&(s.TgZ(0,"div",7),s._UZ(1,"ion-spinner",8),s.qZA())}function g(t,n){if(1&t&&s._UZ(0,"ion-icon",11),2&t){const t=n.$implicit,i=s.oxw().$implicit;s.Q6J("name",t<=i.rating?"star":"star-outline")}}const d=function(){return[1,2,3,4,5]};function u(t,n){if(1&t&&(s.TgZ(0,"ion-item"),s.TgZ(1,"div",9),s.TgZ(2,"ion-label"),s.TgZ(3,"h3"),s._uU(4),s.qZA(),s.TgZ(5,"div"),s.YNc(6,g,1,1,"ion-icon",10),s.qZA(),s.TgZ(7,"p"),s._uU(8),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){const t=n.$implicit;s.xp6(4),s.Oqu(t.username),s.xp6(2),s.Q6J("ngForOf",s.DdM(3,d)),s.xp6(2),s.Oqu(t.content)}}let h=(()=>{class t{constructor(t,n,i,o){this.modalController=t,this.service=n,this.toastService=i,this.translate=o,this.listRep=[],this.page=0,this.loadingFlag=new e.E}ngOnInit(){this.getList()}getList(){this.loadingFlag.setPending(!0),this.service.getListRep(this.id,this.product_id,this.page).subscribe(t=>{"success"==t.status?this.listRep=this.listRep.concat(t.data):this.toastService.warning(t.error.message),this.loadingFlag.setResult(!0)},t=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}loadMore(t){this.listRep.length%25==0?(this.page+=1,this.getList(),setTimeout(()=>{console.log("Done"),t.target.complete()},500)):t.target.complete()}}return t.\u0275fac=function(n){return new(n||t)(s.Y36(r.IN),s.Y36(o.d),s.Y36(c.k),s.Y36(a.sK))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-product-comment"]],inputs:{id:"id",product_id:"product_id"},decls:18,vars:8,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["class","spiner-loading",4,"ngIf"],[4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","dots"],[1,"spiner-loading"],["name","dots"],[1,"comment-item"],["color","warning",3,"name",4,"ngFor","ngForOf"],["color","warning",3,"name"]],template:function(t,n){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return n.modalController.dismiss(!1)}),s._UZ(4,"ion-icon",2),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.qZA(),s.YNc(8,p,2,0,"div",3),s.TgZ(9,"ion-content"),s.TgZ(10,"ion-list"),s.TgZ(11,"ion-list-header"),s.TgZ(12,"ion-label"),s._uU(13),s.ALo(14,"translate"),s.qZA(),s.qZA(),s.YNc(15,u,9,4,"ion-item",4),s.qZA(),s.TgZ(16,"ion-infinite-scroll",5),s.NdJ("ionInfinite",function(t){return n.loadMore(t)}),s._UZ(17,"ion-infinite-scroll-content",6),s.qZA(),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,4,"SHOP.RATING.DETAIL")),s.xp6(2),s.Q6J("ngIf",n.loadingFlag.pending),s.xp6(5),s.Oqu(s.lcZ(14,6,"SHOP.RATING.RESPONSES")),s.xp6(2),s.Q6J("ngForOf",n.listRep))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.wd,l.O5,r.W2,r.q_,r.yh,r.Q$,l.sg,r.ju,r.MB,r.PQ,r.Ie],pipes:[a.X$],styles:[""]}),t})()},55897:function(t,n,i){i.d(n,{u:function(){return r}});var e=i(37716),o=i(47063),s=i(81780);let r=(()=>{class t{constructor(t){this.modalController=t}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(o.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-product-detail"]],inputs:{detail:"detail"},decls:10,vars:4,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding",3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar"),e.TgZ(2,"ion-buttons",0),e.TgZ(3,"ion-button",1),e.NdJ("click",function(){return n.modalController.dismiss(!1)}),e._UZ(4,"ion-icon",2),e.qZA(),e.qZA(),e.TgZ(5,"ion-title"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"ion-content"),e._UZ(9,"div",3),e.qZA()),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,2,"SHOP.DETAIL")),e.xp6(3),e.Q6J("innerHTML",n.detail,e.oJD))},directives:[o.Gu,o.sr,o.Sm,o.YG,o.gu,o.wd,o.W2],pipes:[s.X$],styles:[""]}),t})()},82222:function(t,n,i){i.r(n),i.d(n,{ShopProductPageModule:function(){return K}});var e=i(38583),o=i(90665),s=i(47063),r=i(13619),c=i(64762),a=i(21224),l=i(27887),p=i(15085),g=i(73972),d=i(55897),u=i(37716),h=i(81780),f=i(84465),m=i(71239),Z=i(4015);function _(t,n){1&t&&(u.TgZ(0,"div",31),u._UZ(1,"ion-spinner",32),u.qZA())}function O(t,n){if(1&t&&(u.TgZ(0,"ion-slide"),u._UZ(1,"img",33),u.qZA()),2&t){const t=n.$implicit,i=u.oxw(2);u.xp6(1),u.Q6J("src",i.service.SITE_PATH+i.convertImgReal(t.meta_value),u.LSH)}}function x(t,n){if(1&t&&u._UZ(0,"img",34),2&t){const t=u.oxw(2);u.Q6J("src",t.service.SITE_PATH+"/upload/eventeshop/"+t.infor.event.image,u.LSH)}}function T(t,n){if(1&t&&u._UZ(0,"ion-icon",35),2&t){const t=n.$implicit,i=u.oxw(2);u.Q6J("name",t<=i.infor.rate_score?"star":"star-outline")}}function q(t,n){if(1&t&&(u.TgZ(0,"del"),u._uU(1),u.qZA()),2&t){const t=u.oxw(2);u.xp6(1),u.hij("",t.infor.del,"\u20ab")}}function C(t,n){if(1&t&&(u.TgZ(0,"span"),u.TgZ(1,"del"),u._uU(2),u.qZA(),u.qZA()),2&t){const t=u.oxw(2);u.xp6(2),u.hij("",t.infor.del,"\u20ab")}}function A(t,n){if(1&t&&(u.TgZ(0,"ion-text",36),u._uU(1),u.ALo(2,"number"),u.qZA()),2&t){const t=u.oxw(2);u.xp6(1),u.hij("",u.xi3(2,1,100*t.infor.ratio,"1.0-0"),"%")}}const S=function(t,n){return{id:t,name:n}};function b(t,n){if(1&t&&(u.TgZ(0,"ion-chip",38),u.TgZ(1,"ion-label"),u._uU(2),u.qZA(),u.qZA()),2&t){const t=n.$implicit;u.Q6J("state",u.WLB(2,S,t.id,t.name)),u.xp6(2),u.Oqu(t.name)}}function v(t,n){if(1&t&&(u.TgZ(0,"ion-item"),u.TgZ(1,"ion-label"),u.TgZ(2,"h3"),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.TgZ(5,"p"),u.YNc(6,b,3,5,"ion-chip",37),u.qZA(),u.qZA(),u.qZA()),2&t){const t=u.oxw(2);u.xp6(3),u.Oqu(u.lcZ(4,2,"SHOP.USES")),u.xp6(3),u.Q6J("ngForOf",t.infor.term.uses)}}function P(t,n){if(1&t&&(u.TgZ(0,"ion-chip",40),u.TgZ(1,"ion-label"),u._uU(2),u.qZA(),u.qZA()),2&t){const t=n.$implicit;u.Q6J("state",u.WLB(2,S,t.id,t.name)),u.xp6(2),u.Oqu(t.name)}}function w(t,n){if(1&t&&(u.TgZ(0,"ion-item"),u.TgZ(1,"ion-label"),u.TgZ(2,"h3"),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.TgZ(5,"p"),u.YNc(6,P,3,5,"ion-chip",39),u.qZA(),u.qZA(),u.qZA()),2&t){const t=u.oxw(2);u.xp6(3),u.Oqu(u.lcZ(4,2,"SHOP.MATERIAL")),u.xp6(3),u.Q6J("ngForOf",t.infor.term.material)}}function y(t,n){if(1&t&&(u.TgZ(0,"ion-chip",42),u.TgZ(1,"ion-label"),u._uU(2),u.qZA(),u.qZA()),2&t){const t=n.$implicit;u.Q6J("state",u.WLB(2,S,t.id,t.name)),u.xp6(2),u.Oqu(t.name)}}function M(t,n){if(1&t&&(u.TgZ(0,"ion-item"),u.TgZ(1,"ion-label"),u.TgZ(2,"h3"),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.TgZ(5,"p"),u.YNc(6,y,3,5,"ion-chip",41),u.qZA(),u.qZA(),u.qZA()),2&t){const t=u.oxw(2);u.xp6(3),u.Oqu(u.lcZ(4,2,"SHOP.USEFOR")),u.xp6(3),u.Q6J("ngForOf",t.infor.term.usefor)}}function I(t,n){if(1&t&&u._UZ(0,"ion-icon",47),2&t){const t=n.$implicit,i=u.oxw().$implicit;u.Q6J("name",t<=i.rating?"star":"star-outline")}}function k(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"ion-button",28),u.NdJ("click",function(){u.CHM(t);const n=u.oxw().$implicit;return u.oxw(2).presentComment(n.id)}),u._UZ(1,"ion-icon",48),u._uU(2),u.ALo(3,"translate"),u.qZA()}2&t&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"SHOP.PRODUCTS_DETAIL.RESPONSES")," "))}const U=function(){return[1,2,3,4,5]};function J(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"ion-item"),u.TgZ(1,"div",43),u.TgZ(2,"ion-label",24),u.TgZ(3,"h3"),u._uU(4),u.qZA(),u.TgZ(5,"div"),u.YNc(6,I,1,1,"ion-icon",44),u.qZA(),u.TgZ(7,"p"),u._uU(8),u.qZA(),u.qZA(),u.TgZ(9,"ion-button",28),u.NdJ("click",function(){const n=u.CHM(t),i=n.$implicit,e=n.index;return u.oxw(2).likeComment(i.id,e)}),u._UZ(10,"ion-icon",45),u._uU(11),u.ALo(12,"translate"),u.qZA(),u.YNc(13,k,4,3,"ion-button",46),u.qZA(),u.qZA()}if(2&t){const t=n.$implicit;u.xp6(4),u.Oqu(t.username),u.xp6(2),u.Q6J("ngForOf",u.DdM(8,U)),u.xp6(2),u.Oqu(t.content),u.xp6(3),u.AsE(" ",u.lcZ(12,6,"SHOP.PRODUCTS_DETAIL.USEFUL")," (",t.likes,") "),u.xp6(2),u.Q6J("ngIf",t.count_rep>0)}}function N(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"ion-content",6),u.YNc(1,_,2,0,"div",7),u.TgZ(2,"div",8),u.TgZ(3,"ion-slides",9,10),u.NdJ("ionSlideDidChange",function(){return u.CHM(t),u.oxw().slideChangedImage()}),u.YNc(5,O,2,1,"ion-slide",11),u.qZA(),u.YNc(6,x,1,1,"img",12),u.TgZ(7,"span",13),u._uU(8),u.qZA(),u.qZA(),u.TgZ(9,"div",14),u.TgZ(10,"h4",15),u._uU(11),u.qZA(),u.TgZ(12,"div",16),u.YNc(13,T,1,1,"ion-icon",17),u.TgZ(14,"span"),u._uU(15),u.qZA(),u._uU(16),u.ALo(17,"translate"),u.qZA(),u.TgZ(18,"div",18),u.TgZ(19,"strong"),u._uU(20),u.qZA(),u.YNc(21,q,2,1,"del",19),u.YNc(22,C,3,1,"span",19),u.YNc(23,A,3,4,"ion-text",20),u.qZA(),u.TgZ(24,"ion-grid"),u.TgZ(25,"ion-row"),u.TgZ(26,"ion-col"),u.TgZ(27,"ion-button",21),u.NdJ("click",function(){return u.CHM(t),u.oxw().presentOption(1)}),u._uU(28),u.ALo(29,"translate"),u.qZA(),u.qZA(),u.TgZ(30,"ion-col"),u.TgZ(31,"ion-button",21),u.NdJ("click",function(){return u.CHM(t),u.oxw().presentOption(0)}),u._uU(32),u.ALo(33,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(34,"div"),u.TgZ(35,"ion-list",22),u.TgZ(36,"ion-item",23),u.TgZ(37,"ion-label",24),u.TgZ(38,"h3"),u._uU(39),u.ALo(40,"translate"),u.qZA(),u.TgZ(41,"span"),u._uU(42),u.qZA(),u.qZA(),u.TgZ(43,"ion-button",25),u._UZ(44,"ion-icon",26),u._uU(45),u.ALo(46,"translate"),u.qZA(),u.qZA(),u.YNc(47,v,7,4,"ion-item",19),u.YNc(48,w,7,4,"ion-item",19),u.YNc(49,M,7,4,"ion-item",19),u.qZA(),u.TgZ(50,"div",14),u.TgZ(51,"p"),u._uU(52),u.qZA(),u.qZA(),u.TgZ(53,"div",27),u.TgZ(54,"ion-button",28),u.NdJ("click",function(){return u.CHM(t),u.oxw().presentDetail()}),u._uU(55),u.ALo(56,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(57,"ion-list"),u.TgZ(58,"ion-list-header"),u.TgZ(59,"ion-label"),u._uU(60),u.ALo(61,"translate"),u.qZA(),u.TgZ(62,"ion-button"),u._uU(63),u.qZA(),u.qZA(),u.YNc(64,J,14,9,"ion-item",11),u.qZA(),u.TgZ(65,"ion-infinite-scroll",29),u.NdJ("ionInfinite",function(n){return u.CHM(t),u.oxw().loadComment(n)}),u._UZ(66,"ion-infinite-scroll-content",30),u.qZA(),u.qZA()}if(2&t){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.loadingFlag.pending),u.xp6(2),u.Q6J("options",t.slideOpts),u.xp6(2),u.Q6J("ngForOf",t.infor.image),u.xp6(1),u.Q6J("ngIf",t.infor.event),u.xp6(2),u.AsE("",t.numImgSelect,"/",t.infor.image.length,""),u.xp6(3),u.Oqu(t.infor.alias),u.xp6(2),u.Q6J("ngForOf",u.DdM(43,U)),u.xp6(2),u.Oqu(t.infor.rate_score),u.xp6(1),u.AsE(" | ",t.infor.rate_count," ",u.lcZ(17,29,"SHOP.PRODUCTS_DETAIL.RATING")," "),u.xp6(4),u.hij("",t.infor.label_price,"\u20ab"),u.xp6(1),u.Q6J("ngIf",1==t.infor.options.length),u.xp6(1),u.Q6J("ngIf",t.infor.options.length>1),u.xp6(1),u.Q6J("ngIf",1==t.infor.options.length),u.xp6(5),u.hij(" ",u.lcZ(29,31,"SHOP.PRODUCTS_DETAIL.ADD_CART")," "),u.xp6(4),u.hij(" ",u.lcZ(33,33,"SHOP.PRODUCTS_DETAIL.BUY_NOW")," "),u.xp6(4),u.MGl("routerLink","../../store/",null==t.inforShop?null:t.inforShop.id,""),u.xp6(3),u.Oqu(u.lcZ(40,35,"SHOP.PRODUCTS_DETAIL.STORE")),u.xp6(3),u.Oqu(null==t.inforShop?null:t.inforShop.name),u.xp6(3),u.hij(" ",u.lcZ(46,37,"SHOP.PRODUCTS_DETAIL.PARTNER")," "),u.xp6(2),u.Q6J("ngIf",t.infor.term.uses.length>0),u.xp6(1),u.Q6J("ngIf",t.infor.term.material.length>0),u.xp6(1),u.Q6J("ngIf",t.infor.term.usefor.length>0),u.xp6(3),u.Oqu(t.infor.description),u.xp6(3),u.Oqu(u.lcZ(56,39,"SHOP.PRODUCTS_DETAIL.DETAIL")),u.xp6(5),u.Oqu(u.lcZ(61,41,"SHOP.PRODUCTS_DETAIL.RATING_TITLE")),u.xp6(3),u.Oqu(t.infor.rate_count),u.xp6(1),u.Q6J("ngForOf",t.listComment)}}function L(t,n){if(1&t&&(u.TgZ(0,"del"),u._uU(1),u.ALo(2,"number"),u.qZA()),2&t){const t=u.oxw(2);u.xp6(1),u.hij("",u.xi3(2,1,null==t.optionSelect?null:t.optionSelect.price_root,"1.0-0"),"\u20ab")}}function E(t,n){if(1&t&&(u.TgZ(0,"ion-badge",36),u._uU(1),u.ALo(2,"number"),u.qZA()),2&t){const t=u.oxw(2);u.xp6(1),u.hij("-",u.xi3(2,1,100*(t.optionSelect.price_root-t.optionSelect.price_new)/t.optionSelect.price_root,"1.0-0"),"%")}}function H(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"ion-chip",63),u.NdJ("click",function(){const n=u.CHM(t).$implicit;return u.oxw(3).setOptionSelect(n)}),u.TgZ(1,"ion-label"),u._uU(2),u.qZA(),u.qZA()}if(2&t){const t=n.$implicit,i=u.oxw(3);u.Q6J("ngClass",t.id==(null==i.optionSelect?null:i.optionSelect.id)?"btnSelected":""),u.xp6(2),u.Oqu(t.name)}}function Q(t,n){if(1&t&&(u.TgZ(0,"div",61),u.YNc(1,H,3,2,"ion-chip",62),u.qZA()),2&t){const t=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",t.infor.options)}}function Y(t,n){1&t&&(u.TgZ(0,"ion-text",36),u._uU(1,"T\u1ea1m h\u1ebft h\xe0ng"),u.qZA())}function F(t,n){if(1&t&&(u.TgZ(0,"ion-text",66),u._uU(1),u.qZA()),2&t){const t=u.oxw(3);u.xp6(1),u.hij("C\xf2n ",t.optionSelect.quantity," s\u1ea3n ph\u1ea9m")}}function R(t,n){if(1&t&&(u.TgZ(0,"div",64),u.YNc(1,Y,2,0,"ion-text",20),u.YNc(2,F,2,1,"ion-text",65),u.qZA()),2&t){const t=u.oxw(2);u.xp6(1),u.Q6J("ngIf",t.optionSelect.quantity<=0),u.xp6(1),u.Q6J("ngIf",t.optionSelect.quantity>0)}}function D(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"div",69),u.TgZ(1,"button",70),u.NdJ("click",function(){u.CHM(t);const n=u.oxw(3);return n.quantity=n.quantity-1,n.checkInventory()}),u._UZ(2,"img",71),u.qZA(),u.TgZ(3,"input",72),u.NdJ("ngModelChange",function(n){return u.CHM(t),u.oxw(3).quantity=n})("input",function(){return u.CHM(t),u.oxw(3).checkInventory()}),u.qZA(),u.TgZ(4,"button",73),u.NdJ("click",function(){u.CHM(t);const n=u.oxw(3);return n.quantity=n.quantity+1,n.checkInventory()}),u._UZ(5,"img",74),u.qZA(),u.qZA()}if(2&t){const t=u.oxw(3);u.xp6(1),u.Q6J("disabled",t.quantity<=1),u.xp6(2),u.Q6J("ngModel",t.quantity)}}function j(t,n){if(1&t&&(u.TgZ(0,"div",67),u.TgZ(1,"ion-text"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.YNc(4,D,6,2,"div",68),u.qZA()),2&t){const t=u.oxw(2);u.xp6(2),u.Oqu(u.lcZ(3,2,"SHOP.PRODUCTS_DETAIL.QUANTITY")),u.xp6(2),u.Q6J("ngIf",t.optionSelect.quantity>0)}}function $(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"div",67),u.TgZ(1,"ion-button",75),u.NdJ("click",function(){return u.CHM(t),u.oxw(2).submitProduct()}),u.qZA(),u.qZA()}if(2&t){const t=u.oxw(2);u.xp6(1),u.Q6J("innerHTML",t.translate.instant(1==t.drawerOtps.addToCart?"SHOP.PRODUCTS_DETAIL.ADD_CART":"SHOP.PRODUCTS_DETAIL.BUY_NOW"),u.oJD)}}function W(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"ion-bottom-drawer",49),u.NdJ("stateChange",function(n){return u.CHM(t),u.oxw().drawerOtps.drawerState=n}),u.TgZ(1,"div",50),u.TgZ(2,"div",51),u.TgZ(3,"ion-buttons",52),u.NdJ("click",function(){return u.CHM(t),u.oxw().hiddenChooseOption()}),u.TgZ(4,"ion-button"),u._UZ(5,"ion-icon",53),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"ion-grid"),u.TgZ(7,"ion-row"),u.TgZ(8,"ion-col",54),u._UZ(9,"img",55),u.qZA(),u.TgZ(10,"ion-col",56),u.TgZ(11,"div",57),u.TgZ(12,"strong"),u._uU(13),u.ALo(14,"number"),u.qZA(),u.YNc(15,L,3,4,"del",19),u.YNc(16,E,3,4,"ion-badge",20),u.qZA(),u.TgZ(17,"div"),u._uU(18),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(19,Q,2,1,"div",58),u.YNc(20,R,3,2,"div",59),u.YNc(21,j,5,4,"div",60),u.YNc(22,$,2,1,"div",60),u.qZA(),u.qZA()}if(2&t){const t=u.oxw();u.Q6J("dockedHeight",t.drawerOtps.dockedHeight)("disableDrag",t.drawerOtps.disableDrag)("state",t.drawerOtps.drawerState),u.xp6(9),u.Q6J("src",t.service.SITE_PATH+t.infor.img_default,u.LSH),u.xp6(4),u.hij("",u.xi3(14,12,null==t.optionSelect?null:t.optionSelect.price_new,"1.0-0"),"\u20ab"),u.xp6(2),u.Q6J("ngIf",(null==t.optionSelect?null:t.optionSelect.price_new)!=(null==t.optionSelect?null:t.optionSelect.price_root)),u.xp6(1),u.Q6J("ngIf",(null==t.optionSelect?null:t.optionSelect.price_new)!=(null==t.optionSelect?null:t.optionSelect.price_root)),u.xp6(2),u.hij(" ",null==t.optionSelect?null:t.optionSelect.detail," "),u.xp6(1),u.Q6J("ngIf",t.optionSelect),u.xp6(1),u.Q6J("ngIf",t.optionSelect),u.xp6(1),u.Q6J("ngIf",t.optionSelect),u.xp6(1),u.Q6J("ngIf",t.optionSelect&&t.optionSelect.quantity>0)}}function z(t,n){1&t&&u._UZ(0,"ion-backdrop",76)}const B=[{path:"",component:(()=>{class t{constructor(t,n,i,e,o,s,r,c,p){this.route=t,this.router=n,this.service=i,this.translate=e,this.toastService=o,this.modalController=s,this.dbLocalService=r,this.platform=c,this.cd=p,this.numImgSelect=1,this.slideOpts={initialSlide:0,speed:400,pagination:!1,centeredSlides:!0,centeredSlidesBounds:!0},this.drawerOtps={dockedHeight:400,disableDrag:!0,drawerState:a.Wk.Bottom,addToCart:1},this.loadingFlag=new l.E,this.quantity=1,this.listComment=[],this.pageComment=0}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){this.platform.ready().then(()=>{this.drawerOtps.dockedHeight=this.platform.height()/2}),this.id=this.route.snapshot.paramMap.get("id"),yield this.dbLocalService.getDataCart(),this.getItem(),this.getListComment()})}getItem(){this.loadingFlag.setPending(!0),this.service.getAProduct(this.id).subscribe(t=>{if("success"==t.status){this.infor=t.data,this.infor.del="";let n=parseInt(this.infor.options[0].price_root),i=parseInt(this.infor.options[0].price_root);if(1==this.infor.options.length)this.infor.del=this.numberWithCommas(n),this.infor.label_price=this.numberWithCommas(this.infor.options[0].price_new),this.infor.event&&("same"==this.infor.event.type_key||"sale_percent"==this.infor.event.type_key||"sale_price"==this.infor.event.type_key)&&(this.infor.label_price=this.numberWithCommas(this.service.calPriceEvent(this.infor.options[0].price_root,this.infor.event.type_key,this.infor.event.type_value)),this.infor.ratio=this.infor.event.ratio);else{this.infor.options.forEach(t=>{parseInt(t.price_root)<i&&(i=t.price_root),parseInt(t.price_root)>n&&(n=t.price_root)}),this.infor.del=this.numberWithCommas(i)+" ~ "+this.numberWithCommas(n);let t=this.infor.label_price.split("~");!this.infor.event||"same"!=this.infor.event.type_key&&"sale_percent"!=this.infor.event.type_key&&"sale_price"!=this.infor.event.type_key?this.infor.label_price=this.numberWithCommas(t[0])+" ~ "+this.numberWithCommas(t[1]):(this.infor.label_price=this.infor.event.label_price,this.infor.ratio=this.infor.event.ratio)}this.getShop()}else this.toastService.warning(t.error.message);this.loadingFlag.setResult(!0)},t=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}getShop(){this.service.getAShop(this.infor.shop_id).subscribe(t=>{"success"==t.status?(this.inforShop=t.data,this.inforShop.address+=", "+this.inforShop.units[0].name+", "+this.inforShop.units[1].name+", "+this.inforShop.units[2].name):this.toastService.warning(t.error.message)},t=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}getListComment(){this.service.getListComment(this.id,this.pageComment).subscribe(t=>{"success"==t.status?this.listComment=this.listComment.concat(t.data):this.toastService.warning(t.error.message)},t=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}loadComment(t){this.listComment.length%25==0?(this.pageComment+=1,this.getListComment(),setTimeout(()=>{t.target.complete()},500)):t.target.complete()}slideChangedImage(){this.slides.getActiveIndex().then(t=>{this.numImgSelect=t+1})}presentOption(t){return(0,c.mG)(this,void 0,void 0,function*(){0==this.drawerOtps.drawerState?(this.setOptionSelect(this.infor.options[0]),this.drawerOtps.drawerState=1):this.drawerOtps.drawerState=0,this.drawerOtps.addToCart=t})}setOptionSelect(t){this.optionSelect={price_new:t.price_new,price_root:t.price_root,detail:t.detail,weight:t.weight,quantity:t.quantity,name:t.name,id:t.id},this.infor.event&&("same"==this.infor.event.type_key||"sale_percent"==this.infor.event.type_key||"sale_price"==this.infor.event.type_key)&&(this.optionSelect.price_new=this.service.calPriceEvent(t.price_root,this.infor.event.type_key,this.infor.event.type_value))}hiddenChooseOption(){this.drawerOtps.drawerState=0}convertImgReal(t){return t.replace("thumb_image","ge_image")}numberWithCommas(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}presentComment(t){return(0,c.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:g.y,cssClass:"my-custom-class",componentProps:{id:t,product_id:this.id}})).present()})}presentDetail(){return(0,c.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:d.u,cssClass:"my-custom-class",componentProps:{detail:this.infor.detail}})).present()})}likeComment(t,n){this.service.likeComment(t).subscribe(t=>{"success"==t.status?this.listComment[n].likes=parseInt(this.listComment[n].likes)+1:this.toastService.warning(t.error.message)},t=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}submitProduct(){console.log(this.optionSelect);const t={id:this.infor.id,option_id:this.optionSelect.id,name:this.infor.alias,option_name:this.optionSelect.name,option_quantity:this.optionSelect.quantity,price_new:parseInt(this.optionSelect.price_new),price_root:parseInt(this.optionSelect.price_root),weight:parseFloat(this.optionSelect.weight),quantity:this.quantity,img:""==this.infor.img_default?this.infor.image[0].meta_value:this.infor.img_default,shop_id:this.infor.shop_id,shop_name:this.infor.shop_name,shop_address:this.inforShop.address,inventory:this.optionSelect.quantity,event_id:this.infor.event?this.infor.event.event_id:0,type_id:this.infor.event?this.infor.event.type_id:0,type_key:this.infor.event?this.infor.event.type_key:"",type_value:this.infor.event?this.infor.event.type_value:0,type_limit:this.infor.event?this.infor.event.type_limit:0,type_min:this.infor.event?this.infor.event.type_min:0,event_quantity:this.infor.event?this.infor.event.quantity:0};this.dbLocalService.addToCart(t),this.drawerOtps.drawerState=a.Wk.Bottom,1==this.drawerOtps.addToCart?this.toastService.success(this.translate.instant("SHOP.ADD_SUCCESS")):this.router.navigateByUrl("shop/cart")}checkInventory(){"event"in this.infor&&this.quantity>this.infor.event.quantity?(this.toastService.warning("S\u1ea3n ph\u1ea9m khuy\u1ebfn m\xe3i n\xe0y ch\u1ec9 \u0111\u01b0\u1ee3c mua t\u1ed1i \u0111a "+this.infor.event.quantity+" s\u1ea3n ph\u1ea9m"),this.quantity=this.infor.event.quantity,this.cd.detectChanges()):((!("event"in this.infor)||!this.quantity)&&this.quantity>this.optionSelect.quantity||this.quantity<=0)&&(this.toastService.danger("S\u1ed1 l\u01b0\u1ee3ng kh\xf4ng kh\u1ea3 d\u1ee5ng"),this.quantity=1,this.cd.detectChanges())}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(r.gz),u.Y36(r.F0),u.Y36(p.d),u.Y36(h.sK),u.Y36(f.k),u.Y36(s.IN),u.Y36(m.T),u.Y36(s.t4),u.Y36(u.sBO))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-shop-product"]],viewQuery:function(t,n){if(1&t&&u.Gf(s.Hr,5),2&t){let t;u.iGM(t=u.CRH())&&(n.slides=t.first)}},decls:11,vars:4,consts:[["slot","start"],["text","","defaultHref","tabs/shop"],["slot","end"],["no-bounce","",4,"ngIf"],[3,"dockedHeight","disableDrag","state","stateChange",4,"ngIf"],["class","backdrop",4,"ngIf"],["no-bounce",""],["class","spiner-loading",4,"ngIf"],[1,"media-box"],["pager","true","mode","ios",3,"options","ionSlideDidChange"],["slides",""],[4,"ngFor","ngForOf"],["class","bannerProduct",3,"src",4,"ngIf"],[1,"image-total"],[1,"ion-padding-horizontal"],[1,"title"],[1,"rated"],[3,"name",4,"ngFor","ngForOf"],[1,"price"],[4,"ngIf"],["color","danger",4,"ngIf"],["mode","ios","expand","block",3,"click"],["inset","false","lines","inset"],[3,"routerLink"],[1,"ion-text-wrap"],["slot","end","color","success","fill","outline","shape","round"],["slot","start","name","checkmark-outline"],[1,"ion-text-center"],["size","small","fill","outline","shape","round",3,"click"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","dots"],[1,"spiner-loading"],["name","dots"],["onError","this.src='assets/img/1235.jpg'",3,"src"],[1,"bannerProduct",3,"src"],[3,"name"],["color","danger"],["routerLink","../../products",3,"state",4,"ngFor","ngForOf"],["routerLink","../../products",3,"state"],["routerLink","../../products","color","primary",3,"state",4,"ngFor","ngForOf"],["routerLink","../../products","color","primary",3,"state"],["routerLink","../../products","color","tertiary",3,"state",4,"ngFor","ngForOf"],["routerLink","../../products","color","tertiary",3,"state"],[1,"comment-item"],["color","warning",3,"name",4,"ngFor","ngForOf"],["slot","start","name","thumbs-up-outline"],["size","small","fill","outline","shape","round",3,"click",4,"ngIf"],["color","warning",3,"name"],["slot","start","name","caret-down-outline"],[3,"dockedHeight","disableDrag","state","stateChange"],[1,"drawer-content"],[1,"ion-float-right"],[3,"click"],["color","dark","slot","icon-only","name","close"],["size","4",1,"ion-padding"],["onError","this.src='assets/img/1235.jpg'",2,"border-radius","5px",3,"src"],["size","8",1,"ion-padding"],[1,"price-option"],["class","ion-padding-start product-option",4,"ngIf"],["class","ion-padding-start",4,"ngIf"],["class","ion-padding-start ion-padding-top ion-padding-end box-quantity",4,"ngIf"],[1,"ion-padding-start","product-option"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"ion-padding-start"],["color","success",4,"ngIf"],["color","success"],[1,"ion-padding-start","ion-padding-top","ion-padding-end","box-quantity"],["class","group-input-product",4,"ngIf"],[1,"group-input-product"],["aria-label","decrease",3,"disabled","click"],["width","20","height","20","alt","decrease","src","../../assets/img/icons-remove.svg"],["readonly","","type","number","id","quantity","max","optionSelect.quantity",3,"ngModel","ngModelChange","input"],["aria-label","increase",3,"click"],["width","20","height","20","alt","increase","src","../../assets/img/icons-add.svg"],["expand","block","mode","ios",2,"width","100%",3,"innerHTML","click"],[1,"backdrop"]],template:function(t,n){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u._UZ(3,"ion-back-button",1),u.qZA(),u.TgZ(4,"ion-title"),u._uU(5),u.qZA(),u.TgZ(6,"ion-buttons",2),u._UZ(7,"app-shop-toolbar"),u.qZA(),u.qZA(),u.qZA(),u.YNc(8,N,67,44,"ion-content",3),u.YNc(9,W,23,15,"ion-bottom-drawer",4),u.YNc(10,z,1,0,"ion-backdrop",5)),2&t&&(u.xp6(5),u.Oqu(null==n.infor?null:n.infor.name),u.xp6(3),u.Q6J("ngIf",n.infor),u.xp6(1),u.Q6J("ngIf",n.infor),u.xp6(1),u.Q6J("ngIf",1==n.drawerOtps.drawerState))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,Z.g,e.O5,s.W2,s.Hr,e.sg,s.jY,s.Nd,s.wI,s.YG,s.q_,s.Ie,s.YI,r.rH,s.Q$,s.gu,s.yh,s.ju,s.MB,s.PQ,s.A$,s.yW,s.hM,a.w5,s.yp,e.mk,o.Fd,o.wV,o.Fj,o.JJ,o.On,s.ql],pipes:[h.X$,e.JJ],styles:['[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}[_nghost-%COMP%]   .media-box[_ngcontent-%COMP%]{text-align:center;position:relative}[_nghost-%COMP%]   .media-box[_ngcontent-%COMP%]   .media-thumbnail[_ngcontent-%COMP%]{padding:5px}[_nghost-%COMP%]   .rated[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding:1px;float:left;color:salmon}[_nghost-%COMP%]   .rated[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{float:left;padding:1px 1px 1px 5px}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:bold;font-family:"Averta"}[_nghost-%COMP%]   .price[_ngcontent-%COMP%]{clear:both;padding-top:5px}[_nghost-%COMP%]   .price[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{padding-right:5px;font-size:1.1em;color:#de2525}[_nghost-%COMP%]   .price[_ngcontent-%COMP%]   del[_ngcontent-%COMP%]{padding-right:5px;font-size:.8em}[_nghost-%COMP%]   .price[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:5px}[_nghost-%COMP%]   .price-option[_ngcontent-%COMP%]{margin-bottom:5px}[_nghost-%COMP%]   .price-option[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{padding-right:5px;font-size:1.1em;color:#de2525}[_nghost-%COMP%]   .price-option[_ngcontent-%COMP%]   del[_ngcontent-%COMP%]{padding-right:5px;font-size:.8em}[_nghost-%COMP%]   .comment-item[_ngcontent-%COMP%]{padding:10px 0}[_nghost-%COMP%]   .image-total[_ngcontent-%COMP%]{position:absolute;bottom:12px;right:12px;padding:4px 6px;border-radius:2px;background:rgba(36,36,36,.5);z-index:2;color:#fff;font-size:11px;line-height:16px;transition:bottom .5s ease 0s}[_nghost-%COMP%]   .backdrop[_ngcontent-%COMP%]{background-color:#222428;opacity:.3}[_nghost-%COMP%]   .btnSelected[_ngcontent-%COMP%]{--background: #82cee0}[_nghost-%COMP%]   .group-input-product[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .group-input-product[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{border-right:none;border-radius:4px 0 0 4px;padding:4px}[_nghost-%COMP%]   .group-input-product[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], [_nghost-%COMP%]   .group-input-product[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:30px;color:#242424;font-size:14px;text-align:center;outline:none;transition:border-color .15s ease-in-out 0s,box-shadow .15s ease-in-out 0s}[_nghost-%COMP%]   .group-input-product[_ngcontent-%COMP%]   .group-input-product[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;width:30px;background-color:#fff;border:1px solid #ececec}[_nghost-%COMP%]   .group-input-product[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;border:1px solid #ececec}[_nghost-%COMP%]   .group-input-product[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{border-left:none;border-radius:0 4px 4px 0;padding:4px}[_nghost-%COMP%]   .box-quantity[_ngcontent-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:1em;font-size:.8em}[_nghost-%COMP%]   .product-option[_ngcontent-%COMP%]{overflow:auto;white-space:nowrap;-ms-overflow-style:none;scrollbar-width:none}[_nghost-%COMP%]   .product-option[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]   .bannerProduct[_ngcontent-%COMP%]{position:absolute;bottom:0;max-width:80%;left:0;max-height:70px;z-index:9999}']}),t})()},{path:"product-options",loadChildren:()=>i.e(8612).then(i.bind(i,98612)).then(t=>t.ProductOptionsPageModule)},{path:"product-detail",loadChildren:()=>i.e(9519).then(i.bind(i,19519)).then(t=>t.ProductDetailPageModule)},{path:"product-comment",loadChildren:()=>i.e(4507).then(i.bind(i,94507)).then(t=>t.ProductCommentPageModule)}];let G=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[r.Bz.forChild(B)],r.Bz]}),t})();var X=i(26177);let K=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[e.ez,o.u5,s.Pc,a.Tn,G,h.aw.forChild(),X.t]]}),t})()}}]);