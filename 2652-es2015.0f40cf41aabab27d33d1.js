"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[2652],{51937:function(e,t,i){i.d(t,{D:function(){return a}});var o=i(76329),n=i(15189),r=i(88002),s=i(37716);let a=(()=>{class e{constructor(e){this.reqAPIService=e,this.urlApi="/manager/farm-api",this.urlApiAdress="/manager/address-api",this.reload$=new o.BehaviorSubject(0),this.numberOfPonds=0}setCode(e){this.fcode=e}setFarm(e){this.farm=e,this.permission=e.permission}loadPonds(){return this.reqAPIService.get("/manager/farm-api-mobie?fcode="+this.fcode+"&action=get-item-pond").pipe((0,r.U)(e=>e))}listAddress(e){return this.reqAPIService.get(this.urlApiAdress+"?action=listUnit&id="+e)}loadFarm(){return this.reqAPIService.get("/manager/farm-api-info?fcode="+this.fcode).pipe((0,r.U)(e=>(this.setFarm(e.data),e)))}getSeting(){return this.reqAPIService.get("/manager/farm-api-mobie?action=get-farm-setting&fcode="+this.fcode).pipe((0,r.U)(e=>e))}updatePrivate(e){return this.reqAPIService.post("/manager/farm-api-mobie?action=add-farm-setting&fcode="+this.fcode,e).pipe((0,r.U)(e=>e))}removePermission(e,t){return this.reqAPIService.get("/manager/farm-api-mobie?action=remove-manager&fcode="+this.fcode+"&user_id="+e+"&position="+t).pipe((0,r.U)(e=>e))}updateFarm(e){return this.reqAPIService.post("/manager/farm-edit-api-mobie?action=edit&fcode="+this.fcode,e).pipe((0,r.U)(e=>e))}destroyValue(){this.farm=null,this.fcode=null,this.permission=null,this.numberOfPonds=null}getSpecies(){return this.reqAPIService.get("/manager/farm-create-api?action=get-species").pipe((0,r.U)(e=>e))}insertPond(e){return this.reqAPIService.post("/manager/farm-api-mobie?action=add-pond&fcode="+this.fcode,e).pipe((0,r.U)(e=>e))}insertOnePond(e){return this.reqAPIService.post("/manager/farm-api-mobie?action=add-a-pond&fcode="+this.fcode,e).pipe((0,r.U)(e=>e))}loadReport(){return this.reqAPIService.get("/manager/farm-api-report?fcode="+this.fcode)}listStore(){return this.reqAPIService.get("/manager/farm-api-mobie?fcode="+this.fcode+"&action=list-store")}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(n.$))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},2151:function(e,t,i){i.d(t,{b:function(){return m}});var o=i(90665),n=i(28049),r=i(27887),s=i(22923),a=i(37716),l=i(47063),c=i(81780),d=i(71239),p=i(38583);function g(e,t){if(1&e&&(a.TgZ(0,"div",13),a.TgZ(1,"ion-text",14),a.TgZ(2,"i"),a._uU(3),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(3),a.Oqu(e.message)}}function u(e,t){1&e&&(a.TgZ(0,"div"),a._UZ(1,"ion-spinner",15),a.qZA())}let m=(()=>{class e{constructor(e,t,i,n){this.modalController=e,this.translate=t,this.storeService=i,this.dbLocalService=n,this.form=new o.cw({name:new o.NI("",o.kI.required),area:new o.NI("",o.kI.required),description:new o.NI("")}),this.savingFlag=new r.E}ngOnInit(){}onSubmit(){this.savingFlag.setPending(!0),this.storeService.sendPost("add",this.form.value,"&fcode="+this.storeService.getFarmCode(),"manager/store-api-mobie").pipe((0,n.P)()).subscribe(e=>{1===e.status?(this.dbLocalService.stores.push({infor:e.data,store:[]}),this.dbLocalService.setLocalData("stores",this.dbLocalService.stores),this.modalController.dismiss(e.data)):this.message=e.error,this.savingFlag.setResult(!0)},e=>{this.savingFlag.setResult(!1),this.message=this.translate.instant("ERROR_CONNECT")})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(l.IN),a.Y36(c.sK),a.Y36(s.d),a.Y36(d.T))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-store-add"]],decls:32,vars:19,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["class","ion-padding ion-text-center",4,"ngIf"],[3,"formGroup","ngSubmit"],["lines","inset"],["position","floating"],["type","text","formControlName","name","inputmode","text"],["type","number","formControlName","area","inputmode","text"],["type","text","formControlName","description","inputmode","text"],[1,"ion-text-center","ion-padding"],[4,"ngIf"],["type","submit","color","primary","shape","round",3,"disabled"],[1,"ion-padding","ion-text-center"],["color","danger"],["name","dots"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a.TgZ(3,"ion-button",1),a.NdJ("click",function(){return t.modalController.dismiss()}),a._UZ(4,"ion-icon",2),a.qZA(),a.qZA(),a.TgZ(5,"ion-title"),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"ion-content"),a.YNc(9,g,4,1,"div",3),a.TgZ(10,"form",4),a.NdJ("ngSubmit",function(){return t.onSubmit()}),a.TgZ(11,"ion-list"),a.TgZ(12,"ion-item",5),a.TgZ(13,"ion-label",6),a._uU(14),a.ALo(15,"translate"),a.qZA(),a._UZ(16,"ion-input",7),a.qZA(),a.TgZ(17,"ion-item",5),a.TgZ(18,"ion-label",6),a._uU(19),a.ALo(20,"translate"),a.qZA(),a._UZ(21,"ion-input",8),a.qZA(),a.TgZ(22,"ion-item",5),a.TgZ(23,"ion-label",6),a._uU(24),a.ALo(25,"translate"),a.qZA(),a._UZ(26,"ion-textarea",9),a.qZA(),a.qZA(),a.TgZ(27,"div",10),a.YNc(28,u,2,0,"div",11),a.TgZ(29,"ion-button",12),a._uU(30),a.ALo(31,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(6),a.Oqu(a.lcZ(7,9,"WAREHOUSE_MOD.ADD_NEW")),a.xp6(3),a.Q6J("ngIf",t.message),a.xp6(1),a.Q6J("formGroup",t.form),a.xp6(4),a.Oqu(a.lcZ(15,11,"WAREHOUSE_MOD.NAME")),a.xp6(5),a.Oqu(a.lcZ(20,13,"AREA")),a.xp6(5),a.Oqu(a.lcZ(25,15,"PHOTO_MOD.DESCRIPTION")),a.xp6(4),a.Q6J("ngIf",t.savingFlag.pending),a.xp6(1),a.Q6J("disabled",t.form.invalid||t.savingFlag.pending),a.xp6(1),a.hij("",a.lcZ(31,17,"WAREHOUSE_MOD.SAVE")," "))},directives:[l.Gu,l.sr,l.Sm,l.YG,l.gu,l.wd,l.W2,p.O5,o._Y,o.JL,o.sg,l.q_,l.Ie,l.Q$,l.pK,l.j9,o.JJ,o.u,l.as,l.g2,l.yW,l.PQ],pipes:[c.X$],styles:[""]}),e})()},92652:function(e,t,i){i.d(t,{z:function(){return A}});var o=i(64762),n=i(51937),r=i(27887),s=i(2151),a=i(80559),l=i(96351),c=i(37716),d=i(47063),p=i(81780),g=i(71239),u=i(84465),m=i(13619),f=i(38583);function h(e,t){1&e&&(c.TgZ(0,"div",14),c._UZ(1,"ion-spinner",15),c.qZA())}function Z(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"ion-item",16),c.TgZ(2,"ion-label"),c.TgZ(3,"ion-text",5),c._uU(4),c.qZA(),c.qZA(),c.TgZ(5,"ion-text",17),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.qZA(),c.BQk()),2&e){const e=t.$implicit;c.xp6(1),c.MGl("routerLink","/store/",e.infor.code,""),c.xp6(3),c.hij(" ",e.infor.name," "),c.xp6(2),c.AsE(" ",0==e.store.length?e.infor.total_product:e.store.length," ",c.lcZ(7,4,"WAREHOUSE_MOD.MENU")," ")}}let A=(()=>{class e{constructor(e,t,i,o,n){this.modalController=e,this.translate=t,this.farmService=i,this.dbLocalService=o,this.toastService=n,this.loadingFlag=new r.E}ngOnInit(){this.loadListStore()}loadListStore(){this.loadingFlag.setPending(!0),this.farmService.listStore().subscribe(e=>{1==e.status?(this.farmService.storeCommon=e.data.common,this.dbLocalService.stores=e.data.list.map(e=>({infor:e,store:[]})),this.dbLocalService.setLocalData("stores",this.dbLocalService.stores)):this.toastService.warning(e.error),this.loadingFlag.setResult(!0)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT")),this.loadingFlag.setResult(!1)})}presentAddlist(){return(0,o.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:a.n,componentProps:{}});return e.onDidDismiss().then(e=>{console.log(e)}),yield e.present()})}presentAddStore(){return(0,o.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:s.b});return e.onDidDismiss().then(e=>{e.data&&this.loadListStore()}),yield e.present()})}presentReportStore(){return(0,o.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:l.E})).present()})}doRefresh(e){this.loadListStore(),e.target.complete()}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(d.IN),c.Y36(p.sK),c.Y36(n.D),c.Y36(g.T),c.Y36(u.k))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-store-list"]],decls:29,vars:11,consts:[["slot","fixed",3,"ionRefresh"],[1,"ion-text-center","ion-align-self-center",3,"routerLink"],["mode","ios",1,"menu-icon-square"],["fill","clear","color","light"],["color","primary","name","list-outline",1,"icon-large"],["color","primary"],[1,"ion-text-center","ion-align-self-center"],["mode","ios",1,"menu-icon-square",3,"routerLink"],["color","primary","name","clipboard-outline",1,"icon-large"],["id","line"],["class","spiner-loading",4,"ngIf"],[4,"ngFor","ngForOf"],["color","primary","slot","end","fill","clear",3,"click"],["name","add-outline"],[1,"spiner-loading"],["name","dots"],["detail","",3,"routerLink"],["color","primary","slot","end"]],template:function(e,t){1&e&&(c.TgZ(0,"ion-refresher",0),c.NdJ("ionRefresh",function(e){return t.doRefresh(e)}),c._UZ(1,"ion-refresher-content"),c.qZA(),c.TgZ(2,"ion-grid"),c.TgZ(3,"ion-row"),c.TgZ(4,"ion-col",1),c.TgZ(5,"ion-card",2),c.TgZ(6,"ion-button",3),c._UZ(7,"ion-icon",4),c.qZA(),c._UZ(8,"br"),c.TgZ(9,"ion-text",5),c._uU(10),c.qZA(),c._uU(11," Danh m\u1ee5c "),c.qZA(),c.qZA(),c.TgZ(12,"ion-col",6),c.TgZ(13,"ion-card",7),c.TgZ(14,"ion-button",3),c._UZ(15,"ion-icon",8),c.qZA(),c._UZ(16,"br"),c._uU(17),c.ALo(18,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(19,"div",9),c.YNc(20,h,2,0,"div",10),c.TgZ(21,"div"),c.TgZ(22,"ion-list"),c.YNc(23,Z,8,6,"ng-container",11),c.TgZ(24,"ion-item"),c.TgZ(25,"ion-button",12),c.NdJ("click",function(){return t.presentAddStore()}),c._UZ(26,"ion-icon",13),c._uU(27),c.ALo(28,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.MGl("routerLink","/store/",t.farmService.fcode,"/items"),c.xp6(6),c.Oqu(null==t.farmService.storeCommon?null:t.farmService.storeCommon.totalItem),c.xp6(3),c.MGl("routerLink","/store/",t.farmService.fcode,"/logs"),c.xp6(4),c.hij(" ",c.lcZ(18,7,"WAREHOUSE_MOD.LOGS")," "),c.xp6(3),c.Q6J("ngIf",t.loadingFlag.pending),c.xp6(3),c.Q6J("ngForOf",null==t.dbLocalService?null:t.dbLocalService.stores),c.xp6(4),c.hij(" ",c.lcZ(28,9,"WAREHOUSE_MOD.ADD_NEW")," "))},directives:[d.nJ,d.Wo,d.jY,d.Nd,d.wI,d.YI,m.rH,d.PM,d.YG,d.gu,d.yW,f.O5,d.q_,f.sg,d.Ie,d.PQ,d.Q$],pipes:[p.X$],styles:["#line[_ngcontent-%COMP%]{border:.5px solid #f5f6f9;margin:20px 0}"]}),e})()},96351:function(e,t,i){i.d(t,{E:function(){return g}});var o=i(27887),n=i(22923),r=i(37716),s=i(47063),a=i(81780),l=i(84465),c=i(56209),d=i(38583);function p(e,t){1&e&&(r.TgZ(0,"div"),r._UZ(1,"ion-spinner",6),r.qZA())}let g=(()=>{class e{constructor(e,t,i,n){this.modalControler=e,this.translate=t,this.storeService=i,this.toastService=n,this.loadingFlag=new o.E}ngOnInit(){this.loadData()}loadData(){this.loadingFlag.setPending(!0),this.storeService.getApiStore("analyze","&fcode="+this.storeService.getFarmCode(),"manager/store-api-mobie").subscribe(e=>{1==e.status?this.initChart(e.data):this.toastService.warning(e.error),this.loadingFlag.setResult(!0)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT")),this.loadingFlag.setResult(!1)})}initChart(e){let t=[],i=[],o=[];for(let s in e.usePerDay){t.push(s);for(let t in e.usePerDay[s])-1==o.indexOf(t)&&(o.push(t),i.push({name:t,type:"bar",stack:"total",label:{show:!1},emphasis:{focus:"series"},data:[]}))}t.forEach(t=>{for(var n=0;n<o.length;n++){var r=0;e.usePerDay[t][o[n]]&&(r=+(+e.usePerDay[t][o[n]]).toFixed(0)),i[n].data.push(r)}});let n=[],r=[{name:this.translate.instant("COST"),type:"bar",stack:"total",label:{show:!1},emphasis:{focus:"series"},data:[]}];e.costPerDay.forEach(e=>{n.push(e.date),r[0].data.push((+e.total).toFixed(0))}),this.optionDay={title:{text:this.translate.instant("WAREHOUSE_MOD.TOTAL_QUANTITY"),padding:0,left:"center",textStyle:{fontFamily:"averta",fontSize:17,fontWeight:600}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:"0"},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},yAxis:{type:"value"},xAxis:{type:"category",data:t},series:i},this.optionCost={title:{text:this.translate.instant("WAREHOUSE_MOD.TOTAL_COST"),padding:0,left:"center",textStyle:{fontFamily:"averta",fontSize:17,fontWeight:600}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:"0"},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},yAxis:{type:"value"},xAxis:{type:"category",data:n},series:r}}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(s.IN),r.Y36(a.sK),r.Y36(n.d),r.Y36(l.k))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-store-report"]],decls:13,vars:6,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["echarts","",1,"ion-margin-top",3,"options"],[1,"ion-text-center"],[4,"ngIf"],["name","dots"]],template:function(e,t){1&e&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-buttons",0),r.TgZ(3,"ion-button",1),r.NdJ("click",function(){return t.modalControler.dismiss()}),r._UZ(4,"ion-icon",2),r.qZA(),r.qZA(),r.TgZ(5,"ion-title"),r._uU(6),r.ALo(7,"translate"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(8,"ion-content"),r._UZ(9,"div",3),r._UZ(10,"div",3),r.TgZ(11,"div",4),r.YNc(12,p,2,0,"div",5),r.qZA(),r.qZA()),2&e&&(r.xp6(6),r.Oqu(r.lcZ(7,4,"WAREHOUSE_MOD.REPORT")),r.xp6(3),r.Q6J("options",t.optionDay),r.xp6(1),r.Q6J("options",t.optionCost),r.xp6(2),r.Q6J("ngIf",t.loadingFlag.pending))},directives:[s.Gu,s.sr,s.Sm,s.YG,s.gu,s.wd,s.W2,c._w,d.O5,s.PQ],pipes:[a.X$],styles:[""]}),e})()}}]);