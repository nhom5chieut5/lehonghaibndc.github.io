!function(){"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[5613],{35613:function(o,i,e){e.r(i),e.d(i,{ProductCompanyPageModule:function(){return I}});var r=e(38583),c=e(90665),a=e(47063),s=e(13619),g=e(64762),l=e(27887),p=e(15085),d=e(95631),u=e(37716),h=e(71239),m=e(84465),f=e(81780);function x(t,n){1&t&&(u.TgZ(0,"div",11),u._UZ(1,"ion-spinner",12),u.qZA())}function P(t,n){1&t&&(u.TgZ(0,"p",13),u._uU(1),u.ALo(2,"translate"),u.qZA()),2&t&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"SHOP.COMP_PRODUCT.EMPTY")))}function _(t,n){if(1&t&&(u.TgZ(0,"div",23),u.TgZ(1,"span"),u._uU(2),u.ALo(3,"number"),u.qZA(),u.qZA()),2&t){var o=u.oxw().$implicit;u.xp6(2),u.hij("-",u.xi3(3,1,100*o.ratio,"0.0-0"),"%")}}function C(t,n){if(1&t&&u._UZ(0,"img",24),2&t){var o=u.oxw().$implicit,i=u.oxw();u.Q6J("src",i.service.SITE_PATH+"/upload/eventeshop/"+o.banner,u.LSH)}}function O(t,n){if(1&t&&u._UZ(0,"ion-icon",27),2&t){var o=n.$implicit,i=u.oxw(2).$implicit;u.Q6J("name",o<=i.rate_score?"star":"star-outline")("color",i.rate_count>0?"primary":"medium")}}var b=function(){return[1,2,3,4,5]};function M(t,n){1&t&&(u.TgZ(0,"div",25),u.YNc(1,O,1,2,"ion-icon",26),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngForOf",u.DdM(1,b)))}function v(t,n){if(1&t&&(u.TgZ(0,"div",28),u.TgZ(1,"small",29),u._uU(2),u.ALo(3,"number"),u.qZA(),u.qZA()),2&t){var o=u.oxw().$implicit;u.xp6(2),u.hij("",u.xi3(3,1,o.maxFullPrice,"1.0-0"),"\u0111")}}function Z(t,n){if(1&t&&(u.TgZ(0,"div",30),u._uU(1),u.ALo(2,"number"),u.qZA()),2&t){var o=u.oxw().$implicit;u.xp6(1),u.hij(" ",u.xi3(2,1,o.maxPrice,"1.0-0")," \u0111 ")}}function w(t,n){if(1&t&&(u.TgZ(0,"div",30),u._uU(1),u.ALo(2,"number"),u.ALo(3,"number"),u.qZA()),2&t){var o=u.oxw().$implicit;u.xp6(1),u.AsE(" ",u.xi3(2,2,o.minPrice,"1.0")," ~ ",u.xi3(3,5,o.maxPrice,"1.0-0")," \u0111 ")}}function A(t,n){if(1&t&&(u.TgZ(0,"ion-col",14),u.YNc(1,_,4,4,"div",15),u.TgZ(2,"div",16),u._UZ(3,"img",17),u.YNc(4,C,1,1,"img",18),u.qZA(),u.TgZ(5,"div",19),u._uU(6),u.qZA(),u.YNc(7,M,2,2,"div",20),u.YNc(8,v,4,4,"div",21),u.YNc(9,Z,3,4,"div",22),u.YNc(10,w,4,8,"div",22),u.qZA()),2&t){var o=n.$implicit,i=u.oxw();u.Q6J("routerLink","../../../product/"+o.id),u.xp6(1),u.Q6J("ngIf",o.ratio&&0!=o.ratio),u.xp6(2),u.Q6J("src",i.service.SITE_PATH+o.img_default,u.LSH),u.xp6(1),u.Q6J("ngIf",o.banner),u.xp6(2),u.Oqu(o.alias),u.xp6(1),u.Q6J("ngIf",o.rate_count>0),u.xp6(1),u.Q6J("ngIf",o.ratio&&0!=o.ratio),u.xp6(1),u.Q6J("ngIf",o.minPrice==o.maxPrice),u.xp6(1),u.Q6J("ngIf",o.minPrice!=o.maxPrice)}}function T(t,n){if(1&t){var o=u.EpF();u.TgZ(0,"ion-infinite-scroll",31),u.NdJ("ionInfinite",function(t){return u.CHM(o),u.oxw().loadMore(t)}),u._UZ(1,"ion-infinite-scroll-content",32),u.qZA()}}var S,k=[{path:"",component:(S=function(){function o(n,i,e,r,c,a,s){t(this,o),this.dbLocalService=n,this.service=i,this.toastService=e,this.translate=r,this.modalController=c,this.alertController=a,this.route=s,this.paramFilter={ship:2,company_id:0,province_id:0,rate_score:0,sort:"DESC",terms:[]},this.list=[],this.numRows=0,this.page=0,this.termsChild={USES:[],MATERIAL:[],USEFOR:[]},this.loadingFlag=new l.E}var i,e,r;return i=o,(e=[{key:"ngOnInit",value:function(){this.id=this.route.snapshot.paramMap.get("id"),this.paramFilter.company_id=this.id,this.getList()}},{key:"getList",value:function(){var t=this;this.loadingFlag.setPending(!0),this.service.listProductPerCompany(this.paramFilter,this.page).subscribe(function(n){"success"==n.status?(t.list=t.list.concat(t.prepareProductPrice(n.data.list)),t.numRows=n.data.numRows,"terms_child"in n.data&&0==t.termsChild.USEFOR.length&&0==t.termsChild.USES.length&&0==t.termsChild.MATERIAL.length&&t.convertTermChild(n.data.terms_child),"infor"in n.data&&(t.infor=n.data.infor)):t.toastService.warning(n.error.message),t.loadingFlag.setResult(!0)},function(n){t.loadingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"numberWithCommas",value:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}},{key:"prepareProductPrice",value:function(t){var n=[];return t.forEach(function(t){var o=t.label_price.split("~");t.minPrice=o[0],t.maxPrice=o[1],t.maxFullPrice=t.maxPrice/(1-t.ratio),n.push(t)}),n}},{key:"convertTermChild",value:function(t){var n=this;this.termsChild={USES:[],MATERIAL:[],USEFOR:[]},t.forEach(function(t){t.terms.split(".lhh_lv1.").forEach(function(o){var i=o.split(".lhh_lv2.");n.termsChild[t.type].push({id:i[0],name:i[1],filter:!1})})})}},{key:"presentFiler",value:function(){return(0,g.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:d.y,componentProps:{terms:this.termsChild,data:this.paramFilter}});case 2:return(n=t.sent).onDidDismiss().then(function(t){t.data&&(o.paramFilter=t.data.data,o.termsChild=t.data.terms,o.page=0,o.list=[],o.getList())}),t.next=6,n.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"loadMore",value:function(t){this.list.length%25==0?(this.page+=1,this.getList(),setTimeout(function(){t.target.complete()},500)):t.target.complete()}},{key:"changeSort",value:function(t){t!=this.paramFilter.sort&&(this.paramFilter.sort=t,this.page=0,this.list=[],this.getList())}}])&&n(i.prototype,e),r&&n(i,r),o}(),S.\u0275fac=function(t){return new(t||S)(u.Y36(h.T),u.Y36(p.d),u.Y36(m.k),u.Y36(f.sK),u.Y36(a.IN),u.Y36(a.Br),u.Y36(s.gz))},S.\u0275cmp=u.Xpm({type:S,selectors:[["app-product-company"]],decls:27,vars:17,consts:[["slot","start"],["text","","defaultHref","tabs/shop"],["class","spiner-loading",4,"ngIf"],[3,"color","click"],["slot","end"],["slot","end","name","filter-outline"],[1,"containt"],["class","ion-text-center",4,"ngIf"],[1,"grid-product"],["size","6","size-sm","4",3,"routerLink",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],[1,"spiner-loading"],["name","dots"],[1,"ion-text-center"],["size","6","size-sm","4",3,"routerLink"],["class","discount-label",4,"ngIf"],[1,"img-box"],["onError","this.src='assets/img/1235.jpg'",1,"m-auto",3,"src"],["class","bannerProduct",3,"src",4,"ngIf"],[1,"product-alias"],["class","product-rate",4,"ngIf"],["class","promotion-box",4,"ngIf"],["class","price-box",4,"ngIf"],[1,"discount-label"],[1,"bannerProduct",3,"src"],[1,"product-rate"],[3,"name","color",4,"ngFor","ngForOf"],[3,"name","color"],[1,"promotion-box"],[1,"strike"],[1,"price-box"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","dots"]],template:function(t,n){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u._UZ(3,"ion-back-button",1),u.qZA(),u.TgZ(4,"ion-title"),u._uU(5),u.qZA(),u.qZA(),u.qZA(),u.TgZ(6,"ion-content"),u.YNc(7,x,2,0,"div",2),u.TgZ(8,"ion-toolbar"),u.TgZ(9,"ion-buttons",0),u.TgZ(10,"ion-button",3),u.NdJ("click",function(){return n.changeSort("DESC")}),u._uU(11),u.ALo(12,"translate"),u.qZA(),u.TgZ(13,"ion-button",3),u.NdJ("click",function(){return n.changeSort("ASC")}),u._uU(14),u.ALo(15,"translate"),u.qZA(),u.qZA(),u.TgZ(16,"ion-buttons",4),u.TgZ(17,"ion-button",3),u.NdJ("click",function(){return n.presentFiler()}),u._uU(18),u.ALo(19,"translate"),u._UZ(20,"ion-icon",5),u.qZA(),u.qZA(),u.qZA(),u.TgZ(21,"div",6),u.YNc(22,P,3,3,"p",7),u.TgZ(23,"ion-grid",8),u.TgZ(24,"ion-row"),u.YNc(25,A,11,9,"ion-col",9),u.qZA(),u.qZA(),u.qZA(),u.YNc(26,T,2,0,"ion-infinite-scroll",10),u.qZA()),2&t&&(u.xp6(5),u.Oqu(null==n.infor?null:n.infor.name),u.xp6(2),u.Q6J("ngIf",n.loadingFlag.pending),u.xp6(3),u.Q6J("color","DESC"==n.paramFilter.sort?"primary":""),u.xp6(1),u.Oqu(u.lcZ(12,11,"SHOP.HIGH_PRICE")),u.xp6(2),u.Q6J("color","ASC"==n.paramFilter.sort?"primary":""),u.xp6(1),u.Oqu(u.lcZ(15,13,"SHOP.LOW_PRICE")),u.xp6(3),u.Q6J("color",n.paramFilter.terms.length>0?"success":""),u.xp6(1),u.hij("",u.lcZ(19,15,"SHOP.FILTER_ACTION")," "),u.xp6(4),u.Q6J("ngIf",0==n.list.length),u.xp6(3),u.Q6J("ngForOf",n.list),u.xp6(1),u.Q6J("ngIf",n.list.length<n.numRows))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.wd,a.W2,r.O5,a.YG,a.gu,a.jY,a.Nd,r.sg,a.PQ,a.wI,a.YI,s.rH,a.ju,a.MB],pipes:[f.X$,r.JJ],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}",'[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}[_nghost-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:"Averta";font-size:.8em}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;margin-top:29px;margin-bottom:6px;font-family:"Averta";font-size:.8em;display:flex;margin-right:16px}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]   .boxTime[_ngcontent-%COMP%]{color:#fff;background-color:#000;padding-left:2px;padding-right:2px;margin-right:2px;margin-left:2px;border-radius:2px;max-width:27px;width:27px;text-align:center}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]{min-height:150px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .bannerSpecial[_ngcontent-%COMP%]{max-height:50px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .imgProductSpecial[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .arrowButton[_ngcontent-%COMP%]{vertical-align:middle;margin-right:16px}[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:1em;font-size:.8em}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:240px;width:100%}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border-top:1px solid rgba(192,192,192,.2);border-left:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border-right:1px solid rgba(192,192,192,.2);border-bottom:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]{flex:auto;text-align:center;margin:0 auto;overflow:hidden;position:relative}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:80x!important;margin-bottom:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   .bannerProduct[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;max-height:60px;max-width:80%;width:auto}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .product-alias[_ngcontent-%COMP%]{line-height:1.2em;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;height:2.4em;-webkit-box-orient:vertical}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]{margin:3px 0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .mr[_ngcontent-%COMP%]{margin-left:3px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .strike[_ngcontent-%COMP%]{text-decoration:line-through}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]{margin:3px 0;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;height:1.3em;-webkit-box-orient:vertical;color:var(--ion-color-danger)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]{padding:5px;position:absolute;right:5px;top:10px;float:left;width:43px;background-color:#de2525;z-index:9999;transform:rotate(20deg);border-radius:4px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:after{right:42px;border:solid transparent;content:" ";height:0;width:0;position:absolute;border-color:#88b7d500;border-right-color:#de2525;border-width:13.5px;top:50%;margin-top:-13.6px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:before{content:"";z-index:2;position:absolute;top:44%;right:100%;width:5px;height:5px;opacity:.95;background:#fff;border-radius:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center;font-family:"Averta"}']}),S)}],F=function(){var n=function n(){t(this,n)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[s.Bz.forChild(k)],s.Bz]}),n}(),I=function(){var n=function n(){t(this,n)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[r.ez,c.u5,a.Pc,F,f.aw.forChild()]]}),n}()}}])}();