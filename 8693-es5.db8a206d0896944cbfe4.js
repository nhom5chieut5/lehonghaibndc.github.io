!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[8693],{97905:function(t,e,n){n.d(e,{K:function(){return a}});var i=n(64762),o=n(38739),r=n(37716),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.FileTransferErrorCode={FILE_NOT_FOUND_ERR:1,INVALID_URL_ERR:2,CONNECTION_ERR:3,ABORT_ERR:4,NOT_MODIFIED_ERR:5},e}return(0,i.ZT)(e,t),e.prototype.create=function(){return new s},e.pluginName="FileTransfer",e.plugin="cordova-plugin-file-transfer",e.pluginRef="FileTransfer",e.repo="https://github.com/apache/cordova-plugin-file-transfer",e.platforms=["Amazon Fire OS","Android","Browser","iOS","Ubuntu","Windows","Windows Phone"],e.\u0275fac=function(t){return(n||(n=r.n5z(e)))(t||e)},e.\u0275prov=r.Yz7({token:e,factory:function(t){return e.\u0275fac(t)}}),e;var n}(o.KY),s=function(){function t(){!0===(0,o.gR)(a.getPluginRef(),null,a.getPluginName())&&(this._objectInstance=new(a.getPlugin()))}return t.prototype.upload=function(t,e,n,i){return(0,o.e4)(this,"upload",{successIndex:2,errorIndex:3},arguments)},t.prototype.download=function(t,e,n,i){return(0,o.e4)(this,"download",{successIndex:2,errorIndex:3},arguments)},t.prototype.onProgress=function(t){!0===(0,o.G5)(this)&&(this._objectInstance.onprogress=t)},t.prototype.abort=function(){return(0,o.e4)(this,"abort",{sync:!0},arguments)},t.plugin="cordova-plugin-file-transfer",t.pluginName="FileTransfer",t}()},28693:function(e,i,o){o.r(i),o.d(i,{AccountPageModule:function(){return B}});var r=o(38583),a=o(90665),s=o(13619),u=o(47063),l=o(64762),c=o(50384),p=o(10740),d=o(27887),m=o(16738),Z=o(37716),g=o(84465),A=o(81780);function f(t,e){1&t&&(Z.TgZ(0,"div",16),Z._UZ(1,"ion-spinner",18),Z.qZA())}var h,T=((h=function(){function e(n,i,o,r,a){t(this,e),this.toastService=n,this.formBuilder=i,this.accountService=o,this.modalController=r,this.translate=a,this.loadingFlag=new d.E,this.maxDate=m().subtract(14,"years").format("YYYY-MM-DD"),this.minDate=m().subtract(114,"years").format("YYYY-MM-DD")}return n(e,[{key:"ngOnInit",value:function(){this.createForm(),console.log(this.item)}},{key:"createForm",value:function(){this.form=this.formBuilder.group({first_name:[this.item.first_name,a.kI.required],last_name:[this.item.last_name,a.kI.required],birthday:[this.item.birthday,a.kI.required],telephone:[this.item.telephone,[a.kI.required,a.kI.pattern("^([+][1-9][0-9]*(([0-9]*)|-[0-9]*-))?[0]?[1-9][0-9- ]*$")]],address:[this.item.address],gender:[this.item.gender]})}},{key:"updateAccount",value:function(t){var e=this;return console.log(t),t.birthday=m(t.birthday).format("YYYY-MM-DD"),this.loadingFlag.setPending(!0),this.accountService.updateAccount(t).subscribe(function(n){n.error||1!=n.status?e.toastService.danger(e.translate.instant("ACCOUNT_MOD.ERROR")+": "+n.error):(e.toastService.success(e.translate.instant("ACCOUNT_MOD.NOTI_UPDATE")),e.modalController.dismiss(t)),e.loadingFlag.setResult(!0)},function(t){e.loadingFlag.setResult(!1),e.toastService.danger(e.translate.instant("ERROR_CONNECT"))})}}]),e}()).\u0275fac=function(t){return new(t||h)(Z.Y36(g.k),Z.Y36(a.qu),Z.Y36(p.B),Z.Y36(u.IN),Z.Y36(A.sK))},h.\u0275cmp=Z.Xpm({type:h,selectors:[["app-account-update"]],inputs:{item:"item"},decls:55,vars:39,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[3,"formGroup"],[1,"ion-padding","ion-text-center"],["lines","inset"],["position","floating"],["formControlName","first_name","type","text"],["formControlName","last_name","type","text"],["formControlName","birthday",3,"displayFormat","min","max"],["placeholder","Ch\u1ecdn","formControlName","gender"],["value","f"],["value","m"],["formControlName","telephone","type","tel","inputmode","tel"],["formControlName","address"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"],["shape","round",3,"disabled","click"],["name","dots"]],template:function(t,e){1&t&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z.TgZ(3,"ion-button",1),Z.NdJ("click",function(){return e.modalController.dismiss()}),Z._UZ(4,"ion-icon",2),Z.qZA(),Z.qZA(),Z.TgZ(5,"ion-title"),Z._uU(6),Z.ALo(7,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(8,"ion-content",3),Z.TgZ(9,"div",4),Z.TgZ(10,"h1"),Z._uU(11),Z.qZA(),Z.qZA(),Z.TgZ(12,"ion-list"),Z.TgZ(13,"ion-item",5),Z.TgZ(14,"ion-label",6),Z._uU(15),Z.ALo(16,"translate"),Z.qZA(),Z._UZ(17,"ion-input",7),Z.qZA(),Z.TgZ(18,"ion-item",5),Z.TgZ(19,"ion-label",6),Z._uU(20),Z.ALo(21,"translate"),Z.qZA(),Z._UZ(22,"ion-input",8),Z.qZA(),Z.TgZ(23,"ion-item",5),Z.TgZ(24,"ion-label",6),Z._uU(25),Z.ALo(26,"translate"),Z.qZA(),Z._UZ(27,"ion-datetime",9),Z.ALo(28,"translate"),Z.qZA(),Z.TgZ(29,"ion-item",5),Z.TgZ(30,"ion-label"),Z._uU(31),Z.ALo(32,"translate"),Z.qZA(),Z.TgZ(33,"ion-select",10),Z.TgZ(34,"ion-select-option",11),Z._uU(35),Z.ALo(36,"translate"),Z.qZA(),Z.TgZ(37,"ion-select-option",12),Z._uU(38),Z.ALo(39,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(40,"ion-item",5),Z.TgZ(41,"ion-label",6),Z._uU(42),Z.ALo(43,"translate"),Z.qZA(),Z._UZ(44,"ion-input",13),Z.qZA(),Z.TgZ(45,"ion-item",5),Z.TgZ(46,"ion-label",6),Z._uU(47),Z.ALo(48,"translate"),Z.qZA(),Z._UZ(49,"ion-input",14),Z.qZA(),Z.qZA(),Z.YNc(50,f,2,0,"div",15),Z.TgZ(51,"div",16),Z.TgZ(52,"ion-button",17),Z.NdJ("click",function(){return e.updateAccount(e.form.value)}),Z._uU(53),Z.ALo(54,"translate"),Z.qZA(),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(6),Z.Oqu(Z.lcZ(7,17,"ACCOUNT_MOD.UPDATE_TITLE")),Z.xp6(2),Z.Q6J("formGroup",e.form),Z.xp6(3),Z.Oqu(e.item.username),Z.xp6(4),Z.Oqu(Z.lcZ(16,19,"ACCOUNT_MOD.LAST_NAME")),Z.xp6(5),Z.Oqu(Z.lcZ(21,21,"ACCOUNT_MOD.FIRST_NAME")),Z.xp6(5),Z.Oqu(Z.lcZ(26,23,"ACCOUNT_MOD.DATE")),Z.xp6(2),Z.Q6J("displayFormat",Z.lcZ(28,25,"FORMAT_DATE_MOMENT"))("min",e.minDate)("max",e.maxDate),Z.xp6(4),Z.Oqu(Z.lcZ(32,27,"ACCOUNT_MOD.SEX")),Z.xp6(4),Z.Oqu(Z.lcZ(36,29,"ACCOUNT_MOD.FEMALE")),Z.xp6(3),Z.Oqu(Z.lcZ(39,31,"ACCOUNT_MOD.MALE")),Z.xp6(4),Z.Oqu(Z.lcZ(43,33,"ACCOUNT_MOD.PHONE")),Z.xp6(5),Z.Oqu(Z.lcZ(48,35,"ACCOUNT_MOD.ADDRESS")),Z.xp6(3),Z.Q6J("ngIf",e.loadingFlag.pending),Z.xp6(2),Z.Q6J("disabled",e.loadingFlag.pending||e.form.invalid),Z.xp6(1),Z.hij(" ",Z.lcZ(54,37,"ACCOUNT_MOD.SAVE"),""))},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.wd,u.W2,a.JL,a.sg,u.q_,u.Ie,u.Q$,u.pK,u.j9,a.JJ,a.u,u.x4,u.QI,u.t9,u.n0,r.O5,u.PQ],pipes:[A.X$],styles:[""]}),h);function _(t,e){1&t&&(Z.TgZ(0,"div",18),Z._UZ(1,"ion-spinner",19),Z.qZA())}var O=function(){var e=function(){function e(n,i,o,r,a){t(this,e),this.modalCtrl=n,this.formBuilder=i,this.toastService=o,this.accountService=r,this.translate=a,this.loadingFlag=new d.E,this.expert={firstname:"",lastname:"",education:"",phone:"",major:"",working:"",max_pond:1,note:""},this.hasRegisterExpert=0}return n(e,[{key:"ngOnInit",value:function(){this.getInfoExpert(),this.createForm()}},{key:"createForm",value:function(){this.form=this.formBuilder.group({firstname:[this.item.first_name,a.kI.required],lastname:[this.item.last_name,a.kI.required],education:[this.expert.education,a.kI.required],phone:[this.expert.phone,[a.kI.required,a.kI.pattern("^([+][1-9][0-9]*(([0-9]*)|-[0-9]*-))?[0]?[1-9][0-9- ]*$"),a.kI.minLength(9),a.kI.maxLength(15)]],major:[this.expert.major,a.kI.required],working:[this.expert.working,a.kI.required],max_pond:[this.expert.max_pond,a.kI.required],note:[this.expert.note]})}},{key:"getInfoExpert",value:function(){var t=this;this.accountService.getUserInformation().subscribe(function(e){if(e.status){var n=void 0!==e.data.info&&""!=e.data.info?JSON.parse(e.data.info):{},i=e.data.expert||{};for(var o in n)t.expert[o]=void 0!==n[o]?n[o]:"";t.expert.phone=void 0!==e.data.telephone?e.data.telephone:"",t.expert.firstname=void 0!==e.data.first_name?e.data.first_name:"",t.expert.lastname=void 0!==e.data.last_name?e.data.last_name:"",t.expert.max_pond=void 0!==i.max_pond?parseInt(i.max_pond):"",t.form.patchValue(t.expert),void 0!==i.active&&(t.hasRegisterExpert=1)}})}},{key:"onSubmit",value:function(){var t=this,e={};if(this.loadingFlag.setPending(!0),this.form.valid){for(var n in this.expert)e[n]=this.form.value[n];this.accountService.actionExpert("register",e).subscribe(function(n){t.loadingFlag.setResult(!0),n.status?(t.toastService.success(n.message?n.message:t.translate.instant("ACCOUNT_MOD.SENT_REQUEST")),t.modalCtrl.dismiss(e)):t.toastService.warning(n.message)},function(e){t.loadingFlag.setResult(!1)})}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.Y36(u.IN),Z.Y36(a.qu),Z.Y36(g.k),Z.Y36(p.B),Z.Y36(A.sK))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-expert-register"]],inputs:{item:"item"},decls:62,vars:37,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[3,"formGroup"],[1,"ion-padding","ion-text-center"],["lines","inset"],["position","floating"],["formControlName","firstname","type","text"],["formControlName","lastname","type","text"],["formControlName","phone","type","tel","inputmode","tel"],["formControlName","education","type","text"],["formControlName","major","type","text"],["formControlName","working","type","text"],["formControlName","max_pond","type","numer","inputmode","numeric","min","0","max","20"],["formControlName","note","type","text"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center","ion-padding"],["shape","round",3,"disabled","click"],[1,"ion-text-center"],["name","dots"]],template:function(t,e){1&t&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z.TgZ(3,"ion-button",1),Z.NdJ("click",function(){return e.modalCtrl.dismiss()}),Z._UZ(4,"ion-icon",2),Z.qZA(),Z.qZA(),Z.TgZ(5,"ion-title"),Z._uU(6),Z.ALo(7,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(8,"ion-content",3),Z.TgZ(9,"div",4),Z.TgZ(10,"h1"),Z._uU(11),Z.qZA(),Z.TgZ(12,"p"),Z._uU(13),Z.ALo(14,"translate"),Z.qZA(),Z.qZA(),Z.TgZ(15,"ion-list"),Z.TgZ(16,"ion-item",5),Z.TgZ(17,"ion-label",6),Z._uU(18),Z.ALo(19,"translate"),Z.qZA(),Z._UZ(20,"ion-input",7),Z.qZA(),Z.TgZ(21,"ion-item",5),Z.TgZ(22,"ion-label",6),Z._uU(23),Z.ALo(24,"translate"),Z.qZA(),Z._UZ(25,"ion-input",8),Z.qZA(),Z.TgZ(26,"ion-item",5),Z.TgZ(27,"ion-label",6),Z._uU(28),Z.ALo(29,"translate"),Z.qZA(),Z._UZ(30,"ion-input",9),Z.qZA(),Z.qZA(),Z.TgZ(31,"ion-list"),Z.TgZ(32,"ion-item",5),Z.TgZ(33,"ion-label",6),Z._uU(34),Z.ALo(35,"translate"),Z.qZA(),Z._UZ(36,"ion-input",10),Z.qZA(),Z.TgZ(37,"ion-item",5),Z.TgZ(38,"ion-label",6),Z._uU(39),Z.ALo(40,"translate"),Z.qZA(),Z._UZ(41,"ion-input",11),Z.qZA(),Z.TgZ(42,"ion-item",5),Z.TgZ(43,"ion-label",6),Z._uU(44),Z.ALo(45,"translate"),Z.qZA(),Z._UZ(46,"ion-input",12),Z.qZA(),Z.TgZ(47,"ion-item",5),Z.TgZ(48,"ion-label",6),Z._uU(49),Z.ALo(50,"translate"),Z.qZA(),Z._UZ(51,"ion-input",13),Z.qZA(),Z.TgZ(52,"ion-item",5),Z.TgZ(53,"ion-label",6),Z._uU(54),Z.ALo(55,"translate"),Z.qZA(),Z._UZ(56,"ion-input",14),Z.qZA(),Z.qZA(),Z.YNc(57,_,2,0,"div",15),Z.TgZ(58,"div",16),Z.TgZ(59,"ion-button",17),Z.NdJ("click",function(){return e.onSubmit()}),Z._uU(60),Z.ALo(61,"translate"),Z.qZA(),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(6),Z.Oqu(Z.lcZ(7,15,"ACCOUNT_MOD.EXPERT")),Z.xp6(2),Z.Q6J("formGroup",e.form),Z.xp6(3),Z.Oqu(e.item.username),Z.xp6(2),Z.Oqu(Z.lcZ(14,17,"ACCOUNT_MOD.FARMEXT_CONFIRM")),Z.xp6(5),Z.Oqu(Z.lcZ(19,19,"ACCOUNT_MOD.LAST_NAME")),Z.xp6(5),Z.Oqu(Z.lcZ(24,21,"ACCOUNT_MOD.FIRST_NAME")),Z.xp6(5),Z.Oqu(Z.lcZ(29,23,"ACCOUNT_MOD.PHONE")),Z.xp6(6),Z.Oqu(Z.lcZ(35,25,"ACCOUNT_MOD.LEVEL")),Z.xp6(5),Z.Oqu(Z.lcZ(40,27,"ACCOUNT_MOD.EXPERTISE")),Z.xp6(5),Z.Oqu(Z.lcZ(45,29,"ACCOUNT_MOD.ORGAN")),Z.xp6(5),Z.Oqu(Z.lcZ(50,31,"ACCOUNT_MOD.MAX_POND")),Z.xp6(5),Z.Oqu(Z.lcZ(55,33,"ACCOUNT_MOD.NOTE")),Z.xp6(3),Z.Q6J("ngIf",e.loadingFlag.pending),Z.xp6(2),Z.Q6J("disabled",e.form.invalid||e.loadingFlag.pending),Z.xp6(1),Z.Oqu(Z.lcZ(61,35,"ACCOUNT_MOD.SEND")))},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.wd,u.W2,a.JL,a.sg,u.q_,u.Ie,u.Q$,u.pK,u.j9,a.JJ,a.u,r.O5,u.PQ],pipes:[A.X$],styles:[""]}),e}();function q(t,e){1&t&&(Z.TgZ(0,"div",13),Z._UZ(1,"ion-spinner",15),Z.qZA())}var x=function(){var e=function(){function e(n,i,o,r,a){t(this,e),this.modalController=n,this.formBuilder=i,this.toastService=o,this.accountService=r,this.translate=a,this.loadingFlag=new d.E}return n(e,[{key:"ngOnInit",value:function(){console.log(this.item),this.createForm()}},{key:"createForm",value:function(){this.form=this.formBuilder.group({education:[void 0!==this.expert.education?this.expert.education:"",a.kI.required],major:[void 0!==this.expert.major?this.expert.major:"",a.kI.required],working:[void 0!==this.expert.working?this.expert.working:"",a.kI.required],max_pond:[void 0!==this.expert.max_pond?this.expert.max_pond:"",a.kI.required],note:[void 0!==this.expert.note?this.expert.note:""]})}},{key:"onSubmit",value:function(){var t=this,e={};if(this.loadingFlag.setPending(!0),this.form.valid){for(var n in this.expert)e[n]=this.form.value[n];e.phone=this.item.telephone,e.firstname=this.item.first_name,e.lastname=this.item.last_name,this.accountService.actionExpert("edit",e).subscribe(function(n){t.loadingFlag.setResult(!0),n.status?(t.toastService.success(n.message?n.message:t.translate.instant("ACCOUNT_MOD.UPDATED")),t.modalController.dismiss(e)):t.toastService.warning(n.message)},function(e){t.loadingFlag.setResult(!1)})}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.Y36(u.IN),Z.Y36(a.qu),Z.Y36(g.k),Z.Y36(p.B),Z.Y36(A.sK))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-expert-update"]],inputs:{expert:"expert",item:"item"},decls:46,vars:28,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[3,"formGroup"],[1,"ion-padding","ion-text-center"],["lines","inset"],["position","floating"],["formControlName","education","type","text"],["formControlName","major","type","text"],["formControlName","working","type","text"],["formControlName","max_pond","type","numer","inputmode","numeric","min","0","max","20"],["formControlName","note","type","text"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center"],["shape","round",3,"disabled","click"],["name","dots"]],template:function(t,e){1&t&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z.TgZ(3,"ion-button",1),Z.NdJ("click",function(){return e.modalController.dismiss()}),Z._UZ(4,"ion-icon",2),Z.qZA(),Z.qZA(),Z.TgZ(5,"ion-title"),Z._uU(6),Z.ALo(7,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(8,"ion-content",3),Z.TgZ(9,"div",4),Z.TgZ(10,"h1"),Z._uU(11),Z.qZA(),Z.TgZ(12,"p"),Z._uU(13),Z.ALo(14,"translate"),Z.qZA(),Z.qZA(),Z.TgZ(15,"ion-list"),Z.TgZ(16,"ion-item",5),Z.TgZ(17,"ion-label",6),Z._uU(18),Z.ALo(19,"translate"),Z.qZA(),Z._UZ(20,"ion-input",7),Z.qZA(),Z.TgZ(21,"ion-item",5),Z.TgZ(22,"ion-label",6),Z._uU(23),Z.ALo(24,"translate"),Z.qZA(),Z._UZ(25,"ion-input",8),Z.qZA(),Z.TgZ(26,"ion-item",5),Z.TgZ(27,"ion-label",6),Z._uU(28),Z.ALo(29,"translate"),Z.qZA(),Z._UZ(30,"ion-input",9),Z.qZA(),Z.TgZ(31,"ion-item",5),Z.TgZ(32,"ion-label",6),Z._uU(33),Z.ALo(34,"translate"),Z.qZA(),Z._UZ(35,"ion-input",10),Z.qZA(),Z.TgZ(36,"ion-item",5),Z.TgZ(37,"ion-label",6),Z._uU(38),Z.ALo(39,"translate"),Z.qZA(),Z._UZ(40,"ion-input",11),Z.qZA(),Z.qZA(),Z.YNc(41,q,2,0,"div",12),Z.TgZ(42,"div",13),Z.TgZ(43,"ion-button",14),Z.NdJ("click",function(){return e.onSubmit()}),Z._uU(44),Z.ALo(45,"translate"),Z.qZA(),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(6),Z.Oqu(Z.lcZ(7,12,"ACCOUNT_MOD.EXPERT")),Z.xp6(2),Z.Q6J("formGroup",e.form),Z.xp6(3),Z.Oqu(e.item.username),Z.xp6(2),Z.Oqu(Z.lcZ(14,14,"ACCOUNT_MOD.UPDATE")),Z.xp6(5),Z.Oqu(Z.lcZ(19,16,"ACCOUNT_MOD.LEVEL")),Z.xp6(5),Z.Oqu(Z.lcZ(24,18,"ACCOUNT_MOD.EXPERTISE")),Z.xp6(5),Z.Oqu(Z.lcZ(29,20,"ACCOUNT_MOD.ORGAN")),Z.xp6(5),Z.Oqu(Z.lcZ(34,22,"ACCOUNT_MOD.MAX_POND")),Z.xp6(5),Z.Oqu(Z.lcZ(39,24,"ACCOUNT_MOD.NOTE")),Z.xp6(3),Z.Q6J("ngIf",e.loadingFlag.pending),Z.xp6(2),Z.Q6J("disabled",e.loadingFlag.pending||e.form.invalid),Z.xp6(1),Z.Oqu(Z.lcZ(45,26,"ACCOUNT_MOD.SAVE")))},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.wd,u.W2,a.JL,a.sg,u.q_,u.Ie,u.Q$,u.pK,u.j9,a.JJ,a.u,r.O5,u.PQ],pipes:[A.X$],styles:[""]}),e}(),v=o(84267),U=o(59865),C=o(97905);function I(t,e){1&t&&(Z.TgZ(0,"ion-item",8),Z.TgZ(1,"ion-label",9),Z._uU(2),Z.ALo(3,"translate"),Z.qZA(),Z._UZ(4,"ion-input",16),Z.qZA()),2&t&&(Z.xp6(2),Z.Oqu(Z.lcZ(3,1,"ACCOUNT_MOD.CURRENT_PASSWORD")))}function N(t,e){1&t&&(Z.TgZ(0,"div",12),Z._UZ(1,"ion-spinner",17),Z.qZA())}var b=function(){var e=function(){function e(n,i,o,r,a,s){t(this,e),this.modalController=n,this.formBuilder=i,this.toastService=o,this.accountService=r,this.translate=a,this.authService=s,this.loadingFlag=new d.E,this.message=""}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.createForm(),this.form.valueChanges.subscribe(function(e){console.log(e),t.message="",""==e.new_pw||e.new_pw!=e.current_pw?""==e.re_pw||e.new_pw==e.re_pw||(t.message=t.translate.instant("ACCOUNT_MOD.PASSWORD_NOT_MATCH")):t.message=t.translate.instant("ACCOUNT_MOD.NEW_PASSWORD_SAME_CURRENT_PASSWORD")})}},{key:"createForm",value:function(){this.form=this.formBuilder.group({current_pw:["",[a.kI.minLength(6),a.kI.maxLength(30)]],new_pw:["",[a.kI.required,a.kI.minLength(7),a.kI.maxLength(30)]],re_pw:["",[a.kI.required,a.kI.minLength(7),a.kI.maxLength(30)]]})}},{key:"onSubmit",value:function(){var t=this;console.log(this.form.value),this.accountService.resetPassword({password:this.form.value.current_pw,npassword:this.form.value.new_pw}).subscribe(function(e){e.error||1!=e.status?t.message=t.translate.instant("ACCOUNT_MOD.ERROR")+": "+e.error:(t.toastService.success(t.translate.instant("ACCOUNT_MOD.NOTI_UPDATE")),t.modalController.dismiss(),t.authService.isLoggedIn.next(!0)),t.loadingFlag.setResult(!0)},function(e){t.loadingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.Y36(u.IN),Z.Y36(a.qu),Z.Y36(g.k),Z.Y36(p.B),Z.Y36(A.sK),Z.Y36(c.e))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-account-password"]],inputs:{item:"item"},decls:38,vars:21,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[3,"formGroup"],[1,"ion-padding","ion-text-center"],["color","danger"],[1,"ion-padding"],["lines","inset",4,"ngIf"],["lines","inset"],["position","floating"],["formControlName","new_pw","type","password"],["formControlName","re_pw","type","password"],[1,"ion-text-center"],["class","ion-text-center",4,"ngIf"],[1,"ion-text-center","ion-padding"],["shape","round",3,"disabled","click"],["formControlName","current_pw","type","password"],["name","dots"]],template:function(t,e){1&t&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z.TgZ(3,"ion-button",1),Z.NdJ("click",function(){return e.modalController.dismiss()}),Z._UZ(4,"ion-icon",2),Z.qZA(),Z.qZA(),Z.TgZ(5,"ion-title"),Z._uU(6),Z.ALo(7,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(8,"ion-content",3),Z.TgZ(9,"div",4),Z.TgZ(10,"p"),Z._uU(11),Z.ALo(12,"translate"),Z.qZA(),Z.TgZ(13,"h1"),Z._uU(14),Z.qZA(),Z.TgZ(15,"ion-text",5),Z.TgZ(16,"p"),Z._uU(17),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(18,"ion-list",6),Z.YNc(19,I,5,3,"ion-item",7),Z.TgZ(20,"ion-item",8),Z.TgZ(21,"ion-label",9),Z._uU(22),Z.ALo(23,"translate"),Z.qZA(),Z._UZ(24,"ion-input",10),Z.qZA(),Z.TgZ(25,"ion-item",8),Z.TgZ(26,"ion-label",9),Z._uU(27),Z.ALo(28,"translate"),Z.qZA(),Z._UZ(29,"ion-input",11),Z.qZA(),Z.qZA(),Z.TgZ(30,"p",12),Z.TgZ(31,"i"),Z._uU(32,"M\u1eadt kh\u1ea9u y\xeau c\u1ea7u nhi\u1ec1u h\u01a1n 7 k\xfd t\u1ef1"),Z.qZA(),Z.qZA(),Z.YNc(33,N,2,0,"div",13),Z.TgZ(34,"div",14),Z.TgZ(35,"ion-button",15),Z.NdJ("click",function(){return e.onSubmit()}),Z._uU(36),Z.ALo(37,"translate"),Z.qZA(),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(6),Z.Oqu(Z.lcZ(7,11,"ACCOUNT_MOD.CHANGE_PASSWORD")),Z.xp6(2),Z.Q6J("formGroup",e.form),Z.xp6(3),Z.Oqu(Z.lcZ(12,13,"ACCOUNT")),Z.xp6(3),Z.Oqu(e.item.username),Z.xp6(3),Z.Oqu(e.message),Z.xp6(2),Z.Q6J("ngIf",e.item.first_setting&&1==e.item.first_setting),Z.xp6(3),Z.Oqu(Z.lcZ(23,15,"ACCOUNT_MOD.NEW_PASSWORD")),Z.xp6(5),Z.Oqu(Z.lcZ(28,17,"ACCOUNT_MOD.RETYPE_PASSWORD")),Z.xp6(6),Z.Q6J("ngIf",e.loadingFlag.pending),Z.xp6(2),Z.Q6J("disabled",e.loadingFlag.pending||e.form.invalid||""!=e.message),Z.xp6(1),Z.Oqu(Z.lcZ(37,19,"ACCOUNT_MOD.SAVE")))},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.wd,u.W2,a.JL,a.sg,u.yW,u.q_,r.O5,u.Ie,u.Q$,u.pK,u.j9,a.JJ,a.u,u.PQ],pipes:[A.X$],styles:[""]}),e}(),k=o(31781),E=o(1209),R=o(71239),y=function(){var e=function(){function e(){t(this,e)}return n(e,[{key:"transform",value:function(t){var e=(""+t).replace(/\D/g,"").match(/^(1|)?(\d{3})(\d{3})(\d{3})$/);return e?[e[1]?"+1 ":"","(",e[2],") ",e[3]," ",e[4]].join(""):null}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=Z.Yjl({name:"phoneNumberPipe",type:e,pure:!0}),e.\u0275prov=Z.Yz7({token:e,factory:e.\u0275fac}),e}();function D(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"ion-button",8),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw().uploadAvatar()}),Z._uU(1),Z.ALo(2,"translate"),Z.qZA()}2&t&&(Z.xp6(1),Z.hij(" ",Z.lcZ(2,1,"ACCOUNT_MOD.CHANGE_AVATAR"),""))}function L(t,e){1&t&&Z._UZ(0,"ion-spinner",9)}function M(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"ion-card",10),Z.TgZ(1,"ion-list"),Z.TgZ(2,"ion-item"),Z.TgZ(3,"ion-label"),Z.TgZ(4,"p"),Z._uU(5),Z.ALo(6,"translate"),Z.qZA(),Z.qZA(),Z.TgZ(7,"span",11),Z._uU(8),Z.qZA(),Z.qZA(),Z.TgZ(9,"ion-item"),Z.TgZ(10,"ion-label"),Z.TgZ(11,"p"),Z._uU(12),Z.ALo(13,"translate"),Z.qZA(),Z.qZA(),Z.TgZ(14,"span"),Z._uU(15),Z.qZA(),Z.qZA(),Z.TgZ(16,"ion-item"),Z.TgZ(17,"ion-label"),Z.TgZ(18,"p"),Z._uU(19,"Email"),Z.qZA(),Z.qZA(),Z.TgZ(20,"span",11),Z._uU(21),Z.qZA(),Z.qZA(),Z.TgZ(22,"ion-item"),Z.TgZ(23,"ion-label"),Z.TgZ(24,"p"),Z._uU(25),Z.ALo(26,"translate"),Z.qZA(),Z.qZA(),Z.TgZ(27,"span",11),Z._uU(28),Z.ALo(29,"phoneNumberPipe"),Z.qZA(),Z.qZA(),Z.TgZ(30,"ion-item",12),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw().presentEdit()}),Z.TgZ(31,"ion-label"),Z.TgZ(32,"p"),Z._uU(33),Z.ALo(34,"translate"),Z.qZA(),Z.qZA(),Z._UZ(35,"ion-icon",13),Z.qZA(),Z.TgZ(36,"ion-item",12),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw().presentChangePassword()}),Z.TgZ(37,"ion-label"),Z.TgZ(38,"p"),Z._uU(39),Z.ALo(40,"translate"),Z.qZA(),Z.qZA(),Z._UZ(41,"ion-icon",13),Z.qZA(),Z.TgZ(42,"ion-item",14),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw().presentLogout()}),Z.TgZ(43,"ion-label"),Z.TgZ(44,"p"),Z._uU(45),Z.ALo(46,"translate"),Z.qZA(),Z.qZA(),Z._UZ(47,"ion-icon",15),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){var i=Z.oxw();Z.xp6(5),Z.Oqu(Z.lcZ(6,11,"ACCOUNT_MOD.USERNAME")),Z.xp6(3),Z.Oqu(i.myUserInformation.username),Z.xp6(4),Z.Oqu(Z.lcZ(13,13,"ACCOUNT_MOD.FULL_NAME")),Z.xp6(3),Z.AsE("",i.myUserInformation.first_name," ",i.myUserInformation.last_name,""),Z.xp6(6),Z.Oqu(i.myUserInformation.email),Z.xp6(4),Z.Oqu(Z.lcZ(26,15,"ACCOUNT_MOD.PHONE")),Z.xp6(3),Z.Oqu(Z.lcZ(29,17,i.myUserInformation.telephone)),Z.xp6(5),Z.Oqu(Z.lcZ(34,19,"ACCOUNT_MOD.UPDATE")),Z.xp6(6),Z.Oqu(Z.lcZ(40,21,"ACCOUNT_MOD.UPDATE_PASSWORD")),Z.xp6(6),Z.Oqu(Z.lcZ(46,23,"ACCOUNT_MOD.EXIT"))}}function S(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"ion-card",10),Z.TgZ(1,"ion-card-content",16),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw().presentLabRegister()}),Z.TgZ(2,"ion-button",17),Z._uU(3),Z.ALo(4,"translate"),Z.qZA(),Z.qZA(),Z.qZA()}2&t&&(Z.xp6(3),Z.Oqu(Z.lcZ(4,1,"LAB_MOD.REGISTER_LAB")))}function w(t,e){if(1&t&&(Z.TgZ(0,"ion-card",18),Z.TgZ(1,"ion-card-header"),Z.TgZ(2,"ion-card-title",19),Z._uU(3),Z.ALo(4,"translate"),Z._UZ(5,"ion-icon",20),Z.qZA(),Z.qZA(),Z.TgZ(6,"ion-list"),Z.TgZ(7,"ion-item"),Z.TgZ(8,"ion-label"),Z.TgZ(9,"p"),Z._uU(10),Z.ALo(11,"translate"),Z.qZA(),Z.TgZ(12,"h3"),Z._uU(13),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(14,"ion-item"),Z.TgZ(15,"ion-label"),Z.TgZ(16,"p"),Z._uU(17),Z.ALo(18,"translate"),Z.qZA(),Z.TgZ(19,"h3"),Z._uU(20),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(21,"ion-item"),Z.TgZ(22,"ion-label"),Z.TgZ(23,"p"),Z._uU(24),Z.ALo(25,"translate"),Z.qZA(),Z.TgZ(26,"h3"),Z._uU(27),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(28,"ion-item"),Z.TgZ(29,"ion-label"),Z.TgZ(30,"p"),Z._uU(31),Z.ALo(32,"translate"),Z.qZA(),Z.TgZ(33,"h3"),Z._uU(34),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&t){var n=Z.oxw();Z.Q6J("disabled",!n.labInfo||!n.labInfo.active||1!=+n.labInfo.active),Z.xp6(3),Z.hij(" ",Z.lcZ(4,11,"LAB")," "),Z.xp6(7),Z.Oqu(Z.lcZ(11,13,"NAME")),Z.xp6(3),Z.Oqu(n.labInfo.name),Z.xp6(4),Z.Oqu(Z.lcZ(18,15,"FARM_MOD.ADDRESS")),Z.xp6(3),Z.Oqu(n.labInfo.address),Z.xp6(4),Z.Oqu(Z.lcZ(25,17,"FARM_MOD.LOCATE")),Z.xp6(3),Z.AsE("",n.labInfo.longitude," : ",n.labInfo.latitude,""),Z.xp6(4),Z.Oqu(Z.lcZ(32,19,"LAB_MOD.BRANCH")),Z.xp6(3),Z.Oqu(n.labInfo.countLab)}}function P(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"ion-card",10),Z.TgZ(1,"ion-card-content",16),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw().presentExpertRegister()}),Z.TgZ(2,"ion-button",17),Z._uU(3),Z.ALo(4,"translate"),Z.qZA(),Z.qZA(),Z.qZA()}2&t&&(Z.xp6(3),Z.Oqu(Z.lcZ(4,1,"ACCOUNT_MOD.CONFIRM_EXPERT")))}function Y(t,e){1&t&&(Z.TgZ(0,"ion-item"),Z.TgZ(1,"ion-label",23),Z._uU(2),Z.ALo(3,"translate"),Z.qZA(),Z._UZ(4,"ion-icon",24),Z.qZA()),2&t&&(Z.xp6(2),Z.Oqu(Z.lcZ(3,1,"ACCOUNT_MOD.CONFIRMED")))}function F(t,e){1&t&&(Z.TgZ(0,"ion-item"),Z.TgZ(1,"ion-label"),Z.TgZ(2,"p"),Z._uU(3),Z.ALo(4,"translate"),Z.qZA(),Z.qZA(),Z._UZ(5,"ion-icon",25),Z.qZA()),2&t&&(Z.xp6(3),Z.Oqu(Z.lcZ(4,1,"ACCOUNT_MOD.WAIT_CONFIRM")))}function J(t,e){if(1&t){var n=Z.EpF();Z.TgZ(0,"ion-card",10),Z.TgZ(1,"ion-card-header"),Z.TgZ(2,"ion-card-title"),Z._uU(3),Z.ALo(4,"translate"),Z.qZA(),Z.qZA(),Z.TgZ(5,"ion-list"),Z.YNc(6,Y,5,3,"ion-item",21),Z.YNc(7,F,6,3,"ion-item",21),Z.TgZ(8,"ion-item"),Z.TgZ(9,"ion-label"),Z.TgZ(10,"p"),Z._uU(11),Z.ALo(12,"translate"),Z.qZA(),Z.TgZ(13,"h3"),Z._uU(14),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(15,"ion-item"),Z.TgZ(16,"ion-label"),Z.TgZ(17,"p"),Z._uU(18),Z.ALo(19,"translate"),Z.qZA(),Z.TgZ(20,"h3"),Z._uU(21),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(22,"ion-item"),Z.TgZ(23,"ion-label"),Z.TgZ(24,"p"),Z._uU(25),Z.ALo(26,"translate"),Z.qZA(),Z.TgZ(27,"h3"),Z._uU(28),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(29,"ion-item"),Z.TgZ(30,"ion-label"),Z.TgZ(31,"p"),Z._uU(32),Z.ALo(33,"translate"),Z.qZA(),Z.TgZ(34,"h3"),Z._uU(35),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(36,"ion-item"),Z.TgZ(37,"ion-label"),Z.TgZ(38,"p"),Z._uU(39),Z.ALo(40,"translate"),Z.qZA(),Z.TgZ(41,"h3"),Z._uU(42),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(43,"ion-item"),Z.TgZ(44,"ion-label"),Z.TgZ(45,"p"),Z._uU(46),Z.ALo(47,"translate"),Z.qZA(),Z.TgZ(48,"h3"),Z._uU(49),Z.ALo(50,"date"),Z.ALo(51,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(52,"ion-item",14),Z.NdJ("click",function(){return Z.CHM(n),Z.oxw().presentExpertUpdate()}),Z.TgZ(53,"ion-label"),Z.TgZ(54,"p"),Z._uU(55),Z.ALo(56,"translate"),Z.qZA(),Z.qZA(),Z._UZ(57,"ion-icon",22),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){var i=Z.oxw();Z.xp6(3),Z.hij(" ",Z.lcZ(4,16,"ACCOUNT_MOD.EXPERT")," "),Z.xp6(3),Z.Q6J("ngIf",1==i.expertActive),Z.xp6(1),Z.Q6J("ngIf",1!=i.expertActive),Z.xp6(4),Z.Oqu(Z.lcZ(12,18,"ACCOUNT_MOD.LEVEL")),Z.xp6(3),Z.Oqu(i.expertInfo.education),Z.xp6(4),Z.Oqu(Z.lcZ(19,20,"ACCOUNT_MOD.EXPERTISE")),Z.xp6(3),Z.Oqu(i.expertInfo.major),Z.xp6(4),Z.Oqu(Z.lcZ(26,22,"ACCOUNT_MOD.ORGAN")),Z.xp6(3),Z.Oqu(i.expertInfo.working),Z.xp6(4),Z.Oqu(Z.lcZ(33,24,"ACCOUNT_MOD.NOTE")),Z.xp6(3),Z.Oqu(i.expertInfo.note),Z.xp6(4),Z.Oqu(Z.lcZ(40,26,"ACCOUNT_MOD.MAX_POND")),Z.xp6(3),Z.hij("",i.expertInfo.max_pond," ao"),Z.xp6(4),Z.Oqu(Z.lcZ(47,28,"ACCOUNT_MOD.DATE_JOINED")),Z.xp6(3),Z.Oqu(Z.xi3(50,30,1e3*i.expertInfo.add_time,Z.lcZ(51,33,"FORMAT_DATE"))),Z.xp6(6),Z.Oqu(Z.lcZ(56,35,"ACCOUNT_MOD.UPDATE"))}}var G=function(){var e=function(){function e(n,i,o,r,a,s,u,l,c,p,m,Z){t(this,e),this.authService=n,this.alertController=i,this.accountService=o,this.toastService=r,this.modalController=a,this.actionSheetController=s,this.camera=u,this.platform=l,this.filePath=c,this.transfer=p,this.translate=m,this.dblocalSerivce=Z,this.loadingFlag=new d.E,this.waitAvatar=new d.E,this.myUserInformation={username:"",first_name:"",last_name:"",email:"",photo:"",birthday:"",telephone:"",address:"",gender:""},this.expertInfo=null,this.expertActive=0,this.labInfo=null}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.authService.isLoggedIn.subscribe(function(e){e&&(t.getUserInformation(),console.log("load infor"))}),this.getUserInformation()}},{key:"logOut",value:function(){this.dblocalSerivce.destroyData(),this.authService.logout()}},{key:"presentEdit",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:T,componentProps:{item:this.myUserInformation}});case 2:return(e=t.sent).onDidDismiss().then(function(t){t.data&&(n.myUserInformation.first_name=t.data.first_name,n.myUserInformation.last_name=t.data.last_name,n.myUserInformation.gender=t.data.gender,n.myUserInformation.birthday=t.data.birthday,n.myUserInformation.telephone=t.data.telephone,n.myUserInformation.address=t.data.address)}),t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"presentChangePassword",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:b,componentProps:{item:this.myUserInformation}});case 2:return t.next=4,t.sent.present();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}))}},{key:"presentLogout",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:this.translate.instant("ACCOUNT_MOD.EXIT"),message:this.translate.instant("ACCOUNT_MOD.LOGOUT"),buttons:[{text:this.translate.instant("OPTION.CANCEL"),role:"cancel",cssClass:"secondary"},{text:this.translate.instant("OPTION.OK"),handler:function(){e.logOut()}}]});case 2:return t.next=4,t.sent.present();case 4:case"end":return t.stop()}},t,this)}))}},{key:"getUserInformation",value:function(){var t=this;return this.loadingFlag.setPending(!0),this.accountService.getUserInformation().subscribe(function(e){e.error||1!=e.status?t.toastService.warning(e.error):(t.myUserInformation=e.data,e.data&&""!=e.data.info&&(t.expertInfo=JSON.parse(e.data.info),e.data.expert&&(t.expertInfo.reputation=void 0!==e.data.expert?e.data.expert.reputation:0,t.expertInfo.suggested=void 0!==e.data.expert?e.data.expert.suggested:0,t.expertInfo.max_pond=void 0!==e.data.expert?e.data.expert.max_pond:0,t.expertInfo.add_time=void 0!==e.data.expert?e.data.expert.add_time:0,t.expertActive=e.data.expert.active)),t.labInfo=e.data.lab),t.loadingFlag.setResult(!0)},function(e){t.loadingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"presentExpertUpdate",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(this.expertInfo),t.next=3,this.modalController.create({component:x,componentProps:{item:this.myUserInformation,expert:this.expertInfo}});case 3:return(e=t.sent).onDidDismiss().then(function(t){t.data&&(n.expertInfo.education=t.data.education,n.expertInfo.major=t.data.major,n.expertInfo.working=t.data.working,n.expertInfo.max_pond=t.data.max_pond,n.expertInfo.note=t.data.note)}),t.next=7,e.present();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t,this)}))}},{key:"presentExpertRegister",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:O,componentProps:{item:this.myUserInformation}});case 2:return(e=t.sent).onDidDismiss().then(function(t){t.data&&(n.expertInfo.education=t.data.education,n.expertInfo.major=t.data.major,n.expertInfo.working=t.data.working,n.expertInfo.max_pond=t.data.max_pond,n.expertInfo.note=t.data.note)}),t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"uploadAvatar",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.actionSheetController.create({header:this.translate.instant("ACCOUNT_MOD.CHANGE_AVATAR"),buttons:[{text:this.translate.instant("ACCOUNT_MOD.LIBRARY"),icon:"albums-outline",handler:function(){e.takePicture(e.camera.PictureSourceType.PHOTOLIBRARY)}},{text:this.translate.instant("OPTION.CANCEL"),icon:"close-outline",role:"cancel",handler:function(){console.log("Cancel clicked")}}]});case 2:return t.next=4,t.sent.present();case 4:case"end":return t.stop()}},t,this)}))}},{key:"takePicture",value:function(t){var e=this;this.camera.getPicture({quality:100,sourceType:t,saveToPhotoAlbum:!1,correctOrientation:!0,targetHeight:500,targetWidth:500}).then(function(n){if(e.platform.is("android")&&t===e.camera.PictureSourceType.PHOTOLIBRARY)e.filePath.resolveNativePath(n).then(function(t){var i=n.substring(n.lastIndexOf("/")+1,n.lastIndexOf("?"));e.uploadImage(t,i)}).catch(function(t){e.toastService.danger(e.translate.instant("ACCOUNT_MOD.ERROR")+" "+t)});else{var i=n.substr(n.lastIndexOf("/")+1);e.uploadImage(n,i)}},function(t){e.toastService.danger(e.translate.instant("ACCOUNT_MOD.ERROR_LIBRARY"))})}},{key:"uploadImage",value:function(t,e){var n=this.accountService.getSitePath()+"/user/avatar-upload-api",i=t,o=e,r={fileKey:"avatarFile",fileName:o,httpMethod:"POST",chunkedMode:!1,mimeType:"image/jpeg",headers:{Authorization:this.accountService.getToken()},params:{fileName:o,avatar_uploads:1}};this.fileTransfer(i,n,r)}},{key:"fileTransfer",value:function(t,e,n){var i=this;this.waitAvatar.setStart(!0),this.transfer.create().upload(t,encodeURI(e),n).then(function(t){var e=JSON.parse(t.response);1==e.status?(i.myUserInformation.photo=e.data,i.toastService.success(i.translate.instant("ACCOUNT_MOD.NOTI_CHANGE"))):i.toastService.danger(i.translate.instant("ACCOUNT_MOD.ERROR")+" "+e.error),i.waitAvatar.setResult(!0)},function(t){i.toastService.danger(i.translate.instant("ACCOUNT_MOD.ERROR_UPDATE")),i.waitAvatar.setResult(!1)})}},{key:"presentLabRegister",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:k.S,componentProps:{typeAdd:"register"}});case 2:return(e=t.sent).onDidDismiss().then(function(t){t.data&&(n.labInfo=t.data)}),t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"presentSetting",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:E.V});case 2:return(e=t.sent).onDidDismiss().then(function(t){}),t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Z.Y36(c.e),Z.Y36(u.Br),Z.Y36(p.B),Z.Y36(g.k),Z.Y36(u.IN),Z.Y36(u.BX),Z.Y36(v.V1),Z.Y36(u.t4),Z.Y36(U.y),Z.Y36(C.K),Z.Y36(A.sK),Z.Y36(R.T))},e.\u0275cmp=Z.Xpm({type:e,selectors:[["app-account"]],decls:18,vars:11,consts:[["slot","start"],["text","","defaultHref","tabs/wall"],[1,"avatar"],["onError","this.src='assets/img/default-profile.jpg'","width","100px",3,"src"],["size","small","fill","clear",3,"click",4,"ngIf"],["name","dots",4,"ngIf"],["mode","ios",4,"ngIf"],["mode","ios","routerLink","/lab/root",3,"disabled",4,"ngIf"],["size","small","fill","clear",3,"click"],["name","dots"],["mode","ios"],["slot","end"],[3,"click"],["slot","end","name","create-outline"],["lines","none",3,"click"],["slot","end","name","log-out-outline"],[1,"ion-text-center",3,"click"],["shape","round"],["mode","ios","routerLink","/lab/root",3,"disabled"],[1,"titleFlex"],["name","chevron-forward-outline"],[4,"ngIf"],["name","create-outline","slot","end"],["color","secondary"],["color","secondary","name","checkmark-circle-outline"],["color","medium","name","checkmark-circle-outline"]],template:function(t,e){1&t&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z._UZ(3,"ion-back-button",1),Z.qZA(),Z.TgZ(4,"ion-title"),Z._uU(5),Z.ALo(6,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(7,"ion-content"),Z.TgZ(8,"div",2),Z._UZ(9,"img",3),Z._UZ(10,"br"),Z.YNc(11,D,3,3,"ion-button",4),Z.YNc(12,L,1,0,"ion-spinner",5),Z.qZA(),Z.YNc(13,M,48,25,"ion-card",6),Z.YNc(14,S,5,3,"ion-card",6),Z.YNc(15,w,35,21,"ion-card",7),Z.YNc(16,P,5,3,"ion-card",6),Z.YNc(17,J,58,37,"ion-card",6),Z.qZA()),2&t&&(Z.xp6(5),Z.Oqu(Z.lcZ(6,9,"ACCOUNT")),Z.xp6(4),Z.Q6J("src",e.accountService.getFilePath()+"/upload/users/avatars/medium/"+e.myUserInformation.photo,Z.LSH),Z.xp6(2),Z.Q6J("ngIf",!e.waitAvatar.pending),Z.xp6(1),Z.Q6J("ngIf",e.waitAvatar.pending),Z.xp6(1),Z.Q6J("ngIf",e.myUserInformation),Z.xp6(1),Z.Q6J("ngIf",null==e.labInfo),Z.xp6(1),Z.Q6J("ngIf",e.labInfo),Z.xp6(1),Z.Q6J("ngIf",null==e.expertInfo),Z.xp6(1),Z.Q6J("ngIf",e.expertInfo))},directives:[u.Gu,u.sr,u.Sm,u.oU,u.cs,u.wd,u.W2,r.O5,u.YG,u.PQ,u.PM,u.q_,u.Ie,u.Q$,u.gu,u.FN,u.YI,s.rH,u.Zi,u.gZ],pipes:[A.X$,y,r.uU],styles:[".avatar[_ngcontent-%COMP%]{padding:50px;text-align:center}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;margin:auto;max-width:250px;padding:5px;border:1px solid #f2f2f2}.titleFlex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]}),e}(),Q=o(40044),j=[{path:"",component:G}],B=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Z.oAB({type:e}),e.\u0275inj=Z.cJS({providers:[p.B,Q.y,C.K,U.y,v.V1],imports:[[r.ez,a.u5,u.Pc,a.UX,s.Bz.forChild(j),A.aw.forChild()]]}),e}()},10740:function(e,i,o){o.d(i,{B:function(){return c}});var r,a=o(76329),s=o(15189),u=o(50384),l=o(37716),c=((r=function(){function e(n,i){t(this,e),this.reqAPIService=n,this.auth=i,this.API_URL="",this.reload$=new a.BehaviorSubject(0),this.user=this.auth.user}return n(e,[{key:"getUserInformation",value:function(){return this.API_URL="/user/api-account-mobie?action=get",this.reqAPIService.get(this.API_URL)}},{key:"getFilePath",value:function(){return this.reqAPIService.FILE_PATH}},{key:"getSitePath",value:function(){return this.reqAPIService.SITE_PATH}},{key:"getToken",value:function(){return this.reqAPIService.getToken()}},{key:"updateAccount",value:function(t){return this.API_URL="/user/api-account-mobie?action=edit",this.reqAPIService.post(this.API_URL,t)}},{key:"resetPassword",value:function(t){return this.API_URL="/user/api-account-mobie?action=changepass",this.reqAPIService.post(this.API_URL,t)}},{key:"actionExpert",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"register",e=arguments.length>1?arguments[1]:void 0;return this.API_URL="/user/expert-account-api?action="+t,this.reqAPIService.post(this.API_URL,e)}}]),e}()).\u0275fac=function(t){return new(t||r)(l.LFG(s.$),l.LFG(u.e))},r.\u0275prov=l.Yz7({token:r,factory:r.\u0275fac}),r)}}])}();