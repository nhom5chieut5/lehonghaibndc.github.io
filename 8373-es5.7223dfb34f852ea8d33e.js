!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[8373],{31786:function(e,i,o){o.d(i,{B:function(){return Z}});var r=o(64762),a=o(22923),s=o(37716),c=o(47063),l=o(84465),u=o(81780),d=o(38583),m=o(13619);function f(t,e){if(1&t){var n=s.EpF();s.TgZ(0,"ion-button",8),s.NdJ("click",function(){var t=s.CHM(n).$implicit;return s.oxw(2).openConfirm(t.key)}),s._uU(1),s.qZA()}if(2&t){var i=e.$implicit,o=s.oxw(2);s.Q6J("fill",i.key==o.item.infor.status?"solid":"outline"),s.xp6(1),s.Oqu(i.value)}}function p(t,e){if(1&t){var n=s.EpF();s.TgZ(0,"ion-list"),s.TgZ(1,"ion-item",5),s.NdJ("click",function(){s.CHM(n);var t=s.oxw();return t.modalController.dismiss(t.flagLoad)}),s.TgZ(2,"ion-text"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"ion-text",6),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"ion-item",5),s.NdJ("click",function(){s.CHM(n);var t=s.oxw();return t.modalController.dismiss(t.flagLoad)}),s.TgZ(8,"ion-text"),s._uU(9),s.ALo(10,"translate"),s.qZA(),s.TgZ(11,"ion-text",6),s._uU(12),s.qZA(),s.qZA(),s.TgZ(13,"ion-item"),s.TgZ(14,"ion-text"),s._uU(15),s.qZA(),s.TgZ(16,"ion-text",6),s._uU(17),s.ALo(18,"date"),s.qZA(),s.qZA(),s.TgZ(19,"ion-item"),s.TgZ(20,"ion-text"),s._uU(21),s.ALo(22,"translate"),s.qZA(),s.TgZ(23,"ion-text",6),s._uU(24),s.qZA(),s.qZA(),s.TgZ(25,"ion-item"),s.TgZ(26,"ion-text"),s._uU(27),s.ALo(28,"translate"),s.qZA(),s.TgZ(29,"ion-text",6),s._uU(30),s.qZA(),s.qZA(),s.TgZ(31,"ion-item"),s.TgZ(32,"ion-text"),s._uU(33),s.ALo(34,"translate"),s.qZA(),s.TgZ(35,"ion-text",6),s._uU(36),s.qZA(),s.qZA(),s.TgZ(37,"ion-item"),s.YNc(38,f,2,2,"ion-button",7),s.ALo(39,"keyvalue"),s.qZA(),s.qZA()}if(2&t){var i=s.oxw();s.xp6(1),s.MGl("routerLink","/store/",i.item.warehouse.code,""),s.xp6(2),s.hij(" ",s.lcZ(4,15,"STORE")," "),s.xp6(3),s.hij(" ",i.item.warehouse.name," "),s.xp6(1),s.MGl("routerLink","/pond/",i.item.pond.code,""),s.xp6(2),s.hij(" ",s.lcZ(10,17,"POND")," "),s.xp6(3),s.hij(" ",i.item.pond.name," "),s.xp6(3),s.hij(" ",i.item.infor.user_name," "),s.xp6(2),s.hij(" ",s.xi3(18,19,1e3*i.item.infor.time,"HH:mm dd-MM-YYYY")," "),s.xp6(4),s.hij(" ",s.lcZ(22,22,"DEVICE_MOD.STATUS")," "),s.xp6(3),s.hij(" ","export"==i.item.infor.mod?"Xu\u1ea5t":"Nh\u1eadp l\u1ea1i"," "),s.xp6(3),s.hij(" ",s.lcZ(28,24,"POND_MOD.PRODUCT")," "),s.xp6(3),s.hij(" ",i.item.infor.product_name," "),s.xp6(3),s.hij(" ",s.lcZ(34,26,"NOTE")," "),s.xp6(3),s.hij(" ",i.item.infor.note," "),s.xp6(2),s.Q6J("ngForOf",s.lcZ(39,28,i.obStatus))}}var g,Z=((g=function(){function e(n,i,o,r,a){t(this,e),this.modalController=n,this.storeService=i,this.toastService=o,this.translate=r,this.alertController=a,this.obStatus={pending:"Ch\u1edd x\u1eed l\xfd",confirm:"\u0110\xe3 x\xe1c nh\u1eadn",reject:"Sai ph\u1ea1m"},this.flagLoad=!1}return n(e,[{key:"ngOnInit",value:function(){console.log(this.data),this.getDetail()}},{key:"getDetail",value:function(){var t=this;this.storeService.getApiStore("get","&id="+this.data.id+"&fcode="+this.storeService.getFarmCode(),"manager/warehouse-daily-api").subscribe(function(e){1==e.status?t.item=e.data:t.toastService.warning(e.error)},function(){t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"openConfirm",value:function(t){return(0,r.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("NOTE"),inputs:[{name:"note",id:"note",type:"textarea",placeholder:this.translate.instant("NOTE")}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel")}},{text:"Ok",handler:function(e){console.log(e),n.storeService.sendPost("confirm",{status:t,note:e.note},"&id="+n.data.id+"&fcode="+n.storeService.getFarmCode(),"manager/warehouse-daily-api").subscribe(function(i){1==i.status?(n.toastService.success(n.translate.instant("WALL.UPDATE_SUCCESS")),n.item.infor.status=t,n.item.infor.note=e.note,n.flagLoad=!0):n.toastService.warning(i.error)},function(){n.toastService.danger(n.translate.instant("ERROR_CONNECT"))})}}]});case 2:return e.next=4,e.sent.present();case 4:case"end":return e.stop()}},e,this)}))}}]),e}()).\u0275fac=function(t){return new(t||g)(s.Y36(c.IN),s.Y36(a.d),s.Y36(l.k),s.Y36(u.sK),s.Y36(c.Br))},g.\u0275cmp=s.Xpm({type:g,selectors:[["app-store-log-detail"]],inputs:{data:"data"},decls:10,vars:4,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[1,"ion-padding"],[4,"ngIf"],["detail","",3,"routerLink","click"],["slot","end"],[3,"fill","click",4,"ngFor","ngForOf"],[3,"fill","click"]],template:function(t,e){1&t&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return e.modalController.dismiss(e.flagLoad)}),s._UZ(4,"ion-icon",2),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"ion-content",3),s.YNc(9,p,40,30,"ion-list",4),s.qZA()),2&t&&(s.xp6(6),s.Oqu(s.lcZ(7,2,"SHOP.DETAIL")),s.xp6(3),s.Q6J("ngIf",e.item))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.wd,c.W2,d.O5,c.q_,c.Ie,c.YI,m.rH,c.yW,d.sg],pipes:[u.X$,d.uU,d.Nd],styles:[""]}),g)},99330:function(e,i,o){o.d(i,{o:function(){return Z}});var r=o(90665),a=o(16738),s=o(22923),c=o(37716),l=o(47063),u=o(71239),d=o(38583),m=o(81780);function f(t,e){if(1&t&&(c.TgZ(0,"div"),c.TgZ(1,"ion-select-option",8),c._uU(2),c.qZA(),c.qZA()),2&t){var n=e.$implicit;c.xp6(1),c.Q6J("value",n.infor.id),c.xp6(1),c.Oqu(n.infor.name)}}function p(t,e){if(1&t&&(c.TgZ(0,"div"),c.TgZ(1,"ion-select-option",8),c._uU(2),c.qZA(),c.qZA()),2&t){var n=e.$implicit;c.xp6(1),c.Q6J("value",n.infor.code),c.xp6(1),c.Oqu(n.infor.name)}}var g,Z=((g=function(){function e(n,i,o){t(this,e),this.modalController=n,this.dbLocalService=i,this.storeService=o,this.form=new r.cw({from:new r.NI(a().subtract(180,"days").format("YYYY-MM-DD")),end:new r.NI(a().endOf("day").format("YYYY-MM-DD")),wcode:new r.NI(""),username:new r.NI(""),pond_id:new r.NI("")}),this.listStore=[],this.listPond=[],this.maxDate=a(),this.minDate=a().subtract(180,"days"),this.obStatus={pending:"Ch\u1edd x\u1eed l\xfd",confirm:"\u0110\xe3 x\xe1c nh\u1eadn",reject:"Sai ph\u1ea1m"}}return n(e,[{key:"ngOnInit",value:function(){var t=this;console.log(this.data);var e=this.dbLocalService.farms.findIndex(function(e){return e.infor.code==t.storeService.getFarmCode()});this.listPond=-1==e?[]:this.dbLocalService.ponds.filter(function(n){return n.infor.farm_id===t.dbLocalService.farms[e].infor.id}),this.listStore=this.dbLocalService.stores.filter(function(e){return e.infor.farm_code===t.storeService.getFarmCode()}),this.form.setValue(this.data)}},{key:"onSubmit",value:function(){this.modalController.dismiss(this.form.value)}}]),e}()).\u0275fac=function(t){return new(t||g)(c.Y36(l.IN),c.Y36(u.T),c.Y36(s.d))},g.\u0275cmp=c.Xpm({type:g,selectors:[["app-store-logs-search"]],inputs:{data:"data"},decls:45,vars:39,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[3,"formGroup","ngSubmit"],["lines","inset"],["formControlName","from",3,"displayFormat","min","max"],["formControlName","end",3,"displayFormat","min","max"],["type","text","formControlName","pond_id","interface","action-sheet"],[3,"value"],[4,"ngFor","ngForOf"],["type","text","formControlName","wcode","interface","action-sheet"],[1,"ion-text-center","ion-padding"],["type","submit","color","primary","shape","round"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",0),c.TgZ(3,"ion-button",1),c.NdJ("click",function(){return e.modalController.dismiss()}),c._UZ(4,"ion-icon",2),c.qZA(),c.qZA(),c.TgZ(5,"ion-title"),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"ion-content"),c.TgZ(9,"form",3),c.NdJ("ngSubmit",function(){return e.onSubmit()}),c.TgZ(10,"ion-list"),c.TgZ(11,"ion-item",4),c.TgZ(12,"ion-label"),c._uU(13),c.ALo(14,"translate"),c.qZA(),c._UZ(15,"ion-datetime",5),c.ALo(16,"translate"),c.qZA(),c.TgZ(17,"ion-item",4),c.TgZ(18,"ion-label"),c._uU(19),c.ALo(20,"translate"),c.qZA(),c._UZ(21,"ion-datetime",6),c.ALo(22,"translate"),c.qZA(),c.TgZ(23,"ion-item",4),c.TgZ(24,"ion-label"),c._uU(25),c.ALo(26,"translate"),c.qZA(),c.TgZ(27,"ion-select",7),c.TgZ(28,"ion-select-option",8),c._uU(29),c.ALo(30,"translate"),c.qZA(),c.YNc(31,f,3,2,"div",9),c.qZA(),c.qZA(),c.TgZ(32,"ion-item",4),c.TgZ(33,"ion-label"),c._uU(34),c.ALo(35,"translate"),c.qZA(),c.TgZ(36,"ion-select",10),c.TgZ(37,"ion-select-option",8),c._uU(38),c.ALo(39,"translate"),c.qZA(),c.YNc(40,p,3,2,"div",9),c.qZA(),c.qZA(),c.qZA(),c.TgZ(41,"div",11),c.TgZ(42,"ion-button",12),c._uU(43),c.ALo(44,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(6),c.Oqu(c.lcZ(7,19,"SHOP.SEARCH")),c.xp6(3),c.Q6J("formGroup",e.form),c.xp6(4),c.Oqu(c.lcZ(14,21,"FARM_MOD.FROM")),c.xp6(2),c.Q6J("displayFormat",c.lcZ(16,23,"FORMAT_DATE_MOMENT"))("min",e.minDate.format("YYYY-MM-DD"))("max",e.maxDate.format("YYYY-MM-DD")),c.xp6(4),c.Oqu(c.lcZ(20,25,"FARM_MOD.TO")),c.xp6(2),c.Q6J("displayFormat",c.lcZ(22,27,"FORMAT_DATE_MOMENT"))("min",e.minDate.format("YYYY-MM-DD"))("max",e.maxDate.format("YYYY-MM-DD")),c.xp6(4),c.Oqu(c.lcZ(26,29,"POND")),c.xp6(3),c.Q6J("value",""),c.xp6(1),c.Oqu(c.lcZ(30,31,"NO")),c.xp6(2),c.Q6J("ngForOf",e.listPond),c.xp6(3),c.Oqu(c.lcZ(35,33,"STORE")),c.xp6(3),c.Q6J("value",""),c.xp6(1),c.Oqu(c.lcZ(39,35,"NO")),c.xp6(2),c.Q6J("ngForOf",e.listStore),c.xp6(3),c.hij("",c.lcZ(44,37,"WAREHOUSE_MOD.SAVE")," "))},directives:[l.Gu,l.sr,l.Sm,l.YG,l.gu,l.wd,l.W2,r._Y,r.JL,r.sg,l.q_,l.Ie,l.Q$,l.x4,l.QI,r.JJ,r.u,l.t9,l.n0,d.sg],pipes:[m.X$],styles:[""]}),g)},98373:function(e,i,o){o.d(i,{B:function(){return S}});var r=o(64762),a=o(90665),s=o(16738),c=o(27887),l=o(31786),u=o(99330),d=o(22923),m=o(37716),f=o(81780),p=o(84465),g=o(13619),Z=o(47063),h=o(38583);function x(t,e){1&t&&m._UZ(0,"ion-progress-bar",11)}function v(t,e){1&t&&(m.TgZ(0,"ion-item"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&t&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"POND_MOD.NO_ITEM")," "))}function A(t,e){1&t&&m._UZ(0,"ion-icon",17)}function T(t,e){1&t&&m._UZ(0,"ion-icon",18)}function q(t,e){if(1&t){var n=m.EpF();m.TgZ(0,"ion-item",12),m.NdJ("click",function(){var t=m.CHM(n).index;return m.oxw().presentDetail(t)}),m.TgZ(1,"ion-label"),m.TgZ(2,"p"),m.YNc(3,A,1,0,"ion-icon",13),m.YNc(4,T,1,0,"ion-icon",14),m._uU(5),m.qZA(),m.TgZ(6,"ion-text"),m.TgZ(7,"small"),m._uU(8),m._UZ(9,"span",15),m._uU(10),m.TgZ(11,"ion-text",16),m._uU(12),m.qZA(),m._uU(13),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){var i=e.$implicit,o=m.oxw();m.xp6(3),m.Q6J("ngIf","export"==i.mod),m.xp6(1),m.Q6J("ngIf","import"==i.mod),m.xp6(1),m.lnq(" ",i.date," ",i.detail," b\u1edfi ",i.user_name," "),m.xp6(3),m.hij(" ",o.obStatus[i.status]," | "),m.xp6(1),m.Q6J("innerHTML","import"==i.mod?"Nh\u1eadp l\u1ea1i":"Xu\u1ea5t",m.oJD),m.xp6(1),m.hij(" ",i.name," "),m.xp6(1),m.Q6J("color","import"==i.mod?"success":"danger"),m.xp6(1),m.Oqu(i.quantity),m.xp6(1),m.AsE(" ",i.unit," ",i.product_name," ")}}var _,S=((_=function(){function e(n,i,o,r,l,u){t(this,e),this.translate=n,this.toastService=i,this.storeService=o,this.route=r,this.router=l,this.modalController=u,this.loadingFlag=new c.E,this.formSearch=new a.cw({from:new a.NI(s().subtract(180,"days").format("YYYY-MM-DD")),end:new a.NI(s().endOf("day").format("YYYY-MM-DD")),wcode:new a.NI(""),username:new a.NI(""),pond_id:new a.NI("")}),this.numRows=0,this.page=0,this.list=[],this.obStatus={pending:"Ch\u1edd x\u1eed l\xfd",confirm:"\u0110\xe3 x\xe1c nh\u1eadn",reject:"Sai ph\u1ea1m"}}return n(e,[{key:"ngOnInit",value:function(){var t=this.route.snapshot.paramMap.get("id");void 0===t?this.router.navigateByUrl("tabs"):(this.storeService.setFarmCode(t),this.getList())}},{key:"doRefresh",value:function(t){this.resetData(),this.getList(),t.target.complete()}},{key:"getList",value:function(){var t=this;this.loadingFlag.setPending(!0);var e={from:s(this.formSearch.value.from).valueOf()/1e3,end:s(this.formSearch.value.end).endOf("day").valueOf()/1e3,wcode:this.formSearch.value.wcode,username:this.formSearch.value.username,pond_id:this.formSearch.value.pond_id};this.storeService.sendPost("list",e,"&page="+this.page+"&fcode="+this.storeService.getFarmCode(),"manager/warehouse-daily-api").subscribe(function(e){1==e.status?t.list=t.list.concat(e.data.list):t.toastService.warning(e.error),t.loadingFlag.setResult(!0)},function(){t.toastService.danger(t.translate.instant("ERROR_CONNECT")),t.loadingFlag.setResult(!1)})}},{key:"presentSearchLog",value:function(){return(0,r.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:u.o,componentProps:{data:this.formSearch.value}});case 2:return(e=t.sent).onDidDismiss().then(function(t){console.log(t),t.data&&(n.resetData(),n.formSearch.setValue(t.data),n.getList())}),t.next=6,e.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"resetData",value:function(){this.list=[],this.numRows=0,this.page=0,this.formSearch.reset(),this.formSearch.patchValue({from:new a.NI(s().subtract(180,"days").format("YYYY-MM-DD")),end:new a.NI(s().endOf("day").format("YYYY-MM-DD"))})}},{key:"presentDetail",value:function(t){return(0,r.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:l.B,componentProps:{data:this.list[t]}});case 2:return(n=e.sent).onDidDismiss().then(function(t){t.data&&(i.resetData(),i.getList())}),e.next=6,n.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"loadMore",value:function(t){setTimeout(function(){console.log("Done"),t.target.complete()},500),this.page+=1,this.getList()}}]),e}()).\u0275fac=function(t){return new(t||_)(m.Y36(f.sK),m.Y36(p.k),m.Y36(d.d),m.Y36(g.gz),m.Y36(g.F0),m.Y36(Z.IN))},_.\u0275cmp=m.Xpm({type:_,selectors:[["app-store-logs"]],decls:19,vars:6,consts:[["slot","start"],["text","","defaultHref","tabs/management"],["slot","end"],[3,"click"],["slot","icon-only","name","search-outline"],["type","indeterminate",4,"ngIf"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],["detail","",3,"click",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","dots"],["type","indeterminate"],["detail","",3,"click"],["color","danger","name","arrow-undo-circle-outline",4,"ngIf"],["color","success","name","arrow-redo-circle-outline",4,"ngIf"],[3,"innerHTML"],[3,"color"],["color","danger","name","arrow-undo-circle-outline"],["color","success","name","arrow-redo-circle-outline"]],template:function(t,e){1&t&&(m.TgZ(0,"ion-header"),m.TgZ(1,"ion-toolbar"),m.TgZ(2,"ion-buttons",0),m._UZ(3,"ion-back-button",1),m.qZA(),m.TgZ(4,"ion-title"),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.TgZ(7,"ion-buttons",2),m.TgZ(8,"ion-button",3),m.NdJ("click",function(){return e.presentSearchLog()}),m._UZ(9,"ion-icon",4),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.YNc(10,x,1,0,"ion-progress-bar",5),m.TgZ(11,"ion-content"),m.TgZ(12,"ion-refresher",6),m.NdJ("ionRefresh",function(t){return e.doRefresh(t)}),m._UZ(13,"ion-refresher-content"),m.qZA(),m.TgZ(14,"ion-list"),m.YNc(15,v,3,3,"ion-item",7),m.YNc(16,q,14,12,"ion-item",8),m.qZA(),m.TgZ(17,"ion-infinite-scroll",9),m.NdJ("ionInfinite",function(t){return e.loadMore(t)}),m._UZ(18,"ion-infinite-scroll-content",10),m.qZA(),m.qZA()),2&t&&(m.xp6(5),m.Oqu(m.lcZ(6,4,"WAREHOUSE_MOD.LOGS")),m.xp6(5),m.Q6J("ngIf",e.loadingFlag.pending),m.xp6(5),m.Q6J("ngIf",0===e.list.length),m.xp6(1),m.Q6J("ngForOf",e.list))},directives:[Z.Gu,Z.sr,Z.Sm,Z.oU,Z.cs,Z.wd,Z.YG,Z.gu,h.O5,Z.W2,Z.nJ,Z.Wo,Z.q_,h.sg,Z.ju,Z.MB,Z.X7,Z.Ie,Z.Q$,Z.yW],pipes:[f.X$],styles:[""]}),_)}}])}();