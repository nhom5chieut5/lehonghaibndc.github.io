"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[8097],{18097:function(e,t,n){n.r(t),n.d(t,{AuthPageModule:function(){return Ze}});var i=n(38583),o=n(90665),s=n(13619),r=n(47063),a=n(37716);let l=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-auth"]],decls:5,vars:0,template:function(e,t){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-title"),a._uU(3,"auth"),a.qZA(),a.qZA(),a.qZA(),a._UZ(4,"ion-content"))},directives:[r.Gu,r.sr,r.wd,r.W2],styles:[""]}),e})();var u=n(64762),c=n(50384),g=n(27887),h=n(42377),d=n(21224),m=n(38739),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),Object.defineProperty(t.prototype,"cordova",{get:function(){return(0,m.J2)(this,"cordova")},set:function(e){(0,m.Iq)(this,"cordova",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"model",{get:function(){return(0,m.J2)(this,"model")},set:function(e){(0,m.Iq)(this,"model",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"platform",{get:function(){return(0,m.J2)(this,"platform")},set:function(e){(0,m.Iq)(this,"platform",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return(0,m.J2)(this,"uuid")},set:function(e){(0,m.Iq)(this,"uuid",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return(0,m.J2)(this,"version")},set:function(e){(0,m.Iq)(this,"version",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"manufacturer",{get:function(){return(0,m.J2)(this,"manufacturer")},set:function(e){(0,m.Iq)(this,"manufacturer",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVirtual",{get:function(){return(0,m.J2)(this,"isVirtual")},set:function(e){(0,m.Iq)(this,"isVirtual",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serial",{get:function(){return(0,m.J2)(this,"serial")},set:function(e){(0,m.Iq)(this,"serial",e)},enumerable:!1,configurable:!0}),t.pluginName="Device",t.plugin="cordova-plugin-device",t.pluginRef="device",t.repo="https://github.com/apache/cordova-plugin-device",t.platforms=["Android","Browser","iOS","macOS","Windows"],t.\u0275fac=function(){var e;return function(n){return(e||(e=a.n5z(t)))(n||t)}}(),t.\u0275prov=a.Yz7({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(m.KY),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,u.ZT)(t,e),t.prototype.login=function(e){return(0,m.DM)(this,"login",{successIndex:1,errorIndex:2},arguments)},t.prototype.trySilentLogin=function(e){return(0,m.DM)(this,"trySilentLogin",{},arguments)},t.prototype.logout=function(){return(0,m.DM)(this,"logout",{},arguments)},t.prototype.disconnect=function(){return(0,m.DM)(this,"disconnect",{},arguments)},t.prototype.getSigningCertificateFingerprint=function(){return(0,m.DM)(this,"getSigningCertificateFingerprint",{},arguments)},t.pluginName="GooglePlus",t.plugin="cordova-plugin-googleplus",t.pluginRef="window.plugins.googleplus",t.repo="https://github.com/EddyVerbruggen/cordova-plugin-googleplus",t.install="ionic cordova plugin add cordova-plugin-googleplus --variable REVERSED_CLIENT_ID=myreversedclientid",t.installVariables=["REVERSED_CLIENT_ID"],t.platforms=["Android","iOS"],t.\u0275fac=function(){var e;return function(n){return(e||(e=a.n5z(t)))(n||t)}}(),t.\u0275prov=a.Yz7({token:t,factory:function(e){return t.\u0275fac(e)}}),t}(m.KY),Z=n(84465),A=n(81780),T=n(38605);function _(e,t){1&e&&a._UZ(0,"ion-spinner",22)}function v(e,t){1&e&&(a.TgZ(0,"span"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.Oqu(a.lcZ(2,1,"AUTH.LOGIN")))}function q(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-bottom-drawer",23),a.NdJ("stateChange",function(t){return a.CHM(e),a.oxw().drawerOtps.drawerState=t}),a.TgZ(1,"div",24),a.TgZ(2,"ion-button",25),a.NdJ("click",function(){return a.CHM(e),a.oxw().showDrawer()}),a._UZ(3,"ion-icon",26),a._uU(4," kh\xe1c "),a.qZA(),a.qZA(),a.TgZ(5,"div",27),a.TgZ(6,"div",28),a.TgZ(7,"ion-item",29),a.TgZ(8,"ion-label",30),a.TgZ(9,"h4"),a._uU(10,"Farmext xin ch\xe0o!"),a.qZA(),a.TgZ(11,"small"),a._uU(12," Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u1ec3 \u0111\u0103ng nh\u1eadp ho\u1eb7c t\u1ea1o t\xe0i kho\u1ea3n "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(13,"ion-item"),a._UZ(14,"ion-input",31),a.qZA(),a.TgZ(15,"div",32),a.TgZ(16,"ion-button",33),a.NdJ("click",function(){return a.CHM(e),a.oxw().phoneLogin()}),a._uU(17,"Ti\u1ebfp theo"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("minimumHeight",e.drawerOtps.minimumHeight)("disableDrag",e.drawerOtps.disableDrag)("state",e.drawerOtps.drawerState)("distanceTop",e.drawerOtps.distanceTop),a.xp6(3),a.Q6J("name",2==e.drawerOtps.drawerState?"chevron-down-outline":"chevron-up-outline"),a.xp6(11),a.Q6J("formControl",e.formPhone),a.xp6(2),a.Q6J("disabled",e.formPhone.invalid)}}let b=(()=>{class e{constructor(e,t,n,i,s,r,a,l,u,c){this.device=e,this.formBuilder=t,this.authService=n,this.router=i,this.toastService=s,this.alertController=r,this.translate=a,this.googlePlus=l,this.setTranslate=u,this.storage=c,this.requestFlag=new g.E,this.phoneAuthRequestFlag=new g.E,this.reqGoogleFlag=new g.E,this.devPhoto="",this.formPhone=new o.NI("",[o.kI.required,o.kI.minLength(9),o.kI.maxLength(12)]),this.drawerOtps={minimumHeight:40,disableDrag:!0,drawerState:d.Wk.Top,distanceTop:190}}ngOnInit(){this.formLogin=this.formBuilder.group({username:["",o.kI.compose([o.kI.required])],password:["",o.kI.required]})}ionViewDidEnter(){this.authService.checkIsLoggedIn&&this.router.navigate(["tabs/management"])}onSubmit(){this.requestFlag.setPending(!0),this.message=null,this.authService.reqLogin({username:this.formLogin.value.username,password:this.formLogin.value.password,token_device:this.authService.tokenDevice}).subscribe(e=>{if(e.error)this.message=e.message,this.toastService.warning(this.message);else{this.authService.setUser({id:e.data.user.user_id,username:e.data.user.user_name,first_name:e.data.user.first_name,last_name:e.data.user.last_name,email:e.data.user.user_email,photo:e.data.user.user_photo,permission:e.data.user.permission,token:e.data.token,token_fb:""});let t=this.authService.redirectUrl?this.router.parseUrl(this.authService.redirectUrl):"/tabs/wall";this.router.navigateByUrl(t)}this.requestFlag.setResult(!0)},()=>{this.requestFlag.setResult(!1),this.message="Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i"})}presentLanguage(){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Language",inputs:[{name:"vi",type:"radio",label:"Ti\u1ebfng Vi\u1ec7t",value:"vi",checked:"vi"==this.translate.currentLang},{name:"en",type:"radio",label:"English",value:"en",checked:"en"==this.translate.currentLang}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Ok",handler:e=>{this.setTranslate.setLang(e)}}]})).present()})}loginByGoogle(){this.reqGoogleFlag.setStart(!0),this.googlePlus.login({webClientId:"760955382669-jalcfc5qklp9qd7t6k995nrbsvqp6r8h.apps.googleusercontent.com",offline:!0}).then(e=>{e.idToken?(alert(e.idToken),this.authService.reqLoginByGoogle({idToken:e.idToken,email:e.email,userId:e.userId,lastName:e.givenName,firstName:e.familyName,token_device:this.authService.tokenDevice}).subscribe(e=>{!e.error&&e.data.token?(this.authService.setUser({id:e.data.user.user_id,username:e.data.user.user_name,first_name:e.data.user.first_name,last_name:e.data.user.last_name,email:e.data.user.user_email,photo:e.data.user.user_photo,permission:e.data.user.permission,token:e.data.token,token_fb:""}),this.router.navigateByUrl(e.data.user.new_member?"/account":"/tabs/wall")):(this.reqGoogleFlag.setResult(!0),this.toastService.success(e.error?e.message:""))},e=>{this.reqGoogleFlag.setResult(!1),this.toastService.warning(this.translate.instant("ERROR_CONNECTION"))})):(this.reqGoogleFlag.setResult(!1),this.toastService.danger(this.translate.instant("AUTH.CAN_NOT_AUTH_BY_GOOGLE")))}).catch(e=>{this.reqGoogleFlag.setResult(!1),console.log(e),this.toastService.warning(this.translate.instant("AUTH.PLATFORM_NOT_SUPPORT"))})}downloadImge(){return(0,u.mG)(this,void 0,void 0,function*(){const e=yield fetch("http://farmext.com/favicon.png",{mode:"no-cors"});console.log(e);const t=yield e.blob();var n;this.devPhoto=yield(n=t,new Promise((e,t)=>{const i=new FileReader;console.log(i),i.onerror=t,i.onload=()=>{e(i.result)},i.onloadend=function(){console.log(i.result)},i.readAsDataURL(n)}))})}showDrawer(){this.drawerOtps.drawerState=2==this.drawerOtps.drawerState?d.Wk.Bottom:d.Wk.Top}phoneLogin(){console.log(this.formPhone.value),this.phoneAuthRequestFlag.setPending(!0),this.authService.reqAuthPhone({phone:this.formPhone.value,uuid:this.device.uuid}).subscribe(e=>{console.log(e),1==e.status?(this.storage.set("phoneOTP",this.formPhone.value),this.router.navigate(["auth/phone-confirm"])):(this.storage.set("phoneOTP",this.formPhone.value),this.toastService.warning(this.translate.instant(e.message)),this.drawerOtps.drawerState=d.Wk.Bottom)})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(p),a.Y36(o.qu),a.Y36(c.e),a.Y36(s.F0),a.Y36(Z.k),a.Y36(r.Br),a.Y36(A.sK),a.Y36(f),a.Y36(h.$),a.Y36(T.Ke))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-login"]],decls:41,vars:24,consts:[["slot","end"],["size","small",3,"click"],["name","globe","slot","start"],["no-bounce","",1,"ion-padding"],[1,"ion-padding","ion-text-center"],["src","assets/icon/farmext-circle.svg","alt","Farmext logo",1,"logo"],[3,"formGroup","ngSubmit"],["size","10","offset","1","size-sm","6","offset-sm","3"],["lines","none"],["type","email","formControlName","username","name","username","inputmode","email",3,"placeholder"],["type","Password","formControlName","password","name","password","inputmode","text",3,"placeholder"],["type","submit","expand","block","shape","round",3,"disabled"],["slot","start","name","dots",4,"ngIf"],[4,"ngIf"],[1,"other"],["expand","block","shape","round","fill","outline",3,"click"],["expand","block","shape","round","fill","clear","routerLink","/auth/signup"],["slot","end","name","arrow-forward-outline"],[1,"ion-text-center"],["size","small","fill","clear","routerLink","/auth/forgot",1,"text-s"],["color","primary"],[3,"minimumHeight","disableDrag","state","distanceTop","stateChange",4,"ngIf"],["slot","start","name","dots"],[3,"minimumHeight","disableDrag","state","distanceTop","stateChange"],[1,"ion-text-end"],["color","primary","size","small","fill","clear","shape","round",3,"click"],["slot","start",3,"name"],[1,"drawer-content"],[1,"content-wraper","ion-padding"],["lines","none",1,"bg-none"],["color","light"],["placeholder","S\u1ed1 \u0111i\u1ec7n tho\u1ea1i","autocomplete","tel","inputmode","tel","type","tel",3,"formControl"],[1,"box-btn-next"],["color","primary","shape","round","expand","block","mode","ios",3,"disabled","click"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-title"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"ion-buttons",0),a.TgZ(6,"ion-button",1),a.NdJ("click",function(){return t.presentLanguage()}),a._UZ(7,"ion-icon",2),a._uU(8),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(9,"ion-content",3),a.TgZ(10,"div",4),a._UZ(11,"img",5),a.qZA(),a.TgZ(12,"form",6),a.NdJ("ngSubmit",function(){return t.onSubmit()}),a.TgZ(13,"ion-grid"),a.TgZ(14,"ion-row"),a.TgZ(15,"ion-col",7),a.TgZ(16,"ion-item",8),a._UZ(17,"ion-input",9),a.ALo(18,"translate"),a.qZA(),a.TgZ(19,"ion-item",8),a._UZ(20,"ion-input",10),a.ALo(21,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(22,"ion-row"),a.TgZ(23,"ion-col",7),a.TgZ(24,"ion-button",11),a.YNc(25,_,1,0,"ion-spinner",12),a.YNc(26,v,3,3,"span",13),a.qZA(),a.TgZ(27,"div",14),a.TgZ(28,"ion-button",15),a.NdJ("click",function(){return t.loginByGoogle()}),a._uU(29),a.ALo(30,"translate"),a.qZA(),a.TgZ(31,"ion-button",16),a._uU(32),a.ALo(33,"translate"),a._UZ(34,"ion-icon",17),a.qZA(),a.qZA(),a.TgZ(35,"div",18),a.TgZ(36,"span",19),a.TgZ(37,"ion-text",20),a._uU(38),a.ALo(39,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.YNc(40,q,18,7,"ion-bottom-drawer",21)),2&e&&(a.xp6(3),a.Oqu(a.lcZ(4,12,"AUTH.LOGIN")),a.xp6(5),a.hij(" ",t.translate.currentLang," "),a.xp6(4),a.Q6J("formGroup",t.formLogin),a.xp6(5),a.Q6J("placeholder",a.lcZ(18,14,"AUTH.EMAIL_OR_USERNAME")),a.xp6(3),a.Q6J("placeholder",a.lcZ(21,16,"AUTH.PASSWORD")),a.xp6(4),a.Q6J("disabled",t.formLogin.invalid||t.requestFlag.pending),a.xp6(1),a.Q6J("ngIf",t.requestFlag.pending),a.xp6(1),a.Q6J("ngIf",!t.requestFlag.pending),a.xp6(3),a.hij(" ",a.lcZ(30,18,"AUTH.LOGIN_BY_GOOGLE")," "),a.xp6(3),a.hij(" ",a.lcZ(33,20,"AUTH.NOT_HAVE_ACCOUNT")," "),a.xp6(6),a.hij(" ",a.lcZ(39,22,"AUTH.FORGOT_PASSWORD")," "),a.xp6(2),a.Q6J("ngIf","vi"==t.translate.currentLang))},directives:[r.Gu,r.sr,r.wd,r.Sm,r.YG,r.gu,r.W2,o._Y,o.JL,o.sg,r.jY,r.Nd,r.wI,r.Ie,r.pK,r.j9,o.JJ,o.u,i.O5,r.YI,s.rH,r.yW,r.PQ,d.w5,r.Q$,o.oH],pipes:[A.X$],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: #e3f4fd url(/assets/img/background.svg) bottom center no-repeat !important}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-radius: 50px;margin:5px}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-end: 5px;--padding-start: 5px}[_nghost-%COMP%]   .logo[_ngcontent-%COMP%]{max-width:120px;margin:0 auto}[_nghost-%COMP%]   .other[_ngcontent-%COMP%]{margin-top:2em}[_nghost-%COMP%]   .text-s[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   ion-bottom-drawer[_ngcontent-%COMP%]{background-color:transparent}[_nghost-%COMP%]   ion-bottom-drawer[_ngcontent-%COMP%]   .drawer-content[_ngcontent-%COMP%]{height:100%;border-radius:30px!important;background-color:#14499e;box-shadow:#b8b8b866 0 -5px 20px -5px}[_nghost-%COMP%]   ion-bottom-drawer[_ngcontent-%COMP%]   .drawer-content[_ngcontent-%COMP%]   .content-wraper[_ngcontent-%COMP%]{max-width:360px;margin:0 auto}[_nghost-%COMP%]   ion-bottom-drawer[_ngcontent-%COMP%]   .drawer-content[_ngcontent-%COMP%]   ion-item.bg-none[_ngcontent-%COMP%]{--background: transparent !important}[_nghost-%COMP%]   ion-bottom-drawer[_ngcontent-%COMP%]   .drawer-content[_ngcontent-%COMP%]   .box-btn-next[_ngcontent-%COMP%]{margin-top:1.5em}[_nghost-%COMP%]   ion-bottom-drawer[_ngcontent-%COMP%]   .item-highlight[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-bottom-drawer[_ngcontent-%COMP%]   .item-inner-highlight[_ngcontent-%COMP%]{background-color:transparent!important;border-radius:50px!important}[_nghost-%COMP%]   ion-bottom-drawer[_ngcontent-%COMP%]   .item-has-focus[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-bottom-drawer[_ngcontent-%COMP%]   .item-interactive[_ngcontent-%COMP%]{background-color:transparent!important;border-radius:50px!important}"]}),e})();var x=n(15189);let w=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-term"]],decls:5,vars:0,template:function(e,t){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-title"),a._uU(3,"term"),a.qZA(),a.qZA(),a.qZA(),a._UZ(4,"ion-content"))},directives:[r.Gu,r.sr,r.wd,r.W2],styles:[""]}),e})();const O=["slides"];function U(e,t){1&e&&(a.TgZ(0,"ion-item",29),a.TgZ(1,"ion-label"),a.TgZ(2,"p"),a.TgZ(3,"ion-text",30),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.Oqu(a.lcZ(5,1,"AUTH.EMAIL_EXIST")))}function C(e,t){1&e&&(a.TgZ(0,"ion-item",29),a.TgZ(1,"ion-label"),a.TgZ(2,"p"),a.TgZ(3,"ion-text",30),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.Oqu(a.lcZ(5,1,"AUTH.PHONENUMBER_EXIST")))}function N(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-item",6),a.TgZ(1,"ion-label",7),a._uU(2,"Email"),a.qZA(),a.TgZ(3,"ion-input",31),a.NdJ("ionChange",function(t){return a.CHM(e),a.oxw().validateEmailExistence(t)}),a.qZA(),a.qZA()}}function E(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-item",6),a.TgZ(1,"ion-label",7),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"ion-input",32),a.NdJ("ionChange",function(t){return a.CHM(e),a.oxw().validatePhoneExistence(t)}),a.qZA(),a.qZA()}2&e&&(a.xp6(2),a.Oqu(a.lcZ(3,1,"AUTH.PHONE_NUMBER")))}function I(e,t){1&e&&(a.TgZ(0,"p",24),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"AUTH.NOTE_EMAIL_CONFIRM")," "))}function S(e,t){1&e&&(a.TgZ(0,"p",24),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"AUTH.NOTE_PHONE_CONFIRM")," "))}function P(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"p"),a.TgZ(1,"small",35),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).changeContact("email")}),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.qZA()}2&e&&(a.xp6(2),a.Oqu(a.lcZ(3,1,"AUTH.BY_EMAIL")))}function k(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"p"),a.TgZ(1,"small",35),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).changeContact("phone")}),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.qZA()}2&e&&(a.xp6(2),a.Oqu(a.lcZ(3,1,"AUTH.BY_PHONE")))}function L(e,t){if(1&e&&(a.TgZ(0,"div",33),a.YNc(1,P,4,3,"p",34),a.YNc(2,k,4,3,"p",34),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("ngIf","phone"==e.activeBy),a.xp6(1),a.Q6J("ngIf","email"==e.activeBy)}}function y(e,t){1&e&&(a.TgZ(0,"ion-item",29),a.TgZ(1,"ion-label"),a.TgZ(2,"p"),a.TgZ(3,"ion-text",30),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.Oqu(a.lcZ(5,1,"AUTH.USER_NAME_EXIST")))}function M(e,t){1&e&&(a.TgZ(0,"ion-item",29),a.TgZ(1,"ion-label",36),a.TgZ(2,"p"),a.TgZ(3,"ion-text",30),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.Oqu(a.lcZ(5,1,"AUTH.USER_NAME_INVALID")))}function R(e,t){1&e&&(a.TgZ(0,"ion-item",29),a.TgZ(1,"ion-label"),a.TgZ(2,"p"),a.TgZ(3,"ion-text",30),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.Oqu(a.lcZ(5,1,"AUTH.PASSWORD_IS_WEAK")))}function J(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-chip",37),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw().selectUsername(t)}),a.TgZ(1,"ion-label"),a._uU(2),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit;a.xp6(2),a.Oqu(e)}}function H(e,t){1&e&&a._UZ(0,"ion-spinner",38)}let F=(()=>{class e{constructor(e,t,n,i,o,s,r,a,l,u,c){this._formBuilder=e,this.reqAPIService=t,this.modalController=n,this.router=i,this.navController=o,this.device=s,this.authService=r,this.toastService=a,this.translate=l,this.alertController=u,this.storage=c,this.loadingFlag=new g.E,this.activeBy="phone",this.showPassword=!0,this.passwordToggleIcon="eye-off-outline",this.form1Valid=!1,this.recomnetUsernames=[],this.recomnetUsernamesFilter=[]}ngOnInit(){this.storage.get("registering").then(e=>{e&&(this.navController.setDirection("back"),this.router.navigateByUrl("auth/email-confirm"))}),this.form=this._formBuilder.group({form0:this._formBuilder.group({firstname:["",[o.kI.required]],lastname:["",[o.kI.required]]}),form1:this._formBuilder.group({email:[""],phonenumber:[""]}),form2:this._formBuilder.group({username:["",[o.kI.required,o.kI.minLength(5),o.kI.pattern("^[a-z0-9._-]{5,20}$")]],password:["",[o.kI.required,o.kI.minLength(6)]]})}),this.form.get("form1").valueChanges.subscribe(()=>{this.form1Valid=this.form.get("form1").valid}),this.changeContact("vi"==this.translate.currentLang?"phone":"email")}ionViewDidEnter(){this.slides.lockSwipes(!0)}register(){let e={firstname:this.form.value.form0.firstname,lastname:this.form.value.form0.lastname,username:this.form.value.form2.username,email:this.form.value.form1.email,phonenumber:this.form.value.form1.phonenumber,password:this.form.value.form2.password,obj:"register",notMobile:!0,uuid:this.device.uuid,activeBy:this.activeBy};this.loadingFlag.setPending(!0),this.authService.register(e).subscribe(t=>{t.error?this.toastService.warning(t.message):(this.authService.setUserNotVerify({username:e.username,email:e.email}),this.toastService.warning(t.message),this.storage.set("registering",e),this.navController.setDirection("back"),this.router.navigateByUrl("auth/email-confirm")),this.loadingFlag.setResult(!0)},e=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}validateUsernameExistence(e){console.log(e),this.form.get("form2.username").valid&&this.reqAPIService.postNoneToken("/user/register-api",{data:e.target.value,obj:"u"}).subscribe(e=>{e.error?this.form.get("form2.username").setErrors({existence:!0}):this.form.get("form2.username").setErrors(null),this.form.get("form2").updateValueAndValidity()},e=>{console.log(e)})}validateEmailExistence(e){this.form.get("form1.email").valid&&this.reqAPIService.postNoneToken("/user/register-api",{data:e.target.value,obj:"e"}).subscribe(e=>{e.error?(console.log("E-mail"),this.form.get("form1.email").setErrors({existence:!0})):this.form.get("form1.email").setErrors(null),this.form.get("form1").updateValueAndValidity()},e=>{console.log(e)})}validatePhoneExistence(e){this.form.get("form1.phonenumber").valid&&this.reqAPIService.postNoneToken("/user/register-api",{data:e.target.value,obj:"p"}).subscribe(e=>{e.error?(console.log("Phonenumber"),this.form.get("form1.phonenumber").setErrors({existence:!0})):this.form.get("form1.phonenumber").setErrors(null),this.form.get("form1").updateValueAndValidity()},e=>{console.log(e)})}validatePassword(){this.form.get("form2.password").valid&&(this.form.get("form2.password"),this.form.get("form2.password").setErrors(null),this.form.get("form1").updateValueAndValidity())}changeContact(e){this.activeBy=e,this.form.get("form1").reset(),"email"===this.activeBy?(this.form.get("form1.email").setValidators([o.kI.required,o.kI.email]),this.form.get("form1.phonenumber").clearValidators(),this.form.get("form1.phonenumber").updateValueAndValidity()):(this.form.get("form1.phonenumber").setValidators([o.kI.required,o.kI.minLength(8),o.kI.maxLength(15),o.kI.pattern("^([+][1-9][0-9]*(([0-9]*)|-[0-9]*-))?[0]?[1-9][0-9- ]*$")]),this.form.get("form1.email").clearValidators(),this.form.get("form1.email").updateValueAndValidity()),this.form1Valid=!1}togglePassword(){this.showPassword?(this.passwordToggleIcon="eye-outline",this.showPassword=!1):(this.passwordToggleIcon="eye-off-outline",this.showPassword=!0)}retypeUsername(){this.form.get("form2.username").reset()}presentTerm(){return(0,u.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:w})).present()})}presentAlert(){return(0,u.mG)(this,void 0,void 0,function*(){let e,t;"phone"===this.activeBy?(e=this.form.value.form1.phonenumber,t=this.translate.instant("AUTH.CONFIRM_PHONE_RECEIVED_CODE")):(e=this.form.value.form1.email,t=this.translate.instant("AUTH.CONFIRM_EMAIL_RECEIVED_CODE")),yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("AUTH.NOTE"),subHeader:e,message:t,buttons:[{text:this.translate.instant("CANCEL"),role:"cancel",cssClass:"secondary"},{text:"Ok",handler:()=>{this.slides.lockSwipes(!1),this.slides.slideNext()}}]})).present()})}endView(){let e=this.autoCreatUserName();this.checkAutoName(e)}slideNext(){this.slides.lockSwipes(!1),this.slides.slideNext()}enterSlide(){this.slides.isEnd().then(e=>{1!=e&&this.slides.lockSwipes(!0)})}autoCreatUserName(){let e=[];if(e.push(this.removeAccents(this.form.value.form0.firstname)+this.removeAccents(this.form.value.form0.lastname)),e.push(this.removeAccents(this.form.value.form0.firstname)+"."+this.removeAccents(this.form.value.form0.lastname)),e.push(this.removeAccents(this.form.value.form0.lastname)+"."+this.removeAccents(this.form.value.form0.firstname)),console.log(this.form.value.form1.phonenumber),null!=this.form.value.form1.phonenumber&&""!=this.form.value.form1.phonenumber){const t=this.form.value.form1.phonenumber.replace(/\s/g,"").slice(-3);e.push(this.removeAccents(this.form.value.form0.firstname)+this.removeAccents(this.form.value.form0.lastname)+"."+t)}const t=Math.floor(900*Math.random()+100);return e.push(this.removeAccents(this.form.value.form0.firstname)+this.removeAccents(this.form.value.form0.lastname)+"."+t),e}removeAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0111/g,"d").replace(/\u0110/g,"D").replace(/\s/g,"").toLowerCase()}checkAutoName(e){this.reqAPIService.postNoneToken("/user/register-api",{data:e,obj:"ul"}).subscribe(e=>{if(e.error)return!1;e.data&&(this.recomnetUsernames=e.data,this.form.get("form2.username").setValue(e.data[0]),this.recomnetUsernamesFilter=this.recomnetUsernames.filter(t=>t!=e.data[0]))})}selectUsername(e){this.form.get("form2.username").setValue(e),this.recomnetUsernamesFilter=this.recomnetUsernames.filter(t=>t!=e)}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(o.qu),a.Y36(x.$),a.Y36(r.IN),a.Y36(s.F0),a.Y36(r.SH),a.Y36(p),a.Y36(c.e),a.Y36(Z.k),a.Y36(A.sK),a.Y36(r.Br),a.Y36(T.Ke))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-signup"]],viewQuery:function(e,t){if(1&e&&a.Gf(O,7),2&e){let e;a.iGM(e=a.CRH())&&(t.slides=e.first)}},decls:70,vars:48,consts:[["slot","start"],["text","","defaultHref","auth/login"],[3,"formGroup"],[3,"ionSlideReachEnd","ionSlideWillChange"],["slides",""],["formGroupName","form0",1,"w-100","ion-padding"],["lines","inset"],["position","floating"],["formControlName","firstname","type","text","inputmode","text"],["formControlName","lastname","type","text","inputmode","text"],["shape","round",1,"ion-margin",3,"disabled","click"],["slot","end","name","arrow-forward"],["formGroupName","form1",1,"w-100","ion-padding"],["lines","none",4,"ngIf"],["lines","inset",4,"ngIf"],["class","tip",4,"ngIf"],["shape","round",3,"disabled","click"],["class","float-change",4,"ngIf"],["formGroupName","form2",1,"w-100","ion-padding"],["color","primary",3,"click",4,"ngFor","ngForOf"],["formControlName","username","type","text","inputmode","text","debounce","300",1,"username",3,"ionChange"],["slot","end","name","backspace-outline",3,"click"],["formControlName","password","inputmode","password",3,"type","ionChange"],["slot","end",3,"name","click"],[1,"tip"],["name","dots",4,"ngIf"],[1,"ion-padding"],["shape","round","fill","clear",3,"click"],["slot","start","name","arrow-back"],["lines","none"],["color","danger"],["formControlName","email","type","email","inputmode","email","debounce","300",3,"ionChange"],["formControlName","phonenumber","type","tel","inputmode","tel","debounce","300",3,"ionChange"],[1,"float-change"],[4,"ngIf"],[3,"click"],[1,"ion-text-wrap"],["color","primary",3,"click"],["name","dots"]],template:function(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a._UZ(3,"ion-back-button",1),a.qZA(),a.TgZ(4,"ion-title"),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"ion-content",2),a.TgZ(8,"ion-slides",3,4),a.NdJ("ionSlideReachEnd",function(){return t.endView()})("ionSlideWillChange",function(){return t.enterSlide()}),a.TgZ(10,"ion-slide"),a.TgZ(11,"div",5),a.TgZ(12,"ion-item",6),a.TgZ(13,"ion-label",7),a._uU(14),a.ALo(15,"translate"),a.qZA(),a._UZ(16,"ion-input",8),a.qZA(),a.TgZ(17,"ion-item",6),a.TgZ(18,"ion-label",7),a._uU(19),a.ALo(20,"translate"),a.qZA(),a._UZ(21,"ion-input",9),a.qZA(),a.TgZ(22,"ion-button",10),a.NdJ("click",function(){return t.slideNext()}),a._uU(23),a.ALo(24,"translate"),a._UZ(25,"ion-icon",11),a.qZA(),a.qZA(),a.qZA(),a.TgZ(26,"ion-slide"),a.TgZ(27,"div",12),a.YNc(28,U,6,3,"ion-item",13),a.YNc(29,C,6,3,"ion-item",13),a.YNc(30,N,4,0,"ion-item",14),a.YNc(31,E,5,3,"ion-item",14),a.YNc(32,I,3,3,"p",15),a.YNc(33,S,3,3,"p",15),a.TgZ(34,"ion-button",16),a.NdJ("click",function(){return t.presentAlert()}),a._uU(35),a.ALo(36,"translate"),a._UZ(37,"ion-icon",11),a.qZA(),a.qZA(),a.YNc(38,L,3,2,"div",17),a.qZA(),a.TgZ(39,"ion-slide"),a.TgZ(40,"div",18),a.YNc(41,y,6,3,"ion-item",13),a.YNc(42,M,6,3,"ion-item",13),a.YNc(43,R,6,3,"ion-item",13),a.TgZ(44,"div"),a.YNc(45,J,3,1,"ion-chip",19),a.qZA(),a.TgZ(46,"ion-item",6),a.TgZ(47,"ion-label"),a._uU(48),a.ALo(49,"translate"),a.qZA(),a.TgZ(50,"ion-input",20),a.NdJ("ionChange",function(e){return t.validateUsernameExistence(e)}),a.qZA(),a.TgZ(51,"ion-icon",21),a.NdJ("click",function(){return t.retypeUsername()}),a.qZA(),a.qZA(),a.TgZ(52,"ion-item",6),a.TgZ(53,"ion-label"),a._uU(54),a.ALo(55,"translate"),a.qZA(),a.TgZ(56,"ion-input",22),a.NdJ("ionChange",function(){return t.validatePassword()}),a.qZA(),a.TgZ(57,"ion-icon",23),a.NdJ("click",function(){return t.togglePassword()}),a.qZA(),a.qZA(),a.TgZ(58,"p",24),a._uU(59),a.ALo(60,"translate"),a.qZA(),a.YNc(61,H,1,0,"ion-spinner",25),a.TgZ(62,"div",26),a.TgZ(63,"ion-button",27),a.NdJ("click",function(){return a.CHM(e),a.MAs(9).slidePrev()}),a._UZ(64,"ion-icon",28),a._uU(65),a.ALo(66,"translate"),a.qZA(),a.TgZ(67,"ion-button",16),a.NdJ("click",function(){return t.register()}),a._uU(68),a.ALo(69,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}2&e&&(a.xp6(5),a.Oqu(a.lcZ(6,28,"AUTH.SIGNUP")),a.xp6(2),a.Q6J("formGroup",t.form),a.xp6(7),a.Oqu(a.lcZ(15,30,"AUTH.FIRSTNAME")),a.xp6(5),a.Oqu(a.lcZ(20,32,"AUTH.LASTNAME")),a.xp6(3),a.Q6J("disabled",t.form.controls.form0.invalid),a.xp6(1),a.hij(" ",a.lcZ(24,34,"NEXT")," "),a.xp6(5),a.Q6J("ngIf",t.form.get("form1.email").hasError("existence")),a.xp6(1),a.Q6J("ngIf",t.form.get("form1.phonenumber").hasError("existence")),a.xp6(1),a.Q6J("ngIf","email"==t.activeBy),a.xp6(1),a.Q6J("ngIf","phone"==t.activeBy),a.xp6(1),a.Q6J("ngIf","email"==t.activeBy),a.xp6(1),a.Q6J("ngIf","phone"==t.activeBy),a.xp6(1),a.Q6J("disabled",!t.form1Valid),a.xp6(1),a.hij(" ",a.lcZ(36,36,"NEXT")," "),a.xp6(3),a.Q6J("ngIf","vi"==t.translate.currentLang),a.xp6(3),a.Q6J("ngIf",t.form.get("form2.username").hasError("existence")),a.xp6(1),a.Q6J("ngIf",t.form.get("form2.username").hasError("pattern")),a.xp6(1),a.Q6J("ngIf",t.form.get("form2.password").hasError("weak")),a.xp6(2),a.Q6J("ngForOf",t.recomnetUsernamesFilter),a.xp6(3),a.hij("",a.lcZ(49,38,"AUTH.USER_NAME"),":"),a.xp6(6),a.hij("",a.lcZ(55,40,"AUTH.PASSWORD"),":"),a.xp6(2),a.Q6J("type",t.showPassword?"text":"password"),a.xp6(1),a.Q6J("name",t.passwordToggleIcon),a.xp6(2),a.hij(" ",a.lcZ(60,42,"AUTH.PASSWWORD_MUST_MORE_6_CHARACTERS")," "),a.xp6(2),a.Q6J("ngIf",t.loadingFlag.pending),a.xp6(4),a.hij(" ",a.lcZ(66,44,"BACK")," "),a.xp6(2),a.Q6J("disabled",t.form.invalid||t.loadingFlag.pending),a.xp6(1),a.hij(" ",a.lcZ(69,46,"CONFIRM")," "))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,o.JL,o.sg,r.Hr,r.A$,o.x0,r.Ie,r.Q$,r.pK,r.j9,o.JJ,o.u,r.YG,r.gu,i.O5,i.sg,r.yW,r.hM,r.PQ],pipes:[A.X$],styles:["[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .w-100[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .tip[_ngcontent-%COMP%]{font-size:.6em;font-style:italic;padding:10px}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .p-info[_ngcontent-%COMP%]{padding:5px 0}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-weight:bold}[_nghost-%COMP%]   ion-slides[_ngcontent-%COMP%]   .float-change[_ngcontent-%COMP%]{width:80%;position:absolute;bottom:0;text-align:center}"]}),e})();function Y(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Oqu(null==e.user?null:e.user.lastname)}}function Q(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Oqu(null==e.user?null:e.user.firstname)}}function B(e,t){if(1&e&&(a.TgZ(0,"p"),a._uU(1),a.ALo(2,"translate"),a.TgZ(3,"b"),a._uU(4),a.qZA(),a._uU(5),a.ALo(6,"translate"),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij("",a.lcZ(2,3,"AUTH.YOU_NEED_TO_CHECK_YOUR_EMAIL")," "),a.xp6(3),a.Oqu(null==e.user?null:e.user.email),a.xp6(1),a.hij(", ",a.lcZ(6,5,"AUTH.TO_GET_THE_VERIFICATION_CODE"),"")}}function D(e,t){if(1&e&&(a.TgZ(0,"p"),a._uU(1),a.ALo(2,"translate"),a.TgZ(3,"b"),a._uU(4),a.qZA(),a._uU(5),a.ALo(6,"translate"),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij("",a.lcZ(2,3,"AUTH.A_CODE_HAS_JUST_BEEN_SENT_TO")," "),a.xp6(3),a.Oqu(null==e.user?null:e.user.phonenumber),a.xp6(1),a.hij(" ",a.lcZ(6,5,"AUTH.ENTER_IT_HERE"),"")}}function V(e,t){1&e&&(a.TgZ(0,"div"),a._UZ(1,"ion-spinner",11),a.qZA())}function G(e,t){if(1&e&&(a.TgZ(0,"p"),a.TgZ(1,"ion-text",12),a._uU(2),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Oqu(e.message)}}function j(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.hij("",e.timeLeft," \xa0")}}function W(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",13),a.TgZ(1,"ion-button",14),a.NdJ("click",function(){return a.CHM(e),a.oxw().resendCode()}),a.YNc(2,j,2,1,"span",6),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(1),a.Q6J("disabled",e.timeLeft>0),a.xp6(1),a.Q6J("ngIf",e.timeLeft>0),a.xp6(1),a.Oqu(a.lcZ(4,3,"AUTH.REQUEST_RESEND_CODE"))}}let K=(()=>{class e{constructor(e,t,n,i,s,r){this._authService=e,this.toastService=t,this.router=n,this.navController=i,this.translate=s,this.storage=r,this.code=new o.NI("",[o.kI.required,o.kI.maxLength(4)]),this.loadingFlag=new g.E,this.timeLeft=30,this.requestResend=!1,this.requestFlag=new g.E}ngOnInit(){this.storage.get("registering").then(e=>{this.user=e})}ionViewDidEnter(){this.storage.get("registering").then(e=>{this.user=e}),this.startTimer()}onSubmit(){this.message=null;let e={code:this.code.value,email:this.user.email,phonenumber:this.user.phonenumber,activeBy:this.user.activeBy};this.loadingFlag.setPending(!0),this._authService.reqVerifyByCode(e).subscribe(e=>{1==e.status?(this.toastService.success(e.message),this.onLogin()):(this.message=e.message,this.toastService.warning(e.message)),this.loadingFlag.setResult(!0)},()=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}startTimer(){this.interval=setInterval(()=>{this.timeLeft>0&&this.timeLeft--},1e3)}resendCode(){this._authService.requestResendOTP(this.user.phonenumber).subscribe(e=>{this.requestResend=!0,1==e.status?this.toastService.success("Farmext \u0111\xe3 g\u1eedi l\u1ea1i m\xe3 x\xe1c th\u1ef1c v\xe0o s\u1ed1 "+this.user.phonenumber):(this.message=e.message,this.toastService.warning(this.message))})}onLogin(){this.requestFlag.setPending(!0),this.message=null,this._authService.reqLogin({username:this.user.username,password:this.user.password}).subscribe(e=>{if(1==e.error)this.message=e.message,this.toastService.warning(this.message);else{this._authService.setUser({id:e.data.user.user_id,username:e.data.user.user_name,first_name:e.data.user.first_name,last_name:e.data.user.last_name,email:e.data.user.user_email,photo:e.data.user.user_photo,permission:e.data.user.permission,token:e.data.token}),this.storage.remove("registering");let t=this._authService.redirectUrl?this.router.parseUrl(this._authService.redirectUrl):"/home";this.router.navigateByUrl(t)}this.requestFlag.setResult(!0)},()=>{this.requestFlag.setResult(!1),this.message=this.translate.instant("ERROR_CONNECT")})}cancelActive(){this.storage.remove("registering"),this.toastService.warning(this.translate.instant("AUTH.CANCELED_ACTIVE")),this.router.navigateByUrl("/auth/login")}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.e),a.Y36(Z.k),a.Y36(s.F0),a.Y36(r.SH),a.Y36(A.sK),a.Y36(T.Ke))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-email-confirm"]],decls:30,vars:21,consts:[["slot","start"],["text","","defaultHref","auth/login"],["slot","end"],["color","danger",3,"click"],[1,"ion-text-center","ion-padding"],[1,"title","ion-padding"],[4,"ngIf"],["lines","none",1,"ion-text-center"],["required","",1,"l-r",3,"placeholder","formControl"],["shape","round",3,"disabled","click"],["class","ion-text-center bt",4,"ngIf"],["name","dots"],["color","danger"],[1,"ion-text-center","bt"],["shape","round","fill","clear","size","small",3,"disabled","click"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a._UZ(3,"ion-back-button",1),a.qZA(),a.TgZ(4,"ion-title"),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.TgZ(7,"ion-buttons",2),a.TgZ(8,"ion-button",3),a.NdJ("click",function(){return t.cancelActive()}),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"ion-content"),a.TgZ(12,"div",4),a.TgZ(13,"h1",5),a.TgZ(14,"small"),a._uU(15,"Hi "),a.qZA(),a.YNc(16,Y,2,1,"span",6),a.YNc(17,Q,2,1,"span",6),a._uU(18,"! "),a.qZA(),a.YNc(19,B,7,7,"p",6),a.YNc(20,D,7,7,"p",6),a.TgZ(21,"ion-item",7),a._UZ(22,"ion-input",8),a.ALo(23,"translate"),a.qZA(),a.YNc(24,V,2,0,"div",6),a.YNc(25,G,3,1,"p",6),a.TgZ(26,"ion-button",9),a.NdJ("click",function(){return t.onSubmit()}),a._uU(27),a.ALo(28,"translate"),a.qZA(),a.qZA(),a.YNc(29,W,5,5,"div",10),a.qZA()),2&e&&(a.xp6(5),a.Oqu(a.lcZ(6,13,"AUTH.VERIFY")),a.xp6(4),a.Oqu(a.lcZ(10,15,"AUTH.CANCEL_ACTIVE")),a.xp6(7),a.Q6J("ngIf","vi"==t.translate.currentLang),a.xp6(1),a.Q6J("ngIf","en"==t.translate.currentLang),a.xp6(2),a.Q6J("ngIf","email"==(null==t.user?null:t.user.activeBy)),a.xp6(1),a.Q6J("ngIf","phone"==(null==t.user?null:t.user.activeBy)),a.xp6(2),a.Q6J("placeholder",a.lcZ(23,17,"AUTH.VERIFICATION_CODE"))("formControl",t.code),a.xp6(2),a.Q6J("ngIf",t.loadingFlag.pending),a.xp6(1),a.Q6J("ngIf",t.message),a.xp6(1),a.Q6J("disabled",t.code.invalid||t.loadingFlag.pending),a.xp6(1),a.hij("",a.lcZ(28,19,"CONFIRM")," "),a.xp6(2),a.Q6J("ngIf","phone"==(null==t.user?null:t.user.activeBy)&&0==t.requestResend))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.YG,r.W2,i.O5,r.Ie,r.pK,r.j9,o.Q7,o.JJ,o.oH,r.PQ,r.yW],pipes:[A.X$],styles:["[_nghost-%COMP%]   .bt[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}"]}),e})();function X(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-button",6),a.NdJ("click",function(){return a.CHM(e),a.oxw().changeActive("phone")}),a._uU(1,"SMS"),a.qZA()}}function z(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-button",6),a.NdJ("click",function(){return a.CHM(e),a.oxw().changeActive("email")}),a._uU(1,"Email"),a.qZA()}}function $(e,t){1&e&&a._UZ(0,"ion-spinner",10)}function ee(e,t){if(1&e&&(a.TgZ(0,"div",7),a.TgZ(1,"p",11),a.TgZ(2,"ion-text",12),a._uU(3),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(3),a.Oqu(e.message)}}function te(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"ion-item"),a._UZ(2,"ion-input",13),a.qZA(),a.TgZ(3,"div",14),a.TgZ(4,"ion-button",15),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).onSubmit()}),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(2),a.Q6J("formControl",e.emailForm),a.xp6(2),a.Q6J("disabled",e.emailForm.invalid||e.reqLoading.pending),a.xp6(1),a.hij(" ",a.lcZ(6,3,"AUTH.SEND_CONFIRM_MAIL"),"")}}function ne(e,t){if(1&e&&(a.TgZ(0,"div",7),a.TgZ(1,"h1"),a._UZ(2,"ion-icon",16),a.qZA(),a.TgZ(3,"i",11),a._uU(4),a.ALo(5,"translate"),a.qZA(),a._UZ(6,"br"),a.TgZ(7,"strong"),a._uU(8),a.qZA(),a.TgZ(9,"p"),a._uU(10),a.ALo(11,"translate"),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(4),a.Oqu(a.lcZ(5,3,"AUTH.PLEASE_CHECK_MAIL")),a.xp6(4),a.Oqu(e.emailForm.value),a.xp6(2),a.Oqu(a.lcZ(11,5,"AUTH.AND_RECEIVE_PASS"))}}function ie(e,t){if(1&e&&(a.TgZ(0,"div"),a.TgZ(1,"div",7),a.TgZ(2,"h1"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"p"),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.YNc(8,$,1,0,"ion-spinner",8),a.qZA(),a.YNc(9,ee,4,1,"div",9),a.YNc(10,te,7,5,"div",5),a.YNc(11,ne,12,7,"div",9),a.qZA()),2&e){const e=a.oxw();a.xp6(3),a.Oqu(a.lcZ(4,6,"AUTH.FORGOT_PASSWORD")),a.xp6(3),a.Oqu(a.lcZ(7,8,"AUTH.SYSTEM_SEND")),a.xp6(2),a.Q6J("ngIf",e.reqLoading.pending),a.xp6(1),a.Q6J("ngIf",e.message),a.xp6(1),a.Q6J("ngIf",!e.complete),a.xp6(1),a.Q6J("ngIf",e.complete)}}function oe(e,t){1&e&&a._UZ(0,"ion-spinner",10)}function se(e,t){if(1&e&&(a.TgZ(0,"div",7),a.TgZ(1,"p",11),a.TgZ(2,"ion-text",12),a._uU(3),a.qZA(),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(3),a.Oqu(e.message)}}function re(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"ion-item"),a._UZ(2,"ion-input",17),a.ALo(3,"translate"),a.qZA(),a.TgZ(4,"div",14),a.TgZ(5,"ion-button",15),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).onSubmitByPhone()}),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(2),a.Q6J("formControl",e.telForm)("placeholder",a.lcZ(3,4,"AUTH.PHONE_NUMBER")),a.xp6(3),a.Q6J("disabled",e.telForm.invalid||e.reqLoading.pending),a.xp6(1),a.hij(" ",a.lcZ(7,6,"AUTH.SEND_CONFIRM_PHONE"),"")}}function ae(e,t){if(1&e&&(a.TgZ(0,"div"),a.TgZ(1,"div",7),a.TgZ(2,"h1"),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"p"),a._uU(6),a.ALo(7,"translate"),a.qZA(),a.YNc(8,oe,1,0,"ion-spinner",8),a.qZA(),a.YNc(9,se,4,1,"div",9),a.YNc(10,re,8,8,"div",5),a.qZA()),2&e){const e=a.oxw();a.xp6(3),a.Oqu(a.lcZ(4,5,"AUTH.FORGOT_PASSWORD")),a.xp6(3),a.Oqu(a.lcZ(7,7,"AUTH.SYSTEM_SEND_SMS")),a.xp6(2),a.Q6J("ngIf",e.reqLoading.pending),a.xp6(1),a.Q6J("ngIf",e.message),a.xp6(1),a.Q6J("ngIf",!e.complete)}}let le=(()=>{class e{constructor(e,t,n,i){this.authenService=e,this.translate=t,this.router=n,this.navController=i,this.reqLoading=new g.E,this.message="",this.complete=!1,this.activeBy="email",this.emailForm=new o.NI("",[o.kI.required,o.kI.email]),this.telForm=new o.NI("",[o.kI.required,o.kI.minLength(8),o.kI.maxLength(15)])}ngOnInit(){}onSubmit(){this.reqLoading.setPending(!0),this.authenService.requestResetPasswordByEmail(this.emailForm.value).subscribe(e=>{1==e.status?(this.message=e.message,this.complete=!0):this.message=e.message,this.reqLoading.setResult(!0)},()=>{this.message=this.translate.instant("ERROR_CONNECT"),this.reqLoading.setResult(!1)})}onSubmitByPhone(){this.reqLoading.setPending(!0),this.authenService.requestResetPasswordByPhone(this.telForm.value).subscribe(e=>{1==e.status?(this.message=e.message,this.complete=!0,this.authenService.userTemp=e.data,this.navController.setDirection("back"),this.router.navigateByUrl("auth/set-password")):this.message=e.message,this.reqLoading.setResult(!0)},()=>{this.message=this.translate.instant("ERROR_CONNECT"),this.reqLoading.setResult(!1)})}changeActive(e){this.activeBy=e}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.e),a.Y36(A.sK),a.Y36(s.F0),a.Y36(r.SH))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-forgot-password"]],decls:13,vars:7,consts:[["slot","start"],["text","","defaultHref","tabs/management"],["slot","end"],[3,"click",4,"ngIf"],[1,"ion-padding"],[4,"ngIf"],[3,"click"],[1,"ion-text-center"],["slot","start","name","dots",4,"ngIf"],["class","ion-text-center",4,"ngIf"],["slot","start","name","dots"],[1,"sm-text"],["color","danger"],["type","email","inputmode","email","placeholder","Email","autofocus","",3,"formControl"],[1,"ion-padding","ion-text-center"],["shape","round",3,"disabled","click"],["name","checkmark","color","success"],["type","tel","inputmode","tel","autofocus","",3,"formControl","placeholder"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a._UZ(3,"ion-back-button",1),a.qZA(),a.TgZ(4,"ion-title"),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.TgZ(7,"ion-buttons",2),a.YNc(8,X,2,0,"ion-button",3),a.YNc(9,z,2,0,"ion-button",3),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"ion-content",4),a.YNc(11,ie,12,10,"div",5),a.YNc(12,ae,11,9,"div",5),a.qZA()),2&e&&(a.xp6(5),a.Oqu(a.lcZ(6,5,"AUTH.CONFIRM")),a.xp6(3),a.Q6J("ngIf","email"==t.activeBy),a.xp6(1),a.Q6J("ngIf","phone"==t.activeBy),a.xp6(2),a.Q6J("ngIf","email"==t.activeBy),a.xp6(1),a.Q6J("ngIf","phone"==t.activeBy))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,i.O5,r.W2,r.YG,r.PQ,r.yW,r.Ie,r.pK,r.j9,o.JJ,o.oH,r.gu],pipes:[A.X$],styles:[""]}),e})();const ue=["slides"];function ce(e,t){1&e&&(a.TgZ(0,"ion-item",15),a.TgZ(1,"ion-label"),a.TgZ(2,"p"),a.TgZ(3,"ion-text",16),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.Oqu(a.lcZ(5,1,"AUTH.PASSWORD_IS_WEAK")))}let ge=(()=>{class e{constructor(e,t,n,i){this._authService=e,this.translate=t,this.toastService=n,this.router=i,this.code=new o.NI("",[o.kI.required,o.kI.minLength(4),o.kI.maxLength(4)]),this.password=new o.NI("",[o.kI.required,o.kI.minLength(6)]),this.showPassword=!0,this.passwordToggleIcon="eye-off-outline",this.reqLoading=new g.E,this.requestFlag=new g.E,this.message="",this.username=""}ngOnInit(){}togglePassword(){this.showPassword?(this.passwordToggleIcon="eye-outline",this.showPassword=!1):(this.passwordToggleIcon="eye-off-outline",this.showPassword=!0)}validateCode(){void 0!==this._authService.userTemp?(this.username=this._authService.userTemp.username,this._authService.validateResetPasswordCode({username:this._authService.userTemp.username,code:this.code.value}).subscribe(e=>{1==e.status?this.slides.slideNext():this.toastService.warning(e.message)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT")),this.reqLoading.setResult(!1)})):this.toastService.warning(this.translate.instant("AUTH.UNDEFINED_USER"))}setNewPassword(){if(void 0===this._authService.userTemp)return void this.toastService.warning(this.translate.instant("AUTH.UNDEFINED_USER"));let e={username:this._authService.userTemp.username,code:this.code.value,password:this.password.value};this._authService.resetPasswordCode(e).subscribe(t=>{1==t.status?(this.toastService.warning(t.message),this.onLogin(e.username,e.password)):this.toastService.warning(t.message)},()=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT")),this.reqLoading.setResult(!1)})}onLogin(e,t){this.requestFlag.setPending(!0),this.message=null,this._authService.reqLogin({username:e,password:t}).subscribe(e=>{if(1==e.error)this.message=e.message,this.toastService.warning(this.message);else{this._authService.setUser({id:e.data.user.user_id,username:e.data.user.user_name,first_name:e.data.user.first_name,last_name:e.data.user.last_name,email:e.data.user.user_email,photo:e.data.user.user_photo,permission:e.data.user.permission,token:e.data.token});let t=this._authService.redirectUrl?this.router.parseUrl(this._authService.redirectUrl):"/home";this.router.navigateByUrl(t)}this.requestFlag.setResult(!0)},()=>{this.requestFlag.setResult(!1),this.message="Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i"})}validatePassword(){if(this.password.valid){let e=this.password.value,t=[],n=!1;for(let o=0;o<e.length;o++)1+parseInt(e.charAt(o))==e.charAt(o+1)?t.push(!0):t.push(!1);let i=0;t.forEach((e,t)=>{e?(i++,i>=5&&(n=!0)):i=0}),e===this.username&&(n=!0),this.password.setErrors(n?{weak:!0}:null)}}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.e),a.Y36(A.sK),a.Y36(Z.k),a.Y36(s.F0))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-set-password"]],viewQuery:function(e,t){if(1&e&&a.Gf(ue,7),2&e){let e;a.iGM(e=a.CRH())&&(t.slides=e.first)}},decls:41,vars:29,consts:[["slot","start"],["text","","defaultHref","tabs/management"],["slides",""],[1,"w-100","ion-padding"],[1,"ion-text-center"],["lines","none",1,"ion-text-center"],["required","",1,"l-r",3,"placeholder","formControl"],["shape","round","maxlength","4","minlength","4","type","number","inputmode","numeric",1,"ion-margin",3,"disabled","click"],["slot","end","name","arrow-forward"],[1,"ion-text-center","ion-padding"],["lines","none",4,"ngIf"],["lines","inset"],["inputmode","password",3,"formControl","type","ionChange"],["slot","end",3,"name","click"],["shape","round",1,"ion-margin",3,"disabled","click"],["lines","none"],["color","danger"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a._UZ(3,"ion-back-button",1),a.qZA(),a.TgZ(4,"ion-title"),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"ion-content"),a.TgZ(8,"ion-slides",null,2),a.TgZ(10,"ion-slide"),a.TgZ(11,"div",3),a.TgZ(12,"div",4),a.TgZ(13,"p"),a._uU(14),a.ALo(15,"translate"),a.qZA(),a.qZA(),a.TgZ(16,"ion-item",5),a._UZ(17,"ion-input",6),a.ALo(18,"translate"),a.qZA(),a.TgZ(19,"ion-button",7),a.NdJ("click",function(){return t.validateCode()}),a._uU(20),a.ALo(21,"translate"),a._UZ(22,"ion-icon",8),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"ion-slide"),a.TgZ(24,"div",3),a.TgZ(25,"div",9),a._uU(26),a.ALo(27,"translate"),a.TgZ(28,"b"),a._uU(29),a.qZA(),a._uU(30,"? "),a.qZA(),a.YNc(31,ce,6,3,"ion-item",10),a.TgZ(32,"ion-item",11),a.TgZ(33,"ion-label"),a._uU(34),a.ALo(35,"translate"),a.qZA(),a.TgZ(36,"ion-input",12),a.NdJ("ionChange",function(){return t.validatePassword()}),a.qZA(),a.TgZ(37,"ion-icon",13),a.NdJ("click",function(){return t.togglePassword()}),a.qZA(),a.qZA(),a.TgZ(38,"ion-button",14),a.NdJ("click",function(){return t.setNewPassword()}),a._uU(39),a.ALo(40,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(5),a.Oqu(a.lcZ(6,15,"AUTH.CONFIRM")),a.xp6(9),a.Oqu(a.lcZ(15,17,"AUTH.CHECK YOUR_PHONE")),a.xp6(3),a.Q6J("placeholder",a.lcZ(18,19,"AUTH.VERIFICATION_CODE"))("formControl",t.code),a.xp6(2),a.Q6J("disabled",t.code.invalid),a.xp6(1),a.hij(" ",a.lcZ(21,21,"NEXT")," "),a.xp6(6),a.hij(" ",a.lcZ(27,23,"AUTH.ARE_YOU_SURE_SET_NEW_PW_FOR")," "),a.xp6(3),a.Oqu(t.username),a.xp6(2),a.Q6J("ngIf",t.password.hasError("weak")),a.xp6(3),a.hij("",a.lcZ(35,25,"AUTH.PASSWORD"),":"),a.xp6(2),a.Q6J("formControl",t.password)("type",t.showPassword?"text":"password"),a.xp6(1),a.Q6J("name",t.passwordToggleIcon),a.xp6(1),a.Q6J("disabled",t.password.invalid||t.requestFlag.pending),a.xp6(1),a.hij(" ",a.lcZ(40,27,"CONFIRM")," "))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.W2,r.Hr,r.A$,r.Ie,r.pK,r.j9,o.Q7,o.JJ,o.oH,r.YG,r.gu,i.O5,r.Q$,r.yW],pipes:[A.X$],styles:[""]}),e})();function he(e,t){1&e&&(a.TgZ(0,"div"),a._UZ(1,"ion-spinner",12),a.qZA())}function de(e,t){if(1&e&&(a.TgZ(0,"p"),a.TgZ(1,"ion-text",13),a._uU(2),a.qZA(),a.qZA()),2&e){const e=a.oxw();a.xp6(2),a.Oqu(e.message)}}function me(e,t){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.hij("",e.timeLeft," \xa0")}}function pe(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",14),a.TgZ(1,"ion-button",15),a.NdJ("click",function(){return a.CHM(e),a.oxw().resendCode()}),a.YNc(2,me,2,1,"span",9),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(1),a.Q6J("disabled",e.timeLeft>0),a.xp6(1),a.Q6J("ngIf",e.timeLeft>0),a.xp6(1),a.Oqu(a.lcZ(4,3,"AUTH.REQUEST_RESEND_CODE"))}}const fe=[{path:"",component:l},{path:"login",component:b},{path:"signup",component:F},{path:"forgot",component:le},{path:"email-confirm",component:K},{path:"phone-confirm",component:(()=>{class e{constructor(e,t,n,i,s,r){this._authService=e,this.toastService=t,this.router=n,this.navController=i,this.translate=s,this.storage=r,this.code=new o.NI("",[o.kI.required,o.kI.minLength(4),o.kI.maxLength(4),o.kI.pattern("^[0-9]{4}$")]),this.loadingFlag=new g.E,this.timeLeft=30,this.requestResend=!1,this.requestFlag=new g.E,this.code.valueChanges.subscribe(()=>{console.log(this.code.valid),this.code.valid&&this.onSubmit()})}ngOnInit(){this.storage.get("phoneOTP").then(e=>{this.phone=e})}ionViewDidEnter(){this.storage.get("phoneOTP").then(e=>{this.phone=e}),this.startTimer()}onSubmit(){console.log("on submit"),this.message=null;let e={code:this.code.value,phone:this.phone};this.loadingFlag.setPending(!0),this._authService.reqAuthValidateOTPCode(e).subscribe(e=>{if(1==e.status)if(void 0!==e.data){this._authService.setUser({id:e.data.user.user_id,username:e.data.user.user_name,first_name:e.data.user.first_name,last_name:e.data.user.last_name,email:e.data.user.user_email,photo:e.data.user.user_photo,permission:e.data.user.permission,token:e.data.token}),this.storage.remove("phoneOTP");let t=this._authService.redirectUrl?this.router.parseUrl(this._authService.redirectUrl):"/tabs/management";this.router.navigateByUrl(t)}else this.toastService.warning(e.message);else this.message=e.message,this.toastService.warning(e.message);this.loadingFlag.setResult(!0),console.log(this.loadingFlag.pending)},()=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}startTimer(){this.interval=setInterval(()=>{this.timeLeft>0&&this.timeLeft--},1e3)}resendCode(){this._authService.reqAuthResendOTPCode({phone:this.phone}).subscribe(e=>{this.requestResend=!0,1==e.status?this.toastService.success("Farmext \u0111\xe3 g\u1eedi l\u1ea1i m\xe3 OTP v\xe0o s\u1ed1 "+this.phone):(this.message=e.message,this.toastService.warning(this.message))})}cancelActive(){this.storage.remove("registering"),this.toastService.warning(this.translate.instant("AUTH.CANCELED_ACTIVE")),this.router.navigateByUrl("/auth/login")}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.e),a.Y36(Z.k),a.Y36(s.F0),a.Y36(r.SH),a.Y36(A.sK),a.Y36(T.Ke))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-phone-confirm"]],decls:30,vars:21,consts:[["slot","start"],["text","","defaultHref","auth/login"],["slot","end"],["color","danger",3,"click"],[1,"ion-text-center","ion-padding"],[1,"title"],[1,"text-sm"],["lines","none",1,"ion-text-center"],["required","","inputmode","numeric","autocomplete","one-time-code","size","4",1,"l-r","input-code",3,"placeholder","formControl"],[4,"ngIf"],["shape","round",3,"disabled","click"],["class","ion-text-center bt",4,"ngIf"],["name","dots"],["color","danger"],[1,"ion-text-center","bt"],["shape","round","fill","clear","size","small",3,"disabled","click"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",0),a._UZ(3,"ion-back-button",1),a.qZA(),a.TgZ(4,"ion-title"),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.TgZ(7,"ion-buttons",2),a.TgZ(8,"ion-button",3),a.NdJ("click",function(){return t.cancelActive()}),a._uU(9),a.ALo(10,"translate"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"ion-content"),a.TgZ(12,"div",4),a.TgZ(13,"h4",5),a.TgZ(14,"small"),a._uU(15,"Nh\u1eadp m\xe3 x\xe1c th\u1ef1c OTP"),a.qZA(),a.qZA(),a.TgZ(16,"p",6),a._uU(17),a.ALo(18,"translate"),a.TgZ(19,"b"),a._uU(20),a.qZA(),a.qZA(),a.TgZ(21,"ion-item",7),a._UZ(22,"ion-input",8),a.ALo(23,"translate"),a.qZA(),a.YNc(24,he,2,0,"div",9),a.YNc(25,de,3,1,"p",9),a.TgZ(26,"ion-button",10),a.NdJ("click",function(){return t.onSubmit()}),a._uU(27),a.ALo(28,"translate"),a.qZA(),a.qZA(),a.YNc(29,pe,5,5,"div",11),a.qZA()),2&e&&(a.xp6(5),a.Oqu(a.lcZ(6,11,"AUTH.VERIFY")),a.xp6(4),a.Oqu(a.lcZ(10,13,"AUTH.CANCEL_ACTIVE")),a.xp6(8),a.hij("",a.lcZ(18,15,"AUTH.A_CODE_HAS_JUST_BEEN_SENT_TO")," "),a.xp6(3),a.Oqu(t.phone),a.xp6(2),a.Q6J("placeholder",a.lcZ(23,17,"AUTH.VERIFICATION_CODE"))("formControl",t.code),a.xp6(2),a.Q6J("ngIf",t.loadingFlag.pending),a.xp6(1),a.Q6J("ngIf",t.message),a.xp6(1),a.Q6J("disabled",t.code.invalid||t.loadingFlag.pending),a.xp6(1),a.hij("",a.lcZ(28,19,"CONFIRM")," "),a.xp6(2),a.Q6J("ngIf",0==t.requestResend))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,r.YG,r.W2,r.Ie,r.pK,r.j9,o.Q7,o.JJ,o.oH,i.O5,r.PQ,r.yW],pipes:[A.X$],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: #e3f4fd url(/assets/img/background.svg) bottom center no-repeat !important}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent!important}[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--background: #fff;border-radius:10px}[_nghost-%COMP%]   .text-sm[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .bt[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:bold}"]}),e})()},{path:"set-password",component:ge}];let Ze=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[p,f],imports:[[i.ez,o.u5,r.Pc,o.UX,d.Tn,s.Bz.forChild(fe),A.aw.forChild()]]}),e})()},27887:function(e,t,n){n.d(t,{E:function(){return i}});class i{constructor(){this.start=null,this.end=null,this.pending=null,this.result=null,this.count=0}setStart(e){this.start=e,!0===e&&(this.pending=!0,this.end=!1),this.result=null,this.count++}setPending(e){this.pending=e,!1===e?this.start=!1:this.end=!0}setResult(e){this.result=e,this.pending=!1,this.start=!1,this.end=!0}}}}]);