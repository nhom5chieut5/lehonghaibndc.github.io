!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[2652],{51937:function(t,i,o){o.d(i,{D:function(){return l}});var r,a=o(76329),s=o(15189),c=o(88002),u=o(37716),l=((r=function(){function t(n){e(this,t),this.reqAPIService=n,this.urlApi="/manager/farm-api",this.urlApiAdress="/manager/address-api",this.reload$=new a.BehaviorSubject(0),this.numberOfPonds=0}return n(t,[{key:"setCode",value:function(e){this.fcode=e}},{key:"setFarm",value:function(e){this.farm=e,this.permission=e.permission}},{key:"loadPonds",value:function(){return this.reqAPIService.get("/manager/farm-api-mobie?fcode="+this.fcode+"&action=get-item-pond").pipe((0,c.U)(function(e){return e}))}},{key:"listAddress",value:function(e){return this.reqAPIService.get(this.urlApiAdress+"?action=listUnit&id="+e)}},{key:"loadFarm",value:function(){var e=this;return this.reqAPIService.get("/manager/farm-api-info?fcode="+this.fcode).pipe((0,c.U)(function(t){return e.setFarm(t.data),t}))}},{key:"getSeting",value:function(){return this.reqAPIService.get("/manager/farm-api-mobie?action=get-farm-setting&fcode="+this.fcode).pipe((0,c.U)(function(e){return e}))}},{key:"updatePrivate",value:function(e){return this.reqAPIService.post("/manager/farm-api-mobie?action=add-farm-setting&fcode="+this.fcode,e).pipe((0,c.U)(function(e){return e}))}},{key:"removePermission",value:function(e,t){return this.reqAPIService.get("/manager/farm-api-mobie?action=remove-manager&fcode="+this.fcode+"&user_id="+e+"&position="+t).pipe((0,c.U)(function(e){return e}))}},{key:"updateFarm",value:function(e){return this.reqAPIService.post("/manager/farm-edit-api-mobie?action=edit&fcode="+this.fcode,e).pipe((0,c.U)(function(e){return e}))}},{key:"destroyValue",value:function(){this.farm=null,this.fcode=null,this.permission=null,this.numberOfPonds=null}},{key:"getSpecies",value:function(){return this.reqAPIService.get("/manager/farm-create-api?action=get-species").pipe((0,c.U)(function(e){return e}))}},{key:"insertPond",value:function(e){return this.reqAPIService.post("/manager/farm-api-mobie?action=add-pond&fcode="+this.fcode,e).pipe((0,c.U)(function(e){return e}))}},{key:"insertOnePond",value:function(e){return this.reqAPIService.post("/manager/farm-api-mobie?action=add-a-pond&fcode="+this.fcode,e).pipe((0,c.U)(function(e){return e}))}},{key:"loadReport",value:function(){return this.reqAPIService.get("/manager/farm-api-report?fcode="+this.fcode)}},{key:"listStore",value:function(){return this.reqAPIService.get("/manager/farm-api-mobie?fcode="+this.fcode+"&action=list-store")}}]),t}()).\u0275fac=function(e){return new(e||r)(u.LFG(s.$))},r.\u0275prov=u.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r)},2151:function(t,i,o){o.d(i,{b:function(){return h}});var r=o(90665),a=o(28049),s=o(27887),c=o(22923),u=o(37716),l=o(47063),d=o(81780),f=o(71239),p=o(38583);function g(e,t){if(1&e&&(u.TgZ(0,"div",13),u.TgZ(1,"ion-text",14),u.TgZ(2,"i"),u._uU(3),u.qZA(),u.qZA(),u.qZA()),2&e){var n=u.oxw();u.xp6(3),u.Oqu(n.message)}}function m(e,t){1&e&&(u.TgZ(0,"div"),u._UZ(1,"ion-spinner",15),u.qZA())}var v,h=((v=function(){function t(n,i,o,a){e(this,t),this.modalController=n,this.translate=i,this.storeService=o,this.dbLocalService=a,this.form=new r.cw({name:new r.NI("",r.kI.required),area:new r.NI("",r.kI.required),description:new r.NI("")}),this.savingFlag=new s.E}return n(t,[{key:"ngOnInit",value:function(){}},{key:"onSubmit",value:function(){var e=this;this.savingFlag.setPending(!0),this.storeService.sendPost("add",this.form.value,"&fcode="+this.storeService.getFarmCode(),"manager/store-api-mobie").pipe((0,a.P)()).subscribe(function(t){1===t.status?(e.dbLocalService.stores.push({infor:t.data,store:[]}),e.dbLocalService.setLocalData("stores",e.dbLocalService.stores),e.modalController.dismiss(t.data)):e.message=t.error,e.savingFlag.setResult(!0)},function(t){e.savingFlag.setResult(!1),e.message=e.translate.instant("ERROR_CONNECT")})}}]),t}()).\u0275fac=function(e){return new(e||v)(u.Y36(l.IN),u.Y36(d.sK),u.Y36(c.d),u.Y36(f.T))},v.\u0275cmp=u.Xpm({type:v,selectors:[["app-store-add"]],decls:32,vars:19,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["class","ion-padding ion-text-center",4,"ngIf"],[3,"formGroup","ngSubmit"],["lines","inset"],["position","floating"],["type","text","formControlName","name","inputmode","text"],["type","number","formControlName","area","inputmode","text"],["type","text","formControlName","description","inputmode","text"],[1,"ion-text-center","ion-padding"],[4,"ngIf"],["type","submit","color","primary","shape","round",3,"disabled"],[1,"ion-padding","ion-text-center"],["color","danger"],["name","dots"]],template:function(e,t){1&e&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u.TgZ(3,"ion-button",1),u.NdJ("click",function(){return t.modalController.dismiss()}),u._UZ(4,"ion-icon",2),u.qZA(),u.qZA(),u.TgZ(5,"ion-title"),u._uU(6),u.ALo(7,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(8,"ion-content"),u.YNc(9,g,4,1,"div",3),u.TgZ(10,"form",4),u.NdJ("ngSubmit",function(){return t.onSubmit()}),u.TgZ(11,"ion-list"),u.TgZ(12,"ion-item",5),u.TgZ(13,"ion-label",6),u._uU(14),u.ALo(15,"translate"),u.qZA(),u._UZ(16,"ion-input",7),u.qZA(),u.TgZ(17,"ion-item",5),u.TgZ(18,"ion-label",6),u._uU(19),u.ALo(20,"translate"),u.qZA(),u._UZ(21,"ion-input",8),u.qZA(),u.TgZ(22,"ion-item",5),u.TgZ(23,"ion-label",6),u._uU(24),u.ALo(25,"translate"),u.qZA(),u._UZ(26,"ion-textarea",9),u.qZA(),u.qZA(),u.TgZ(27,"div",10),u.YNc(28,m,2,0,"div",11),u.TgZ(29,"ion-button",12),u._uU(30),u.ALo(31,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(6),u.Oqu(u.lcZ(7,9,"WAREHOUSE_MOD.ADD_NEW")),u.xp6(3),u.Q6J("ngIf",t.message),u.xp6(1),u.Q6J("formGroup",t.form),u.xp6(4),u.Oqu(u.lcZ(15,11,"WAREHOUSE_MOD.NAME")),u.xp6(5),u.Oqu(u.lcZ(20,13,"AREA")),u.xp6(5),u.Oqu(u.lcZ(25,15,"PHOTO_MOD.DESCRIPTION")),u.xp6(4),u.Q6J("ngIf",t.savingFlag.pending),u.xp6(1),u.Q6J("disabled",t.form.invalid||t.savingFlag.pending),u.xp6(1),u.hij("",u.lcZ(31,17,"WAREHOUSE_MOD.SAVE")," "))},directives:[l.Gu,l.sr,l.Sm,l.YG,l.gu,l.wd,l.W2,p.O5,r._Y,r.JL,r.sg,l.q_,l.Ie,l.Q$,l.pK,l.j9,r.JJ,r.u,l.as,l.g2,l.yW,l.PQ],pipes:[d.X$],styles:[""]}),v)},92652:function(t,i,o){o.d(i,{z:function(){return b}});var r=o(64762),a=o(51937),s=o(27887),c=o(2151),u=o(80559),l=o(96351),d=o(37716),f=o(47063),p=o(81780),g=o(71239),m=o(84465),v=o(13619),h=o(38583);function Z(e,t){1&e&&(d.TgZ(0,"div",14),d._UZ(1,"ion-spinner",15),d.qZA())}function A(e,t){if(1&e&&(d.ynx(0),d.TgZ(1,"ion-item",16),d.TgZ(2,"ion-label"),d.TgZ(3,"ion-text",5),d._uU(4),d.qZA(),d.qZA(),d.TgZ(5,"ion-text",17),d._uU(6),d.ALo(7,"translate"),d.qZA(),d.qZA(),d.BQk()),2&e){var n=t.$implicit;d.xp6(1),d.MGl("routerLink","/store/",n.infor.code,""),d.xp6(3),d.hij(" ",n.infor.name," "),d.xp6(2),d.AsE(" ",0==n.store.length?n.infor.total_product:n.store.length," ",d.lcZ(7,4,"WAREHOUSE_MOD.MENU")," ")}}var S,b=((S=function(){function t(n,i,o,r,a){e(this,t),this.modalController=n,this.translate=i,this.farmService=o,this.dbLocalService=r,this.toastService=a,this.loadingFlag=new s.E}return n(t,[{key:"ngOnInit",value:function(){this.loadListStore()}},{key:"loadListStore",value:function(){var e=this;this.loadingFlag.setPending(!0),this.farmService.listStore().subscribe(function(t){1==t.status?(e.farmService.storeCommon=t.data.common,e.dbLocalService.stores=t.data.list.map(function(e){return{infor:e,store:[]}}),e.dbLocalService.setLocalData("stores",e.dbLocalService.stores)):e.toastService.warning(t.error),e.loadingFlag.setResult(!0)},function(){e.toastService.danger(e.translate.instant("ERROR_CONNECT")),e.loadingFlag.setResult(!1)})}},{key:"presentAddlist",value:function(){return(0,r.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:u.n,componentProps:{}});case 2:return(t=e.sent).onDidDismiss().then(function(e){console.log(e)}),e.next=6,t.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"presentAddStore",value:function(){return(0,r.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:c.b});case 2:return(t=e.sent).onDidDismiss().then(function(e){e.data&&n.loadListStore()}),e.next=6,t.present();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"presentReportStore",value:function(){return(0,r.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:l.E});case 2:return e.next=4,e.sent.present();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}))}},{key:"doRefresh",value:function(e){this.loadListStore(),e.target.complete()}}]),t}()).\u0275fac=function(e){return new(e||S)(d.Y36(f.IN),d.Y36(p.sK),d.Y36(a.D),d.Y36(g.T),d.Y36(m.k))},S.\u0275cmp=d.Xpm({type:S,selectors:[["app-store-list"]],decls:29,vars:11,consts:[["slot","fixed",3,"ionRefresh"],[1,"ion-text-center","ion-align-self-center",3,"routerLink"],["mode","ios",1,"menu-icon-square"],["fill","clear","color","light"],["color","primary","name","list-outline",1,"icon-large"],["color","primary"],[1,"ion-text-center","ion-align-self-center"],["mode","ios",1,"menu-icon-square",3,"routerLink"],["color","primary","name","clipboard-outline",1,"icon-large"],["id","line"],["class","spiner-loading",4,"ngIf"],[4,"ngFor","ngForOf"],["color","primary","slot","end","fill","clear",3,"click"],["name","add-outline"],[1,"spiner-loading"],["name","dots"],["detail","",3,"routerLink"],["color","primary","slot","end"]],template:function(e,t){1&e&&(d.TgZ(0,"ion-refresher",0),d.NdJ("ionRefresh",function(e){return t.doRefresh(e)}),d._UZ(1,"ion-refresher-content"),d.qZA(),d.TgZ(2,"ion-grid"),d.TgZ(3,"ion-row"),d.TgZ(4,"ion-col",1),d.TgZ(5,"ion-card",2),d.TgZ(6,"ion-button",3),d._UZ(7,"ion-icon",4),d.qZA(),d._UZ(8,"br"),d.TgZ(9,"ion-text",5),d._uU(10),d.qZA(),d._uU(11," Danh m\u1ee5c "),d.qZA(),d.qZA(),d.TgZ(12,"ion-col",6),d.TgZ(13,"ion-card",7),d.TgZ(14,"ion-button",3),d._UZ(15,"ion-icon",8),d.qZA(),d._UZ(16,"br"),d._uU(17),d.ALo(18,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(19,"div",9),d.YNc(20,Z,2,0,"div",10),d.TgZ(21,"div"),d.TgZ(22,"ion-list"),d.YNc(23,A,8,6,"ng-container",11),d.TgZ(24,"ion-item"),d.TgZ(25,"ion-button",12),d.NdJ("click",function(){return t.presentAddStore()}),d._UZ(26,"ion-icon",13),d._uU(27),d.ALo(28,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(4),d.MGl("routerLink","/store/",t.farmService.fcode,"/items"),d.xp6(6),d.Oqu(null==t.farmService.storeCommon?null:t.farmService.storeCommon.totalItem),d.xp6(3),d.MGl("routerLink","/store/",t.farmService.fcode,"/logs"),d.xp6(4),d.hij(" ",d.lcZ(18,7,"WAREHOUSE_MOD.LOGS")," "),d.xp6(3),d.Q6J("ngIf",t.loadingFlag.pending),d.xp6(3),d.Q6J("ngForOf",null==t.dbLocalService?null:t.dbLocalService.stores),d.xp6(4),d.hij(" ",d.lcZ(28,9,"WAREHOUSE_MOD.ADD_NEW")," "))},directives:[f.nJ,f.Wo,f.jY,f.Nd,f.wI,f.YI,v.rH,f.PM,f.YG,f.gu,f.yW,h.O5,f.q_,h.sg,f.Ie,f.PQ,f.Q$],pipes:[p.X$],styles:["#line[_ngcontent-%COMP%]{border:.5px solid #f5f6f9;margin:20px 0}"]}),S)},96351:function(t,i,o){o.d(i,{E:function(){return m}});var r=o(27887),a=o(22923),s=o(37716),c=o(47063),u=o(81780),l=o(84465),d=o(56209),f=o(38583);function p(e,t){1&e&&(s.TgZ(0,"div"),s._UZ(1,"ion-spinner",6),s.qZA())}var g,m=((g=function(){function t(n,i,o,a){e(this,t),this.modalControler=n,this.translate=i,this.storeService=o,this.toastService=a,this.loadingFlag=new r.E}return n(t,[{key:"ngOnInit",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;this.loadingFlag.setPending(!0),this.storeService.getApiStore("analyze","&fcode="+this.storeService.getFarmCode(),"manager/store-api-mobie").subscribe(function(t){1==t.status?e.initChart(t.data):e.toastService.warning(t.error),e.loadingFlag.setResult(!0)},function(){e.toastService.danger(e.translate.instant("ERROR_CONNECT")),e.loadingFlag.setResult(!1)})}},{key:"initChart",value:function(e){var t=[],n=[],i=[];for(var o in e.usePerDay)for(var r in t.push(o),e.usePerDay[o])-1==i.indexOf(r)&&(i.push(r),n.push({name:r,type:"bar",stack:"total",label:{show:!1},emphasis:{focus:"series"},data:[]}));t.forEach(function(t){for(var o=0;o<i.length;o++){var r=0;e.usePerDay[t][i[o]]&&(r=+(+e.usePerDay[t][i[o]]).toFixed(0)),n[o].data.push(r)}});var a=[],s=[{name:this.translate.instant("COST"),type:"bar",stack:"total",label:{show:!1},emphasis:{focus:"series"},data:[]}];e.costPerDay.forEach(function(e){a.push(e.date),s[0].data.push((+e.total).toFixed(0))}),this.optionDay={title:{text:this.translate.instant("WAREHOUSE_MOD.TOTAL_QUANTITY"),padding:0,left:"center",textStyle:{fontFamily:"averta",fontSize:17,fontWeight:600}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:"0"},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},yAxis:{type:"value"},xAxis:{type:"category",data:t},series:n},this.optionCost={title:{text:this.translate.instant("WAREHOUSE_MOD.TOTAL_COST"),padding:0,left:"center",textStyle:{fontFamily:"averta",fontSize:17,fontWeight:600}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:"0"},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},yAxis:{type:"value"},xAxis:{type:"category",data:a},series:s}}}]),t}()).\u0275fac=function(e){return new(e||g)(s.Y36(c.IN),s.Y36(u.sK),s.Y36(a.d),s.Y36(l.k))},g.\u0275cmp=s.Xpm({type:g,selectors:[["app-store-report"]],decls:13,vars:6,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["echarts","",1,"ion-margin-top",3,"options"],[1,"ion-text-center"],[4,"ngIf"],["name","dots"]],template:function(e,t){1&e&&(s.TgZ(0,"ion-header"),s.TgZ(1,"ion-toolbar"),s.TgZ(2,"ion-buttons",0),s.TgZ(3,"ion-button",1),s.NdJ("click",function(){return t.modalControler.dismiss()}),s._UZ(4,"ion-icon",2),s.qZA(),s.qZA(),s.TgZ(5,"ion-title"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(8,"ion-content"),s._UZ(9,"div",3),s._UZ(10,"div",3),s.TgZ(11,"div",4),s.YNc(12,p,2,0,"div",5),s.qZA(),s.qZA()),2&e&&(s.xp6(6),s.Oqu(s.lcZ(7,4,"WAREHOUSE_MOD.REPORT")),s.xp6(3),s.Q6J("options",t.optionDay),s.xp6(1),s.Q6J("options",t.optionCost),s.xp6(2),s.Q6J("ngIf",t.loadingFlag.pending))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.wd,c.W2,d._w,f.O5,c.PQ],pipes:[u.X$],styles:[""]}),g)}}])}();