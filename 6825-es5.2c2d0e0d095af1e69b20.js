!function(){"use strict";function e(t,n){return(e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(t,n)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=i(e);if(t){var s=i(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return n(this,r)}}function n(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[6825],{54395:function(n,i,o){o.d(i,{b:function(){return c}});var a=o(77393),u=o(33637);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.P;return function(n){return n.lift(new l(e,t))}}var l=function(){function e(t,n){r(this,e),this.dueTime=t,this.scheduler=n}return s(e,[{key:"call",value:function(e,t){return t.subscribe(new h(e,this.dueTime,this.scheduler))}}]),e}(),h=function(n){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}(o,n);var i=t(o);function o(e,t,n){var s;return r(this,o),(s=i.call(this,e)).dueTime=t,s.scheduler=n,s.debouncedSubscription=null,s.lastValue=null,s.hasValue=!1,s}return s(o,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(f,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),o}(a.L);function f(e){e.debouncedNext()}},27887:function(e,t,n){n.d(t,{E:function(){return i}});var i=function(){function e(){r(this,e),this.start=null,this.end=null,this.pending=null,this.result=null,this.count=0}return s(e,[{key:"setStart",value:function(e){this.start=e,!0===e&&(this.pending=!0,this.end=!1),this.result=null,this.count++}},{key:"setPending",value:function(e){this.pending=e,!1===e?this.start=!1:this.end=!0}},{key:"setResult",value:function(e){this.result=e,this.pending=!1,this.start=!1,this.end=!0}}]),e}()},66341:function(e,t,n){n.d(t,{n:function(){return u}});var i=n(88002),o=n(15189),a=n(37716),u=function(){var e=function(){function e(t){r(this,e),this.reqAPIService=t,this.urlApi="/manager/farm-api"}return s(e,[{key:"searchMember",value:function(e){return this.reqAPIService.get("/user/list-api-mobie?action=get-user&key="+e).pipe((0,i.U)(function(e){return e.data}))}},{key:"searchExpert",value:function(e){return this.reqAPIService.get("/user/list-api-mobie?action=get-expert&key="+e).pipe((0,i.U)(function(e){return e.data}))}},{key:"getSitePath",value:function(){return this.reqAPIService.FILE_PATH}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.LFG(o.$))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e}()},26825:function(e,t,n){n.r(t),n.d(t,{StoreManagerPageModule:function(){return d}});var i,o=n(38583),s=n(90665),a=n(47063),u=n(13619),c=n(12039),l=n(37716),h=[{path:"",component:c.N}],f=((i=function e(){r(this,e)}).\u0275fac=function(e){return new(e||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[u.Bz.forChild(h)],u.Bz]}),i),d=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[o.ez,s.u5,a.Pc,f]]}),e}()},12039:function(e,t,n){n.d(t,{N:function(){return O}});var i=n(64762),o=n(79765),a=n(25917),u=n(54395),c=n(87519),l=n(43190),h=n(27887),f=n(66341),d=n(22923),g=n(37716),v=n(47063),p=n(84465),m=n(81780),b=n(38583);function y(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"ion-item"),g.TgZ(1,"ion-avatar",0),g._UZ(2,"img",8),g.qZA(),g.TgZ(3,"ion-label"),g.TgZ(4,"h3"),g._uU(5),g.qZA(),g.qZA(),g.TgZ(6,"ion-button",9),g.NdJ("click",function(){var e=g.CHM(n).index;return g.oxw().presentRemoveUser(e)}),g._uU(7),g.ALo(8,"translate"),g.qZA(),g.qZA()}if(2&e){var i=t.$implicit;g.xp6(5),g.Oqu(i.user_name),g.xp6(2),g.hij(" ",g.lcZ(8,2,"POND_MOD.DELETE")," ")}}function A(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"ion-item"),g.TgZ(1,"ion-avatar",0),g._UZ(2,"img",10),g.qZA(),g.TgZ(3,"ion-label"),g.TgZ(4,"h3"),g._uU(5),g.qZA(),g.TgZ(6,"p"),g._uU(7),g.qZA(),g.qZA(),g.TgZ(8,"ion-button",11),g.NdJ("click",function(){var e=g.CHM(n).$implicit;return g.oxw().addPermission(e)}),g._uU(9),g.ALo(10,"translate"),g.qZA(),g.qZA()}if(2&e){var i=t.$implicit,r=g.oxw();g.xp6(2),g.Q6J("src",r.memberService.getSitePath()+"/upload/users/avatars/medium/"+i.photo,g.LSH),g.xp6(3),g.Oqu(i.username),g.xp6(2),g.Oqu(i.email),g.xp6(1),g.Q6J("disabled",r.checkExistUser(i)),g.xp6(1),g.hij(" ",g.lcZ(10,5,"POND_MOD.SELECT")," ")}}function Z(e,t){if(1&e&&(g.TgZ(0,"ion-item",12),g.TgZ(1,"ion-label"),g.TgZ(2,"p"),g._uU(3),g.qZA(),g.qZA(),g.qZA()),2&e){var n=g.oxw();g.xp6(3),g.Oqu(n.message)}}function _(e,t){1&e&&(g.TgZ(0,"div"),g._UZ(1,"ion-spinner",13),g.qZA())}var k,O=((k=function(){function e(t,n,i,s,a,u){r(this,e),this.modalController=t,this.storeService=n,this.memberService=i,this.toastService=s,this.translate=a,this.alertController=u,this.savingFlag=new h.E,this.loadingFlag=new h.E,this.searchTerms=new o.xQ}return s(e,[{key:"ngOnInit",value:function(){var e=this,t=this.searchTerms.pipe((0,u.b)(300),(0,c.x)(),(0,l.w)(function(t){return e.getListMember(t)}));this.members$=t,this.members$.subscribe(function(t){t?(e.loadingFlag.setResult(!0),e.message=""):(e.loadingFlag.setResult(!1),e.message=e.translate.instant("POND_MOD.NOT_FOUND"))})}},{key:"search",value:function(e){this.searchTerms.next(e.detail.value)}},{key:"getListMember",value:function(e){return this.loadingFlag.setPending(!0),e.trim()?this.memberService.searchMember(e).pipe():(this.loadingFlag.setResult(!0),(0,a.of)([]))}},{key:"onSelect",value:function(e){this.memberSelected=e}},{key:"addPermission",value:function(e){var t=this;this.storeService.sendPost("addMember",{user_manager:e.user_id}).pipe().subscribe(function(n){0==n.status?t.toastService.warning(n.error):(t.manager.push({user_name:e.username,user_id:e.user_id}),t.toastService.success(t.translate.instant("FARM_MOD.ADDED_STAFF"))),t.savingFlag.setResult(!0)},function(e){t.savingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"removePermission",value:function(e){var t=this;this.storeService.getApiStore("removeMember","&user_id="+this.manager[e].user_id).pipe().subscribe(function(n){0==n.status?t.toastService.warning(n.error):(t.manager.splice(e,1),t.toastService.success(t.translate.instant("FARM_MOD.REMOVED_STAFF"))),t.savingFlag.setResult(!0)},function(e){t.savingFlag.setResult(!1),t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"presentRemoveUser",value:function(e){return(0,i.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("CONFIRM")+"!",message:this.translate.instant("FARM_MOD.CONFIRM_REMOVE"),buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(e){console.log("Confirm Cancel: blah")}},{text:"Okay",handler:function(){n.removePermission(e)}}]});case 2:return t.next=4,t.sent.present();case 4:case"end":return t.stop()}},t,this)}))}},{key:"close",value:function(){this.modalController.dismiss(this.manager)}},{key:"checkExistUser",value:function(e){for(var t=0;t<this.manager.length;t++)if(this.manager[t].user_name==e.username)return!0;return!1}}]),e}()).\u0275fac=function(e){return new(e||k)(g.Y36(v.IN),g.Y36(d.d),g.Y36(f.n),g.Y36(p.k),g.Y36(m.sK),g.Y36(v.Br))},k.\u0275cmp=g.Xpm({type:k,selectors:[["app-store-manager"]],inputs:{manager:"manager"},decls:23,vars:15,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[3,"placeholder","ionChange"],[4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],[1,"ion-text-center"],[4,"ngIf"],["src","assets/img/default-profile.jpg"],["slot","end","color","danger",3,"click"],["onError","this.src='assets/img/default-profile.jpg'",3,"src"],["slot","end",3,"disabled","click"],["lines","none"],["name","dots"]],template:function(e,t){1&e&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",0),g.TgZ(3,"ion-button",1),g.NdJ("click",function(){return t.close()}),g._UZ(4,"ion-icon",2),g.qZA(),g.qZA(),g.TgZ(5,"ion-title"),g._uU(6),g.ALo(7,"translate"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(8,"ion-content"),g.TgZ(9,"ion-searchbar",3),g.NdJ("ionChange",function(e){return t.search(e)}),g.ALo(10,"translate"),g.qZA(),g.TgZ(11,"ion-list"),g.YNc(12,y,9,4,"ion-item",4),g.qZA(),g.TgZ(13,"ion-list"),g.TgZ(14,"ion-list-header"),g.TgZ(15,"ion-label"),g._uU(16),g.ALo(17,"translate"),g.qZA(),g.qZA(),g.YNc(18,A,11,7,"ion-item",4),g.ALo(19,"async"),g.YNc(20,Z,4,1,"ion-item",5),g.qZA(),g.TgZ(21,"div",6),g.YNc(22,_,2,0,"div",7),g.qZA(),g.qZA()),2&e&&(g.xp6(6),g.Oqu(g.lcZ(7,7,"FARM_MOD.MEMBER")),g.xp6(3),g.Q6J("placeholder",g.lcZ(10,9,"FARM_MOD.MANAGER_EMAIL")),g.xp6(3),g.Q6J("ngForOf",t.manager),g.xp6(4),g.Oqu(g.lcZ(17,11,"POND_MOD.RESULT")),g.xp6(2),g.Q6J("ngForOf",g.lcZ(19,13,t.members$)),g.xp6(2),g.Q6J("ngIf",t.message),g.xp6(2),g.Q6J("ngIf",t.loadingFlag.pending))},directives:[v.Gu,v.sr,v.Sm,v.YG,v.gu,v.wd,v.W2,v.VI,v.j9,v.q_,b.sg,v.yh,v.Q$,b.O5,v.Ie,v.BJ,v.PQ],pipes:[m.X$,b.Ov],styles:[""]}),k)},22923:function(e,t,n){n.d(t,{d:function(){return l}});var i,o=n(88002),a=n(26215),u=n(15189),c=n(37716),l=((i=function(){function e(t){r(this,e),this.reqAPIService=t,this.urlApi="/manager/store-api-mobie",this.NEW_URL_API="/manager/warehouse-api",this.changeDataStore=!1,this.onLoaded$=new a.X(0)}return s(e,[{key:"destroy",value:function(){this.fcode=null,this.store=null}},{key:"setFarmCode",value:function(e){this.fcode=e}},{key:"getFarmCode",value:function(){return this.fcode}},{key:"setStoreCode",value:function(e){this.wcode=e}},{key:"getStoreCode",value:function(){return this.wcode}},{key:"setStore",value:function(e){this.store=e}},{key:"getStore",value:function(){return this.store}},{key:"itemChanged",value:function(e,t){void 0!==this.store[e]&&Object.assign(this.store[e],t)}},{key:"getApiStore",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e=""===i?this.NEW_URL_API+"?action="+t+"&wcode="+this.wcode+n:"/".concat(i,"?action=")+t+n,this.reqAPIService.get(e).pipe((0,o.U)(function(e){return e}))}},{key:"sendPost",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return e=""===r?this.NEW_URL_API+"?action="+t+"&wcode="+this.wcode+i:"/".concat(r,"?action=")+t+i,this.reqAPIService.post(e,n).pipe((0,o.U)(function(e){return e}))}},{key:"sendPostWithFile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.reqAPIService.postApiWithFile(e,t,"&wcode="+this.wcode+n,this.NEW_URL_API)}},{key:"postEdit",value:function(e,t){return this.reqAPIService.post(this.urlApi+"?action=edit-product-private&fcode="+this.fcode+"&id="+e,t)}}]),e}()).\u0275fac=function(e){return new(e||i)(c.LFG(u.$))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)}}])}();