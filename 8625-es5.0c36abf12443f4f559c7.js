!function(){"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var o=0;o<n.length;o++){var e=n[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[8625],{28625:function(o,e,i){i.r(e),i.d(e,{ShopSpecialPageModule:function(){return A}});var r=i(38583),a=i(90665),s=i(47063),c=i(13619),l=i(27887),g=i(15085),d=i(37716),p=i(84465),u=i(81780),h=i(71239),m=i(4015);function f(t,n){if(1&t){var o=d.EpF();d.TgZ(0,"ion-segment-button",11),d.NdJ("click",function(){var t=d.CHM(o).$implicit;return d.oxw().segmentTermChanged(t.id)}),d._uU(1),d.qZA()}if(2&t){var e=n.$implicit;d.Q6J("value",e.id),d.xp6(1),d.hij(" ",e.name," ")}}function P(t,n){1&t&&(d.TgZ(0,"div"),d.TgZ(1,"p",12),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.qZA()),2&t&&(d.xp6(2),d.Oqu(d.lcZ(3,1,"SHOP.HOME.NO_PRODUCTS")))}function x(t,n){1&t&&d._UZ(0,"ion-progress-bar",13)}function O(t,n){if(1&t&&(d.TgZ(0,"div",24),d.TgZ(1,"span"),d._uU(2),d.ALo(3,"number"),d.qZA(),d.qZA()),2&t){var o=d.oxw().$implicit;d.xp6(2),d.hij("-",d.xi3(3,1,100*o.ratio,"0.0-0"),"%")}}function _(t,n){if(1&t&&(d.TgZ(0,"div",25),d._uU(1),d.ALo(2,"number"),d.qZA()),2&t){var o=d.oxw().$implicit;d.xp6(1),d.hij(" ",d.xi3(2,1,o.maxPrice,"1.0-0"),"\u20ab ")}}function C(t,n){if(1&t&&(d.TgZ(0,"div",25),d._uU(1),d.ALo(2,"number"),d.ALo(3,"number"),d.qZA()),2&t){var o=d.oxw().$implicit;d.xp6(1),d.AsE(" ",d.xi3(2,2,o.minPrice,"1.0-0")," ~ ",d.xi3(3,5,o.maxPrice,"1.0-0"),"\u20ab ")}}function b(t,n){if(1&t&&(d.TgZ(0,"ion-col",16),d.YNc(1,O,4,4,"div",17),d.TgZ(2,"div",18),d._UZ(3,"img",19),d.qZA(),d.TgZ(4,"div",20),d._uU(5),d.qZA(),d.TgZ(6,"div",21),d.TgZ(7,"small",22),d._uU(8),d.ALo(9,"number"),d.qZA(),d.qZA(),d.YNc(10,_,3,4,"div",23),d.YNc(11,C,4,8,"div",23),d.qZA()),2&t){var o=n.$implicit,e=d.oxw(2);d.MGl("routerLink","../product/",o.id,""),d.xp6(1),d.Q6J("ngIf",0!=o.ratio),d.xp6(2),d.Q6J("src",e.shopService.SITE_PATH+o.img_default,d.LSH),d.xp6(2),d.Oqu(o.alias),d.xp6(3),d.hij("",d.xi3(9,7,o.maxFullPrice,"0.0-0"),"\u20ab"),d.xp6(2),d.Q6J("ngIf",o.minPrice==o.maxPrice),d.xp6(1),d.Q6J("ngIf",o.minPrice!=o.maxPrice)}}function M(t,n){if(1&t&&(d.TgZ(0,"ion-grid",14),d.TgZ(1,"ion-row"),d.YNc(2,b,12,10,"ion-col",15),d.qZA(),d.qZA()),2&t){var o=d.oxw();d.xp6(2),d.Q6J("ngForOf",o.flashSales.list)}}var v,w=[{path:"",component:(v=function(){function o(n,e,i,r,a,s){t(this,o),this.modalController=n,this.shopService=e,this.toastService=i,this.translate=r,this.localDb=a,this.route=s,this.loadingFlag=new l.E,this.listADS=[],this.flashSales={list:[],numRows:0,listTerms:[]},this.page=0,this.currentTerm=0,this.remainingTime={hour:0,min:0,seconds:0},this.bannerOpts={speed:400,pagination:{el:".swiper-pagination",dynamicBullets:!0}}}var e,i,r;return e=o,(i=[{key:"ngOnInit",value:function(){this.loadData(),this.loadAds()}},{key:"loadData",value:function(){var t=this;this.loadingFlag.setPending(!0),this.shopService.getListProductSpecial(this.page,this.currentTerm).pipe().subscribe(function(n){"error"==n.status?t.loadingFlag.setResult(!1):(t.flashSales.numRows=n.data.numRows,t.flashSales.list=t.flashSales.list.concat(t.prepareProductPrice(n.data.list)),t.listTerms=n.data.listTerms,t.currentTerm||(t.currentTerm=n.data.currentTerm),t.currentTerm||(t.currentTerm=n.data.currentTerm),t.loadingFlag.setResult(!0))},function(n){t.loadingFlag.setResult(!1)})}},{key:"prepareProductPrice",value:function(t){var n=[];return t.forEach(function(t){var o=t.label_price.split("~");t.minPrice=o[0],t.maxPrice=o[1],t.maxFullPrice=t.maxPrice/(1-t.ratio),n.push(t)}),n}},{key:"loadAds",value:function(){var t=this;this.shopService.getAds().subscribe(function(n){"success"==n.status?(t.listADS="EFW"in n.data?n.data.EFW:[],console.log(t.listADS)):t.toastService.danger(t.translate.instant("ERROR_CONNECT"))},function(){t.toastService.danger(t.translate.instant("ERROR_CONNECT"))})}},{key:"loadProduct",value:function(t){var n=t.trim().split("//"),o=n[n.length-1].split("/");if(console.log(o),4==o.length){var e=o[3].split("-");this.route.navigateByUrl({company:"shop/companys/company/",detail:"shop/product/",shop:"shop/store/",term:"shop/products/"}[o[2]]+parseInt(e[e.length-1]))}}},{key:"doRefresh",value:function(t){this.timeCountDown&&clearInterval(this.timeCountDown),this.page=0,this.flashSales.list=[],this.flashSales.numRows=0,this.loadData(),t.target.complete()}},{key:"loadMoreProducts",value:function(t){this.page+=1,this.loadData(),setTimeout(function(){t.target.complete()},500)}},{key:"segmentTermChanged",value:function(t){this.currentTerm=t,this.page=0,this.flashSales.list=[],this.flashSales.numRows=0,this.loadData()}},{key:"segmentFrameChanged",value:function(t){this.currentIndex=t,this.page=0,this.flashSales.list=[],this.flashSales.numRows=0,this.loadData()}}])&&n(e.prototype,i),r&&n(e,r),o}(),v.\u0275fac=function(t){return new(t||v)(d.Y36(s.IN),d.Y36(g.d),d.Y36(p.k),d.Y36(u.sK),d.Y36(h.T),d.Y36(c.F0))},v.\u0275cmp=d.Xpm({type:v,selectors:[["app-shop-special"]],decls:19,vars:6,consts:[["slot","start"],["text","","defaultHref","tabs/shop"],["slot","end"],["slot","fixed",3,"ionRefresh"],["mode","ios"],["scrollable","true","mode","ios",3,"ngModel","ngModelChange"],[3,"value","click",4,"ngFor","ngForOf"],[4,"ngIf"],["type","indeterminate",4,"ngIf"],["class","grid-product",4,"ngIf"],["threshold","100px",3,"disabled","ionInfinite"],[3,"value","click"],[1,"ion-text-center"],["type","indeterminate"],[1,"grid-product"],["size","6","size-sm","3",3,"routerLink",4,"ngFor","ngForOf"],["size","6","size-sm","3",3,"routerLink"],["class","discount-label",4,"ngIf"],[1,"img-box"],["onError","this.src='assets/img/1235.jpg'",1,"m-auto",3,"src"],[1,"product-alias"],[1,"promotion-box"],[1,"strike","ion-align-self-center"],["class","price-box",4,"ngIf"],[1,"discount-label"],[1,"price-box"]],template:function(t,n){1&t&&(d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar"),d.TgZ(2,"ion-buttons",0),d._UZ(3,"ion-back-button",1),d.qZA(),d.TgZ(4,"ion-title"),d._uU(5,"T\xe9p b\u1ea1c t\xe0i tr\u1ee3"),d.qZA(),d.TgZ(6,"ion-buttons",2),d._UZ(7,"app-shop-toolbar"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(8,"ion-content"),d.TgZ(9,"ion-refresher",3),d.NdJ("ionRefresh",function(t){return n.doRefresh(t)}),d._UZ(10,"ion-refresher-content",4),d.qZA(),d.TgZ(11,"ion-toolbar"),d.TgZ(12,"ion-segment",5),d.NdJ("ngModelChange",function(t){return n.currentTerm=t}),d.YNc(13,f,2,2,"ion-segment-button",6),d.qZA(),d.qZA(),d.YNc(14,P,4,3,"div",7),d.YNc(15,x,1,0,"ion-progress-bar",8),d.YNc(16,M,3,1,"ion-grid",9),d.TgZ(17,"ion-infinite-scroll",10),d.NdJ("ionInfinite",function(t){return n.loadMoreProducts(t)}),d._UZ(18,"ion-infinite-scroll-content"),d.qZA(),d.qZA()),2&t&&(d.xp6(12),d.Q6J("ngModel",n.currentTerm),d.xp6(1),d.Q6J("ngForOf",n.listTerms),d.xp6(1),d.Q6J("ngIf",!n.flashSales),d.xp6(1),d.Q6J("ngIf",n.loadingFlag.pending),d.xp6(1),d.Q6J("ngIf",n.flashSales),d.xp6(1),d.Q6J("disabled",(null==n.flashSales?null:n.flashSales.numRows)==(null==n.flashSales?null:n.flashSales.list.length)))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,m.g,s.W2,s.nJ,s.Wo,s.cJ,s.QI,a.JJ,a.On,r.sg,r.O5,s.ju,s.MB,s.GO,s.X7,s.jY,s.Nd,s.wI,s.YI,c.rH],pipes:[u.X$,r.JJ],styles:["[_nghost-%COMP%]{--bullet-background-active: var(--ion-color-light);--bullet-background: var(--ion-color-dark)}[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .banner[_ngcontent-%COMP%]   .swiper-pagination[_ngcontent-%COMP%]{z-index:1000;position:absolute;bottom:10px;left:5px}[_nghost-%COMP%]   ion-segment-button[_ngcontent-%COMP%]{min-width:auto!important}",'[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}[_nghost-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:"Averta";font-size:.8em}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;margin-top:29px;margin-bottom:6px;font-family:"Averta";font-size:.8em;display:flex;margin-right:16px}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]   .boxTime[_ngcontent-%COMP%]{color:#fff;background-color:#000;padding-left:2px;padding-right:2px;margin-right:2px;margin-left:2px;border-radius:2px;max-width:27px;width:27px;text-align:center}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]{min-height:150px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .bannerSpecial[_ngcontent-%COMP%]{max-height:50px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .imgProductSpecial[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .arrowButton[_ngcontent-%COMP%]{vertical-align:middle;margin-right:16px}[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:1em;font-size:.8em}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:240px;width:100%}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border-top:1px solid rgba(192,192,192,.2);border-left:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border-right:1px solid rgba(192,192,192,.2);border-bottom:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]{flex:auto;text-align:center;margin:0 auto;overflow:hidden;position:relative}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:80x!important;margin-bottom:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   .bannerProduct[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;max-height:60px;max-width:80%;width:auto}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .product-alias[_ngcontent-%COMP%]{line-height:1.2em;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;height:2.4em;-webkit-box-orient:vertical}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]{margin:3px 0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .mr[_ngcontent-%COMP%]{margin-left:3px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .strike[_ngcontent-%COMP%]{text-decoration:line-through}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]{margin:3px 0;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;height:1.3em;-webkit-box-orient:vertical;color:var(--ion-color-danger)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]{padding:5px;position:absolute;right:5px;top:10px;float:left;width:43px;background-color:#de2525;z-index:9999;transform:rotate(20deg);border-radius:4px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:after{right:42px;border:solid transparent;content:" ";height:0;width:0;position:absolute;border-color:#88b7d500;border-right-color:#de2525;border-width:13.5px;top:50%;margin-top:-13.6px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:before{content:"";z-index:2;position:absolute;top:44%;right:100%;width:5px;height:5px;opacity:.95;background:#fff;border-radius:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center;font-family:"Averta"}']}),v)}],Z=function(){var n=function n(){t(this,n)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[c.Bz.forChild(w)],c.Bz]}),n}(),T=i(26177),A=function(){var n=function n(){t(this,n)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[r.ez,a.u5,s.Pc,Z,u.aw.forChild(),T.t]]}),n}()}}])}();