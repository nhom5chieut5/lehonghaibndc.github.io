"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[2062],{42062:function(t,n,o){o.r(n),o.d(n,{SearchResultPageModule:function(){return A}});var e=o(38583),i=o(90665),r=o(47063),c=o(13619),s=o(64762),g=o(27887),a=o(15085),l=o(59308),d=o(37716),p=o(81780),u=o(71239),h=o(4015);function P(t,n){1&t&&(d.TgZ(0,"div",8),d._UZ(1,"ion-spinner",9),d.qZA())}function m(t,n){if(1&t&&(d.TgZ(0,"ion-list-header",10),d.TgZ(1,"ion-label"),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.TgZ(4,"ion-button",11),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.qZA()),2&t){const t=d.oxw();d.xp6(2),d.Oqu(d.lcZ(3,3,"SHOP.SEARCH_PAGE.RESULTS")),d.xp6(3),d.AsE("",t.numRows," ",d.lcZ(6,5,"SHOP.SEARCH_PAGE.PRODUCTS"),"")}}function x(t,n){if(1&t&&d._UZ(0,"img",24),2&t){const t=d.oxw().$implicit,n=d.oxw(2);d.Q6J("src",n.shopService.SITE_PATH+"/upload/eventeshop/"+t.banner,d.LSH)}}function _(t,n){if(1&t&&(d.TgZ(0,"div",25),d._uU(1),d.ALo(2,"number"),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(1),d.hij(" ",d.xi3(2,1,t.maxPrice,"1.0-0"),"\u20ab ")}}function C(t,n){if(1&t&&(d.TgZ(0,"div",25),d._uU(1),d.ALo(2,"number"),d.ALo(3,"number"),d.qZA()),2&t){const t=d.oxw().$implicit;d.xp6(1),d.AsE(" ",d.xi3(2,2,t.minPrice,"1.0-0")," ~ ",d.xi3(3,5,t.maxPrice,"1.0-0"),"\u20ab ")}}function O(t,n){if(1&t&&(d.TgZ(0,"ion-col",14),d.TgZ(1,"div",15),d._UZ(2,"img",16),d.YNc(3,x,1,1,"img",17),d.qZA(),d.TgZ(4,"div",18),d._uU(5),d.qZA(),d.TgZ(6,"div",19),d.TgZ(7,"small",20),d._uU(8),d.ALo(9,"number"),d.qZA(),d.TgZ(10,"ion-text",21),d.TgZ(11,"small",22),d._uU(12),d.ALo(13,"number"),d.qZA(),d.qZA(),d.qZA(),d.YNc(14,_,3,4,"div",23),d.YNc(15,C,4,8,"div",23),d.qZA()),2&t){const t=n.$implicit,o=d.oxw(2);d.MGl("routerLink","../../../product/",t.id,""),d.xp6(2),d.Q6J("src",o.shopService.SITE_PATH+t.img_default,d.LSH),d.xp6(1),d.Q6J("ngIf",t.banner),d.xp6(2),d.Oqu(t.alias),d.xp6(3),d.hij("",d.xi3(9,8,t.maxFullPrice,"1.0-0"),"\u20ab"),d.xp6(4),d.hij("",d.xi3(13,11,100*t.ratio,"1.0-0"),"%"),d.xp6(2),d.Q6J("ngIf",t.minPrice==t.maxPrice),d.xp6(1),d.Q6J("ngIf",t.minPrice!=t.maxPrice)}}function b(t,n){if(1&t&&(d.TgZ(0,"ion-grid",12),d.TgZ(1,"ion-row"),d.YNc(2,O,16,14,"ion-col",13),d.qZA(),d.qZA()),2&t){const t=d.oxw();d.xp6(2),d.Q6J("ngForOf",t.productList)}}function f(t,n){if(1&t&&(d.TgZ(0,"ion-item"),d._uU(1),d.ALo(2,"translate"),d.qZA()),2&t){const t=d.oxw();d.xp6(1),d.AsE("",d.lcZ(2,2,"SHOP.SEARCH_PAGE.EMPTY")," '",t.keyword,"'")}}const M=[{path:"",component:(()=>{class t{constructor(t,n,o,e,i,r,c){this.route=t,this.shopService=n,this.translate=o,this.toastController=e,this.localDb=i,this.router=r,this.modalController=c,this.keyword="",this.productList=[],this.loadingFlag=new g.E}ngOnInit(){return(0,s.mG)(this,void 0,void 0,function*(){this.keyword=this.route.snapshot.paramMap.get("keyword"),yield this.localDb.getDataCart(),this.getSearchResults()})}getSearchResults(){this.loadingFlag.setPending(!0),this.shopService.searchByKeyword({keyword:this.keyword}).pipe().subscribe(t=>{"error"==t.status?this.presentToast(t.error.message):(this.numRows=t.data.numRows,this.productList=this.prepareProductPrice(t.data.list)),this.loadingFlag.setResult(!0)},t=>{this.loadingFlag.setResult(!1),this.presentToast(this.translate.instant("ERROR_CONNECT"))})}prepareProductPrice(t){let n=[];return t.forEach(t=>{let o=t.label_price.split("~");t.minPrice=o[0],t.maxPrice=o[1],t.maxFullPrice=t.maxPrice/(1-t.ratio),n.push(t)}),n}presentSearch(){return(0,s.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:l.w,componentProps:{input:this.keyword}})).present()})}presentToast(t){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:t,duration:2e3})).present()})}}return t.\u0275fac=function(n){return new(n||t)(d.Y36(c.gz),d.Y36(a.d),d.Y36(p.sK),d.Y36(r.yF),d.Y36(u.T),d.Y36(c.F0),d.Y36(r.IN))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-search-result"]],decls:16,vars:9,consts:[["slot","start"],["text","","defaultHref","tabs/shop"],["slot","end"],["mode","ios",3,"value","placeholder","ionFocus"],["class","spiner-loading",4,"ngIf"],["mode","ios",4,"ngIf"],["class","grid-product",4,"ngIf"],[4,"ngIf"],[1,"spiner-loading"],["name","dots"],["mode","ios"],["fill","outline"],[1,"grid-product"],["size","6","size-sm","4",3,"routerLink",4,"ngFor","ngForOf"],["size","6","size-sm","4",3,"routerLink"],[1,"img-box"],["onError","this.src='assets/img/1235.jpg'",1,"m-auto",3,"src"],["class","bannerProduct",3,"src",4,"ngIf"],[1,"product-alias"],[1,"promotion-box"],[1,"strike"],["color","danger"],[1,"mr"],["class","price-box",4,"ngIf"],[1,"bannerProduct",3,"src"],[1,"price-box"]],template:function(t,n){1&t&&(d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar"),d.TgZ(2,"ion-buttons",0),d._UZ(3,"ion-back-button",1),d.qZA(),d.TgZ(4,"ion-title"),d._uU(5),d.ALo(6,"translate"),d.qZA(),d.TgZ(7,"ion-buttons",2),d._UZ(8,"app-shop-toolbar"),d.qZA(),d.qZA(),d.TgZ(9,"ion-toolbar"),d.TgZ(10,"ion-searchbar",3),d.NdJ("ionFocus",function(){return n.presentSearch()}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"ion-content"),d.YNc(12,P,2,0,"div",4),d.YNc(13,m,7,7,"ion-list-header",5),d.YNc(14,b,3,1,"ion-grid",6),d.YNc(15,f,3,4,"ion-item",7),d.qZA()),2&t&&(d.xp6(5),d.Oqu(d.lcZ(6,7,"SHOP.SEARCH")),d.xp6(5),d.Q6J("value",n.keyword)("placeholder",n.translate.instant("SHOP.KEYWORD")),d.xp6(2),d.Q6J("ngIf",n.loadingFlag.pending),d.xp6(1),d.Q6J("ngIf",n.productList),d.xp6(1),d.Q6J("ngIf",n.productList),d.xp6(1),d.Q6J("ngIf",0==n.numRows))},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,r.wd,h.g,r.VI,r.j9,r.W2,e.O5,r.PQ,r.yh,r.Q$,r.YG,r.jY,r.Nd,e.sg,r.wI,r.YI,c.rH,r.yW,r.Ie],pipes:[p.X$,e.JJ],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}",'[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 3em}[_nghost-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:"Averta";font-size:.8em}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px;margin-top:29px;margin-bottom:6px;font-family:"Averta";font-size:.8em;display:flex;margin-right:16px}[_nghost-%COMP%]   .boxTimeFlashsale[_ngcontent-%COMP%]   .boxTime[_ngcontent-%COMP%]{color:#fff;background-color:#000;padding-left:2px;padding-right:2px;margin-right:2px;margin-left:2px;border-radius:2px;max-width:27px;width:27px;text-align:center}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]{min-height:150px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .bannerSpecial[_ngcontent-%COMP%]{max-height:50px}[_nghost-%COMP%]   .boxSpecial[_ngcontent-%COMP%]   .imgProductSpecial[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .arrowButton[_ngcontent-%COMP%]{vertical-align:middle;margin-right:16px}[_nghost-%COMP%]   .bag-cart[_ngcontent-%COMP%]{color:#de2525;font-weight:bold;position:absolute;top:1em;font-size:.8em}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:240px;width:100%}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{border-top:1px solid rgba(192,192,192,.2);border-left:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{border-right:1px solid rgba(192,192,192,.2);border-bottom:1px solid rgba(192,192,192,.2)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]{flex:auto;text-align:center;margin:0 auto;overflow:hidden;position:relative}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:80x!important;margin-bottom:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   .bannerProduct[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;max-height:60px;max-width:80%;width:auto}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .product-alias[_ngcontent-%COMP%]{line-height:1.2em;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;height:2.4em;-webkit-box-orient:vertical}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]{margin:3px 0}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .mr[_ngcontent-%COMP%]{margin-left:3px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .promotion-box[_ngcontent-%COMP%]   .strike[_ngcontent-%COMP%]{text-decoration:line-through}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]{margin:3px 0;font-size:.9em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;height:1.3em;-webkit-box-orient:vertical;color:var(--ion-color-danger)}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]{padding:5px;position:absolute;right:5px;top:10px;float:left;width:43px;background-color:#de2525;z-index:9999;transform:rotate(20deg);border-radius:4px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:after{right:42px;border:solid transparent;content:" ";height:0;width:0;position:absolute;border-color:#88b7d500;border-right-color:#de2525;border-width:13.5px;top:50%;margin-top:-13.6px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]:before{content:"";z-index:2;position:absolute;top:44%;right:100%;width:5px;height:5px;opacity:.95;background:#fff;border-radius:5px}[_nghost-%COMP%]   .grid-product[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   .discount-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:12px;text-align:center;font-family:"Averta"}']}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[c.Bz.forChild(M)],c.Bz]}),t})();var Z=o(26177);let A=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[e.ez,i.u5,r.Pc,w,p.aw.forChild(),Z.t]]}),t})()}}]);