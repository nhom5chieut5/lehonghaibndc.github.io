!function(){"use strict";function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[272],{6099:function(e,a,n){n.d(a,{Cs:function(){return o},SV:function(){return s},d2:function(){return c},hz:function(){return p}});var r,o=["ph_am","ph_pm","nh3","kh","temperature","salinity","clarity","oxy"],s=["no2","vibrio","mg","ca","h2s","orp","algae"],c=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;i(this,e),this.values=[],this.labels=[],this.key=t,this.name=a,this.colorCls=n,this.colorStr=r,this.unit=o,this.max=s,this.min=c},p=((r=function(){function e(){i(this,e)}return t(e,[{key:"mapByKey",value:function(t){switch(t){case"ph_am":e.map.unit="",e.map.colorCls="para-ph",e.map.colorStr="#CDDC39",e.map.name="ph_am",e.map.max=14,e.map.min=0;break;case"ph_pm":e.map.unit="",e.map.colorCls="para-ph",e.map.colorStr="#4CAF50",e.map.name="ph_pm",e.map.max=14,e.map.min=0;break;case"temperature":e.map.unit="\xb0C",e.map.colorCls="para-t",e.map.colorStr="#b71c1c",e.map.name="temperature",e.map.max=100,e.map.min=0;break;case"oxy":e.map.unit="mg/l",e.map.colorCls="para-oxy",e.map.colorStr="#FF6F00",e.map.name="oxygen",e.map.max=12,e.map.min=0;break;case"nh3":e.map.unit="mg/l",e.map.colorCls="para-nh3",e.map.colorStr="#b71c1c",e.map.name="nh3",e.map.max=5,e.map.min=0;break;case"salinity":e.map.unit="\u2030",e.map.colorCls="para-salinity",e.map.colorStr="#808289",e.map.name="salinity",e.map.max=35,e.map.min=0;break;case"kh":e.map.unit="mg/l",e.map.colorCls="para-kh",e.map.colorStr="#212121",e.map.name="kh",e.map.max=400,e.map.min=0;break;case"clarity":e.map.unit="cm",e.map.colorCls="para-clarity",e.map.colorStr="#BA68C8",e.map.name="clarity",e.map.max=200,e.map.min=0;break;case"no2":e.map.unit="mg/l",e.map.colorCls="para-no2",e.map.colorStr="#757575",e.map.name="no2",e.map.max=5,e.map.min=0;break;case"vibrio":e.map.unit="CFU/g",e.map.colorCls="para-vibrio",e.map.colorStr="#00C853",e.map.name="vibrio",e.map.max=1e7,e.map.min=0;break;case"mg":e.map.unit="mg/l",e.map.colorCls="para-mg",e.map.colorStr="#827717",e.map.name="magiesium",e.map.max=2e3,e.map.min=0;break;case"ca":e.map.unit="mg/l",e.map.colorCls="para-ca",e.map.colorStr="#004D40",e.map.name="calcium",e.map.max=2e3,e.map.min=0;break;case"h2s":e.map.unit="ppm",e.map.colorCls="para-h2s",e.map.colorStr="#6200EA",e.map.name="hydro_sulfua",e.map.max=5,e.map.min=0;break;case"orp":e.map.unit="mV",e.map.colorCls="para-orp",e.map.colorStr="#880E4F",e.map.name="ORP",e.map.max=1e3,e.map.min=0;break;case"algae":e.map.unit="cel/ml",e.map.colorCls="para-algae",e.map.colorStr="#1B5E20",e.map.name="algae",e.map.max=1e6,e.map.min=0}return e.map}}]),e}()).map={unit:"",colorCls:"",colorStr:"",name:"",max:0,min:0},r)},80272:function(e,a,n){n.d(a,{p:function(){return m}});var r,o=n(15189),s=n(6099),c=n(16738),p=(n(35386),n(88002)),l=n(91841),u=n(92340),d=n(37716),h=n(71239),m=((r=function(){function e(t,a,n){i(this,e),this.reqAPIService=t,this.dblocalService=a,this.myHTTPClient=n,this.URL_API={POND_INFO:"/manager/pond-api-info",POND_SETTING:"/manager/pond-setting-api-mobie",ALERT:"/manager/api-alert",CALENDAR:"/manager/calendar-api-mobie",UPDATE:"/manager/daily-update-full-api",POND_HISTORY:"/manager/pond-history-api-mobie",PRODUCT:"/manager/store-api",SUGGEST:"/expert/api-suggest",PROCEDURE:"/manager/daily-procedure-api-for-mobie",CHART:"/manager/daily-chart-api",SEASON_CREATE:"/manager/season-create-api",SEASON_CANCEL:"/manager/season-cancel-api",SEASON_DETAIL:"/manager/season-detail-api-mobie",SEASON_DOWNLOAD:"/manager/season-download",SEASON_SEED:"/manager/season-seed-api-mobie",SEASON_SEED_EDIT:"/manager/season-seed-edit-api",SEASON_COLLECT_ADD:"/manager/season-harvest-api-mobie",SEASON_COLLECT:"/manager/season-harvest-edit-api",SEASON_MOVE:"/manager/season-move-api-mobie",SEASON_DEPENDENTCY:"/manager/season-dependency",SEASON_SETTING:"/manager/season-setting-api",DAILY:"/manager/daily-date-paging-api",DAILY_DEPENDENCY:"/manager/daily-date-paging-dependency",DAILY_HEALTH:"/manager/daily-update-disease-api",TODAY:"/manager/daily-today-api",DAY:"/manager/daily-view-day-api",TOTAL_COST:"/manager/daily-cost",MANUFACTURER:"/manager/season-manufacturers-api",DISEASE:"/manager/disease-api",LAB_DAILY:"/manager/daily-lab-api",LAB_POND_DAILY:"/manager/daily-lab-pond-api",POND_WATER:"/manager/pond-water-api"},this.disease=[],this.seasonStart=!1,this.seasonStartTime=c(),this.seasonInfo={seedQuantity:0},this.labPermission=!1,this.pondInLab=!1}return t(e,[{key:"loadPond",value:function(){return this.reqAPIService.get(this.URL_API.POND_INFO+"?pcode="+this.pcode)}},{key:"setPond",value:function(e){this.pond=e}},{key:"setDisease",value:function(e){this.disease=e}},{key:"setCode",value:function(e){this.pcode=e}},{key:"setPermission",value:function(e){this.permission=e}},{key:"reqSeason",value:function(){return this.reqAPIService.get(this.URL_API.SEASON_CREATE+"?action=info&pcode="+this.pcode)}},{key:"saveSeason",value:function(e){return this.reqAPIService.post(this.URL_API.SEASON_CREATE+"?action=save&pcode="+this.pcode,e)}},{key:"searchManufacturer",value:function(e){return this.reqAPIService.get(this.URL_API.MANUFACTURER+"?key="+e)}},{key:"loadToday",value:function(){return this.reqAPIService.get(this.URL_API.TODAY+"?scode="+this.pcode)}},{key:"loadDependency",value:function(){return this.reqAPIService.get(this.URL_API.SEASON_DEPENDENTCY+"?pcode="+this.pcode)}},{key:"setTracking",value:function(e,t){var i=this;this.numRepast=t;var a=e.replace(new RegExp("^[,]+|[,]+$","g"),"");this.trackingPamameters=a.replace(/^\,+,\,+$/g,"").split(",").slice(0,-this.numRepast),this.trackingObjects=[],this.trackingPamameters.forEach(function(e){var t=(new s.hz).mapByKey(e);i.trackingObjects.push(new s.d2(e,t.name,t.colorCls,t.colorStr,t.unit,t.max,t.min))})}},{key:"reqSeasonCancel",value:function(e){return this.reqAPIService.post(this.URL_API.SEASON_CANCEL+"?pcode="+this.pcode,e)}},{key:"reqSeasonSeed",value:function(e){return this.reqAPIService.postApiWithFile("",e,"&pcode="+this.pcode,this.URL_API.SEASON_SEED)}},{key:"reqSeasonSeedEdit",value:function(e,t){return this.reqAPIService.postApiWithFile("edit",e,"&pcode="+this.pcode+"&id="+t,this.URL_API.SEASON_SEED_EDIT)}},{key:"reqSeasonCollect",value:function(e){return this.reqAPIService.postApiWithFile("",e,"&pcode="+this.pcode,this.URL_API.SEASON_COLLECT_ADD)}},{key:"reqSeasonCollectEdit",value:function(e,t){return this.reqAPIService.postApiWithFile("edit",e,"&pcode="+this.pcode+"&id="+t,this.URL_API.SEASON_COLLECT)}},{key:"reqSeasonCollectInfo",value:function(e){return this.reqAPIService.get(this.URL_API.SEASON_COLLECT+"?action=get&pcode="+this.pcode+"&id="+e)}},{key:"getTargetPonds",value:function(){return this.reqAPIService.get(this.URL_API.SEASON_MOVE+"?action=get-pond-targers&pcode="+this.pcode)}},{key:"reqSeasonMove",value:function(e){return this.reqAPIService.post(this.URL_API.SEASON_MOVE+"?action=add&pcode="+this.pcode,e)}},{key:"getHistory",value:function(){return this.reqAPIService.get(this.URL_API.POND_HISTORY+"?action=get-pond-history&pcode="+this.pcode)}},{key:"reqSeasonDetail",value:function(e){return this.reqAPIService.get(this.URL_API.SEASON_DETAIL+"?action=detail&scode="+e)}},{key:"getListItemUsed",value:function(e,t){return this.reqAPIService.get(this.URL_API.SEASON_DETAIL+"?action=listItemUsed&scode="+e+"&type="+t)}},{key:"getProductUsed",value:function(e,t,i){return this.reqAPIService.get(this.URL_API.SEASON_DETAIL+"?action=detailItemUsed&scode="+e+"&type="+t+"&product_id="+i)}},{key:"getWeight",value:function(){return this.reqAPIService.get(this.URL_API.SEASON_DETAIL+"?action=getWeight&scode="+this.pond.current_season)}},{key:"getListExchange",value:function(){return this.reqAPIService.get(this.URL_API.SEASON_DETAIL+"?action=listWaterExchange&scode="+this.pond.current_season)}},{key:"downloadDaily",value:function(e){return this.reqAPIService.downloadFile(this.URL_API.SEASON_DOWNLOAD+"?scode="+e).pipe()}},{key:"getAlertList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.reqAPIService.get(this.URL_API.ALERT+"?action=list&pcode="+this.pcode+"&page="+e)}},{key:"getAlertNow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.reqAPIService.get(this.URL_API.ALERT+"?action=now&pcode="+this.pcode+"&page="+e)}},{key:"getSuggestNow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.reqAPIService.get(this.URL_API.SUGGEST+"?action=now&code="+this.pcode+"&page="+e)}},{key:"getSuggestList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.reqAPIService.get(this.URL_API.SUGGEST+"?action=list&code="+this.pcode+"&page="+e)}},{key:"getProcedure",value:function(){return this.reqAPIService.get(this.URL_API.PROCEDURE+"?action=list&scode="+this.pcode)}},{key:"getCalendarList",value:function(e){return this.reqAPIService.get(this.URL_API.CALENDAR+"?action=list-date&pid="+this.pcode+"&date="+e)}},{key:"doneTodo",value:function(e){return this.reqAPIService.get(this.URL_API.CALENDAR+"?action=done&item="+e)}},{key:"createNotExistDay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e&&(e=c().format("YYYY-MM-DD")),{algae:null,ca:null,clarity:null,cost:null,cost_blend:null,cost_dc:null,cost_enviro:null,cost_other:null,cost_total:null,date:e,edit_time:null,feed_cost:null,feed_incremental:null,feed_today:null,h2s:null,id:null,income:null,individuals:null,kh:null,loss:null,mg:null,nh3:null,no2:null,note_general:null,note_health:null,orp:null,oxy:null,ph_am:null,ph_pm:null,pond_id:null,pond_times_id:null,price:null,quantity:null,salinity:null,temperature:null,time:null,user_id:null,vibrio:null,weight:null,enviroment:[],feed:[],blend:[]}}},{key:"destroy",value:function(){this.pcode=null,this.pond=null,this.permission=null,this.trackingPamameters=null,this.seasonStart=null,this.numRepast=null,this.trackingObjects=null,this.products=null}},{key:"quickUpdateParam",value:function(e,t){return this.reqAPIService.post(this.URL_API.UPDATE+"?pcode="+this.pcode,{parameter:e,date:t})}},{key:"fullUpdate",value:function(e){return this.reqAPIService.post(this.URL_API.UPDATE+"?pcode="+this.pcode,e).pipe()}},{key:"updateHealth",value:function(e){return this.reqAPIService.post(this.URL_API.DAILY_HEALTH+"?pcode="+this.pcode,e).pipe()}},{key:"loadParamDaily",value:function(e,t){var i=this.trackingPamameters.join();return this.reqAPIService.get(this.URL_API.CHART+"?scode="+this.pcode+"&date="+e+"&limit="+t+"&param="+i)}},{key:"loadDailyPaging",value:function(e,t){return this.reqAPIService.get(this.URL_API.DAILY+"?scode="+this.pcode+"&date="+t+"&p="+e.pageIndex+"&s="+e.pageSize)}},{key:"loadDailyDependency",value:function(e,t,i){return this.reqAPIService.get(this.URL_API.DAILY_DEPENDENCY+"?action="+e+"&scode="+this.pcode+"&date="+i+"&p="+t.pageIndex+"&s="+t.pageSize)}},{key:"loadDay",value:function(e){return this.reqAPIService.get(this.URL_API.DAY+"?scode="+this.pcode+"&date="+e)}},{key:"getTotalCost",value:function(){return this.reqAPIService.get(this.URL_API.TOTAL_COST+"?pcode="+this.pcode+"&action=total")}},{key:"loadProducts",value:function(){var e=this;return this.reqAPIService.get(this.URL_API.PRODUCT+"?pcode="+this.pcode+"&action=productInStore").subscribe(function(t){1==t.status&&(e.products=t.data)})}},{key:"checkInventory",value:function(e){return this.reqAPIService.post(this.URL_API.PRODUCT+"?pcode="+this.pcode+"&action=checkInventory",{data:e})}},{key:"updateInfo",value:function(e){return this.reqAPIService.post(this.URL_API.POND_SETTING+"?action=updateInfo&pcode="+this.pcode,e)}},{key:"updatePrivate",value:function(e){return this.reqAPIService.post(this.URL_API.POND_SETTING+"?action=edit&pcode="+this.pcode,e)}},{key:"getSeting",value:function(){return this.reqAPIService.get(this.URL_API.POND_SETTING+"?action=get-pond-setting&pcode="+this.pcode)}},{key:"removePermission",value:function(e,t){return this.reqAPIService.get(this.URL_API.POND_SETTING+"?action=remove-permission&pcode="+this.pcode+"&position="+t+"&user_id="+e)}},{key:"deletePond",value:function(e){return this.reqAPIService.post(this.URL_API.POND_SETTING+"?action=delete&pcode="+this.pcode,e)}},{key:"getCurrentPrice",value:function(e,t){return this.reqAPIService.getOutSite("https://tepbac.com/price/farmext?action=match&sp="+e+"&zid="+t)}},{key:"getListDisease",value:function(){return this.reqAPIService.get(this.URL_API.DISEASE+"?action=list&pcode="+this.pcode)}},{key:"getListSynonym",value:function(){return this.reqAPIService.get(this.URL_API.DISEASE+"?action=list&pcode="+this.pcode)}},{key:"saveProcessDisease",value:function(e){return this.reqAPIService.post(this.URL_API.DISEASE+"?action=process&pcode="+this.pcode,e)}},{key:"savePhotoDaily",value:function(e){return this.reqAPIService.post("/manager/upload-image-daily-api?pcode="+this.pcode,e)}},{key:"uploadPhoto",value:function(e,t){var i="/manager/upload-image-daily-api",a={reportProgress:!0,headers:new l.WM,params:new l.LE};return a.headers=this.reqAPIService.getHeaderToken(),a.headers=a.headers.delete("Content-Type"),a.params=a.params.append("pcode",this.pcode),console.log(a.headers),new l.aW("POST",encodeURI(u.bl.SITE_PATH+i),e,a),this.myHTTPClient.post(encodeURI(u.bl.SITE_PATH+i),e,a)}},{key:"updateConfigBlock",value:function(e,t){return this.reqAPIService.post(this.URL_API.SEASON_DETAIL+"?action=update-config&scode="+e,t)}},{key:"updateConfigSeason",value:function(e,t){return this.reqAPIService.post(this.URL_API.SEASON_SETTING+"?action="+e+"&pcode="+this.pcode,t)}},{key:"getListOtherCost",value:function(e){return this.reqAPIService.get(this.URL_API.SEASON_DETAIL+"?action=listCostOther&scode="+e)}},{key:"getApiStore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.reqAPIService.get(i+="?action="+e+"&pcode="+this.pcode+t).pipe((0,p.U)(function(e){return e}))}},{key:"postApiStore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return this.reqAPIService.post(a+="?action="+e+"&pcode="+this.pcode+i,t).pipe((0,p.U)(function(e){return e}))}},{key:"loadDailyLab",value:function(e){return this.postApiStore("getDaily",{date:e},"",this.URL_API.LAB_DAILY)}},{key:"loadDailyLabInPond",value:function(e){return this.reqAPIService.get(this.URL_API.LAB_POND_DAILY+"?pcode="+this.pond.code+"&date="+e)}},{key:"loadLabOptions",value:function(){return this.getApiStore("getOptions","",this.URL_API.LAB_DAILY)}},{key:"addDailyLab",value:function(e){return this.postApiStore("save",e,"",this.URL_API.LAB_DAILY)}},{key:"listSpecies",value:function(){return this.getApiStore("save","",this.URL_API.LAB_DAILY)}},{key:"listWater",value:function(){return this.getApiStore("getList","",this.URL_API.POND_WATER)}},{key:"listPondTargets",value:function(){return this.getApiStore("getPondTargets","",this.URL_API.POND_WATER)}},{key:"addStock",value:function(e){return this.postApiStore("add-stock",e,"",this.URL_API.POND_WATER)}},{key:"editStock",value:function(e,t){return this.postApiStore("edit-stock",t,"&id="+e,this.URL_API.POND_WATER)}},{key:"addExchange",value:function(e){return this.postApiStore("exchange",e,"",this.URL_API.POND_WATER)}},{key:"editExchange",value:function(e,t){return this.postApiStore("edit-exchange",t,"&id="+e,this.URL_API.POND_WATER)}}]),e}()).\u0275fac=function(e){return new(e||r)(d.LFG(o.$),d.LFG(h.T),d.LFG(l.eN))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r)}}])}();