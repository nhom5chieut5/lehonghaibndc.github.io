"use strict";(self.webpackChunkFarmext2=self.webpackChunkFarmext2||[]).push([[947],{73394:function(t,n,i){i.d(n,{c:function(){return T}});var o=i(64762),e=i(15085),s=i(85976),r=i(37716),c=i(47063),a=i(84465),l=i(81780),d=i(38583);function u(t,n){if(1&t&&(r.TgZ(0,"ion-text",13),r._uU(1),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Oqu(t.infor.history[t.infor.history.length-1].meta_value)}}function g(t,n){1&t&&(r.TgZ(0,"ion-text",14),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&t&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"SHOP.CART.CANCELLED")))}function Z(t,n){if(1&t&&(r.TgZ(0,"ion-text",13),r.TgZ(1,"p"),r._uU(2),r.ALo(3,"translate"),r.qZA(),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(2),r.lnq("",r.lcZ(3,3,"SHOP.CART.PROMO_CODE")," ",t.discount_code," -",t.discount_value,"%")}}function p(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"ion-item",1),r.NdJ("click",function(){const n=r.CHM(t).index;return r.oxw(2).presentRating(n)}),r.TgZ(1,"ion-thumbnail",0),r._UZ(2,"img",15),r.qZA(),r.TgZ(3,"ion-label",16),r.TgZ(4,"ion-text",17),r.TgZ(5,"h3"),r._uU(6),r.qZA(),r.TgZ(7,"p"),r._uU(8),r.qZA(),r.YNc(9,Z,4,5,"ion-text",5),r.qZA(),r.qZA(),r.TgZ(10,"div",18),r.TgZ(11,"ion-text",14),r._uU(12),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=n.$implicit,i=r.oxw(2);r.xp6(2),r.Q6J("src",i.service.SITE_PATH+t.img,r.LSH),r.xp6(4),r.Oqu(t.alias),r.xp6(2),r.Oqu(t.option_name),r.xp6(1),r.Q6J("ngIf",t.discount_value>0),r.xp6(3),r.hij("",i.numberWithCommas(t.price),"\u0111")}}function h(t,n){if(1&t&&(r.TgZ(0,"p"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.AsE(" ",r.lcZ(2,2,"SHOP.SHIP_COST")," : ",t.numberWithCommas(t.infor.shipping_fee)," \u0111 ")}}function A(t,n){if(1&t&&(r.TgZ(0,"p"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.lnq(" ",r.lcZ(2,3,"SHOP.CART.CODE")," : ",t.infor.discount_code," -",t.numberWithCommas(t.infor.total_discount)," \u0111 ")}}function f(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"ion-button",19),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).openDetailCancel()}),r._uU(1),r.ALo(2,"translate"),r.qZA()}2&t&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"SHOP.CART.CANCEL_ORDER")))}function m(t,n){if(1&t&&(r.TgZ(0,"ion-content"),r.TgZ(1,"div"),r.TgZ(2,"ion-card"),r.TgZ(3,"ion-card-header"),r._UZ(4,"ion-icon",4),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.TgZ(7,"ion-card-content"),r.YNc(8,u,2,1,"ion-text",5),r.YNc(9,g,3,3,"ion-text",6),r.qZA(),r.qZA(),r.TgZ(10,"ion-card"),r.TgZ(11,"ion-card-header"),r._UZ(12,"ion-icon",4),r._uU(13),r.ALo(14,"translate"),r.qZA(),r.TgZ(15,"ion-card-content"),r._UZ(16,"ion-text",7),r.qZA(),r.qZA(),r.TgZ(17,"ion-card"),r.TgZ(18,"ion-card-header"),r._UZ(19,"ion-icon",8),r._uU(20),r.ALo(21,"translate"),r.qZA(),r.TgZ(22,"ion-card-content"),r.TgZ(23,"p"),r._uU(24),r.qZA(),r.TgZ(25,"p"),r._uU(26),r.qZA(),r.qZA(),r.qZA(),r.TgZ(27,"ion-card"),r.TgZ(28,"ion-card-header"),r._UZ(29,"ion-icon",9),r._uU(30),r.ALo(31,"translate"),r.qZA(),r.TgZ(32,"ion-card-content"),r.TgZ(33,"ion-list"),r.YNc(34,p,13,5,"ion-item",10),r.qZA(),r.TgZ(35,"div",11),r.YNc(36,h,3,4,"p",3),r.YNc(37,A,3,5,"p",3),r.TgZ(38,"p"),r._uU(39),r.ALo(40,"translate"),r.TgZ(41,"b"),r._uU(42),r.qZA(),r.qZA(),r.YNc(43,f,3,3,"ion-button",12),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(5),r.hij(" ",r.lcZ(6,16,"SHOP.ORDER_STATUS")," "),r.xp6(3),r.Q6J("ngIf",1==t.infor.status),r.xp6(1),r.Q6J("ngIf",0==t.infor.status),r.xp6(4),r.hij("",r.lcZ(14,18,"SHOP.CART.SHIP_METHOD")," "),r.xp6(3),r.Q6J("innerHTML",t.translate.instant(1==t.infor.ship?"SHOP.CART.SHIP_HOME":"SHOP.CART.SHOP_PICKUP"),r.oJD),r.xp6(4),r.hij(" ",r.lcZ(21,20,"SHOP.RECEIVER")," "),r.xp6(4),r.AsE(" ",t.infor.name_user,"-",t.infor.phone_user," "),r.xp6(2),r.hij(" ",t.infor.address_user," "),r.xp6(4),r.hij(" ",r.lcZ(31,22,"SHOP.PRODUCTS")," "),r.xp6(4),r.Q6J("ngForOf",t.products),r.xp6(2),r.Q6J("ngIf",1==t.infor.ship),r.xp6(1),r.Q6J("ngIf",t.infor.discount_value>0),r.xp6(2),r.hij(" ",r.lcZ(40,24,"SHOP.CART.TOTAL")," "),r.xp6(3),r.hij("",t.numberWithCommas(t.infor.total+t.infor.shipping_fee)," \u0111"),r.xp6(1),r.Q6J("ngIf",t.infor.history.length<=2&&1==t.infor.status)}}let T=(()=>{class t{constructor(t,n,i,o,e){this.modalController=t,this.service=n,this.toastService=i,this.translate=o,this.alertController=e}ngOnInit(){this.service.getOrder(this.id).subscribe(t=>{"success"==t.status?(this.infor=t.data.infor,this.infor.total=parseInt(this.infor.total),this.infor.shipping_fee=parseInt(this.infor.shipping_fee),this.products=t.data.products,console.log(this.products)):this.toastService.warning(t.error.message)},t=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}numberWithCommas(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}presentRating(t){return(0,o.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:s.L,componentProps:{product_id:this.products[t].product_id,shop_id:this.infor.shop_id},cssClass:"my-custom-class"});return n.onDidDismiss().then(t=>{t.data&&this.addRating(t.data)}),yield n.present()})}addRating(t){this.service.rating(t).subscribe(t=>{"success"==t.status?this.toastService.success(this.translate.instant("SHOP.RATE_SUCCESS")):this.toastService.warning(t.error.message)},t=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}openDetailCancel(){return(0,o.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.translate.instant("SHOP.CART.CANCEL_ORDER"),inputs:[{name:"detail",type:"text",id:"name2-id",value:"",placeholder:this.translate.instant("SHOP.CART.REASON_CANCEL")}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Ok",handler:t=>{this.cancelOrder(t)}}]})).present()})}cancelOrder(t){this.service.saveCancelOrder(this.infor.id,t).subscribe(t=>{"success"==t.status?(this.toastService.success(this.translate.instant("SHOP.CART.CANCEL_SUCCESS")),this.modalController.dismiss(!0)):this.toastService.warning(t.error.message)},t=>{this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(c.IN),r.Y36(e.d),r.Y36(a.k),r.Y36(l.sK),r.Y36(c.Br))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-detail-order"]],inputs:{id:"id"},decls:9,vars:4,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],[4,"ngIf"],["name","car-outline"],["color","success",4,"ngIf"],["color","danger",4,"ngIf"],["color","dark",3,"innerHTML"],["name","person-outline"],["name","document-text-outline"],[3,"click",4,"ngFor","ngForOf"],["color","dark",2,"text-align","end"],["color","danger","size","small",3,"click",4,"ngIf"],["color","success"],["color","danger"],[3,"src"],[1,"ion-text-wrap"],["color","primary"],["slot","end"],["color","danger","size","small",3,"click"]],template:function(t,n){1&t&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-buttons",0),r.TgZ(3,"ion-button",1),r.NdJ("click",function(){return n.modalController.dismiss(!1)}),r._UZ(4,"ion-icon",2),r.qZA(),r.qZA(),r.TgZ(5,"ion-title"),r._uU(6),r.ALo(7,"translate"),r.qZA(),r.qZA(),r.qZA(),r.YNc(8,m,44,26,"ion-content",3)),2&t&&(r.xp6(6),r.Oqu(r.lcZ(7,2,"SHOP.ORDER_DETAIL")),r.xp6(2),r.Q6J("ngIf",n.infor))},directives:[c.Gu,c.sr,c.Sm,c.YG,c.gu,c.wd,d.O5,c.W2,c.PM,c.Zi,c.FN,c.yW,c.q_,d.sg,c.Ie,c.Bs,c.Q$],pipes:[l.X$],styles:[""]}),t})()},85976:function(t,n,i){i.d(n,{L:function(){return d}});var o=i(37716),e=i(47063),s=i(38583),r=i(90665),c=i(81780);function a(t,n){if(1&t){const t=o.EpF();o.TgZ(0,"ion-icon",10),o.NdJ("click",function(){const n=o.CHM(t).$implicit;return o.oxw().rating=n}),o.qZA()}if(2&t){const t=n.$implicit,i=o.oxw();o.Q6J("name",i.rating>=t?"star":"star-outline")}}const l=function(){return[1,2,3,4,5]};let d=(()=>{class t{constructor(t){this.modalController=t,this.rating=5,this.content=""}ngOnInit(){}closeWithData(){this.modalController.dismiss({product_id:this.product_id,shop_id:this.shop_id,rate:this.rating,content:this.content})}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(e.IN))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-rating"]],inputs:{product_id:"product_id",shop_id:"shop_id"},decls:22,vars:13,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","close"],["slot","end"],[3,"disabled","click"],["lines","none"],["color","warning",3,"name","click",4,"ngFor","ngForOf"],["lines","inset"],["position","floating"],[3,"ngModel","ngModelChange"],["color","warning",3,"name","click"]],template:function(t,n){1&t&&(o.TgZ(0,"ion-header"),o.TgZ(1,"ion-toolbar"),o.TgZ(2,"ion-buttons",0),o.TgZ(3,"ion-button",1),o.NdJ("click",function(){return n.modalController.dismiss(!1)}),o._UZ(4,"ion-icon",2),o.qZA(),o.qZA(),o.TgZ(5,"ion-title"),o._uU(6),o.ALo(7,"translate"),o.qZA(),o.TgZ(8,"ion-buttons",3),o.TgZ(9,"ion-button",4),o.NdJ("click",function(){return n.closeWithData()}),o._uU(10),o.ALo(11,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"ion-content"),o.TgZ(13,"ion-list"),o.TgZ(14,"ion-item",5),o.TgZ(15,"div"),o.YNc(16,a,1,1,"ion-icon",6),o.qZA(),o.qZA(),o.TgZ(17,"ion-item",7),o.TgZ(18,"ion-label",8),o._uU(19),o.ALo(20,"translate"),o.qZA(),o.TgZ(21,"ion-textarea",9),o.NdJ("ngModelChange",function(t){return n.content=t}),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.xp6(6),o.Oqu(o.lcZ(7,6,"SHOP.RATE")),o.xp6(3),o.Q6J("disabled",""==n.content),o.xp6(1),o.hij(" ",o.lcZ(11,8,"SAVE")," "),o.xp6(6),o.Q6J("ngForOf",o.DdM(12,l)),o.xp6(3),o.Oqu(o.lcZ(20,10,"SHOP.RATE_COMMENT")),o.xp6(2),o.Q6J("ngModel",n.content))},directives:[e.Gu,e.sr,e.Sm,e.YG,e.gu,e.wd,e.W2,e.q_,e.Ie,s.sg,e.Q$,e.g2,e.j9,r.JJ,r.On],pipes:[c.X$],styles:[""]}),t})()},70947:function(t,n,i){i.r(n),i.d(n,{ShopOrderPageModule:function(){return T}});var o=i(38583),e=i(90665),s=i(47063),r=i(13619),c=i(64762),a=i(27887),l=i(15085),d=i(73394),u=i(37716),g=i(81780),Z=i(84465),p=i(71239);function h(t,n){if(1&t){const t=u.EpF();u.TgZ(0,"ion-item",4),u.NdJ("click",function(){const n=u.CHM(t),i=n.$implicit,o=n.index;return u.oxw().detail(i.id,o)}),u.TgZ(1,"ion-text",0),u.TgZ(2,"b"),u._uU(3),u.qZA(),u.qZA(),u.TgZ(4,"ion-text"),u._uU(5),u.ALo(6,"date"),u.qZA(),u.TgZ(7,"ion-text",5),u._uU(8),u.qZA(),u.qZA()}if(2&t){const t=n.$implicit,i=u.oxw();u.xp6(3),u.hij("#",t.id,""),u.xp6(2),u.Oqu(u.xi3(6,3,1e3*t.add_time,"d-M-y")),u.xp6(3),u.hij("",i.numberWithCommas(i.totalBill(t.total,t.shipping_fee)),"\u0111")}}function A(t,n){1&t&&(u.TgZ(0,"ion-item",6),u.TgZ(1,"ion-label"),u.TgZ(2,"p"),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(3),u.Oqu(u.lcZ(4,1,"SHOP_MOD.TRY_TO_BY_THE_FIRST_ORDER")))}const f=[{path:"",component:(()=>{class t{constructor(t,n,i,o,e,s){this.service=t,this.translate=n,this.toastService=i,this.modalController=o,this.dbLocalService=e,this.platform=s,this.listOrder=[],this.loadingFlag=new a.E}ngOnInit(){this.getListOrder()}getListOrder(){this.loadingFlag.setPending(!0),this.service.listOrder().subscribe(t=>{"success"==t.status?this.listOrder=t.data:this.toastService.warning(t.error.message),this.loadingFlag.setResult(!0)},t=>{this.loadingFlag.setResult(!1),this.toastService.danger(this.translate.instant("ERROR_CONNECT"))})}totalBill(t,n){return parseInt(t)+parseInt(n)}numberWithCommas(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}detail(t,n){return(0,c.mG)(this,void 0,void 0,function*(){const i=yield this.modalController.create({component:d.c,cssClass:"my-custom-class",componentProps:{id:t}});return i.onDidDismiss().then(t=>{t.data&&(this.listOrder[n].status=0)}),yield i.present()})}}return t.\u0275fac=function(n){return new(n||t)(u.Y36(l.d),u.Y36(g.sK),u.Y36(Z.k),u.Y36(s.IN),u.Y36(p.T),u.Y36(s.t4))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-shop-order"]],decls:11,vars:5,consts:[["slot","start"],["text","","defaultHref","tabs/shop"],[3,"click",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],[3,"click"],["slot","end","color","success"],["lines","none"]],template:function(t,n){1&t&&(u.TgZ(0,"ion-header"),u.TgZ(1,"ion-toolbar"),u.TgZ(2,"ion-buttons",0),u._UZ(3,"ion-back-button",1),u.qZA(),u.TgZ(4,"ion-title"),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(7,"ion-content"),u.TgZ(8,"ion-list"),u.YNc(9,h,9,6,"ion-item",2),u.YNc(10,A,5,3,"ion-item",3),u.qZA(),u.qZA()),2&t&&(u.xp6(5),u.Oqu(u.lcZ(6,3,"SHOP.ORDER_HISTORY")),u.xp6(4),u.Q6J("ngForOf",n.listOrder),u.xp6(1),u.Q6J("ngIf",0==n.listOrder.length))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.W2,s.q_,o.sg,o.O5,s.Ie,s.yW,s.Q$],pipes:[g.X$,o.uU],styles:[""]}),t})()},{path:"detail-order",loadChildren:()=>i.e(6110).then(i.bind(i,56110)).then(t=>t.DetailOrderPageModule)},{path:"rating",loadChildren:()=>i.e(1704).then(i.bind(i,1704)).then(t=>t.RatingPageModule)}];let m=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[r.Bz.forChild(f)],r.Bz]}),t})(),T=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[o.ez,e.u5,s.Pc,m,g.aw.forChild()]]}),t})()}}]);